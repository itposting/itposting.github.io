<!DOCTYPE html><html lang="ko"><head><meta charSet="utf-8"/><title>다운타임과 작별하자 pg_upgrade로 PostgreSQL 14에서 16으로 손쉽게 업그레이드하기 | itposting</title><meta name="description" content=""/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><meta property="og:url" content="https://itposting.github.io///post/2024-06-19-SayGoodbyetoDowntimeUpgradePostgreSQL14to16Effortlesslywithpg_upgrade" data-gatsby-head="true"/><meta property="og:type" content="website" data-gatsby-head="true"/><meta property="og:site_name" content="다운타임과 작별하자 pg_upgrade로 PostgreSQL 14에서 16으로 손쉽게 업그레이드하기 | itposting" data-gatsby-head="true"/><meta property="og:title" content="다운타임과 작별하자 pg_upgrade로 PostgreSQL 14에서 16으로 손쉽게 업그레이드하기 | itposting" data-gatsby-head="true"/><meta property="og:description" content="" data-gatsby-head="true"/><meta property="og:image" content="/assets/img/2024-06-19-SayGoodbyetoDowntimeUpgradePostgreSQL14to16Effortlesslywithpg_upgrade_0.png" data-gatsby-head="true"/><meta property="og:locale" content="en_US" data-gatsby-head="true"/><meta name="twitter:card" content="summary_large_image" data-gatsby-head="true"/><meta property="twitter:domain" content="https://itposting.github.io/" data-gatsby-head="true"/><meta property="twitter:url" content="https://itposting.github.io///post/2024-06-19-SayGoodbyetoDowntimeUpgradePostgreSQL14to16Effortlesslywithpg_upgrade" data-gatsby-head="true"/><meta name="twitter:title" content="다운타임과 작별하자 pg_upgrade로 PostgreSQL 14에서 16으로 손쉽게 업그레이드하기 | itposting" data-gatsby-head="true"/><meta name="twitter:description" content="" data-gatsby-head="true"/><meta name="twitter:image" content="/assets/img/2024-06-19-SayGoodbyetoDowntimeUpgradePostgreSQL14to16Effortlesslywithpg_upgrade_0.png" data-gatsby-head="true"/><meta name="twitter:data1" content="Dev | itposting" data-gatsby-head="true"/><meta name="article:published_time" content="2024-06-19 15:02" data-gatsby-head="true"/><meta name="next-head-count" content="19"/><meta name="google-site-verification" content="a-yehRo3k3xv7fg6LqRaE8jlE42e5wP2bDE_2F849O4"/><link rel="stylesheet" href="/favicons/favicon.ico"/><link rel="icon" type="image/png" sizes="16x16" href="/assets/favicons/favicon-16x16.png"/><link rel="icon" type="image/png" sizes="32x32" href="/assets/favicons/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="96x96" href="/assets/favicons/favicon-96x96.png"/><link rel="icon" href="/favicons/apple-icon-180x180.png"/><link rel="apple-touch-icon" href="/favicons/apple-icon-180x180.png"/><link rel="apple-touch-startup-image" href="/startup.png"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="black"/><meta name="msapplication-config" content="/favicons/browserconfig.xml"/><script async="" src="https://www.googletagmanager.com/gtag/js?id=G-23YXDLKDCL"></script><script>window.dataLayer = window.dataLayer || [];
            function gtag(){dataLayer.push(arguments);}
            gtag('js', new Date());
          
            gtag('config', 'G-23YXDLKDCL');</script><link rel="preload" href="/_next/static/css/6e57edcf9f2ce551.css" as="style"/><link rel="stylesheet" href="/_next/static/css/6e57edcf9f2ce551.css" data-n-g=""/><link rel="preload" href="/_next/static/css/b8ef307c9aee1e34.css" as="style"/><link rel="stylesheet" href="/_next/static/css/b8ef307c9aee1e34.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/_next/static/chunks/webpack-ee6df16fdc6dae4d.js" defer=""></script><script src="/_next/static/chunks/framework-46611630e39cfdeb.js" defer=""></script><script src="/_next/static/chunks/main-cf4a52eec9a970a0.js" defer=""></script><script src="/_next/static/chunks/pages/_app-6fae11262ee5c69b.js" defer=""></script><script src="/_next/static/chunks/75fc9c18-ac4aa08aae62f90e.js" defer=""></script><script src="/_next/static/chunks/463-0429087d4c0b0335.js" defer=""></script><script src="/_next/static/chunks/pages/post/%5Bslug%5D-d849684d6d83f07a.js" defer=""></script><script src="/_next/static/QYe6gFAUryFKFgjKBoIfo/_buildManifest.js" defer=""></script><script src="/_next/static/QYe6gFAUryFKFgjKBoIfo/_ssgManifest.js" defer=""></script></head><body><div id="__next"><header class="Header_header__Z8PUO"><div class="Header_inner__tfr0u"><strong class="Header_title__Otn70"><a href="/">IT Posting</a></strong><nav class="Header_nav_area__6KVpk"><a class="nav_item" href="/posts/1">Posts</a></nav></div></header><main class="posts_container__NyRU3"><div class="posts_inner__i3n_i"><h1 class="posts_post_title__EbxNx">다운타임과 작별하자 pg_upgrade로 PostgreSQL 14에서 16으로 손쉽게 업그레이드하기</h1><div class="posts_meta__cR7lu"><div class="posts_profile_wrap__mslMl"><div class="posts_profile_image_wrap__kPikV"><img alt="다운타임과 작별하자 pg_upgrade로 PostgreSQL 14에서 16으로 손쉽게 업그레이드하기" loading="lazy" width="44" height="44" decoding="async" data-nimg="1" class="profile" style="color:transparent" src="/favicons/apple-icon-114x114.png"/></div><div class="posts_textarea__w_iKT"><span class="writer">IT Posting</span><span class="posts_info__5KJdN"><span class="posts_date__ctqHI">Posted On Jun 19, 2024</span><span class="posts_reading_time__f7YPP">5<!-- --> min read</span></span></div></div><img alt="" loading="lazy" width="50" height="50" decoding="async" data-nimg="1" class="posts_view_badge__tcbfm" style="color:transparent" src="https://hits.seeyoufarm.com/api/count/incr/badge.svg?url=https%3A%2F%2Fallround-coder.github.io/post/2024-06-19-SayGoodbyetoDowntimeUpgradePostgreSQL14to16Effortlesslywithpg_upgrade&amp;count_bg=%2379C83D&amp;title_bg=%23555555&amp;icon=&amp;icon_color=%23E7E7E7&amp;title=views&amp;edge_flat=false"/></div><article class="posts_post_content__n_L6j"><div><!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta content="width=device-width, initial-scale=1" name="viewport">
</head>
<body>
<h1>목차</h1>
<ul>
<li>PostgreSQL 16에서 당신을 기다리고 있는 것은?</li>
<li>시작하기</li>
<li>Debian/Ubuntu용</li>
<li>RHEL/AlmaLinux/RockyLinux용</li>
</ul>
<p><img src="/assets/img/2024-06-19-SayGoodbyetoDowntimeUpgradePostgreSQL14to16Effortlesslywithpg_upgrade_0.png" alt="이미지"></p>
<p>데이터베이스 업그레이드와 다운타임 스트레스로 고생하는 것 지겨우신가요? 걱정 마세요, 개발자 여러분! 본 블로그 포스트에서는 PostgreSQL 14에서 PostgreSQL 16으로의 막연한 전환을 가능케 하는 강력한 도구인 pg_upgrade의 비밀 무기를 소개합니다. 한 줄의 코드도 놓치지 않고 데이터베이스에 터보를 걸겠습니다. 함께 가즈아~!</p>
<div class="content-ad"></div>
<p>안녕히 가세요:</p>
<ul>
<li>다운타임 공지로 사용자들을 헷갈리게 만들지 않아도 됩니다.</li>
<li>서커스 공연자처럼 데이터베이스 백업을 번갈아가며 처리할 필요가 없습니다.</li>
<li>업그레이드 과정에 땀을 흘리며 데이터 무결성을 빌기를 하지 않아도 됩니다.</li>
</ul>
<p>pg_upgrade가 여러분 곁에 있다면, PostgreSQL 14에서 16으로 원활하게 전환할 수 있고 데이터베이스는 행복하게 동작할 것입니다. 다운타임이 없고, 머리 아픔도 없고, 어떠한 타협도 필요하지 않습니다. 순수하고 정갈한 데이터베이스의 행복을 경험하게 될 거에요.</p>
<h1>PostgreSQL 16에서 여러분을 기다리는 것은 무엇일까요?</h1>
<div class="content-ad"></div>
<ul>
<li>성능 향상: 쿼리가 개선된 인덱싱과 실행 계획으로 속도를 높이는 것을 지켜보세요.</li>
<li>강화된 보안: 더 강력한 액세스 제어와 암호화 옵션으로 소중한 데이터가 안전하게 보호되고 있음을 안심하세요.</li>
<li>다양한 새로운 기능: 병렬 쿼리 실행부터 개선된 복제까지 다양한 새로운 기능의 보물창고에 뛰어들어 새로운 앱 가능성을 열어보세요.</li>
</ul>
<h1>시작하기</h1>
<h1>Debian/Ubuntu용</h1>
<p>단계 1: PostgreSQL 16을 환영합니다.</p>
<div class="content-ad"></div>
<p>저희 공연의 주인공 PostgreSQL 16을 설치해보세요. 마법이 펼쳐질 겁니다!</p>
<pre><code class="hljs language-js"># 파일 저장소 구성 파일을 만듭니다:
sudo sh -c <span class="hljs-string">'echo "deb https://apt.postgresql.org/pub/repos/apt $(lsb_release -cs)-pgdg main" > /etc/apt/sources.list.d/pgdg.list'</span>

# 저장소 서명 키를 가져옵니다:
wget --quiet -O - <span class="hljs-attr">https</span>:<span class="hljs-comment">//www.postgresql.org/media/keys/ACCC4CF8.asc | sudo apt-key add -</span>

# 패키지 목록을 업데이트합니다:
sudo apt-get update

# <span class="hljs-title class_">PostgreSQL</span>의 최신 버전을 설치합니다.
# 특정 버전을 원하시면 <span class="hljs-string">'postgresql-12'</span> 등을 대신 사용하시면 됩니다:
sudo apt-get -y install postgresql-<span class="hljs-number">16</span>
</code></pre>
<p>단계 2: 데이터베이스 클러스터 확인</p>
<p>pg_lsclusters 명령어를 사용하여 서버가 자랑스럽게 PostgreSQL 14와 PostgreSQL 16을 모두 호스팅하고 있는지 확인해보세요.</p>
<div class="content-ad"></div>
<pre><code class="hljs language-js">sudo pg_lsclusters
</code></pre>
<p>Step 3: 업그레이드를 준비합니다.</p>
<p>업그레이드를 위해 PostgreSQL 16 클러스터를 중지합니다.</p>
<pre><code class="hljs language-js">sudo pg_dropcluster <span class="hljs-number">16</span> main --stop
</code></pre>
<div class="content-ad"></div>
<p>Step 4: 업그레이드 프로세스 시작</p>
<p>다음 명령어를 실행하여 업그레이드 프로세스를 시작하세요:</p>
<pre><code class="hljs language-js">sudo pg_upgradecluster <span class="hljs-number">14</span> main
</code></pre>
<p>프로세스를 모니터링하고 성공적으로 완료되면 이전 버전을 자신있게 제거하세요.</p>
<div class="content-ad"></div>
<p>sudo pg_dropcluster 14 main</p>
<p>단계 5: 마지막 작업 — 이전 패키지 제거</p>
<p>PostgreSQL 14의 잔해를 제거하여 이전 패키지를 정리합니다.</p>
<pre><code class="hljs language-js">sudo apt purge postgresql-<span class="hljs-number">14</span> postgresql-client-<span class="hljs-number">14</span>
</code></pre>
<div class="content-ad"></div>
<p>스텝 6: 확인 - 성공적인 업그레이드 확인하기</p>
<p>업그레이드가 성공적으로 이루어졌는지 확인하기 위해 현재 클러스터를 두 번 확인해보세요.</p>
<pre><code class="hljs language-js">sudo pg_lsclusters
</code></pre>
<h1>RHEL/AlmaLinux/RockyLinux</h1>
<div class="content-ad"></div>
<p>단계 1: 디지털 하늘 점검</p>
<p>디지턷 우주에 원활하게 연결되었는지 확인하여 여행을 시작해보세요. 별들에 핑을 보내 데이터베이스 모험이 준비됐는지 확인하세요.</p>
<pre><code class="hljs language-js">ping google.<span class="hljs-property">com</span>
</code></pre>
<p>단계 2: 우주 본질 포착 - 데이터베이스 백업</p>
<div class="content-ad"></div>
<p>여러분의 데이터의 본질을 보존하기 위해 강력한 pg_dumpall 명령을 사용하여 천체적 백업을 만들어 보세요.</p>
<pre><code class="hljs language-js">sudo su - postgres
pg_dumpall > <span class="hljs-regexp">/path/</span>to/backup/all.<span class="hljs-property">sql</span>
exit
</code></pre>
<p>3단계: 미래를 밝히다 — PostgreSQL 16 등장</p>
<p>우리 우주 쇼의 주인공을 소개합니다 — PostgreSQL 16! 그의 뜨거운 소개를 준비하여 그의 웅대한 데뷔를 위한 무대를 준비하세요.</p>
<div class="content-ad"></div>
<h1>클러스터 초기화</h1>
<p>sudo su
yum install postgresql16-server postgresql16
/usr/pgsql-16/bin/postgresql-16-setup initdb</p>
<h1>포트 5432에서 5433으로 수정</h1>
<p>sudo su - postgres
vim /var/lib/pgsql/16/data/postgresql.conf</p>
<h1>시작</h1>
<p>sudo systemctl start postgresql-16</p>
<p>제 4단계: 대코스믹 변화 — pg_upgrade 심포니</p>
<p>우주의 장엄한 공연 중 하이라이트 — 멋진 pg_upgrade 유틸리티! 버전 14에서 우주의 PostgreSQL 16로의 원활한 전환을 경험해보세요.</p>
<p>/usr/pgsql-16/bin/pg_upgrade <br>
-b /usr/pgsql-14/bin/ <br>
-B /usr/pgsql-16/bin/ <br>
-d /var/lib/pgsql/14/data/ <br>
-D /var/lib/pgsql/16/data/ <br>
-o ' -c config_file=/var/lib/pgsql/14/data/postgresql.conf' <br>
-O ' -c config_file=/var/lib/pgsql/16/data/postgresql.conf'</p>
<div class="content-ad"></div>
<p>단계 5: 천왕의 조화 - pg_hba.conf 편곡</p>
<p>신과 새로운 데이터 디렉터리 사이의 완벽한 동기화를 위해 pg_hba.conf에서 우주 댄스 단계를 조정하세요.</p>
<p>단계 6: 은하 박수! PostgreSQL 16이 무대에 오릅니다</p>
<p>PostgreSQL 16을 위해 일어설 박수를 시작하세요. 박수가 서버 환경에 울려 퍼지도록 해보세요.</p>
<div class="content-ad"></div>
<pre><code class="hljs language-js">sudo systemctl start postgresql-<span class="hljs-number">16</span>
</code></pre>
<p>7단계: 우주적 향연 — 은하 업그레이드 확인하기</p>
<p>PostgreSQL 16이 우주적인 빛 속에서 빛나도록 해주세요.</p>
<pre><code class="hljs language-js">bashCopy 코드sudo systemctl status postgresql-<span class="hljs-number">16</span>
</code></pre>
<div class="content-ad"></div>
<p>단계 8: 유성 연결 - 데이터베이스 연결 테스트</p>
<p>우주적인 멋으로 데이터베이스 연결을 테스트하여 유성 세계로 진입하세요.</p>
<pre><code class="hljs language-js">psql -h localhost -p <span class="hljs-number">5433</span> -U your_username -d your_database
</code></pre>
<p>단계 9: 커튼콜 - 은하 무대 청소</p>
<div class="content-ad"></div>
<p>최종 행위가 펼쳐지면서, 우주 시대를 위해 오래된 PostgreSQL 버전을 우아하게 제거해보세요.</p>
<pre><code class="hljs language-js">sudo su
yum remove postgresql14-server postgresql14
</code></pre>
<p>그리고 최고의 부분은? 이 업그레이드 축제를 즐기면서도 가동 시간을 희생하지 않아도 된다는 것입니다. 코드를 작성하는 동안에도 계속 데이터베이스 뷔페를 즐길 수 있습니다. 맛있게 즐기세요!</p>
<p>더 많이 배우고 싶나요? 이 블로그 포스트는 업그레이드 낙원으로 가는 길을 안내해줄 것입니다. 처음 준비부터 업그레이드 후 확인까지 과정을 단계별로 안내하여, 여러분이 새로운 높이로 프로젝트를 이끌 준비가 된 세련된, 강력한 PostgreSQL 16 데이터베이스에 도달하도록 보장합니다.</p>
<div class="content-ad"></div>
<p>그래서, 함께하는 개발자 여러분들, 다운타임 문제를 버리고 pg_upgrade 혁명을 받아들이세요. PostgreSQL 16의 모든 잠재력을 발휘하기 위해 함께 하십시오. 당신의 사용자들은 중단되지 않는 데이터베이스 햇빛을 누릴 수 있을 것입니다. 함께 즐거운 여정에 참여해 보세요!</p>
</body>
</html>
</div></article></div></main></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"title":"다운타임과 작별하자 pg_upgrade로 PostgreSQL 14에서 16으로 손쉽게 업그레이드하기","description":"","date":"2024-06-19 15:02","slug":"2024-06-19-SayGoodbyetoDowntimeUpgradePostgreSQL14to16Effortlesslywithpg_upgrade","content":"\n\n# 목차\n\n- PostgreSQL 16에서 당신을 기다리고 있는 것은?\n- 시작하기\n- Debian/Ubuntu용\n- RHEL/AlmaLinux/RockyLinux용\n\n![이미지](/assets/img/2024-06-19-SayGoodbyetoDowntimeUpgradePostgreSQL14to16Effortlesslywithpg_upgrade_0.png)\n\n데이터베이스 업그레이드와 다운타임 스트레스로 고생하는 것 지겨우신가요? 걱정 마세요, 개발자 여러분! 본 블로그 포스트에서는 PostgreSQL 14에서 PostgreSQL 16으로의 막연한 전환을 가능케 하는 강력한 도구인 pg_upgrade의 비밀 무기를 소개합니다. 한 줄의 코드도 놓치지 않고 데이터베이스에 터보를 걸겠습니다. 함께 가즈아~!\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n안녕히 가세요:\n\n- 다운타임 공지로 사용자들을 헷갈리게 만들지 않아도 됩니다.\n- 서커스 공연자처럼 데이터베이스 백업을 번갈아가며 처리할 필요가 없습니다.\n- 업그레이드 과정에 땀을 흘리며 데이터 무결성을 빌기를 하지 않아도 됩니다.\n\npg_upgrade가 여러분 곁에 있다면, PostgreSQL 14에서 16으로 원활하게 전환할 수 있고 데이터베이스는 행복하게 동작할 것입니다. 다운타임이 없고, 머리 아픔도 없고, 어떠한 타협도 필요하지 않습니다. 순수하고 정갈한 데이터베이스의 행복을 경험하게 될 거에요.\n\n# PostgreSQL 16에서 여러분을 기다리는 것은 무엇일까요?\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n- 성능 향상: 쿼리가 개선된 인덱싱과 실행 계획으로 속도를 높이는 것을 지켜보세요.\n- 강화된 보안: 더 강력한 액세스 제어와 암호화 옵션으로 소중한 데이터가 안전하게 보호되고 있음을 안심하세요.\n- 다양한 새로운 기능: 병렬 쿼리 실행부터 개선된 복제까지 다양한 새로운 기능의 보물창고에 뛰어들어 새로운 앱 가능성을 열어보세요.\n\n# 시작하기\n\n# Debian/Ubuntu용\n\n단계 1: PostgreSQL 16을 환영합니다.\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n저희 공연의 주인공 PostgreSQL 16을 설치해보세요. 마법이 펼쳐질 겁니다!\n\n```js\n# 파일 저장소 구성 파일을 만듭니다:\nsudo sh -c 'echo \"deb https://apt.postgresql.org/pub/repos/apt $(lsb_release -cs)-pgdg main\" \u003e /etc/apt/sources.list.d/pgdg.list'\n\n# 저장소 서명 키를 가져옵니다:\nwget --quiet -O - https://www.postgresql.org/media/keys/ACCC4CF8.asc | sudo apt-key add -\n\n# 패키지 목록을 업데이트합니다:\nsudo apt-get update\n\n# PostgreSQL의 최신 버전을 설치합니다.\n# 특정 버전을 원하시면 'postgresql-12' 등을 대신 사용하시면 됩니다:\nsudo apt-get -y install postgresql-16\n```\n\n단계 2: 데이터베이스 클러스터 확인\n\npg_lsclusters 명령어를 사용하여 서버가 자랑스럽게 PostgreSQL 14와 PostgreSQL 16을 모두 호스팅하고 있는지 확인해보세요.\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n```js\nsudo pg_lsclusters\n```\n\nStep 3: 업그레이드를 준비합니다.\n\n업그레이드를 위해 PostgreSQL 16 클러스터를 중지합니다.\n\n```js\nsudo pg_dropcluster 16 main --stop\n```\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\nStep 4: 업그레이드 프로세스 시작\n\n다음 명령어를 실행하여 업그레이드 프로세스를 시작하세요:\n\n```js\nsudo pg_upgradecluster 14 main\n```\n\n프로세스를 모니터링하고 성공적으로 완료되면 이전 버전을 자신있게 제거하세요.\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n\nsudo pg_dropcluster 14 main\n\n\n단계 5: 마지막 작업 — 이전 패키지 제거\n\nPostgreSQL 14의 잔해를 제거하여 이전 패키지를 정리합니다.\n\n```js\nsudo apt purge postgresql-14 postgresql-client-14\n```\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n스텝 6: 확인 - 성공적인 업그레이드 확인하기\n\n업그레이드가 성공적으로 이루어졌는지 확인하기 위해 현재 클러스터를 두 번 확인해보세요.\n\n```js\nsudo pg_lsclusters\n```\n\n# RHEL/AlmaLinux/RockyLinux\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n단계 1: 디지털 하늘 점검\n\n디지턷 우주에 원활하게 연결되었는지 확인하여 여행을 시작해보세요. 별들에 핑을 보내 데이터베이스 모험이 준비됐는지 확인하세요.\n\n```js\nping google.com\n```\n\n단계 2: 우주 본질 포착 - 데이터베이스 백업\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n여러분의 데이터의 본질을 보존하기 위해 강력한 pg_dumpall 명령을 사용하여 천체적 백업을 만들어 보세요.\n\n```js\nsudo su - postgres\npg_dumpall \u003e /path/to/backup/all.sql\nexit\n```\n\n3단계: 미래를 밝히다 — PostgreSQL 16 등장\n\n우리 우주 쇼의 주인공을 소개합니다 — PostgreSQL 16! 그의 뜨거운 소개를 준비하여 그의 웅대한 데뷔를 위한 무대를 준비하세요.\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n\n# 클러스터 초기화\nsudo su\nyum install postgresql16-server postgresql16\n/usr/pgsql-16/bin/postgresql-16-setup initdb\n\n# 포트 5432에서 5433으로 수정\nsudo su - postgres\nvim /var/lib/pgsql/16/data/postgresql.conf\n\n# 시작\nsudo systemctl start postgresql-16\n\n\n제 4단계: 대코스믹 변화 — pg_upgrade 심포니\n\n우주의 장엄한 공연 중 하이라이트 — 멋진 pg_upgrade 유틸리티! 버전 14에서 우주의 PostgreSQL 16로의 원활한 전환을 경험해보세요.\n\n\n/usr/pgsql-16/bin/pg_upgrade \\\n  -b /usr/pgsql-14/bin/ \\\n  -B /usr/pgsql-16/bin/ \\\n  -d /var/lib/pgsql/14/data/ \\\n  -D /var/lib/pgsql/16/data/ \\\n  -o ' -c config_file=/var/lib/pgsql/14/data/postgresql.conf' \\\n  -O ' -c config_file=/var/lib/pgsql/16/data/postgresql.conf'\n\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n단계 5: 천왕의 조화 - pg_hba.conf 편곡\n\n신과 새로운 데이터 디렉터리 사이의 완벽한 동기화를 위해 pg_hba.conf에서 우주 댄스 단계를 조정하세요.\n\n단계 6: 은하 박수! PostgreSQL 16이 무대에 오릅니다\n\nPostgreSQL 16을 위해 일어설 박수를 시작하세요. 박수가 서버 환경에 울려 퍼지도록 해보세요.\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n```js\nsudo systemctl start postgresql-16\n```\n\n7단계: 우주적 향연 — 은하 업그레이드 확인하기\n\nPostgreSQL 16이 우주적인 빛 속에서 빛나도록 해주세요.\n\n```js\nbashCopy 코드sudo systemctl status postgresql-16\n```\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n단계 8: 유성 연결 - 데이터베이스 연결 테스트\n\n우주적인 멋으로 데이터베이스 연결을 테스트하여 유성 세계로 진입하세요.\n\n```js\npsql -h localhost -p 5433 -U your_username -d your_database\n```\n\n단계 9: 커튼콜 - 은하 무대 청소\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n최종 행위가 펼쳐지면서, 우주 시대를 위해 오래된 PostgreSQL 버전을 우아하게 제거해보세요.\n\n```js\nsudo su\nyum remove postgresql14-server postgresql14\n```\n\n그리고 최고의 부분은? 이 업그레이드 축제를 즐기면서도 가동 시간을 희생하지 않아도 된다는 것입니다. 코드를 작성하는 동안에도 계속 데이터베이스 뷔페를 즐길 수 있습니다. 맛있게 즐기세요!\n\n더 많이 배우고 싶나요? 이 블로그 포스트는 업그레이드 낙원으로 가는 길을 안내해줄 것입니다. 처음 준비부터 업그레이드 후 확인까지 과정을 단계별로 안내하여, 여러분이 새로운 높이로 프로젝트를 이끌 준비가 된 세련된, 강력한 PostgreSQL 16 데이터베이스에 도달하도록 보장합니다.\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n그래서, 함께하는 개발자 여러분들, 다운타임 문제를 버리고 pg_upgrade 혁명을 받아들이세요. PostgreSQL 16의 모든 잠재력을 발휘하기 위해 함께 하십시오. 당신의 사용자들은 중단되지 않는 데이터베이스 햇빛을 누릴 수 있을 것입니다. 함께 즐거운 여정에 참여해 보세요!","ogImage":{"url":"/assets/img/2024-06-19-SayGoodbyetoDowntimeUpgradePostgreSQL14to16Effortlesslywithpg_upgrade_0.png"},"coverImage":"/assets/img/2024-06-19-SayGoodbyetoDowntimeUpgradePostgreSQL14to16Effortlesslywithpg_upgrade_0.png","tag":["Tech"],"readingTime":5},"content":"\u003c!doctype html\u003e\n\u003chtml lang=\"en\"\u003e\n\u003chead\u003e\n\u003cmeta charset=\"utf-8\"\u003e\n\u003cmeta content=\"width=device-width, initial-scale=1\" name=\"viewport\"\u003e\n\u003c/head\u003e\n\u003cbody\u003e\n\u003ch1\u003e목차\u003c/h1\u003e\n\u003cul\u003e\n\u003cli\u003ePostgreSQL 16에서 당신을 기다리고 있는 것은?\u003c/li\u003e\n\u003cli\u003e시작하기\u003c/li\u003e\n\u003cli\u003eDebian/Ubuntu용\u003c/li\u003e\n\u003cli\u003eRHEL/AlmaLinux/RockyLinux용\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e\u003cimg src=\"/assets/img/2024-06-19-SayGoodbyetoDowntimeUpgradePostgreSQL14to16Effortlesslywithpg_upgrade_0.png\" alt=\"이미지\"\u003e\u003c/p\u003e\n\u003cp\u003e데이터베이스 업그레이드와 다운타임 스트레스로 고생하는 것 지겨우신가요? 걱정 마세요, 개발자 여러분! 본 블로그 포스트에서는 PostgreSQL 14에서 PostgreSQL 16으로의 막연한 전환을 가능케 하는 강력한 도구인 pg_upgrade의 비밀 무기를 소개합니다. 한 줄의 코드도 놓치지 않고 데이터베이스에 터보를 걸겠습니다. 함께 가즈아~!\u003c/p\u003e\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\u003cp\u003e안녕히 가세요:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e다운타임 공지로 사용자들을 헷갈리게 만들지 않아도 됩니다.\u003c/li\u003e\n\u003cli\u003e서커스 공연자처럼 데이터베이스 백업을 번갈아가며 처리할 필요가 없습니다.\u003c/li\u003e\n\u003cli\u003e업그레이드 과정에 땀을 흘리며 데이터 무결성을 빌기를 하지 않아도 됩니다.\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003epg_upgrade가 여러분 곁에 있다면, PostgreSQL 14에서 16으로 원활하게 전환할 수 있고 데이터베이스는 행복하게 동작할 것입니다. 다운타임이 없고, 머리 아픔도 없고, 어떠한 타협도 필요하지 않습니다. 순수하고 정갈한 데이터베이스의 행복을 경험하게 될 거에요.\u003c/p\u003e\n\u003ch1\u003ePostgreSQL 16에서 여러분을 기다리는 것은 무엇일까요?\u003c/h1\u003e\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\u003cul\u003e\n\u003cli\u003e성능 향상: 쿼리가 개선된 인덱싱과 실행 계획으로 속도를 높이는 것을 지켜보세요.\u003c/li\u003e\n\u003cli\u003e강화된 보안: 더 강력한 액세스 제어와 암호화 옵션으로 소중한 데이터가 안전하게 보호되고 있음을 안심하세요.\u003c/li\u003e\n\u003cli\u003e다양한 새로운 기능: 병렬 쿼리 실행부터 개선된 복제까지 다양한 새로운 기능의 보물창고에 뛰어들어 새로운 앱 가능성을 열어보세요.\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch1\u003e시작하기\u003c/h1\u003e\n\u003ch1\u003eDebian/Ubuntu용\u003c/h1\u003e\n\u003cp\u003e단계 1: PostgreSQL 16을 환영합니다.\u003c/p\u003e\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\u003cp\u003e저희 공연의 주인공 PostgreSQL 16을 설치해보세요. 마법이 펼쳐질 겁니다!\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e# 파일 저장소 구성 파일을 만듭니다:\nsudo sh -c \u003cspan class=\"hljs-string\"\u003e'echo \"deb https://apt.postgresql.org/pub/repos/apt $(lsb_release -cs)-pgdg main\" \u003e /etc/apt/sources.list.d/pgdg.list'\u003c/span\u003e\n\n# 저장소 서명 키를 가져옵니다:\nwget --quiet -O - \u003cspan class=\"hljs-attr\"\u003ehttps\u003c/span\u003e:\u003cspan class=\"hljs-comment\"\u003e//www.postgresql.org/media/keys/ACCC4CF8.asc | sudo apt-key add -\u003c/span\u003e\n\n# 패키지 목록을 업데이트합니다:\nsudo apt-get update\n\n# \u003cspan class=\"hljs-title class_\"\u003ePostgreSQL\u003c/span\u003e의 최신 버전을 설치합니다.\n# 특정 버전을 원하시면 \u003cspan class=\"hljs-string\"\u003e'postgresql-12'\u003c/span\u003e 등을 대신 사용하시면 됩니다:\nsudo apt-get -y install postgresql-\u003cspan class=\"hljs-number\"\u003e16\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e단계 2: 데이터베이스 클러스터 확인\u003c/p\u003e\n\u003cp\u003epg_lsclusters 명령어를 사용하여 서버가 자랑스럽게 PostgreSQL 14와 PostgreSQL 16을 모두 호스팅하고 있는지 확인해보세요.\u003c/p\u003e\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003esudo pg_lsclusters\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eStep 3: 업그레이드를 준비합니다.\u003c/p\u003e\n\u003cp\u003e업그레이드를 위해 PostgreSQL 16 클러스터를 중지합니다.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003esudo pg_dropcluster \u003cspan class=\"hljs-number\"\u003e16\u003c/span\u003e main --stop\n\u003c/code\u003e\u003c/pre\u003e\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\u003cp\u003eStep 4: 업그레이드 프로세스 시작\u003c/p\u003e\n\u003cp\u003e다음 명령어를 실행하여 업그레이드 프로세스를 시작하세요:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003esudo pg_upgradecluster \u003cspan class=\"hljs-number\"\u003e14\u003c/span\u003e main\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e프로세스를 모니터링하고 성공적으로 완료되면 이전 버전을 자신있게 제거하세요.\u003c/p\u003e\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\u003cp\u003esudo pg_dropcluster 14 main\u003c/p\u003e\n\u003cp\u003e단계 5: 마지막 작업 — 이전 패키지 제거\u003c/p\u003e\n\u003cp\u003ePostgreSQL 14의 잔해를 제거하여 이전 패키지를 정리합니다.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003esudo apt purge postgresql-\u003cspan class=\"hljs-number\"\u003e14\u003c/span\u003e postgresql-client-\u003cspan class=\"hljs-number\"\u003e14\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\u003cp\u003e스텝 6: 확인 - 성공적인 업그레이드 확인하기\u003c/p\u003e\n\u003cp\u003e업그레이드가 성공적으로 이루어졌는지 확인하기 위해 현재 클러스터를 두 번 확인해보세요.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003esudo pg_lsclusters\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch1\u003eRHEL/AlmaLinux/RockyLinux\u003c/h1\u003e\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\u003cp\u003e단계 1: 디지털 하늘 점검\u003c/p\u003e\n\u003cp\u003e디지턷 우주에 원활하게 연결되었는지 확인하여 여행을 시작해보세요. 별들에 핑을 보내 데이터베이스 모험이 준비됐는지 확인하세요.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003eping google.\u003cspan class=\"hljs-property\"\u003ecom\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e단계 2: 우주 본질 포착 - 데이터베이스 백업\u003c/p\u003e\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\u003cp\u003e여러분의 데이터의 본질을 보존하기 위해 강력한 pg_dumpall 명령을 사용하여 천체적 백업을 만들어 보세요.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003esudo su - postgres\npg_dumpall \u003e \u003cspan class=\"hljs-regexp\"\u003e/path/\u003c/span\u003eto/backup/all.\u003cspan class=\"hljs-property\"\u003esql\u003c/span\u003e\nexit\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e3단계: 미래를 밝히다 — PostgreSQL 16 등장\u003c/p\u003e\n\u003cp\u003e우리 우주 쇼의 주인공을 소개합니다 — PostgreSQL 16! 그의 뜨거운 소개를 준비하여 그의 웅대한 데뷔를 위한 무대를 준비하세요.\u003c/p\u003e\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\u003ch1\u003e클러스터 초기화\u003c/h1\u003e\n\u003cp\u003esudo su\nyum install postgresql16-server postgresql16\n/usr/pgsql-16/bin/postgresql-16-setup initdb\u003c/p\u003e\n\u003ch1\u003e포트 5432에서 5433으로 수정\u003c/h1\u003e\n\u003cp\u003esudo su - postgres\nvim /var/lib/pgsql/16/data/postgresql.conf\u003c/p\u003e\n\u003ch1\u003e시작\u003c/h1\u003e\n\u003cp\u003esudo systemctl start postgresql-16\u003c/p\u003e\n\u003cp\u003e제 4단계: 대코스믹 변화 — pg_upgrade 심포니\u003c/p\u003e\n\u003cp\u003e우주의 장엄한 공연 중 하이라이트 — 멋진 pg_upgrade 유틸리티! 버전 14에서 우주의 PostgreSQL 16로의 원활한 전환을 경험해보세요.\u003c/p\u003e\n\u003cp\u003e/usr/pgsql-16/bin/pg_upgrade \u003cbr\u003e\n-b /usr/pgsql-14/bin/ \u003cbr\u003e\n-B /usr/pgsql-16/bin/ \u003cbr\u003e\n-d /var/lib/pgsql/14/data/ \u003cbr\u003e\n-D /var/lib/pgsql/16/data/ \u003cbr\u003e\n-o ' -c config_file=/var/lib/pgsql/14/data/postgresql.conf' \u003cbr\u003e\n-O ' -c config_file=/var/lib/pgsql/16/data/postgresql.conf'\u003c/p\u003e\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\u003cp\u003e단계 5: 천왕의 조화 - pg_hba.conf 편곡\u003c/p\u003e\n\u003cp\u003e신과 새로운 데이터 디렉터리 사이의 완벽한 동기화를 위해 pg_hba.conf에서 우주 댄스 단계를 조정하세요.\u003c/p\u003e\n\u003cp\u003e단계 6: 은하 박수! PostgreSQL 16이 무대에 오릅니다\u003c/p\u003e\n\u003cp\u003ePostgreSQL 16을 위해 일어설 박수를 시작하세요. 박수가 서버 환경에 울려 퍼지도록 해보세요.\u003c/p\u003e\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003esudo systemctl start postgresql-\u003cspan class=\"hljs-number\"\u003e16\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e7단계: 우주적 향연 — 은하 업그레이드 확인하기\u003c/p\u003e\n\u003cp\u003ePostgreSQL 16이 우주적인 빛 속에서 빛나도록 해주세요.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003ebashCopy 코드sudo systemctl status postgresql-\u003cspan class=\"hljs-number\"\u003e16\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\u003cp\u003e단계 8: 유성 연결 - 데이터베이스 연결 테스트\u003c/p\u003e\n\u003cp\u003e우주적인 멋으로 데이터베이스 연결을 테스트하여 유성 세계로 진입하세요.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003epsql -h localhost -p \u003cspan class=\"hljs-number\"\u003e5433\u003c/span\u003e -U your_username -d your_database\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e단계 9: 커튼콜 - 은하 무대 청소\u003c/p\u003e\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\u003cp\u003e최종 행위가 펼쳐지면서, 우주 시대를 위해 오래된 PostgreSQL 버전을 우아하게 제거해보세요.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003esudo su\nyum remove postgresql14-server postgresql14\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e그리고 최고의 부분은? 이 업그레이드 축제를 즐기면서도 가동 시간을 희생하지 않아도 된다는 것입니다. 코드를 작성하는 동안에도 계속 데이터베이스 뷔페를 즐길 수 있습니다. 맛있게 즐기세요!\u003c/p\u003e\n\u003cp\u003e더 많이 배우고 싶나요? 이 블로그 포스트는 업그레이드 낙원으로 가는 길을 안내해줄 것입니다. 처음 준비부터 업그레이드 후 확인까지 과정을 단계별로 안내하여, 여러분이 새로운 높이로 프로젝트를 이끌 준비가 된 세련된, 강력한 PostgreSQL 16 데이터베이스에 도달하도록 보장합니다.\u003c/p\u003e\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\u003cp\u003e그래서, 함께하는 개발자 여러분들, 다운타임 문제를 버리고 pg_upgrade 혁명을 받아들이세요. PostgreSQL 16의 모든 잠재력을 발휘하기 위해 함께 하십시오. 당신의 사용자들은 중단되지 않는 데이터베이스 햇빛을 누릴 수 있을 것입니다. 함께 즐거운 여정에 참여해 보세요!\u003c/p\u003e\n\u003c/body\u003e\n\u003c/html\u003e\n"},"__N_SSG":true},"page":"/post/[slug]","query":{"slug":"2024-06-19-SayGoodbyetoDowntimeUpgradePostgreSQL14to16Effortlesslywithpg_upgrade"},"buildId":"QYe6gFAUryFKFgjKBoIfo","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>