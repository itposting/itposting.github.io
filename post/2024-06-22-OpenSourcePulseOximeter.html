<!DOCTYPE html><html lang="ko"><head><meta charSet="utf-8"/><title>오픈 소스 맥박산소측정기, 직접 만들어보기 | itposting</title><meta name="description" content=""/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><meta property="og:url" content="https://itposting.github.io///post/2024-06-22-OpenSourcePulseOximeter" data-gatsby-head="true"/><meta property="og:type" content="website" data-gatsby-head="true"/><meta property="og:site_name" content="오픈 소스 맥박산소측정기, 직접 만들어보기 | itposting" data-gatsby-head="true"/><meta property="og:title" content="오픈 소스 맥박산소측정기, 직접 만들어보기 | itposting" data-gatsby-head="true"/><meta property="og:description" content="" data-gatsby-head="true"/><meta property="og:image" content="/assets/img/2024-06-22-OpenSourcePulseOximeter_0.png" data-gatsby-head="true"/><meta property="og:locale" content="en_US" data-gatsby-head="true"/><meta name="twitter:card" content="summary_large_image" data-gatsby-head="true"/><meta property="twitter:domain" content="https://itposting.github.io/" data-gatsby-head="true"/><meta property="twitter:url" content="https://itposting.github.io///post/2024-06-22-OpenSourcePulseOximeter" data-gatsby-head="true"/><meta name="twitter:title" content="오픈 소스 맥박산소측정기, 직접 만들어보기 | itposting" data-gatsby-head="true"/><meta name="twitter:description" content="" data-gatsby-head="true"/><meta name="twitter:image" content="/assets/img/2024-06-22-OpenSourcePulseOximeter_0.png" data-gatsby-head="true"/><meta name="twitter:data1" content="Dev | itposting" data-gatsby-head="true"/><meta name="article:published_time" content="2024-06-22 17:55" data-gatsby-head="true"/><meta name="next-head-count" content="19"/><meta name="google-site-verification" content="a-yehRo3k3xv7fg6LqRaE8jlE42e5wP2bDE_2F849O4"/><link rel="stylesheet" href="/favicons/favicon.ico"/><link rel="icon" type="image/png" sizes="16x16" href="/assets/favicons/favicon-16x16.png"/><link rel="icon" type="image/png" sizes="32x32" href="/assets/favicons/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="96x96" href="/assets/favicons/favicon-96x96.png"/><link rel="icon" href="/favicons/apple-icon-180x180.png"/><link rel="apple-touch-icon" href="/favicons/apple-icon-180x180.png"/><link rel="apple-touch-startup-image" href="/startup.png"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="black"/><meta name="msapplication-config" content="/favicons/browserconfig.xml"/><script async="" src="https://www.googletagmanager.com/gtag/js?id=G-23YXDLKDCL"></script><script>window.dataLayer = window.dataLayer || [];
            function gtag(){dataLayer.push(arguments);}
            gtag('js', new Date());
          
            gtag('config', 'G-23YXDLKDCL');</script><link rel="preload" href="/_next/static/css/6e57edcf9f2ce551.css" as="style"/><link rel="stylesheet" href="/_next/static/css/6e57edcf9f2ce551.css" data-n-g=""/><link rel="preload" href="/_next/static/css/b8ef307c9aee1e34.css" as="style"/><link rel="stylesheet" href="/_next/static/css/b8ef307c9aee1e34.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/_next/static/chunks/webpack-ee6df16fdc6dae4d.js" defer=""></script><script src="/_next/static/chunks/framework-46611630e39cfdeb.js" defer=""></script><script src="/_next/static/chunks/main-cf4a52eec9a970a0.js" defer=""></script><script src="/_next/static/chunks/pages/_app-6fae11262ee5c69b.js" defer=""></script><script src="/_next/static/chunks/75fc9c18-ac4aa08aae62f90e.js" defer=""></script><script src="/_next/static/chunks/463-0429087d4c0b0335.js" defer=""></script><script src="/_next/static/chunks/pages/post/%5Bslug%5D-d849684d6d83f07a.js" defer=""></script><script src="/_next/static/CYQjEY3HhSkRTiL0gewc0/_buildManifest.js" defer=""></script><script src="/_next/static/CYQjEY3HhSkRTiL0gewc0/_ssgManifest.js" defer=""></script></head><body><div id="__next"><header class="Header_header__Z8PUO"><div class="Header_inner__tfr0u"><strong class="Header_title__Otn70"><a href="/">IT Posting</a></strong><nav class="Header_nav_area__6KVpk"><a class="nav_item" href="/posts/1">Posts</a></nav></div></header><main class="posts_container__NyRU3"><div class="posts_inner__i3n_i"><h1 class="posts_post_title__EbxNx">오픈 소스 맥박산소측정기, 직접 만들어보기</h1><div class="posts_meta__cR7lu"><div class="posts_profile_wrap__mslMl"><div class="posts_profile_image_wrap__kPikV"><img alt="오픈 소스 맥박산소측정기, 직접 만들어보기" loading="lazy" width="44" height="44" decoding="async" data-nimg="1" class="profile" style="color:transparent" src="/favicons/apple-icon-114x114.png"/></div><div class="posts_textarea__w_iKT"><span class="writer">IT Posting</span><span class="posts_info__5KJdN"><span class="posts_date__ctqHI">Posted On Jun 22, 2024</span><span class="posts_reading_time__f7YPP">5<!-- --> min read</span></span></div></div><img alt="" loading="lazy" width="50" height="50" decoding="async" data-nimg="1" class="posts_view_badge__tcbfm" style="color:transparent" src="https://hits.seeyoufarm.com/api/count/incr/badge.svg?url=https%3A%2F%2Fallround-coder.github.io/post/2024-06-22-OpenSourcePulseOximeter&amp;count_bg=%2379C83D&amp;title_bg=%23555555&amp;icon=&amp;icon_color=%23E7E7E7&amp;title=views&amp;edge_flat=false"/></div><article class="posts_post_content__n_L6j"><div><!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta content="width=device-width, initial-scale=1" name="viewport">
</head>
<body>
<p>이 프로젝트에서 사용된 항목</p>
<p>전체 장치는 44mm x 30mm 퍼프 보드에 부착된 Arduino Nano를 중심으로 설계되었습니다. 먼저, 센서의 VIN, GND, SDA 및 SCL 핀에 전선을 납땜한 다음, 그 전선은 침대 부품 아래를 따라 Arduino Nano로 연결됩니다.</p>
<div class="content-ad"></div>
<p>다음으로, OLED에 대한 커넥터를 Nano에 연결한 다음 디스플레이에 연결합니다. 마지막으로, 전체 전자 어셈블리를 하우징에 밀어 넣고 몇 개의 3mm 나사로 고정합니다.</p>
<p><img src="/assets/img/2024-06-22-OpenSourcePulseOximeter_2.png" alt="이미지"></p>
<p>전자기기가 삽입된 후에 OLED 화면을 상단 부분에 연결하고 나머지 샤시에 몇 개의 3mm 나사로 고정합니다. 뚜껑을 부드럽게 위아래로 움직여 움직임을 테스트할 수 있습니다.</p>
<p>포함된 스케치는 사용자의 현재 심박수와 산소 포화도를 표시하기 위해 몇 가지 작업을 수행합니다. 업로드하려면 필요한 라이브러리를 설치하고 도구 메뉴에서 Arduino Nano를 보드 목록에서 선택한 다음 업로드를 클릭하면 됩니다. 스케치 자체는 OLED 및 MAX30102를 초기화하고 에러가 발생할 경우 보고합니다. 그런 다음 센서를 보정하기 위해 100개의 값을 읽고 이를 표시하기 시작합니다. 장치는 그런 다음 25개의 새 값들을 읽고 이들로 이동 평균을 계산하는 루프에 진입합니다. 마지막으로 값이 유효한지 확인하고 유효하다면 화면에 인쇄합니다.</p>
<div class="content-ad"></div>
<p>펄스 옥시미터를 사용하려면 손가락 끝을 센서 위에 올려놓고 부드럽게 뚜껑을 닫으세요. 그런 다음 전원 공급원을 꽂고 데이터가 표시될 때까지 기다리기만 하면 됩니다.</p>
<p><img src="/assets/img/2024-06-22-OpenSourcePulseOximeter_3.png" alt="이미지"></p>
<p><img src="/assets/img/2024-06-22-OpenSourcePulseOximeter_4.png" alt="이미지"></p>
<p><img src="/assets/img/2024-06-22-OpenSourcePulseOximeter_5.png" alt="이미지"></p>
<div class="content-ad"></div>
<h1>펄스 옥시미터 코드</h1>
<p>C/C++</p>
<pre><code class="hljs language-js"><span class="hljs-comment">/*
  하드웨어 연결 (Breakoutboard to Arduino):
  -5V = 5V (3.3V 사용 가능)
  -GND = GND
  -SDA = A4 (또는 SDA)
  -SCL = A5 (또는 SCL)
  -INT = 연결하지 않음

  MAX30105 브레이크아웃은 5V 또는 3.3V I2C 로직을 처리할 수 있습니다. 보드를 5V로 전원 공급하는 것을 권장하지만 3.3V에서도 작동합니다.
*/</span>

#include &#x3C;<span class="hljs-title class_">Wire</span>.<span class="hljs-property">h</span>>
#include <span class="hljs-string">"MAX30105.h"</span>
#include <span class="hljs-string">"spo2_algorithm.h"</span>
#include <span class="hljs-string">"SSD1306Ascii.h"</span>
#include <span class="hljs-string">"SSD1306AsciiWire.h"</span>

<span class="hljs-title class_">MAX30105</span> particleSensor;
<span class="hljs-title class_">SSD1306AsciiWire</span> oled;

#define <span class="hljs-variable constant_">MAX_BRIGHTNESS</span> <span class="hljs-number">255</span>

#<span class="hljs-keyword">if</span> <span class="hljs-title function_">defined</span>(__AVR_ATmega328P__) || <span class="hljs-title function_">defined</span>(__AVR_ATmega168__)
<span class="hljs-comment">// 아두이노 Uno에는 50개의 IR LED 데이터 및 빨간 LED 데이터를 32비트 형식으로 저장할 충분한 SRAM이 없습니다.</span>
<span class="hljs-comment">// 이 문제를 해결하기 위해 샘플 데이터의 16비트 MSB가 잘립니다. 샘플이 16비트 데이터로 변환됩니다.</span>
uint16_t irBuffer[<span class="hljs-number">50</span>]; <span class="hljs-comment">// 적외선 LED 센서 데이터</span>
uint16_t redBuffer[<span class="hljs-number">50</span>];  <span class="hljs-comment">// 빨간색 LED 센서 데이터</span>
#<span class="hljs-keyword">else</span>
uint32_t irBuffer[<span class="hljs-number">50</span>]; <span class="hljs-comment">// 적외선 LED 센서 데이터</span>
uint32_t redBuffer[<span class="hljs-number">50</span>];  <span class="hljs-comment">// 빨간색 LED 센서 데이터</span>
#endif

int32_t spo2; <span class="hljs-comment">// SPO2 값</span>
int8_t validSPO2; <span class="hljs-comment">// SPO2 계산이 유효한지를 나타내는 표시기</span>
int32_t heartRate; <span class="hljs-comment">// 심박수 값</span>
int8_t validHeartRate; <span class="hljs-comment">// 심박수 계산이 유효한지를 나타내는 표시기</span>

<span class="hljs-keyword">void</span> <span class="hljs-title function_">setup</span>(<span class="hljs-params"></span>)
{
  <span class="hljs-title class_">Serial</span>.<span class="hljs-title function_">begin</span>(<span class="hljs-number">115200</span>); <span class="hljs-comment">// 초당 115200비트로 시리얼 통신 초기화:</span>

  oled.<span class="hljs-title function_">begin</span>(&#x26;<span class="hljs-title class_">Adafruit128</span>x64, <span class="hljs-number">0x3C</span>);
  oled.<span class="hljs-title function_">setFont</span>(<span class="hljs-title class_">Arial14</span>);

  <span class="hljs-comment">// 센서 초기화</span>
  <span class="hljs-keyword">if</span> (!particleSensor.<span class="hljs-title function_">begin</span>(<span class="hljs-title class_">Wire</span>, <span class="hljs-variable constant_">I2C_SPEED_FAST</span>)) <span class="hljs-comment">// 기본 I2C 포트, 400kHz 속도 사용</span>
  {
    <span class="hljs-title class_">Serial</span>.<span class="hljs-title function_">println</span>(<span class="hljs-title function_">F</span>(<span class="hljs-string">"MAX30105를 찾을 수 없습니다. 배선/전원을 확인하세요."</span>));
    <span class="hljs-keyword">while</span> (<span class="hljs-number">1</span>);
  }

  particleSensor.<span class="hljs-title function_">setup</span>(<span class="hljs-number">55</span>, <span class="hljs-number">4</span>, <span class="hljs-number">2</span>, <span class="hljs-number">200</span>, <span class="hljs-number">411</span>, <span class="hljs-number">4096</span>); <span class="hljs-comment">// 이러한 설정으로 센서 구성</span>
}

<span class="hljs-keyword">void</span> <span class="hljs-title function_">loop</span>(<span class="hljs-params"></span>)
{

  <span class="hljs-comment">// 처음 50개 샘플을 읽고 신호 범위를 결정합니다.</span>
  <span class="hljs-keyword">for</span> (byte i = <span class="hljs-number">0</span> ; i &#x3C; <span class="hljs-number">50</span> ; i++)
  {
    <span class="hljs-keyword">while</span> (particleSensor.<span class="hljs-title function_">available</span>() == <span class="hljs-literal">false</span>) <span class="hljs-comment">// 새 데이터가 있는지 확인</span>
      particleSensor.<span class="hljs-title function_">check</span>(); <span class="hljs-comment">// 새 데이터가 있는지 확인</span>

    redBuffer[i] = particleSensor.<span class="hljs-title function_">getRed</span>();
    irBuffer[i] = particleSensor.<span class="hljs-title function_">getIR</span>();
    particleSensor.<span class="hljs-title function_">nextSample</span>(); <span class="hljs-comment">// 이 샘플은 완료되었으므로 다음 샘플로 이동</span>
    <span class="hljs-title class_">Serial</span>.<span class="hljs-title function_">print</span>(<span class="hljs-title function_">F</span>(<span class="hljs-string">"빨강="</span>));
    <span class="hljs-title class_">Serial</span>.<span class="hljs-title function_">print</span>(redBuffer[i], <span class="hljs-variable constant_">DEC</span>);
    <span class="hljs-title class_">Serial</span>.<span class="hljs-title function_">print</span>(<span class="hljs-title function_">F</span>(<span class="hljs-string">", 적외선="</span>));
    <span class="hljs-title class_">Serial</span>.<span class="hljs-title function_">println</span>(irBuffer[i], <span class="hljs-variable constant_">DEC</span>);
  }

  <span class="hljs-comment">// 처음 50개 샘플(총 4초의 샘플) 후에 심박수 및 SpO2 계산</span>
  <span class="hljs-title function_">maxim_heart_rate_and_oxygen_saturation</span>(irBuffer, <span class="hljs-number">50</span>, redBuffer, &#x26;spo2, &#x26;validSPO2, &#x26;heartRate, &#x26;validHeartRate);

  <span class="hljs-comment">// MAX30102에서 지속적으로 샘플을 채취합니다. 1초마다 심박수와 SpO2를 계산합니다.</span>
  <span class="hljs-keyword">while</span> (<span class="hljs-number">1</span>)
  {
    <span class="hljs-comment">// 메모리에 처음 25개 세트의 샘플을 버리고 마지막 25개 세트의 샘플을 맨 위로 이동합니다.</span>
    <span class="hljs-keyword">for</span> (byte i = <span class="hljs-number">25</span>; i &#x3C; <span class="hljs-number">50</span>; i++)
    {
      redBuffer[i - <span class="hljs-number">25</span>] = redBuffer[i];
      irBuffer[i - <span class="hljs-number">25</span>] = irBuffer[i];
    }

    <span class="hljs-comment">// 심박수를 계산하기 전에 25개 세트의 샘플을 채취합니다.</span>
    <span class="hljs-keyword">for</span> (byte i = <span class="hljs-number">25</span>; i &#x3C; <span class="hljs-number">50</span>; i++)
    {
      <span class="hljs-keyword">while</span> (particleSensor.<span class="hljs-title function_">available</span>() == <span class="hljs-literal">false</span>) <span class="hljs-comment">// 새 데이터가 있는지 확인</span>
        particleSensor.<span class="hljs-title function_">check</span>(); <span class="hljs-comment">// 새 데이터가 있는지 확인</span>

      redBuffer[i] = particleSensor.<span class="hljs-title function_">getRed</span>();
      irBuffer[i] = particleSensor.<span class="hljs-title function_">getIR</span>();
      particleSensor.<span class="hljs-title function_">nextSample</span>(); <span class="hljs-comment">// 이 샘플은 완료되었으므로 다음 샘플로 이동</span>
      <span class="hljs-title class_">Serial</span>.<span class="hljs-title function_">print</span>(<span class="hljs-title function_">F</span>(<span class="hljs-string">"빨강="</span>));
      <span class="hljs-title class_">Serial</span>.<span class="hljs-title function_">print</span>(redBuffer[i], <span class="hljs-variable constant_">DEC</span>);
      <span class="hljs-title class_">Serial</span>.<span class="hljs-title function_">print</span>(<span class="hljs-title function_">F</span>(<span class="hljs-string">", 적외선="</span>));
      <span class="hljs-title class_">Serial</span>.<span class="hljs-title function_">print</span>(irBuffer[i], <span class="hljs-variable constant_">DEC</span>);

      <span class="hljs-title class_">Serial</span>.<span class="hljs-title function_">print</span>(<span class="hljs-title function_">F</span>(<span class="hljs-string">", 심박수="</span>));
      <span class="hljs-title class_">Serial</span>.<span class="hljs-title function_">print</span>(heartRate, <span class="hljs-variable constant_">DEC</span>);

      <span class="hljs-title class_">Serial</span>.<span class="hljs-title function_">print</span>(<span class="hljs-title function_">F</span>(<span class="hljs-string">", 심박수유효="</span>));
      <span class="hljs-title class_">Serial</span>.<span class="hljs-title function_">print</span>(validHeartRate, <span class="hljs-variable constant_">DEC</span>);

      <span class="hljs-title class_">Serial</span>.<span class="hljs-title function_">print</span>(<span class="hljs-title function_">F</span>(<span class="hljs-string">", SPO2="</span>));
      <span class="hljs-title class_">Serial</span>.<span class="hljs-title function_">print</span>(spo2, <span class="hljs-variable constant_">DEC</span>);

      <span class="hljs-title class_">Serial</span>.<span class="hljs-title function_">print</span>(<span class="hljs-title function_">F</span>(<span class="hljs-string">", SPO2유효="</span>));
      <span class="hljs-title class_">Serial</span>.<span class="hljs-title function_">println</span>(validSPO2, <span class="hljs-variable constant_">DEC</span>);
      
    }

    <span class="hljs-comment">// 25개의 새로운 샘플을 수집한 후 HR 및 SP02를 재계산합니다.</span>
    <span class="hljs-title function_">maxim_heart_rate_and_oxygen_saturation</span>(irBuffer, <span class="hljs-number">50</span>, redBuffer, &#x26;spo2, &#x26;validSPO2, &#x26;heartRate, &#x26;validHeartRate);
    <span class="hljs-title function_">printToScreen</span>();
  }
}

<span class="hljs-keyword">void</span> <span class="hljs-title function_">printToScreen</span>(<span class="hljs-params"></span>) {
  oled.<span class="hljs-title function_">clear</span>();
  oled.<span class="hljs-title function_">setCursor</span>(<span class="hljs-number">0</span>,<span class="hljs-number">0</span>);
  <span class="hljs-keyword">if</span>(validSPO2 &#x26;&#x26; validHeartRate) {
    oled.<span class="hljs-title function_">print</span>(<span class="hljs-title function_">F</span>(<span class="hljs-string">"HR: "</span>)); oled.<span class="hljs-title function_">println</span>(heartRate, <span class="hljs-variable constant_">DEC</span>);
    oled.<span class="hljs-title function_">print</span>(<span class="hljs-title function_">F</span>(<span class="hljs-string">"SPO2: "</span>)); oled.<span class="hljs-title function_">println</span>(spo2, <span class="hljs-variable constant_">DEC</span>);
  } <span class="hljs-keyword">else</span> {
    oled.<span class="hljs-title function_">print</span>(<span class="hljs-title function_">F</span>(<span class="hljs-string">"유효하지 않습니다"</span>));
  }
}
</code></pre>
</body>
</html>
</div></article></div></main></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"title":"오픈 소스 맥박산소측정기, 직접 만들어보기","description":"","date":"2024-06-22 17:55","slug":"2024-06-22-OpenSourcePulseOximeter","content":"\n\n이 프로젝트에서 사용된 항목\n\n전체 장치는 44mm x 30mm 퍼프 보드에 부착된 Arduino Nano를 중심으로 설계되었습니다. 먼저, 센서의 VIN, GND, SDA 및 SCL 핀에 전선을 납땜한 다음, 그 전선은 침대 부품 아래를 따라 Arduino Nano로 연결됩니다.\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n다음으로, OLED에 대한 커넥터를 Nano에 연결한 다음 디스플레이에 연결합니다. 마지막으로, 전체 전자 어셈블리를 하우징에 밀어 넣고 몇 개의 3mm 나사로 고정합니다.\n\n![이미지](/assets/img/2024-06-22-OpenSourcePulseOximeter_2.png)\n\n전자기기가 삽입된 후에 OLED 화면을 상단 부분에 연결하고 나머지 샤시에 몇 개의 3mm 나사로 고정합니다. 뚜껑을 부드럽게 위아래로 움직여 움직임을 테스트할 수 있습니다.\n\n포함된 스케치는 사용자의 현재 심박수와 산소 포화도를 표시하기 위해 몇 가지 작업을 수행합니다. 업로드하려면 필요한 라이브러리를 설치하고 도구 메뉴에서 Arduino Nano를 보드 목록에서 선택한 다음 업로드를 클릭하면 됩니다. 스케치 자체는 OLED 및 MAX30102를 초기화하고 에러가 발생할 경우 보고합니다. 그런 다음 센서를 보정하기 위해 100개의 값을 읽고 이를 표시하기 시작합니다. 장치는 그런 다음 25개의 새 값들을 읽고 이들로 이동 평균을 계산하는 루프에 진입합니다. 마지막으로 값이 유효한지 확인하고 유효하다면 화면에 인쇄합니다.\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n펄스 옥시미터를 사용하려면 손가락 끝을 센서 위에 올려놓고 부드럽게 뚜껑을 닫으세요. 그런 다음 전원 공급원을 꽂고 데이터가 표시될 때까지 기다리기만 하면 됩니다.\n\n![이미지](/assets/img/2024-06-22-OpenSourcePulseOximeter_3.png)\n\n![이미지](/assets/img/2024-06-22-OpenSourcePulseOximeter_4.png)\n\n![이미지](/assets/img/2024-06-22-OpenSourcePulseOximeter_5.png)\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n# 펄스 옥시미터 코드\n\nC/C++\n\n```js\n/*\n  하드웨어 연결 (Breakoutboard to Arduino):\n  -5V = 5V (3.3V 사용 가능)\n  -GND = GND\n  -SDA = A4 (또는 SDA)\n  -SCL = A5 (또는 SCL)\n  -INT = 연결하지 않음\n\n  MAX30105 브레이크아웃은 5V 또는 3.3V I2C 로직을 처리할 수 있습니다. 보드를 5V로 전원 공급하는 것을 권장하지만 3.3V에서도 작동합니다.\n*/\n\n#include \u003cWire.h\u003e\n#include \"MAX30105.h\"\n#include \"spo2_algorithm.h\"\n#include \"SSD1306Ascii.h\"\n#include \"SSD1306AsciiWire.h\"\n\nMAX30105 particleSensor;\nSSD1306AsciiWire oled;\n\n#define MAX_BRIGHTNESS 255\n\n#if defined(__AVR_ATmega328P__) || defined(__AVR_ATmega168__)\n// 아두이노 Uno에는 50개의 IR LED 데이터 및 빨간 LED 데이터를 32비트 형식으로 저장할 충분한 SRAM이 없습니다.\n// 이 문제를 해결하기 위해 샘플 데이터의 16비트 MSB가 잘립니다. 샘플이 16비트 데이터로 변환됩니다.\nuint16_t irBuffer[50]; // 적외선 LED 센서 데이터\nuint16_t redBuffer[50];  // 빨간색 LED 센서 데이터\n#else\nuint32_t irBuffer[50]; // 적외선 LED 센서 데이터\nuint32_t redBuffer[50];  // 빨간색 LED 센서 데이터\n#endif\n\nint32_t spo2; // SPO2 값\nint8_t validSPO2; // SPO2 계산이 유효한지를 나타내는 표시기\nint32_t heartRate; // 심박수 값\nint8_t validHeartRate; // 심박수 계산이 유효한지를 나타내는 표시기\n\nvoid setup()\n{\n  Serial.begin(115200); // 초당 115200비트로 시리얼 통신 초기화:\n\n  oled.begin(\u0026Adafruit128x64, 0x3C);\n  oled.setFont(Arial14);\n\n  // 센서 초기화\n  if (!particleSensor.begin(Wire, I2C_SPEED_FAST)) // 기본 I2C 포트, 400kHz 속도 사용\n  {\n    Serial.println(F(\"MAX30105를 찾을 수 없습니다. 배선/전원을 확인하세요.\"));\n    while (1);\n  }\n\n  particleSensor.setup(55, 4, 2, 200, 411, 4096); // 이러한 설정으로 센서 구성\n}\n\nvoid loop()\n{\n\n  // 처음 50개 샘플을 읽고 신호 범위를 결정합니다.\n  for (byte i = 0 ; i \u003c 50 ; i++)\n  {\n    while (particleSensor.available() == false) // 새 데이터가 있는지 확인\n      particleSensor.check(); // 새 데이터가 있는지 확인\n\n    redBuffer[i] = particleSensor.getRed();\n    irBuffer[i] = particleSensor.getIR();\n    particleSensor.nextSample(); // 이 샘플은 완료되었으므로 다음 샘플로 이동\n    Serial.print(F(\"빨강=\"));\n    Serial.print(redBuffer[i], DEC);\n    Serial.print(F(\", 적외선=\"));\n    Serial.println(irBuffer[i], DEC);\n  }\n\n  // 처음 50개 샘플(총 4초의 샘플) 후에 심박수 및 SpO2 계산\n  maxim_heart_rate_and_oxygen_saturation(irBuffer, 50, redBuffer, \u0026spo2, \u0026validSPO2, \u0026heartRate, \u0026validHeartRate);\n\n  // MAX30102에서 지속적으로 샘플을 채취합니다. 1초마다 심박수와 SpO2를 계산합니다.\n  while (1)\n  {\n    // 메모리에 처음 25개 세트의 샘플을 버리고 마지막 25개 세트의 샘플을 맨 위로 이동합니다.\n    for (byte i = 25; i \u003c 50; i++)\n    {\n      redBuffer[i - 25] = redBuffer[i];\n      irBuffer[i - 25] = irBuffer[i];\n    }\n\n    // 심박수를 계산하기 전에 25개 세트의 샘플을 채취합니다.\n    for (byte i = 25; i \u003c 50; i++)\n    {\n      while (particleSensor.available() == false) // 새 데이터가 있는지 확인\n        particleSensor.check(); // 새 데이터가 있는지 확인\n\n      redBuffer[i] = particleSensor.getRed();\n      irBuffer[i] = particleSensor.getIR();\n      particleSensor.nextSample(); // 이 샘플은 완료되었으므로 다음 샘플로 이동\n      Serial.print(F(\"빨강=\"));\n      Serial.print(redBuffer[i], DEC);\n      Serial.print(F(\", 적외선=\"));\n      Serial.print(irBuffer[i], DEC);\n\n      Serial.print(F(\", 심박수=\"));\n      Serial.print(heartRate, DEC);\n\n      Serial.print(F(\", 심박수유효=\"));\n      Serial.print(validHeartRate, DEC);\n\n      Serial.print(F(\", SPO2=\"));\n      Serial.print(spo2, DEC);\n\n      Serial.print(F(\", SPO2유효=\"));\n      Serial.println(validSPO2, DEC);\n      \n    }\n\n    // 25개의 새로운 샘플을 수집한 후 HR 및 SP02를 재계산합니다.\n    maxim_heart_rate_and_oxygen_saturation(irBuffer, 50, redBuffer, \u0026spo2, \u0026validSPO2, \u0026heartRate, \u0026validHeartRate);\n    printToScreen();\n  }\n}\n\nvoid printToScreen() {\n  oled.clear();\n  oled.setCursor(0,0);\n  if(validSPO2 \u0026\u0026 validHeartRate) {\n    oled.print(F(\"HR: \")); oled.println(heartRate, DEC);\n    oled.print(F(\"SPO2: \")); oled.println(spo2, DEC);\n  } else {\n    oled.print(F(\"유효하지 않습니다\"));\n  }\n}\n```","ogImage":{"url":"/assets/img/2024-06-22-OpenSourcePulseOximeter_0.png"},"coverImage":"/assets/img/2024-06-22-OpenSourcePulseOximeter_0.png","tag":["Tech"],"readingTime":5},"content":"\u003c!doctype html\u003e\n\u003chtml lang=\"en\"\u003e\n\u003chead\u003e\n\u003cmeta charset=\"utf-8\"\u003e\n\u003cmeta content=\"width=device-width, initial-scale=1\" name=\"viewport\"\u003e\n\u003c/head\u003e\n\u003cbody\u003e\n\u003cp\u003e이 프로젝트에서 사용된 항목\u003c/p\u003e\n\u003cp\u003e전체 장치는 44mm x 30mm 퍼프 보드에 부착된 Arduino Nano를 중심으로 설계되었습니다. 먼저, 센서의 VIN, GND, SDA 및 SCL 핀에 전선을 납땜한 다음, 그 전선은 침대 부품 아래를 따라 Arduino Nano로 연결됩니다.\u003c/p\u003e\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\u003cp\u003e다음으로, OLED에 대한 커넥터를 Nano에 연결한 다음 디스플레이에 연결합니다. 마지막으로, 전체 전자 어셈블리를 하우징에 밀어 넣고 몇 개의 3mm 나사로 고정합니다.\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/assets/img/2024-06-22-OpenSourcePulseOximeter_2.png\" alt=\"이미지\"\u003e\u003c/p\u003e\n\u003cp\u003e전자기기가 삽입된 후에 OLED 화면을 상단 부분에 연결하고 나머지 샤시에 몇 개의 3mm 나사로 고정합니다. 뚜껑을 부드럽게 위아래로 움직여 움직임을 테스트할 수 있습니다.\u003c/p\u003e\n\u003cp\u003e포함된 스케치는 사용자의 현재 심박수와 산소 포화도를 표시하기 위해 몇 가지 작업을 수행합니다. 업로드하려면 필요한 라이브러리를 설치하고 도구 메뉴에서 Arduino Nano를 보드 목록에서 선택한 다음 업로드를 클릭하면 됩니다. 스케치 자체는 OLED 및 MAX30102를 초기화하고 에러가 발생할 경우 보고합니다. 그런 다음 센서를 보정하기 위해 100개의 값을 읽고 이를 표시하기 시작합니다. 장치는 그런 다음 25개의 새 값들을 읽고 이들로 이동 평균을 계산하는 루프에 진입합니다. 마지막으로 값이 유효한지 확인하고 유효하다면 화면에 인쇄합니다.\u003c/p\u003e\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\u003cp\u003e펄스 옥시미터를 사용하려면 손가락 끝을 센서 위에 올려놓고 부드럽게 뚜껑을 닫으세요. 그런 다음 전원 공급원을 꽂고 데이터가 표시될 때까지 기다리기만 하면 됩니다.\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/assets/img/2024-06-22-OpenSourcePulseOximeter_3.png\" alt=\"이미지\"\u003e\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/assets/img/2024-06-22-OpenSourcePulseOximeter_4.png\" alt=\"이미지\"\u003e\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/assets/img/2024-06-22-OpenSourcePulseOximeter_5.png\" alt=\"이미지\"\u003e\u003c/p\u003e\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\u003ch1\u003e펄스 옥시미터 코드\u003c/h1\u003e\n\u003cp\u003eC/C++\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-comment\"\u003e/*\n  하드웨어 연결 (Breakoutboard to Arduino):\n  -5V = 5V (3.3V 사용 가능)\n  -GND = GND\n  -SDA = A4 (또는 SDA)\n  -SCL = A5 (또는 SCL)\n  -INT = 연결하지 않음\n\n  MAX30105 브레이크아웃은 5V 또는 3.3V I2C 로직을 처리할 수 있습니다. 보드를 5V로 전원 공급하는 것을 권장하지만 3.3V에서도 작동합니다.\n*/\u003c/span\u003e\n\n#include \u0026#x3C;\u003cspan class=\"hljs-title class_\"\u003eWire\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003eh\u003c/span\u003e\u003e\n#include \u003cspan class=\"hljs-string\"\u003e\"MAX30105.h\"\u003c/span\u003e\n#include \u003cspan class=\"hljs-string\"\u003e\"spo2_algorithm.h\"\u003c/span\u003e\n#include \u003cspan class=\"hljs-string\"\u003e\"SSD1306Ascii.h\"\u003c/span\u003e\n#include \u003cspan class=\"hljs-string\"\u003e\"SSD1306AsciiWire.h\"\u003c/span\u003e\n\n\u003cspan class=\"hljs-title class_\"\u003eMAX30105\u003c/span\u003e particleSensor;\n\u003cspan class=\"hljs-title class_\"\u003eSSD1306AsciiWire\u003c/span\u003e oled;\n\n#define \u003cspan class=\"hljs-variable constant_\"\u003eMAX_BRIGHTNESS\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e255\u003c/span\u003e\n\n#\u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003edefined\u003c/span\u003e(__AVR_ATmega328P__) || \u003cspan class=\"hljs-title function_\"\u003edefined\u003c/span\u003e(__AVR_ATmega168__)\n\u003cspan class=\"hljs-comment\"\u003e// 아두이노 Uno에는 50개의 IR LED 데이터 및 빨간 LED 데이터를 32비트 형식으로 저장할 충분한 SRAM이 없습니다.\u003c/span\u003e\n\u003cspan class=\"hljs-comment\"\u003e// 이 문제를 해결하기 위해 샘플 데이터의 16비트 MSB가 잘립니다. 샘플이 16비트 데이터로 변환됩니다.\u003c/span\u003e\nuint16_t irBuffer[\u003cspan class=\"hljs-number\"\u003e50\u003c/span\u003e]; \u003cspan class=\"hljs-comment\"\u003e// 적외선 LED 센서 데이터\u003c/span\u003e\nuint16_t redBuffer[\u003cspan class=\"hljs-number\"\u003e50\u003c/span\u003e];  \u003cspan class=\"hljs-comment\"\u003e// 빨간색 LED 센서 데이터\u003c/span\u003e\n#\u003cspan class=\"hljs-keyword\"\u003eelse\u003c/span\u003e\nuint32_t irBuffer[\u003cspan class=\"hljs-number\"\u003e50\u003c/span\u003e]; \u003cspan class=\"hljs-comment\"\u003e// 적외선 LED 센서 데이터\u003c/span\u003e\nuint32_t redBuffer[\u003cspan class=\"hljs-number\"\u003e50\u003c/span\u003e];  \u003cspan class=\"hljs-comment\"\u003e// 빨간색 LED 센서 데이터\u003c/span\u003e\n#endif\n\nint32_t spo2; \u003cspan class=\"hljs-comment\"\u003e// SPO2 값\u003c/span\u003e\nint8_t validSPO2; \u003cspan class=\"hljs-comment\"\u003e// SPO2 계산이 유효한지를 나타내는 표시기\u003c/span\u003e\nint32_t heartRate; \u003cspan class=\"hljs-comment\"\u003e// 심박수 값\u003c/span\u003e\nint8_t validHeartRate; \u003cspan class=\"hljs-comment\"\u003e// 심박수 계산이 유효한지를 나타내는 표시기\u003c/span\u003e\n\n\u003cspan class=\"hljs-keyword\"\u003evoid\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003esetup\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003e\u003c/span\u003e)\n{\n  \u003cspan class=\"hljs-title class_\"\u003eSerial\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003ebegin\u003c/span\u003e(\u003cspan class=\"hljs-number\"\u003e115200\u003c/span\u003e); \u003cspan class=\"hljs-comment\"\u003e// 초당 115200비트로 시리얼 통신 초기화:\u003c/span\u003e\n\n  oled.\u003cspan class=\"hljs-title function_\"\u003ebegin\u003c/span\u003e(\u0026#x26;\u003cspan class=\"hljs-title class_\"\u003eAdafruit128\u003c/span\u003ex64, \u003cspan class=\"hljs-number\"\u003e0x3C\u003c/span\u003e);\n  oled.\u003cspan class=\"hljs-title function_\"\u003esetFont\u003c/span\u003e(\u003cspan class=\"hljs-title class_\"\u003eArial14\u003c/span\u003e);\n\n  \u003cspan class=\"hljs-comment\"\u003e// 센서 초기화\u003c/span\u003e\n  \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (!particleSensor.\u003cspan class=\"hljs-title function_\"\u003ebegin\u003c/span\u003e(\u003cspan class=\"hljs-title class_\"\u003eWire\u003c/span\u003e, \u003cspan class=\"hljs-variable constant_\"\u003eI2C_SPEED_FAST\u003c/span\u003e)) \u003cspan class=\"hljs-comment\"\u003e// 기본 I2C 포트, 400kHz 속도 사용\u003c/span\u003e\n  {\n    \u003cspan class=\"hljs-title class_\"\u003eSerial\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003eprintln\u003c/span\u003e(\u003cspan class=\"hljs-title function_\"\u003eF\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\"MAX30105를 찾을 수 없습니다. 배선/전원을 확인하세요.\"\u003c/span\u003e));\n    \u003cspan class=\"hljs-keyword\"\u003ewhile\u003c/span\u003e (\u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e);\n  }\n\n  particleSensor.\u003cspan class=\"hljs-title function_\"\u003esetup\u003c/span\u003e(\u003cspan class=\"hljs-number\"\u003e55\u003c/span\u003e, \u003cspan class=\"hljs-number\"\u003e4\u003c/span\u003e, \u003cspan class=\"hljs-number\"\u003e2\u003c/span\u003e, \u003cspan class=\"hljs-number\"\u003e200\u003c/span\u003e, \u003cspan class=\"hljs-number\"\u003e411\u003c/span\u003e, \u003cspan class=\"hljs-number\"\u003e4096\u003c/span\u003e); \u003cspan class=\"hljs-comment\"\u003e// 이러한 설정으로 센서 구성\u003c/span\u003e\n}\n\n\u003cspan class=\"hljs-keyword\"\u003evoid\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003eloop\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003e\u003c/span\u003e)\n{\n\n  \u003cspan class=\"hljs-comment\"\u003e// 처음 50개 샘플을 읽고 신호 범위를 결정합니다.\u003c/span\u003e\n  \u003cspan class=\"hljs-keyword\"\u003efor\u003c/span\u003e (byte i = \u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e ; i \u0026#x3C; \u003cspan class=\"hljs-number\"\u003e50\u003c/span\u003e ; i++)\n  {\n    \u003cspan class=\"hljs-keyword\"\u003ewhile\u003c/span\u003e (particleSensor.\u003cspan class=\"hljs-title function_\"\u003eavailable\u003c/span\u003e() == \u003cspan class=\"hljs-literal\"\u003efalse\u003c/span\u003e) \u003cspan class=\"hljs-comment\"\u003e// 새 데이터가 있는지 확인\u003c/span\u003e\n      particleSensor.\u003cspan class=\"hljs-title function_\"\u003echeck\u003c/span\u003e(); \u003cspan class=\"hljs-comment\"\u003e// 새 데이터가 있는지 확인\u003c/span\u003e\n\n    redBuffer[i] = particleSensor.\u003cspan class=\"hljs-title function_\"\u003egetRed\u003c/span\u003e();\n    irBuffer[i] = particleSensor.\u003cspan class=\"hljs-title function_\"\u003egetIR\u003c/span\u003e();\n    particleSensor.\u003cspan class=\"hljs-title function_\"\u003enextSample\u003c/span\u003e(); \u003cspan class=\"hljs-comment\"\u003e// 이 샘플은 완료되었으므로 다음 샘플로 이동\u003c/span\u003e\n    \u003cspan class=\"hljs-title class_\"\u003eSerial\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003eprint\u003c/span\u003e(\u003cspan class=\"hljs-title function_\"\u003eF\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\"빨강=\"\u003c/span\u003e));\n    \u003cspan class=\"hljs-title class_\"\u003eSerial\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003eprint\u003c/span\u003e(redBuffer[i], \u003cspan class=\"hljs-variable constant_\"\u003eDEC\u003c/span\u003e);\n    \u003cspan class=\"hljs-title class_\"\u003eSerial\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003eprint\u003c/span\u003e(\u003cspan class=\"hljs-title function_\"\u003eF\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\", 적외선=\"\u003c/span\u003e));\n    \u003cspan class=\"hljs-title class_\"\u003eSerial\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003eprintln\u003c/span\u003e(irBuffer[i], \u003cspan class=\"hljs-variable constant_\"\u003eDEC\u003c/span\u003e);\n  }\n\n  \u003cspan class=\"hljs-comment\"\u003e// 처음 50개 샘플(총 4초의 샘플) 후에 심박수 및 SpO2 계산\u003c/span\u003e\n  \u003cspan class=\"hljs-title function_\"\u003emaxim_heart_rate_and_oxygen_saturation\u003c/span\u003e(irBuffer, \u003cspan class=\"hljs-number\"\u003e50\u003c/span\u003e, redBuffer, \u0026#x26;spo2, \u0026#x26;validSPO2, \u0026#x26;heartRate, \u0026#x26;validHeartRate);\n\n  \u003cspan class=\"hljs-comment\"\u003e// MAX30102에서 지속적으로 샘플을 채취합니다. 1초마다 심박수와 SpO2를 계산합니다.\u003c/span\u003e\n  \u003cspan class=\"hljs-keyword\"\u003ewhile\u003c/span\u003e (\u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e)\n  {\n    \u003cspan class=\"hljs-comment\"\u003e// 메모리에 처음 25개 세트의 샘플을 버리고 마지막 25개 세트의 샘플을 맨 위로 이동합니다.\u003c/span\u003e\n    \u003cspan class=\"hljs-keyword\"\u003efor\u003c/span\u003e (byte i = \u003cspan class=\"hljs-number\"\u003e25\u003c/span\u003e; i \u0026#x3C; \u003cspan class=\"hljs-number\"\u003e50\u003c/span\u003e; i++)\n    {\n      redBuffer[i - \u003cspan class=\"hljs-number\"\u003e25\u003c/span\u003e] = redBuffer[i];\n      irBuffer[i - \u003cspan class=\"hljs-number\"\u003e25\u003c/span\u003e] = irBuffer[i];\n    }\n\n    \u003cspan class=\"hljs-comment\"\u003e// 심박수를 계산하기 전에 25개 세트의 샘플을 채취합니다.\u003c/span\u003e\n    \u003cspan class=\"hljs-keyword\"\u003efor\u003c/span\u003e (byte i = \u003cspan class=\"hljs-number\"\u003e25\u003c/span\u003e; i \u0026#x3C; \u003cspan class=\"hljs-number\"\u003e50\u003c/span\u003e; i++)\n    {\n      \u003cspan class=\"hljs-keyword\"\u003ewhile\u003c/span\u003e (particleSensor.\u003cspan class=\"hljs-title function_\"\u003eavailable\u003c/span\u003e() == \u003cspan class=\"hljs-literal\"\u003efalse\u003c/span\u003e) \u003cspan class=\"hljs-comment\"\u003e// 새 데이터가 있는지 확인\u003c/span\u003e\n        particleSensor.\u003cspan class=\"hljs-title function_\"\u003echeck\u003c/span\u003e(); \u003cspan class=\"hljs-comment\"\u003e// 새 데이터가 있는지 확인\u003c/span\u003e\n\n      redBuffer[i] = particleSensor.\u003cspan class=\"hljs-title function_\"\u003egetRed\u003c/span\u003e();\n      irBuffer[i] = particleSensor.\u003cspan class=\"hljs-title function_\"\u003egetIR\u003c/span\u003e();\n      particleSensor.\u003cspan class=\"hljs-title function_\"\u003enextSample\u003c/span\u003e(); \u003cspan class=\"hljs-comment\"\u003e// 이 샘플은 완료되었으므로 다음 샘플로 이동\u003c/span\u003e\n      \u003cspan class=\"hljs-title class_\"\u003eSerial\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003eprint\u003c/span\u003e(\u003cspan class=\"hljs-title function_\"\u003eF\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\"빨강=\"\u003c/span\u003e));\n      \u003cspan class=\"hljs-title class_\"\u003eSerial\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003eprint\u003c/span\u003e(redBuffer[i], \u003cspan class=\"hljs-variable constant_\"\u003eDEC\u003c/span\u003e);\n      \u003cspan class=\"hljs-title class_\"\u003eSerial\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003eprint\u003c/span\u003e(\u003cspan class=\"hljs-title function_\"\u003eF\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\", 적외선=\"\u003c/span\u003e));\n      \u003cspan class=\"hljs-title class_\"\u003eSerial\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003eprint\u003c/span\u003e(irBuffer[i], \u003cspan class=\"hljs-variable constant_\"\u003eDEC\u003c/span\u003e);\n\n      \u003cspan class=\"hljs-title class_\"\u003eSerial\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003eprint\u003c/span\u003e(\u003cspan class=\"hljs-title function_\"\u003eF\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\", 심박수=\"\u003c/span\u003e));\n      \u003cspan class=\"hljs-title class_\"\u003eSerial\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003eprint\u003c/span\u003e(heartRate, \u003cspan class=\"hljs-variable constant_\"\u003eDEC\u003c/span\u003e);\n\n      \u003cspan class=\"hljs-title class_\"\u003eSerial\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003eprint\u003c/span\u003e(\u003cspan class=\"hljs-title function_\"\u003eF\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\", 심박수유효=\"\u003c/span\u003e));\n      \u003cspan class=\"hljs-title class_\"\u003eSerial\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003eprint\u003c/span\u003e(validHeartRate, \u003cspan class=\"hljs-variable constant_\"\u003eDEC\u003c/span\u003e);\n\n      \u003cspan class=\"hljs-title class_\"\u003eSerial\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003eprint\u003c/span\u003e(\u003cspan class=\"hljs-title function_\"\u003eF\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\", SPO2=\"\u003c/span\u003e));\n      \u003cspan class=\"hljs-title class_\"\u003eSerial\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003eprint\u003c/span\u003e(spo2, \u003cspan class=\"hljs-variable constant_\"\u003eDEC\u003c/span\u003e);\n\n      \u003cspan class=\"hljs-title class_\"\u003eSerial\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003eprint\u003c/span\u003e(\u003cspan class=\"hljs-title function_\"\u003eF\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\", SPO2유효=\"\u003c/span\u003e));\n      \u003cspan class=\"hljs-title class_\"\u003eSerial\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003eprintln\u003c/span\u003e(validSPO2, \u003cspan class=\"hljs-variable constant_\"\u003eDEC\u003c/span\u003e);\n      \n    }\n\n    \u003cspan class=\"hljs-comment\"\u003e// 25개의 새로운 샘플을 수집한 후 HR 및 SP02를 재계산합니다.\u003c/span\u003e\n    \u003cspan class=\"hljs-title function_\"\u003emaxim_heart_rate_and_oxygen_saturation\u003c/span\u003e(irBuffer, \u003cspan class=\"hljs-number\"\u003e50\u003c/span\u003e, redBuffer, \u0026#x26;spo2, \u0026#x26;validSPO2, \u0026#x26;heartRate, \u0026#x26;validHeartRate);\n    \u003cspan class=\"hljs-title function_\"\u003eprintToScreen\u003c/span\u003e();\n  }\n}\n\n\u003cspan class=\"hljs-keyword\"\u003evoid\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003eprintToScreen\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003e\u003c/span\u003e) {\n  oled.\u003cspan class=\"hljs-title function_\"\u003eclear\u003c/span\u003e();\n  oled.\u003cspan class=\"hljs-title function_\"\u003esetCursor\u003c/span\u003e(\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e,\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e);\n  \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e(validSPO2 \u0026#x26;\u0026#x26; validHeartRate) {\n    oled.\u003cspan class=\"hljs-title function_\"\u003eprint\u003c/span\u003e(\u003cspan class=\"hljs-title function_\"\u003eF\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\"HR: \"\u003c/span\u003e)); oled.\u003cspan class=\"hljs-title function_\"\u003eprintln\u003c/span\u003e(heartRate, \u003cspan class=\"hljs-variable constant_\"\u003eDEC\u003c/span\u003e);\n    oled.\u003cspan class=\"hljs-title function_\"\u003eprint\u003c/span\u003e(\u003cspan class=\"hljs-title function_\"\u003eF\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\"SPO2: \"\u003c/span\u003e)); oled.\u003cspan class=\"hljs-title function_\"\u003eprintln\u003c/span\u003e(spo2, \u003cspan class=\"hljs-variable constant_\"\u003eDEC\u003c/span\u003e);\n  } \u003cspan class=\"hljs-keyword\"\u003eelse\u003c/span\u003e {\n    oled.\u003cspan class=\"hljs-title function_\"\u003eprint\u003c/span\u003e(\u003cspan class=\"hljs-title function_\"\u003eF\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\"유효하지 않습니다\"\u003c/span\u003e));\n  }\n}\n\u003c/code\u003e\u003c/pre\u003e\n\u003c/body\u003e\n\u003c/html\u003e\n"},"__N_SSG":true},"page":"/post/[slug]","query":{"slug":"2024-06-22-OpenSourcePulseOximeter"},"buildId":"CYQjEY3HhSkRTiL0gewc0","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>