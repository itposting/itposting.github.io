<!DOCTYPE html><html lang="ko"><head><meta charSet="utf-8"/><title>라즈베리 파이 클러스터 설정 Kubernetes와 Airflow, Ansible 사용 방법 | itposting</title><meta name="description" content=""/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><meta property="og:url" content="https://itposting.github.io///post/2024-06-23-RaspberryPiClusterwithKubernetesandAirflowConfiguringAnsible" data-gatsby-head="true"/><meta property="og:type" content="website" data-gatsby-head="true"/><meta property="og:site_name" content="라즈베리 파이 클러스터 설정 Kubernetes와 Airflow, Ansible 사용 방법 | itposting" data-gatsby-head="true"/><meta property="og:title" content="라즈베리 파이 클러스터 설정 Kubernetes와 Airflow, Ansible 사용 방법 | itposting" data-gatsby-head="true"/><meta property="og:description" content="" data-gatsby-head="true"/><meta property="og:image" content="/assets/img/2024-06-23-RaspberryPiClusterwithKubernetesandAirflowConfiguringAnsible_0.png" data-gatsby-head="true"/><meta property="og:locale" content="en_US" data-gatsby-head="true"/><meta name="twitter:card" content="summary_large_image" data-gatsby-head="true"/><meta property="twitter:domain" content="https://itposting.github.io/" data-gatsby-head="true"/><meta property="twitter:url" content="https://itposting.github.io///post/2024-06-23-RaspberryPiClusterwithKubernetesandAirflowConfiguringAnsible" data-gatsby-head="true"/><meta name="twitter:title" content="라즈베리 파이 클러스터 설정 Kubernetes와 Airflow, Ansible 사용 방법 | itposting" data-gatsby-head="true"/><meta name="twitter:description" content="" data-gatsby-head="true"/><meta name="twitter:image" content="/assets/img/2024-06-23-RaspberryPiClusterwithKubernetesandAirflowConfiguringAnsible_0.png" data-gatsby-head="true"/><meta name="twitter:data1" content="Dev | itposting" data-gatsby-head="true"/><meta name="article:published_time" content="2024-06-23 18:09" data-gatsby-head="true"/><meta name="next-head-count" content="19"/><meta name="google-site-verification" content="a-yehRo3k3xv7fg6LqRaE8jlE42e5wP2bDE_2F849O4"/><link rel="stylesheet" href="/favicons/favicon.ico"/><link rel="icon" type="image/png" sizes="16x16" href="/assets/favicons/favicon-16x16.png"/><link rel="icon" type="image/png" sizes="32x32" href="/assets/favicons/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="96x96" href="/assets/favicons/favicon-96x96.png"/><link rel="icon" href="/favicons/apple-icon-180x180.png"/><link rel="apple-touch-icon" href="/favicons/apple-icon-180x180.png"/><link rel="apple-touch-startup-image" href="/startup.png"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="black"/><meta name="msapplication-config" content="/favicons/browserconfig.xml"/><script async="" src="https://www.googletagmanager.com/gtag/js?id=G-23YXDLKDCL"></script><script>window.dataLayer = window.dataLayer || [];
            function gtag(){dataLayer.push(arguments);}
            gtag('js', new Date());
          
            gtag('config', 'G-23YXDLKDCL');</script><link rel="preload" href="/_next/static/css/6e57edcf9f2ce551.css" as="style"/><link rel="stylesheet" href="/_next/static/css/6e57edcf9f2ce551.css" data-n-g=""/><link rel="preload" href="/_next/static/css/b8ef307c9aee1e34.css" as="style"/><link rel="stylesheet" href="/_next/static/css/b8ef307c9aee1e34.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/_next/static/chunks/webpack-ee6df16fdc6dae4d.js" defer=""></script><script src="/_next/static/chunks/framework-46611630e39cfdeb.js" defer=""></script><script src="/_next/static/chunks/main-cf4a52eec9a970a0.js" defer=""></script><script src="/_next/static/chunks/pages/_app-6fae11262ee5c69b.js" defer=""></script><script src="/_next/static/chunks/75fc9c18-ac4aa08aae62f90e.js" defer=""></script><script src="/_next/static/chunks/463-0429087d4c0b0335.js" defer=""></script><script src="/_next/static/chunks/pages/post/%5Bslug%5D-d849684d6d83f07a.js" defer=""></script><script src="/_next/static/8coAiP0lmiEK5aH6nkQkj/_buildManifest.js" defer=""></script><script src="/_next/static/8coAiP0lmiEK5aH6nkQkj/_ssgManifest.js" defer=""></script></head><body><div id="__next"><header class="Header_header__Z8PUO"><div class="Header_inner__tfr0u"><strong class="Header_title__Otn70"><a href="/">IT Posting</a></strong><nav class="Header_nav_area__6KVpk"><a class="nav_item" href="/posts/1">Posts</a></nav></div></header><main class="posts_container__NyRU3"><div class="posts_inner__i3n_i"><h1 class="posts_post_title__EbxNx">라즈베리 파이 클러스터 설정 Kubernetes와 Airflow, Ansible 사용 방법</h1><div class="posts_meta__cR7lu"><div class="posts_profile_wrap__mslMl"><div class="posts_profile_image_wrap__kPikV"><img alt="라즈베리 파이 클러스터 설정 Kubernetes와 Airflow, Ansible 사용 방법" loading="lazy" width="44" height="44" decoding="async" data-nimg="1" class="profile" style="color:transparent" src="/favicons/apple-icon-114x114.png"/></div><div class="posts_textarea__w_iKT"><span class="writer">IT Posting</span><span class="posts_info__5KJdN"><span class="posts_date__ctqHI">Posted On Jun 23, 2024</span><span class="posts_reading_time__f7YPP">5<!-- --> min read</span></span></div></div><img alt="" loading="lazy" width="50" height="50" decoding="async" data-nimg="1" class="posts_view_badge__tcbfm" style="color:transparent" src="https://hits.seeyoufarm.com/api/count/incr/badge.svg?url=https%3A%2F%2Fallround-coder.github.io/post/2024-06-23-RaspberryPiClusterwithKubernetesandAirflowConfiguringAnsible&amp;count_bg=%2379C83D&amp;title_bg=%23555555&amp;icon=&amp;icon_color=%23E7E7E7&amp;title=views&amp;edge_flat=false"/></div><article class="posts_post_content__n_L6j"><div><!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta content="width=device-width, initial-scale=1" name="viewport">
</head>
<body>
<img src="/assets/img/2024-06-23-RaspberryPiClusterwithKubernetesandAirflowConfiguringAnsible_0.png">
<p>아래는 Ansible을 Raspberry Pi 클러스터에서 작동시키기 위해 취한 단계를 요약한 것입니다. 이 프로젝트의 동기는 Kubernetes 및 Airflow를 실행하는 작은 규모이면서 효율적이고 유연한 클러스터 환경을 만드는 것입니다. 목표는 다양한 웹 스크래핑 스크립트를 자동으로 예약하고 서핑 조건을 확인하는 스크래핑을 포함한 DAG 스케줄링을 자동화하는 것입니다.</p>
<p>시작하기 전에 필요한 하드웨어 구성 요소를 모두 준비했는지 확인해 주세요. 자세한 목록 및 설정 지침은 다음에서 확인할 수 있습니다:</p>
<h1>시작하기</h1>
<div class="content-ad"></div>
<h2>초기화 스크립트에 접근하기 위해 Git 저장소를 복제하세요</h2>
<ul>
<li>저장소를 복제하고 해당 폴더로 이동하세요:</li>
</ul>
<pre><code class="hljs language-js">git clone <span class="hljs-attr">https</span>:<span class="hljs-comment">//github.com/robronayne/PiClusterFlow.git</span>
cd <span class="hljs-title class_">PiClusterFlow</span>
</code></pre>
<h2>microSD 카드에 Raspberry Pi OS 설치하기</h2>
<div class="content-ad"></div>
<ol>
<li>Raspberry Pi Imager 다운로드하기:</li>
</ol>
<ul>
<li>먼저 raspberrypi.org/software에서 Raspberry Pi Imager를 다운로드하세요.</li>
</ul>
<ol start="2">
<li>Imager를 사용하여 OS 설치하기:</li>
</ol>
<ul>
<li>SanDisk 32GB microSD 카드를 컴퓨터에 삽입하세요.</li>
<li>microSD 카드를 boot로 이름을 변경하세요.</li>
</ul>
<div class="content-ad"></div>
<img src="/assets/img/2024-06-23-RaspberryPiClusterwithKubernetesandAirflowConfiguringAnsible_1.png">
<ul>
<li>Raspberry Pi Imager를 열고 Raspberry Pi OS (32비트)를 선택합니다.</li>
<li>삽입된 SD 카드를 선택합니다.</li>
</ul>
<ol start="3">
<li>호스트, 사용자 이름 및 비밀번호 구성:</li>
</ol>
<ul>
<li>Pi OS의 최근 변경 사항은 SSH용 비밀번호 설정을 필요로 합니다.</li>
</ul>
<div class="content-ad"></div>
<img src="/assets/img/2024-06-23-RaspberryPiClusterwithKubernetesandAirflowConfiguringAnsible_2.png">
<ul>
<li>OS 맞춤 설정 메뉴에서 호스트 이름, 사용자 이름 및 암호 구성하세요.</li>
<li>모든 Raspberry Pi 노드의 사용자 이름을 "pi"로 설정하고 각각의 암호를 일관되게 유지하세요. 호스트 이름도 노드의 의도된 역할과 일치하도록 설정해주세요.</li>
<li>프롬프트가 나타날 때 기존 데이터를 지울 것인지 확인하세요.</li>
<li>각각의 microSD 카드에 대해 이 프로세스를 반복하세요.</li>
</ul>
<h2>Prepare microSD Cards</h2>
<ol>
<li>microSD 카드 장착:</li>
</ol>
<div class="content-ad"></div>
<ul>
<li>컴퓨터에 microSD 카드를 삽입하세요.</li>
<li>diskutil list를 사용하여 디스크 식별자(/dev/diskX)를 확인하세요.</li>
</ul>
<p><img src="/assets/img/2024-06-23-RaspberryPiClusterwithKubernetesandAirflowConfiguringAnsible_3.png" alt="이미지"></p>
<ul>
<li>/Volumes/에 카드의 부트 파티션을 마운트하세요. 다음 명령어를 사용하여 마운트하고 마운트를 확인할 수 있습니다:</li>
</ul>
<pre><code class="hljs language-js">diskutil mountDisk /dev/diskX
ls /<span class="hljs-title class_">Volumes</span>
</code></pre>
<div class="content-ad"></div>
<ol start="2">
<li>setup_node.sh 스크립트 실행</li>
</ol>
<ul>
<li>setup_node.sh에 실행 권한을 부여하세요:</li>
</ul>
<pre><code class="hljs language-js">chmod +x setup_node.<span class="hljs-property">sh</span>
</code></pre>
<ul>
<li>각 microSD 카드가 어떤 노드에 해당하는 지에 따라 스크립트를 한 번씩 실행하세요.</li>
</ul>
<div class="content-ad"></div>
<pre><code class="hljs language-js"># 마스터 노드 마이크로<span class="hljs-variable constant_">SD</span> 카드용
sudo ./setup_node.<span class="hljs-property">sh</span> master 
</code></pre>
<pre><code class="hljs language-js"># 워커 노드 마이크로<span class="hljs-variable constant_">SD</span> 카드용
sudo ./setup_node.<span class="hljs-property">sh</span> worker1 
sudo ./setup_node.<span class="hljs-property">sh</span> worker2 
sudo ./setup_node.<span class="hljs-property">sh</span> worker3
</code></pre>
<p><img src="/assets/img/2024-06-23-RaspberryPiClusterwithKubernetesandAirflowConfiguringAnsible_4.png" alt="이미지"></p>
<ol start="3">
<li>마이크로SD 카드를 추출하세요.</li>
</ol>
<div class="content-ad"></div>
<ul>
<li>스크립트가 완료되면 마이크로SD 카드를 제거해 주세요</li>
</ul>
<pre><code class="hljs language-js">diskutil unmountDisk /dev/diskX
</code></pre>
<h2>라즈베리 파이 기기에 마이크로SD 카드 삽입</h2>
<ul>
<li>각 준비된 마이크로SD 카드를 해당 라즈베리 파이 기기에 넣어주세요.</li>
<li>각 라즈베리 파이를 켜고 이더넷으로 네트워크에 연결해 주세요.</li>
</ul>
<div class="content-ad"></div>
<h1>의존성 설치</h1>
<ol>
<li>Homebrew 설치: Homebrew가 설치되어 있지 않은 경우, Homebrew를 설치하세요:</li>
</ol>
<pre><code class="hljs language-js">/bin/bash -c <span class="hljs-string">"$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)"</span>
</code></pre>
<ol start="2">
<li>Ansible 설치:</li>
</ol>
<div class="content-ad"></div>
<pre><code class="hljs language-js">brew install ansible
</code></pre>
<ol start="3">
<li>라즈베리 파이 IP 주소를 가져 오기 위해 nmap 설치:</li>
</ol>
<pre><code class="hljs language-js">brew install nmap
</code></pre>
<ol start="3">
<li>Ansible과의 SSH 인증을 위해 sshpass 설치하기:</li>
</ol>
<div class="content-ad"></div>
<pre><code class="hljs language-js">brew install sshpass
</code></pre>
<ol start="4">
<li>Ansible을 초기화합니다:</li>
</ol>
<ul>
<li>각 Raspberry Pi에 대한 Ansible 호스트 파일 및 SSH 액세스를 구성해야 합니다.</li>
<li>init_ansible.sh 스크립트를 실행해주세요.</li>
</ul>
<pre><code class="hljs language-js">chmod +x ./init_ansible.<span class="hljs-property">sh</span>
sudo ./init_ansible.<span class="hljs-property">sh</span>
</code></pre>
<div class="content-ad"></div>
<ul>
<li>이 스크립트는 Pi의 IP 주소를 동적으로 검색하여 ansible/hosts 파일에 저장합니다. 또한 각 IP 주소의 SSH 키를 ~/.ssh/known_hosts 파일에 추가합니다.</li>
</ul>
<p><img src="/assets/img/2024-06-23-RaspberryPiClusterwithKubernetesandAirflowConfiguringAnsible_5.png" alt="이미지"></p>
<ul>
<li>마지막으로, 우리가 만든 Raspberry Pi 암호를 환경 변수에 추가할 수 있습니다. 스크립트는 이미 ansible/hosts 파일이 SSH 암호를 위한 환경 변수를 참조하도록 하였습니다. 이렇게 함으로써 Ansible 명령을 실행할 때마다 암호를 입력할 필요가 없어집니다.</li>
</ul>
<pre><code class="hljs language-js"><span class="hljs-keyword">export</span> <span class="hljs-variable constant_">ANSIBLE_SSH_PASS</span>=<span class="hljs-string">'여러분의_ssh_암호_여기에'</span>
</code></pre>
<div class="content-ad"></div>
<h1>확인</h1>
<h2>모든 노드에 핑 보내기</h2>
<ul>
<li>이제 Ansible이 구성되었으므로 호스트 파일에 존재하는 모든 노드에 핑을 시도할 수 있습니다. 다음 명령어를 사용하여 디렉토리로 이동한 후 노드에 핑을 보낼 수 있습니다:</li>
</ul>
<pre><code class="hljs language-js">cd ansible
ansible all -m ping
</code></pre>
<div class="content-ad"></div>
<p>아래는 마크다운 형식으로 변경한 표입니다.</p>
<p><img src="/assets/img/2024-06-23-RaspberryPiClusterwithKubernetesandAirflowConfiguringAnsible_6.png" alt="Raspberry Pi Cluster"></p>
<p>지금까지 여러 Pi 노드를 구성하고 Ansible을 사용하여 설정 작업을 자동화하여 Raspberry Pi Cluster를 성공적으로 구축했습니다. 이러한 단계를 따라, 추가적인 사용자 정의 및 자동화를 위한 준비가 된 일관된 클러스터 환경을 만들었습니다. 각 Raspberry Pi 노드는 협력하여 작동할 수 있도록 준비되었으며, 분산 컴퓨팅 및 자동화에 대한 미래 프로젝트와 실험을 위한 길을 열었습니다.</p>
<p>이 프로젝트의 현재 상태는 GitHub에서 확인할 수 있습니다:</p>
</body>
</html>
</div></article></div></main></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"title":"라즈베리 파이 클러스터 설정 Kubernetes와 Airflow, Ansible 사용 방법","description":"","date":"2024-06-23 18:09","slug":"2024-06-23-RaspberryPiClusterwithKubernetesandAirflowConfiguringAnsible","content":"\n\n\u003cimg src=\"/assets/img/2024-06-23-RaspberryPiClusterwithKubernetesandAirflowConfiguringAnsible_0.png\" /\u003e\n\n아래는 Ansible을 Raspberry Pi 클러스터에서 작동시키기 위해 취한 단계를 요약한 것입니다. 이 프로젝트의 동기는 Kubernetes 및 Airflow를 실행하는 작은 규모이면서 효율적이고 유연한 클러스터 환경을 만드는 것입니다. 목표는 다양한 웹 스크래핑 스크립트를 자동으로 예약하고 서핑 조건을 확인하는 스크래핑을 포함한 DAG 스케줄링을 자동화하는 것입니다.\n\n시작하기 전에 필요한 하드웨어 구성 요소를 모두 준비했는지 확인해 주세요. 자세한 목록 및 설정 지침은 다음에서 확인할 수 있습니다:\n\n# 시작하기\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n## 초기화 스크립트에 접근하기 위해 Git 저장소를 복제하세요\n\n- 저장소를 복제하고 해당 폴더로 이동하세요:\n\n```js\ngit clone https://github.com/robronayne/PiClusterFlow.git\ncd PiClusterFlow\n```\n\n## microSD 카드에 Raspberry Pi OS 설치하기\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n1. Raspberry Pi Imager 다운로드하기:\n\n- 먼저 raspberrypi.org/software에서 Raspberry Pi Imager를 다운로드하세요.\n\n2. Imager를 사용하여 OS 설치하기:\n\n- SanDisk 32GB microSD 카드를 컴퓨터에 삽입하세요.\n- microSD 카드를 boot로 이름을 변경하세요.\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n\u003cimg src=\"/assets/img/2024-06-23-RaspberryPiClusterwithKubernetesandAirflowConfiguringAnsible_1.png\" /\u003e\n  \n- Raspberry Pi Imager를 열고 Raspberry Pi OS (32비트)를 선택합니다.\n- 삽입된 SD 카드를 선택합니다.\n\n3. 호스트, 사용자 이름 및 비밀번호 구성:\n\n- Pi OS의 최근 변경 사항은 SSH용 비밀번호 설정을 필요로 합니다.\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n\u003cimg src=\"/assets/img/2024-06-23-RaspberryPiClusterwithKubernetesandAirflowConfiguringAnsible_2.png\" /\u003e\n\n- OS 맞춤 설정 메뉴에서 호스트 이름, 사용자 이름 및 암호 구성하세요.\n- 모든 Raspberry Pi 노드의 사용자 이름을 \"pi\"로 설정하고 각각의 암호를 일관되게 유지하세요. 호스트 이름도 노드의 의도된 역할과 일치하도록 설정해주세요.\n- 프롬프트가 나타날 때 기존 데이터를 지울 것인지 확인하세요.\n- 각각의 microSD 카드에 대해 이 프로세스를 반복하세요.\n\n## Prepare microSD Cards\n\n1. microSD 카드 장착:\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n- 컴퓨터에 microSD 카드를 삽입하세요.\n- diskutil list를 사용하여 디스크 식별자(/dev/diskX)를 확인하세요.\n\n![이미지](/assets/img/2024-06-23-RaspberryPiClusterwithKubernetesandAirflowConfiguringAnsible_3.png)\n\n- /Volumes/에 카드의 부트 파티션을 마운트하세요. 다음 명령어를 사용하여 마운트하고 마운트를 확인할 수 있습니다:\n\n```js\ndiskutil mountDisk /dev/diskX\nls /Volumes\n```\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n2. setup_node.sh 스크립트 실행\n\n- setup_node.sh에 실행 권한을 부여하세요:\n\n```js\nchmod +x setup_node.sh\n```\n\n- 각 microSD 카드가 어떤 노드에 해당하는 지에 따라 스크립트를 한 번씩 실행하세요.\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n```js\n# 마스터 노드 마이크로SD 카드용\nsudo ./setup_node.sh master \n```\n\n```js\n# 워커 노드 마이크로SD 카드용\nsudo ./setup_node.sh worker1 \nsudo ./setup_node.sh worker2 \nsudo ./setup_node.sh worker3\n```\n\n![이미지](/assets/img/2024-06-23-RaspberryPiClusterwithKubernetesandAirflowConfiguringAnsible_4.png)\n\n3. 마이크로SD 카드를 추출하세요.\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n- 스크립트가 완료되면 마이크로SD 카드를 제거해 주세요\n\n```js\ndiskutil unmountDisk /dev/diskX\n```\n\n## 라즈베리 파이 기기에 마이크로SD 카드 삽입\n\n- 각 준비된 마이크로SD 카드를 해당 라즈베리 파이 기기에 넣어주세요.\n- 각 라즈베리 파이를 켜고 이더넷으로 네트워크에 연결해 주세요.\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n# 의존성 설치\n\n1. Homebrew 설치: Homebrew가 설치되어 있지 않은 경우, Homebrew를 설치하세요:\n\n```js\n/bin/bash -c \"$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)\"\n```\n\n2. Ansible 설치:\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n```js\nbrew install ansible\n```\n\n3. 라즈베리 파이 IP 주소를 가져 오기 위해 nmap 설치:\n\n```js\nbrew install nmap\n```\n\n3. Ansible과의 SSH 인증을 위해 sshpass 설치하기:\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n```js\nbrew install sshpass\n```\n\n4. Ansible을 초기화합니다:\n\n- 각 Raspberry Pi에 대한 Ansible 호스트 파일 및 SSH 액세스를 구성해야 합니다.\n- init_ansible.sh 스크립트를 실행해주세요.\n\n```js\nchmod +x ./init_ansible.sh\nsudo ./init_ansible.sh\n```\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n- 이 스크립트는 Pi의 IP 주소를 동적으로 검색하여 ansible/hosts 파일에 저장합니다. 또한 각 IP 주소의 SSH 키를 ~/.ssh/known_hosts 파일에 추가합니다.\n\n![이미지](/assets/img/2024-06-23-RaspberryPiClusterwithKubernetesandAirflowConfiguringAnsible_5.png)\n\n- 마지막으로, 우리가 만든 Raspberry Pi 암호를 환경 변수에 추가할 수 있습니다. 스크립트는 이미 ansible/hosts 파일이 SSH 암호를 위한 환경 변수를 참조하도록 하였습니다. 이렇게 함으로써 Ansible 명령을 실행할 때마다 암호를 입력할 필요가 없어집니다.\n\n```js\nexport ANSIBLE_SSH_PASS='여러분의_ssh_암호_여기에'\n```\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n# 확인\n\n## 모든 노드에 핑 보내기\n\n- 이제 Ansible이 구성되었으므로 호스트 파일에 존재하는 모든 노드에 핑을 시도할 수 있습니다. 다음 명령어를 사용하여 디렉토리로 이동한 후 노드에 핑을 보낼 수 있습니다:\n\n```js\ncd ansible\nansible all -m ping\n```\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n\n아래는 마크다운 형식으로 변경한 표입니다.\n\n\n![Raspberry Pi Cluster](/assets/img/2024-06-23-RaspberryPiClusterwithKubernetesandAirflowConfiguringAnsible_6.png)\n\n지금까지 여러 Pi 노드를 구성하고 Ansible을 사용하여 설정 작업을 자동화하여 Raspberry Pi Cluster를 성공적으로 구축했습니다. 이러한 단계를 따라, 추가적인 사용자 정의 및 자동화를 위한 준비가 된 일관된 클러스터 환경을 만들었습니다. 각 Raspberry Pi 노드는 협력하여 작동할 수 있도록 준비되었으며, 분산 컴퓨팅 및 자동화에 대한 미래 프로젝트와 실험을 위한 길을 열었습니다.\n\n이 프로젝트의 현재 상태는 GitHub에서 확인할 수 있습니다:\n","ogImage":{"url":"/assets/img/2024-06-23-RaspberryPiClusterwithKubernetesandAirflowConfiguringAnsible_0.png"},"coverImage":"/assets/img/2024-06-23-RaspberryPiClusterwithKubernetesandAirflowConfiguringAnsible_0.png","tag":["Tech"],"readingTime":5},"content":"\u003c!doctype html\u003e\n\u003chtml lang=\"en\"\u003e\n\u003chead\u003e\n\u003cmeta charset=\"utf-8\"\u003e\n\u003cmeta content=\"width=device-width, initial-scale=1\" name=\"viewport\"\u003e\n\u003c/head\u003e\n\u003cbody\u003e\n\u003cimg src=\"/assets/img/2024-06-23-RaspberryPiClusterwithKubernetesandAirflowConfiguringAnsible_0.png\"\u003e\n\u003cp\u003e아래는 Ansible을 Raspberry Pi 클러스터에서 작동시키기 위해 취한 단계를 요약한 것입니다. 이 프로젝트의 동기는 Kubernetes 및 Airflow를 실행하는 작은 규모이면서 효율적이고 유연한 클러스터 환경을 만드는 것입니다. 목표는 다양한 웹 스크래핑 스크립트를 자동으로 예약하고 서핑 조건을 확인하는 스크래핑을 포함한 DAG 스케줄링을 자동화하는 것입니다.\u003c/p\u003e\n\u003cp\u003e시작하기 전에 필요한 하드웨어 구성 요소를 모두 준비했는지 확인해 주세요. 자세한 목록 및 설정 지침은 다음에서 확인할 수 있습니다:\u003c/p\u003e\n\u003ch1\u003e시작하기\u003c/h1\u003e\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\u003ch2\u003e초기화 스크립트에 접근하기 위해 Git 저장소를 복제하세요\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003e저장소를 복제하고 해당 폴더로 이동하세요:\u003c/li\u003e\n\u003c/ul\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003egit clone \u003cspan class=\"hljs-attr\"\u003ehttps\u003c/span\u003e:\u003cspan class=\"hljs-comment\"\u003e//github.com/robronayne/PiClusterFlow.git\u003c/span\u003e\ncd \u003cspan class=\"hljs-title class_\"\u003ePiClusterFlow\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch2\u003emicroSD 카드에 Raspberry Pi OS 설치하기\u003c/h2\u003e\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\u003col\u003e\n\u003cli\u003eRaspberry Pi Imager 다운로드하기:\u003c/li\u003e\n\u003c/ol\u003e\n\u003cul\u003e\n\u003cli\u003e먼저 raspberrypi.org/software에서 Raspberry Pi Imager를 다운로드하세요.\u003c/li\u003e\n\u003c/ul\u003e\n\u003col start=\"2\"\u003e\n\u003cli\u003eImager를 사용하여 OS 설치하기:\u003c/li\u003e\n\u003c/ol\u003e\n\u003cul\u003e\n\u003cli\u003eSanDisk 32GB microSD 카드를 컴퓨터에 삽입하세요.\u003c/li\u003e\n\u003cli\u003emicroSD 카드를 boot로 이름을 변경하세요.\u003c/li\u003e\n\u003c/ul\u003e\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\u003cimg src=\"/assets/img/2024-06-23-RaspberryPiClusterwithKubernetesandAirflowConfiguringAnsible_1.png\"\u003e\n\u003cul\u003e\n\u003cli\u003eRaspberry Pi Imager를 열고 Raspberry Pi OS (32비트)를 선택합니다.\u003c/li\u003e\n\u003cli\u003e삽입된 SD 카드를 선택합니다.\u003c/li\u003e\n\u003c/ul\u003e\n\u003col start=\"3\"\u003e\n\u003cli\u003e호스트, 사용자 이름 및 비밀번호 구성:\u003c/li\u003e\n\u003c/ol\u003e\n\u003cul\u003e\n\u003cli\u003ePi OS의 최근 변경 사항은 SSH용 비밀번호 설정을 필요로 합니다.\u003c/li\u003e\n\u003c/ul\u003e\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\u003cimg src=\"/assets/img/2024-06-23-RaspberryPiClusterwithKubernetesandAirflowConfiguringAnsible_2.png\"\u003e\n\u003cul\u003e\n\u003cli\u003eOS 맞춤 설정 메뉴에서 호스트 이름, 사용자 이름 및 암호 구성하세요.\u003c/li\u003e\n\u003cli\u003e모든 Raspberry Pi 노드의 사용자 이름을 \"pi\"로 설정하고 각각의 암호를 일관되게 유지하세요. 호스트 이름도 노드의 의도된 역할과 일치하도록 설정해주세요.\u003c/li\u003e\n\u003cli\u003e프롬프트가 나타날 때 기존 데이터를 지울 것인지 확인하세요.\u003c/li\u003e\n\u003cli\u003e각각의 microSD 카드에 대해 이 프로세스를 반복하세요.\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2\u003ePrepare microSD Cards\u003c/h2\u003e\n\u003col\u003e\n\u003cli\u003emicroSD 카드 장착:\u003c/li\u003e\n\u003c/ol\u003e\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\u003cul\u003e\n\u003cli\u003e컴퓨터에 microSD 카드를 삽입하세요.\u003c/li\u003e\n\u003cli\u003ediskutil list를 사용하여 디스크 식별자(/dev/diskX)를 확인하세요.\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e\u003cimg src=\"/assets/img/2024-06-23-RaspberryPiClusterwithKubernetesandAirflowConfiguringAnsible_3.png\" alt=\"이미지\"\u003e\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e/Volumes/에 카드의 부트 파티션을 마운트하세요. 다음 명령어를 사용하여 마운트하고 마운트를 확인할 수 있습니다:\u003c/li\u003e\n\u003c/ul\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003ediskutil mountDisk /dev/diskX\nls /\u003cspan class=\"hljs-title class_\"\u003eVolumes\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\u003col start=\"2\"\u003e\n\u003cli\u003esetup_node.sh 스크립트 실행\u003c/li\u003e\n\u003c/ol\u003e\n\u003cul\u003e\n\u003cli\u003esetup_node.sh에 실행 권한을 부여하세요:\u003c/li\u003e\n\u003c/ul\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003echmod +x setup_node.\u003cspan class=\"hljs-property\"\u003esh\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cul\u003e\n\u003cli\u003e각 microSD 카드가 어떤 노드에 해당하는 지에 따라 스크립트를 한 번씩 실행하세요.\u003c/li\u003e\n\u003c/ul\u003e\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e# 마스터 노드 마이크로\u003cspan class=\"hljs-variable constant_\"\u003eSD\u003c/span\u003e 카드용\nsudo ./setup_node.\u003cspan class=\"hljs-property\"\u003esh\u003c/span\u003e master \n\u003c/code\u003e\u003c/pre\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e# 워커 노드 마이크로\u003cspan class=\"hljs-variable constant_\"\u003eSD\u003c/span\u003e 카드용\nsudo ./setup_node.\u003cspan class=\"hljs-property\"\u003esh\u003c/span\u003e worker1 \nsudo ./setup_node.\u003cspan class=\"hljs-property\"\u003esh\u003c/span\u003e worker2 \nsudo ./setup_node.\u003cspan class=\"hljs-property\"\u003esh\u003c/span\u003e worker3\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e\u003cimg src=\"/assets/img/2024-06-23-RaspberryPiClusterwithKubernetesandAirflowConfiguringAnsible_4.png\" alt=\"이미지\"\u003e\u003c/p\u003e\n\u003col start=\"3\"\u003e\n\u003cli\u003e마이크로SD 카드를 추출하세요.\u003c/li\u003e\n\u003c/ol\u003e\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\u003cul\u003e\n\u003cli\u003e스크립트가 완료되면 마이크로SD 카드를 제거해 주세요\u003c/li\u003e\n\u003c/ul\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003ediskutil unmountDisk /dev/diskX\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch2\u003e라즈베리 파이 기기에 마이크로SD 카드 삽입\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003e각 준비된 마이크로SD 카드를 해당 라즈베리 파이 기기에 넣어주세요.\u003c/li\u003e\n\u003cli\u003e각 라즈베리 파이를 켜고 이더넷으로 네트워크에 연결해 주세요.\u003c/li\u003e\n\u003c/ul\u003e\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\u003ch1\u003e의존성 설치\u003c/h1\u003e\n\u003col\u003e\n\u003cli\u003eHomebrew 설치: Homebrew가 설치되어 있지 않은 경우, Homebrew를 설치하세요:\u003c/li\u003e\n\u003c/ol\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e/bin/bash -c \u003cspan class=\"hljs-string\"\u003e\"$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)\"\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003col start=\"2\"\u003e\n\u003cli\u003eAnsible 설치:\u003c/li\u003e\n\u003c/ol\u003e\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003ebrew install ansible\n\u003c/code\u003e\u003c/pre\u003e\n\u003col start=\"3\"\u003e\n\u003cli\u003e라즈베리 파이 IP 주소를 가져 오기 위해 nmap 설치:\u003c/li\u003e\n\u003c/ol\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003ebrew install nmap\n\u003c/code\u003e\u003c/pre\u003e\n\u003col start=\"3\"\u003e\n\u003cli\u003eAnsible과의 SSH 인증을 위해 sshpass 설치하기:\u003c/li\u003e\n\u003c/ol\u003e\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003ebrew install sshpass\n\u003c/code\u003e\u003c/pre\u003e\n\u003col start=\"4\"\u003e\n\u003cli\u003eAnsible을 초기화합니다:\u003c/li\u003e\n\u003c/ol\u003e\n\u003cul\u003e\n\u003cli\u003e각 Raspberry Pi에 대한 Ansible 호스트 파일 및 SSH 액세스를 구성해야 합니다.\u003c/li\u003e\n\u003cli\u003einit_ansible.sh 스크립트를 실행해주세요.\u003c/li\u003e\n\u003c/ul\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003echmod +x ./init_ansible.\u003cspan class=\"hljs-property\"\u003esh\u003c/span\u003e\nsudo ./init_ansible.\u003cspan class=\"hljs-property\"\u003esh\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\u003cul\u003e\n\u003cli\u003e이 스크립트는 Pi의 IP 주소를 동적으로 검색하여 ansible/hosts 파일에 저장합니다. 또한 각 IP 주소의 SSH 키를 ~/.ssh/known_hosts 파일에 추가합니다.\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e\u003cimg src=\"/assets/img/2024-06-23-RaspberryPiClusterwithKubernetesandAirflowConfiguringAnsible_5.png\" alt=\"이미지\"\u003e\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e마지막으로, 우리가 만든 Raspberry Pi 암호를 환경 변수에 추가할 수 있습니다. 스크립트는 이미 ansible/hosts 파일이 SSH 암호를 위한 환경 변수를 참조하도록 하였습니다. 이렇게 함으로써 Ansible 명령을 실행할 때마다 암호를 입력할 필요가 없어집니다.\u003c/li\u003e\n\u003c/ul\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-keyword\"\u003eexport\u003c/span\u003e \u003cspan class=\"hljs-variable constant_\"\u003eANSIBLE_SSH_PASS\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e'여러분의_ssh_암호_여기에'\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\u003ch1\u003e확인\u003c/h1\u003e\n\u003ch2\u003e모든 노드에 핑 보내기\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003e이제 Ansible이 구성되었으므로 호스트 파일에 존재하는 모든 노드에 핑을 시도할 수 있습니다. 다음 명령어를 사용하여 디렉토리로 이동한 후 노드에 핑을 보낼 수 있습니다:\u003c/li\u003e\n\u003c/ul\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003ecd ansible\nansible all -m ping\n\u003c/code\u003e\u003c/pre\u003e\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\u003cp\u003e아래는 마크다운 형식으로 변경한 표입니다.\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/assets/img/2024-06-23-RaspberryPiClusterwithKubernetesandAirflowConfiguringAnsible_6.png\" alt=\"Raspberry Pi Cluster\"\u003e\u003c/p\u003e\n\u003cp\u003e지금까지 여러 Pi 노드를 구성하고 Ansible을 사용하여 설정 작업을 자동화하여 Raspberry Pi Cluster를 성공적으로 구축했습니다. 이러한 단계를 따라, 추가적인 사용자 정의 및 자동화를 위한 준비가 된 일관된 클러스터 환경을 만들었습니다. 각 Raspberry Pi 노드는 협력하여 작동할 수 있도록 준비되었으며, 분산 컴퓨팅 및 자동화에 대한 미래 프로젝트와 실험을 위한 길을 열었습니다.\u003c/p\u003e\n\u003cp\u003e이 프로젝트의 현재 상태는 GitHub에서 확인할 수 있습니다:\u003c/p\u003e\n\u003c/body\u003e\n\u003c/html\u003e\n"},"__N_SSG":true},"page":"/post/[slug]","query":{"slug":"2024-06-23-RaspberryPiClusterwithKubernetesandAirflowConfiguringAnsible"},"buildId":"8coAiP0lmiEK5aH6nkQkj","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>