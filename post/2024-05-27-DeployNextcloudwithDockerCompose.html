<!DOCTYPE html><html lang="ko"><head><meta charSet="utf-8"/><title>도커 컴포즈로 Nextcloud를 배포하기 | itposting</title><meta name="description" content=""/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><meta property="og:url" content="https://itposting.github.io///post/2024-05-27-DeployNextcloudwithDockerCompose" data-gatsby-head="true"/><meta property="og:type" content="website" data-gatsby-head="true"/><meta property="og:site_name" content="도커 컴포즈로 Nextcloud를 배포하기 | itposting" data-gatsby-head="true"/><meta property="og:title" content="도커 컴포즈로 Nextcloud를 배포하기 | itposting" data-gatsby-head="true"/><meta property="og:description" content="" data-gatsby-head="true"/><meta property="og:image" content="/assets/img/2024-05-27-DeployNextcloudwithDockerCompose_0.png" data-gatsby-head="true"/><meta property="og:locale" content="en_US" data-gatsby-head="true"/><meta name="twitter:card" content="summary_large_image" data-gatsby-head="true"/><meta property="twitter:domain" content="https://itposting.github.io/" data-gatsby-head="true"/><meta property="twitter:url" content="https://itposting.github.io///post/2024-05-27-DeployNextcloudwithDockerCompose" data-gatsby-head="true"/><meta name="twitter:title" content="도커 컴포즈로 Nextcloud를 배포하기 | itposting" data-gatsby-head="true"/><meta name="twitter:description" content="" data-gatsby-head="true"/><meta name="twitter:image" content="/assets/img/2024-05-27-DeployNextcloudwithDockerCompose_0.png" data-gatsby-head="true"/><meta name="twitter:data1" content="Dev | itposting" data-gatsby-head="true"/><meta name="article:published_time" content="2024-05-27 13:46" data-gatsby-head="true"/><meta name="next-head-count" content="19"/><meta name="google-site-verification" content="a-yehRo3k3xv7fg6LqRaE8jlE42e5wP2bDE_2F849O4"/><link rel="stylesheet" href="/favicons/favicon.ico"/><link rel="icon" type="image/png" sizes="16x16" href="/assets/favicons/favicon-16x16.png"/><link rel="icon" type="image/png" sizes="32x32" href="/assets/favicons/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="96x96" href="/assets/favicons/favicon-96x96.png"/><link rel="icon" href="/favicons/apple-icon-180x180.png"/><link rel="apple-touch-icon" href="/favicons/apple-icon-180x180.png"/><link rel="apple-touch-startup-image" href="/startup.png"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="black"/><meta name="msapplication-config" content="/favicons/browserconfig.xml"/><script async="" src="https://www.googletagmanager.com/gtag/js?id=G-23YXDLKDCL"></script><script>window.dataLayer = window.dataLayer || [];
            function gtag(){dataLayer.push(arguments);}
            gtag('js', new Date());
          
            gtag('config', 'G-23YXDLKDCL');</script><link rel="preload" href="/_next/static/css/6e57edcf9f2ce551.css" as="style"/><link rel="stylesheet" href="/_next/static/css/6e57edcf9f2ce551.css" data-n-g=""/><link rel="preload" href="/_next/static/css/b8ef307c9aee1e34.css" as="style"/><link rel="stylesheet" href="/_next/static/css/b8ef307c9aee1e34.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/_next/static/chunks/webpack-ee6df16fdc6dae4d.js" defer=""></script><script src="/_next/static/chunks/framework-46611630e39cfdeb.js" defer=""></script><script src="/_next/static/chunks/main-cf4a52eec9a970a0.js" defer=""></script><script src="/_next/static/chunks/pages/_app-6fae11262ee5c69b.js" defer=""></script><script src="/_next/static/chunks/75fc9c18-4a646156c659a948.js" defer=""></script><script src="/_next/static/chunks/348-d11c34b645b13f5b.js" defer=""></script><script src="/_next/static/chunks/162-4172e84c8e2aa747.js" defer=""></script><script src="/_next/static/chunks/pages/post/%5Bslug%5D-0fd008072af5a644.js" defer=""></script><script src="/_next/static/FH3Qr-mLAesqA0X5IFRQr/_buildManifest.js" defer=""></script><script src="/_next/static/FH3Qr-mLAesqA0X5IFRQr/_ssgManifest.js" defer=""></script></head><body><div id="__next"><header class="Header_header__Z8PUO"><div class="Header_inner__tfr0u"><strong class="Header_title__Otn70"><a href="/">IT Posting</a></strong><nav class="Header_nav_area__6KVpk"><a class="nav_item" href="/posts/1">Posts</a></nav></div></header><main class="posts_container__NyRU3"><div class="posts_inner__i3n_i"><h1 class="posts_post_title__EbxNx">도커 컴포즈로 Nextcloud를 배포하기</h1><div class="posts_meta__cR7lu"><div class="posts_profile_wrap__mslMl"><div class="posts_profile_image_wrap__kPikV"><img alt="도커 컴포즈로 Nextcloud를 배포하기" loading="lazy" width="44" height="44" decoding="async" data-nimg="1" class="profile" style="color:transparent" src="/favicons/apple-icon-114x114.png"/></div><div class="posts_textarea__w_iKT"><span class="writer">IT Posting</span><span class="posts_info__5KJdN"><span class="posts_date__ctqHI">Posted On May 27, 2024</span><span class="posts_reading_time__f7YPP">8<!-- --> min read</span></span></div></div><img alt="" loading="lazy" width="50" height="50" decoding="async" data-nimg="1" class="posts_view_badge__tcbfm" style="color:transparent" src="https://hits.seeyoufarm.com/api/count/incr/badge.svg?url=https%3A%2F%2Fallround-coder.github.io/post/2024-05-27-DeployNextcloudwithDockerCompose&amp;count_bg=%2379C83D&amp;title_bg=%23555555&amp;icon=&amp;icon_color=%23E7E7E7&amp;title=views&amp;edge_flat=false"/></div><article class="posts_post_content__n_L6j"><div><!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta content="width=device-width, initial-scale=1" name="viewport">
</head>
<body>
<p>DIY, 실험, 그리고 학습을 즐기며, Google Drive와 One Drive를 대체하기 위해 Nextcloud 서버를 설정했어요. 몇 년 동안 제 Nextcloud 인스턴스는 백업된 파일, 연락처, 캘린더, 노트 등이 모두 모여 있는 집이 되었고, Collabora 덕분에 서버에는 사무실 스위트도 갖췄네요.</p>
<p>Nextcloud는 여러 서비스에 대한 멋진 오픈 소스 대안일 수 있어요.</p>
<p>좋은 점이든 나쁜 점이든, 저는 도커 컨테이너를 사용해 홈 서버에 Nextcloud를 배포하기로 결정했어요. 도커 경험을 쌓고자 하거나 Nextcloud 배포를 위한 도커 컴포즈 파일을 설정하는 방법을 찾고 있다면, 여기가 바로 옳은 장소에요.</p>
<p>다음은 docker-compose.yml입니다.</p>
<pre><code class="hljs language-yaml"><span class="hljs-meta">---</span>
<span class="hljs-attr">version:</span> <span class="hljs-string">'3'</span>

<span class="hljs-attr">services:</span>
  <span class="hljs-attr">nextcloud:</span>
    <span class="hljs-attr">image:</span> <span class="hljs-string">nextcloud</span>
    <span class="hljs-attr">container_name:</span> <span class="hljs-string">nextcloud</span>
    <span class="hljs-attr">restart:</span> <span class="hljs-string">unless-stopped</span>
    <span class="hljs-attr">networks:</span> 
      <span class="hljs-bullet">-</span> <span class="hljs-string">cloud</span>
    <span class="hljs-attr">depends_on:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">nextclouddb</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">redis</span>
    <span class="hljs-attr">ports:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-number">8081</span><span class="hljs-string">:80</span>
    <span class="hljs-attr">volumes:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">./html:/var/www/html</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">./custom_apps:/var/www/html/custom_apps</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">./config:/var/www/html/config</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">./data:/var/www/html/data</span>
    <span class="hljs-attr">environment:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">PUID=1000</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">PGID=1000</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">TZ=America/Los_Angeles</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">MYSQL_DATABASE=nextcloud</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">MYSQL_USER=nextcloud</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">MYSQL_PASSWORD=dbpassword</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">MYSQL_HOST=nextclouddb</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">REDIS_HOST=redis</span>

  <span class="hljs-attr">nextclouddb:</span>
    <span class="hljs-attr">image:</span> <span class="hljs-string">mariadb</span>
    <span class="hljs-attr">container_name:</span> <span class="hljs-string">nextcloud-db</span>
    <span class="hljs-attr">restart:</span> <span class="hljs-string">unless-stopped</span>
    <span class="hljs-attr">command:</span> <span class="hljs-string">--transaction-isolation=READ-COMMITTED</span> <span class="hljs-string">--binlog-format=ROW</span>
    <span class="hljs-attr">networks:</span> 
      <span class="hljs-bullet">-</span> <span class="hljs-string">cloud</span>
    <span class="hljs-attr">volumes:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">./nextclouddb:/var/lib/mysql</span>
    <span class="hljs-attr">environment:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">PUID=1000</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">PGID=1000</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">TZ=America/Los_Angeles</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">MYSQL_RANDOM_ROOT_PASSWORD=true</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">MYSQL_PASSWORD=dbpassword</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">MYSQL_DATABASE=nextcloud</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">MYSQL_USER=nextcloud</span>
      
  <span class="hljs-attr">collabora:</span>
    <span class="hljs-attr">image:</span> <span class="hljs-string">collabora/code</span>
    <span class="hljs-attr">container_name:</span> <span class="hljs-string">collabora</span>
    <span class="hljs-attr">restart:</span> <span class="hljs-string">unless-stopped</span>
    <span class="hljs-attr">networks:</span> 
      <span class="hljs-bullet">-</span> <span class="hljs-string">cloud</span>
    <span class="hljs-attr">environment:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">PUID=1000</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">PGID=1000</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">TZ=America/Los_Angeles</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">password=password</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">username=nextcloud</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">domain=example.com</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">extra_params=--o:ssl.enable=true</span>
    <span class="hljs-attr">ports:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-number">9980</span><span class="hljs-string">:9980</span>

  <span class="hljs-attr">redis:</span>
    <span class="hljs-attr">image:</span> <span class="hljs-string">redis:alpine</span>
    <span class="hljs-attr">container_name:</span> <span class="hljs-string">redis</span>
    <span class="hljs-attr">volumes:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">./redis:/data</span>  
    <span class="hljs-attr">networks:</span> 
      <span class="hljs-bullet">-</span> <span class="hljs-string">cloud</span>
  
  <span class="hljs-attr">nginx-proxy:</span>
    <span class="hljs-attr">image:</span> <span class="hljs-string">'jc21/nginx-proxy-manager:latest'</span>
    <span class="hljs-attr">container_name:</span> <span class="hljs-string">nginx-proxy</span>
    <span class="hljs-attr">environment:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">PUID=1000</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">PGID=1000</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">TZ=America/Los_Angeles</span>
    <span class="hljs-attr">restart:</span> <span class="hljs-string">unless-stopped</span>
    <span class="hljs-attr">ports:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">'80:80'</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">'81:81'</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">'443:443'</span>
    <span class="hljs-attr">volumes:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">./data:/data</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">./letsencrypt:/etc/letsencrypt</span>

<span class="hljs-attr">networks:</span>
  <span class="hljs-attr">cloud:</span>
    <span class="hljs-attr">name:</span> <span class="hljs-string">cloud</span>
    <span class="hljs-attr">driver:</span> <span class="hljs-string">bridge</span>
</code></pre>
<p>알겠어요. 이제 한 번 살펴볼게요.</p>
<p>이 Docker Compose 파일은 5개의 컨테이너를 배포합니다. 그들은 다음과 같습니다:</p>
<ul>
<li>Nextcloud</li>
<li>Nextcloud에 필요한 MySQL 데이터베이스</li>
<li>Collabora - 구글 문서와 유사한 멋진 오픈 소스 오피스 스위트입니다. Collabora Office에는 모바일 앱도 있습니다.</li>
<li>Redis - 메모리 캐싱입니다. 중요한 파일을 다음 클라우드에 의존할 계획이라면 Redis를 설정하는 것을 강력히 권장합니다.</li>
<li>Nginx Proxy Manager - 서버로 들어오는 요청을 처리하는 리버스 프록시 매니저입니다.</li>
</ul>
<h2>도커 컴포즈</h2>
<p>각 줄이 하는 일에 대한 간단한 설명.</p>
<p>Nextcloud:</p>
<pre><code class="hljs language-js"><span class="hljs-attr">nextcloud</span>:
    <span class="hljs-attr">image</span>: nextcloud # 사용할 이미지입니다. 공식 <span class="hljs-title class_">Nextcloud</span> 도커 이미지
    <span class="hljs-attr">container_name</span>: nextcloud # 컨테이너의 이름입니다. 식별하는 데 도움이 됩니다
    <span class="hljs-attr">restart</span>: unless-stopped # 컨테이너가 충돌하는 등의 문제가 발생하면 다시 시작되도록 설정
    <span class="hljs-attr">networks</span>: # 모든 컨테이너를 <span class="hljs-string">"cloud"</span> 네트워크를 통해 연결합니다
      - cloud
    <span class="hljs-attr">depends_on</span>: # <span class="hljs-title class_">Nextcloud</span>를 시작하기 전에 데이터베이스와 레디스 컨테이너가 준비될 때까지 기다립니다
      - nextclouddb 
      - redis
    <span class="hljs-attr">ports</span>: # 서버에 여러 웹 서비스가 있다면 포트를 변경해야 합니다. 저는 <span class="hljs-title class_">Nextcloud</span>를 포트 <span class="hljs-number">80</span>에서 <span class="hljs-number">8081</span>로 연결하고 있습니다
      - <span class="hljs-number">8081</span>:<span class="hljs-number">80</span>
    <span class="hljs-attr">volumes</span>: # 이 부분은 중요합니다. 컨테이너 내의 파일 디렉토리를 실제 컴퓨터의 디렉토리에 매핑합니다
      - ./<span class="hljs-attr">html</span>:<span class="hljs-regexp">/var/</span>www/html # 컨테이너 내의 /<span class="hljs-keyword">var</span>/www/html 디렉토리를 docker-compose.<span class="hljs-property">yml</span> 파일이 있는 폴더 내의 html 폴더에 매핑합니다
      - ./<span class="hljs-attr">custom_apps</span>:<span class="hljs-regexp">/var/</span>www/html/custom_apps # 이러한 볼륨을 사용하면 컨테이너 내의 파일에 쉽게 액세스할 수 있습니다
      - ./<span class="hljs-attr">config</span>:<span class="hljs-regexp">/var/</span>www/html/config
      - ./<span class="hljs-attr">data</span>:<span class="hljs-regexp">/var/</span>www/html/data
    <span class="hljs-attr">environment</span>: # 환경 변수 설정
      - <span class="hljs-variable constant_">PUID</span>=<span class="hljs-number">1000</span> # 사용자 <span class="hljs-variable constant_">ID</span>입니다. 아마도 둘 다 <span class="hljs-number">1000</span>이어야 합니다. 이를 잘못 설정하면 파일 권한 문제가 발생할 수 있습니다
      - <span class="hljs-variable constant_">PGID</span>=<span class="hljs-number">1000</span> # 사용자 <span class="hljs-variable constant_">ID</span>를 설정하세요.
      - <span class="hljs-variable constant_">TZ</span>=<span class="hljs-title class_">America</span>/<span class="hljs-title class_">Los</span>_Angeles # 사용하는 시간대를 설정하세요
      - <span class="hljs-variable constant_">MYSQL_DATABASE</span>=nextcloud # 다음 섹션에서 설정할 데이터베이스 정보입니다
      - <span class="hljs-variable constant_">MYSQL_USER</span>=nextcloud
      - <span class="hljs-variable constant_">MYSQL_PASSWORD</span>=dbpassword
      - <span class="hljs-variable constant_">MYSQL_HOST</span>=nextclouddb
      - <span class="hljs-variable constant_">REDIS_HOST</span>=redis # 사용할 <span class="hljs-title class_">Redis</span> 컨테이너
</code></pre>
<p>Nextcloud 데이터베이스:</p>
<pre><code class="hljs language-yaml"><span class="hljs-attr">nextclouddb:</span>
    <span class="hljs-attr">image:</span> <span class="hljs-string">mariadb</span> <span class="hljs-comment"># 공식 mariadb 이미지</span>
    <span class="hljs-attr">container_name:</span> <span class="hljs-string">nextcloud-db</span> 
    <span class="hljs-attr">restart:</span> <span class="hljs-string">unless-stopped</span> 
    <span class="hljs-attr">command:</span> <span class="hljs-string">--transaction-isolation=READ-COMMITTED</span> <span class="hljs-string">--binlog-format=ROW</span> <span class="hljs-comment"># 정말 기억이 나지 않아요. 알고 계시면 알려주세요.</span>
    <span class="hljs-attr">networks:</span> 
      <span class="hljs-bullet">-</span> <span class="hljs-string">cloud</span>
    <span class="hljs-attr">volumes:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">./nextclouddb:/var/lib/mysql</span>
    <span class="hljs-attr">environment:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">PUID=1000</span> <span class="hljs-comment"># 다른 컨테이너와 동일해야 함</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">PGID=1000</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">TZ=America/Los_Angeles</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">MYSQL_RANDOM_ROOT_PASSWORD=true</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">MYSQL_PASSWORD=dbpassword</span> <span class="hljs-comment"># Nextcloud 부분에 입력한 정보와 같아야 함</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">MYSQL_DATABASE=nextcloud</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">MYSQL_USER=nextcloud</span>
</code></pre>
<p>Collabora (선택 사항, 하지만 정말 멋짐):</p>
<pre><code class="hljs language-yaml"><span class="hljs-attr">collabora:</span>
    <span class="hljs-attr">image:</span> <span class="hljs-string">collabora/code:latest</span>
    <span class="hljs-attr">container_name:</span> <span class="hljs-string">collabora</span>
    <span class="hljs-attr">restart:</span> <span class="hljs-string">unless-stopped</span>
    <span class="hljs-attr">networks:</span> 
      <span class="hljs-bullet">-</span> <span class="hljs-string">cloud</span>
    <span class="hljs-attr">environment:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">PUID=1000</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">PGID=1000</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">TZ=America/Los_Angeles</span> <span class="hljs-comment"># 다른 것과 동일해야 함</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">password=password</span> 
      <span class="hljs-bullet">-</span> <span class="hljs-string">username=nextcloud</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">domain=example.com</span> <span class="hljs-comment"># Nextcloud가 있는 도메인</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">extra_params=--o:ssl.enable=true</span> <span class="hljs-comment"># SSL을 사용하는 경우에 사용합니다. 꼭 사용해야 합니다.</span>
    <span class="hljs-attr">ports:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-number">9980</span><span class="hljs-string">:9980</span>
</code></pre>
<p>Redis (선택 사항이지만, 진지하게, 추가하세요. 파일 잠금 문제가 나타날 수 있으며 Redis가 이를 방지해줄 것입니다):</p>
<pre><code class="hljs language-js"><span class="hljs-attr">redis</span>:
    <span class="hljs-attr">image</span>: <span class="hljs-attr">redis</span>:alpine
    <span class="hljs-attr">container_name</span>: redis
    <span class="hljs-attr">volumes</span>:
      - ./<span class="hljs-attr">redis</span>:/data  
    <span class="hljs-attr">networks</span>: 
      - cloud
</code></pre>
<p>Nginx Proxy Manager:</p>
<pre><code class="hljs language-js">nginx-<span class="hljs-attr">proxy</span>:
    <span class="hljs-attr">image</span>: <span class="hljs-string">'jc21/nginx-proxy-manager:latest'</span>
    <span class="hljs-attr">container_name</span>: nginx-proxy
    <span class="hljs-attr">environment</span>:
      - <span class="hljs-variable constant_">PUID</span>=<span class="hljs-number">1000</span>
      - <span class="hljs-variable constant_">PGID</span>=<span class="hljs-number">1000</span>
      - <span class="hljs-variable constant_">TZ</span>=<span class="hljs-title class_">America</span>/<span class="hljs-title class_">Los</span>_Angeles
    <span class="hljs-attr">restart</span>: unless-stopped
    <span class="hljs-attr">ports</span>:
      - <span class="hljs-string">'80:80'</span>
      - <span class="hljs-string">'81:81'</span>
      - <span class="hljs-string">'443:443'</span>
    <span class="hljs-attr">volumes</span>:
      - ./<span class="hljs-attr">data</span>:/data
      - ./<span class="hljs-attr">letsencrypt</span>:<span class="hljs-regexp">/etc/</span>letsencrypt
</code></pre>
<p>Nginx Proxy Manager는 서버로 들어오는 트래픽을 Nextcloud로 전달하는 멋진 프로그램이에요. 새 호스트를 추가해보세요.</p>
<p>세부 정보 패널에 도메인 이름을 입력해주세요.</p>
<p>Scheme = http, Forward Hostname = 이용 중인 기기의 로컬 IP 주소(예: 192.168.1.35), 전달할 포트 = 80.</p>
<p>자산 캐시, 일반적인 공격 차단, 웹소켓 지원은 모두 켜두시는 게 좋아요.</p>
<p>"맞춤 위치" 탭에서 caldav와 carddav를 활성화하여 캘린더와 연락처에 대한 원격 액세스를 허용할 예정입니다.</p>
<p>위치 1:</p>
<ul>
<li>위치 = /.well-known/caldav</li>
<li>스킴 = html</li>
<li>전방 호스트 이름 = <code>로컬 IP</code>/ remote.php/dav</li>
<li>전방 포트 80</li>
</ul>
<p>위치 2:</p>
<ul>
<li>위치 = /.well-known/carddav</li>
<li>scheme = html</li>
<li>전달 호스트 이름 = <code>로컬 IP</code>/ remote.php/dav</li>
<li>전달 포트 80</li>
</ul>
<h2>추가 구성</h2>
<p>이제 Nextcloud를 사용자 정의 도메인과 함께 사용하도록 설정하는 경우 config.php 파일을 열어 신뢰할 수있는 도메인을 사용자의 도메인으로 변경해야합니다.</p>
<p>Nextcloud를 네트워크에서 액세스하려는 경우 Nextcloud의 로컬 IP 주소를 추가하는 것이 유용할 수 있습니다.</p>
<pre><code class="hljs language-js"><span class="hljs-string">'trusted_domains'</span> => 
array (
 <span class="hljs-number">0</span> => <span class="hljs-string">'example.com'</span>,
 <span class="hljs-number">1</span> => <span class="hljs-string">'192.168.1.12:8081'</span>,
),
<span class="hljs-string">'overwritehost'</span> => <span class="hljs-string">'example.com'</span>,
<span class="hljs-string">'overwriteprotocol'</span> => <span class="hljs-string">'https'</span>,
</code></pre>
<p>Niginx Proxy Manager이 설정되어 있으므로 config.php 파일에 다음을 추가해야 합니다:</p>
<pre><code class="hljs language-js"><span class="hljs-string">'default_phone_region'</span> => <span class="hljs-string">'US'</span>,
<span class="hljs-string">'trustedproxies'</span> => 
array (
 <span class="hljs-number">0</span> => <span class="hljs-string">'NginxProxyManager'</span>,
 <span class="hljs-number">1</span> => <span class="hljs-string">'192.168.0.145'</span>,
),
</code></pre>
<p>일부 경고를 해결하려면 다음을 수행해야 합니다:</p>
<pre><code class="hljs language-js"> <span class="hljs-string">'default_phone_region'</span> => <span class="hljs-string">'US'</span>, 
</code></pre>
<p>메일 알림을 설정하려면 구성 파일에 다음을 추가해야 합니다. 필요한 값은 이메일 공급업체에서 얻어야 합니다.</p>
<pre><code class="hljs language-js"> <span class="hljs-string">'mail_from_address'</span> => <span class="hljs-string">'user'</span>, # 이메일 사용자를 입력하세요
 <span class="hljs-string">'mail_smtpmode'</span> => <span class="hljs-string">'smtp'</span>,
 <span class="hljs-string">'mail_sendmailmode'</span> => <span class="hljs-string">'smtp'</span>,
 <span class="hljs-string">'mail_domain'</span> => <span class="hljs-string">'example.com'</span>, # 귀하의 이메일 도메인
 <span class="hljs-string">'mail_smtphost'</span> => <span class="hljs-string">'smtp.example.com'</span>,
 <span class="hljs-string">'mail_smtpport'</span> => <span class="hljs-string">'465'</span>,
 <span class="hljs-string">'mail_smtpauth'</span> => <span class="hljs-number">1</span>,
 <span class="hljs-string">'mail_smtpsecure'</span> => <span class="hljs-string">'ssl'</span>,
 <span class="hljs-string">'mail_smtpname'</span> => <span class="hljs-string">'user@example.com'</span>,
 <span class="hljs-string">'mail_smtppassword'</span> => <span class="hljs-string">'비밀번호'</span>,
</code></pre>
<h2>컨테이너 실행하기</h2>
<pre><code class="hljs language-yaml"><span class="hljs-string">docker-compose</span> <span class="hljs-string">up</span> <span class="hljs-string">-d</span>
</code></pre>
<p>축하합니다! Docker 컨테이너와 docker compose를 사용하여 Nextcloud를 설정했습니다! 궁금한 점이 있으면 언제든지 물어보세요.</p>
<h2>잠재적인 문제점</h2>
<ul>
<li>502 Gateway 오류가 발생하면 호스트 서버의 도메인에 대한 브라우저 쿠키를 지워보세요. 대부분의 경우에 도움이 됩니다.</li>
<li>정기적으로 Docker 이미지를 업데이트해야 합니다. Docker에서는 Nextcloud의 버전을 한 번에 건너뛸 수 없습니다. 예를 들어, 현재 버전이 24이고 가장 최신 버전이 26인 경우, 바로 26으로 업데이트하지 마세요. 저는 이를 까다로운 방법으로 배웠습니다. 먼저 25로 업데이트하세요. 그래서 정기적으로 <code>docker-compose pull</code> 명령을 실행해 주세요.</li>
</ul>
</body>
</html>
</div></article></div></main></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"title":"도커 컴포즈로 Nextcloud를 배포하기","description":"","date":"2024-05-27 13:46","slug":"2024-05-27-DeployNextcloudwithDockerCompose","content":"\n\nDIY, 실험, 그리고 학습을 즐기며, Google Drive와 One Drive를 대체하기 위해 Nextcloud 서버를 설정했어요. 몇 년 동안 제 Nextcloud 인스턴스는 백업된 파일, 연락처, 캘린더, 노트 등이 모두 모여 있는 집이 되었고, Collabora 덕분에 서버에는 사무실 스위트도 갖췄네요.\n\nNextcloud는 여러 서비스에 대한 멋진 오픈 소스 대안일 수 있어요.\n\n좋은 점이든 나쁜 점이든, 저는 도커 컨테이너를 사용해 홈 서버에 Nextcloud를 배포하기로 결정했어요. 도커 경험을 쌓고자 하거나 Nextcloud 배포를 위한 도커 컴포즈 파일을 설정하는 방법을 찾고 있다면, 여기가 바로 옳은 장소에요.\n\n다음은 docker-compose.yml입니다.\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n```yaml\n---\nversion: '3'\n\nservices:\n  nextcloud:\n    image: nextcloud\n    container_name: nextcloud\n    restart: unless-stopped\n    networks: \n      - cloud\n    depends_on:\n      - nextclouddb\n      - redis\n    ports:\n      - 8081:80\n    volumes:\n      - ./html:/var/www/html\n      - ./custom_apps:/var/www/html/custom_apps\n      - ./config:/var/www/html/config\n      - ./data:/var/www/html/data\n    environment:\n      - PUID=1000\n      - PGID=1000\n      - TZ=America/Los_Angeles\n      - MYSQL_DATABASE=nextcloud\n      - MYSQL_USER=nextcloud\n      - MYSQL_PASSWORD=dbpassword\n      - MYSQL_HOST=nextclouddb\n      - REDIS_HOST=redis\n\n  nextclouddb:\n    image: mariadb\n    container_name: nextcloud-db\n    restart: unless-stopped\n    command: --transaction-isolation=READ-COMMITTED --binlog-format=ROW\n    networks: \n      - cloud\n    volumes:\n      - ./nextclouddb:/var/lib/mysql\n    environment:\n      - PUID=1000\n      - PGID=1000\n      - TZ=America/Los_Angeles\n      - MYSQL_RANDOM_ROOT_PASSWORD=true\n      - MYSQL_PASSWORD=dbpassword\n      - MYSQL_DATABASE=nextcloud\n      - MYSQL_USER=nextcloud\n      \n  collabora:\n    image: collabora/code\n    container_name: collabora\n    restart: unless-stopped\n    networks: \n      - cloud\n    environment:\n      - PUID=1000\n      - PGID=1000\n      - TZ=America/Los_Angeles\n      - password=password\n      - username=nextcloud\n      - domain=example.com\n      - extra_params=--o:ssl.enable=true\n    ports:\n      - 9980:9980\n\n  redis:\n    image: redis:alpine\n    container_name: redis\n    volumes:\n      - ./redis:/data  \n    networks: \n      - cloud\n  \n  nginx-proxy:\n    image: 'jc21/nginx-proxy-manager:latest'\n    container_name: nginx-proxy\n    environment:\n      - PUID=1000\n      - PGID=1000\n      - TZ=America/Los_Angeles\n    restart: unless-stopped\n    ports:\n      - '80:80'\n      - '81:81'\n      - '443:443'\n    volumes:\n      - ./data:/data\n      - ./letsencrypt:/etc/letsencrypt\n\nnetworks:\n  cloud:\n    name: cloud\n    driver: bridge\n```\n\n알겠어요. 이제 한 번 살펴볼게요.\n\n이 Docker Compose 파일은 5개의 컨테이너를 배포합니다. 그들은 다음과 같습니다:\n\n- Nextcloud\n- Nextcloud에 필요한 MySQL 데이터베이스\n- Collabora - 구글 문서와 유사한 멋진 오픈 소스 오피스 스위트입니다. Collabora Office에는 모바일 앱도 있습니다.\n- Redis - 메모리 캐싱입니다. 중요한 파일을 다음 클라우드에 의존할 계획이라면 Redis를 설정하는 것을 강력히 권장합니다.\n- Nginx Proxy Manager - 서버로 들어오는 요청을 처리하는 리버스 프록시 매니저입니다.\n\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n## 도커 컴포즈\n\n각 줄이 하는 일에 대한 간단한 설명.\n\nNextcloud:\n\n```js\nnextcloud:\n    image: nextcloud # 사용할 이미지입니다. 공식 Nextcloud 도커 이미지\n    container_name: nextcloud # 컨테이너의 이름입니다. 식별하는 데 도움이 됩니다\n    restart: unless-stopped # 컨테이너가 충돌하는 등의 문제가 발생하면 다시 시작되도록 설정\n    networks: # 모든 컨테이너를 \"cloud\" 네트워크를 통해 연결합니다\n      - cloud\n    depends_on: # Nextcloud를 시작하기 전에 데이터베이스와 레디스 컨테이너가 준비될 때까지 기다립니다\n      - nextclouddb \n      - redis\n    ports: # 서버에 여러 웹 서비스가 있다면 포트를 변경해야 합니다. 저는 Nextcloud를 포트 80에서 8081로 연결하고 있습니다\n      - 8081:80\n    volumes: # 이 부분은 중요합니다. 컨테이너 내의 파일 디렉토리를 실제 컴퓨터의 디렉토리에 매핑합니다\n      - ./html:/var/www/html # 컨테이너 내의 /var/www/html 디렉토리를 docker-compose.yml 파일이 있는 폴더 내의 html 폴더에 매핑합니다\n      - ./custom_apps:/var/www/html/custom_apps # 이러한 볼륨을 사용하면 컨테이너 내의 파일에 쉽게 액세스할 수 있습니다\n      - ./config:/var/www/html/config\n      - ./data:/var/www/html/data\n    environment: # 환경 변수 설정\n      - PUID=1000 # 사용자 ID입니다. 아마도 둘 다 1000이어야 합니다. 이를 잘못 설정하면 파일 권한 문제가 발생할 수 있습니다\n      - PGID=1000 # 사용자 ID를 설정하세요.\n      - TZ=America/Los_Angeles # 사용하는 시간대를 설정하세요\n      - MYSQL_DATABASE=nextcloud # 다음 섹션에서 설정할 데이터베이스 정보입니다\n      - MYSQL_USER=nextcloud\n      - MYSQL_PASSWORD=dbpassword\n      - MYSQL_HOST=nextclouddb\n      - REDIS_HOST=redis # 사용할 Redis 컨테이너\n```\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\nNextcloud 데이터베이스:\n\n```yaml\nnextclouddb:\n    image: mariadb # 공식 mariadb 이미지\n    container_name: nextcloud-db \n    restart: unless-stopped \n    command: --transaction-isolation=READ-COMMITTED --binlog-format=ROW # 정말 기억이 나지 않아요. 알고 계시면 알려주세요.\n    networks: \n      - cloud\n    volumes:\n      - ./nextclouddb:/var/lib/mysql\n    environment:\n      - PUID=1000 # 다른 컨테이너와 동일해야 함\n      - PGID=1000\n      - TZ=America/Los_Angeles\n      - MYSQL_RANDOM_ROOT_PASSWORD=true\n      - MYSQL_PASSWORD=dbpassword # Nextcloud 부분에 입력한 정보와 같아야 함\n      - MYSQL_DATABASE=nextcloud\n      - MYSQL_USER=nextcloud\n```\n\nCollabora (선택 사항, 하지만 정말 멋짐):\n\n```yaml\ncollabora:\n    image: collabora/code:latest\n    container_name: collabora\n    restart: unless-stopped\n    networks: \n      - cloud\n    environment:\n      - PUID=1000\n      - PGID=1000\n      - TZ=America/Los_Angeles # 다른 것과 동일해야 함\n      - password=password \n      - username=nextcloud\n      - domain=example.com # Nextcloud가 있는 도메인\n      - extra_params=--o:ssl.enable=true # SSL을 사용하는 경우에 사용합니다. 꼭 사용해야 합니다.\n    ports:\n      - 9980:9980\n```\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\nRedis (선택 사항이지만, 진지하게, 추가하세요. 파일 잠금 문제가 나타날 수 있으며 Redis가 이를 방지해줄 것입니다):\n\n```js\nredis:\n    image: redis:alpine\n    container_name: redis\n    volumes:\n      - ./redis:/data  \n    networks: \n      - cloud\n```\n\nNginx Proxy Manager:\n\n```js\nnginx-proxy:\n    image: 'jc21/nginx-proxy-manager:latest'\n    container_name: nginx-proxy\n    environment:\n      - PUID=1000\n      - PGID=1000\n      - TZ=America/Los_Angeles\n    restart: unless-stopped\n    ports:\n      - '80:80'\n      - '81:81'\n      - '443:443'\n    volumes:\n      - ./data:/data\n      - ./letsencrypt:/etc/letsencrypt\n```\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\nNginx Proxy Manager는 서버로 들어오는 트래픽을 Nextcloud로 전달하는 멋진 프로그램이에요. 새 호스트를 추가해보세요.\n\n세부 정보 패널에 도메인 이름을 입력해주세요.\n\nScheme = http, Forward Hostname = 이용 중인 기기의 로컬 IP 주소(예: 192.168.1.35), 전달할 포트 = 80.\n\n자산 캐시, 일반적인 공격 차단, 웹소켓 지원은 모두 켜두시는 게 좋아요.\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n\"맞춤 위치\" 탭에서 caldav와 carddav를 활성화하여 캘린더와 연락처에 대한 원격 액세스를 허용할 예정입니다.\n\n위치 1:\n\n- 위치 = /.well-known/caldav\n- 스킴 = html\n- 전방 호스트 이름 = `로컬 IP`/ remote.php/dav\n- 전방 포트 80\n\n위치 2:\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n- 위치 = /.well-known/carddav\n- scheme = html\n- 전달 호스트 이름 = `로컬 IP`/ remote.php/dav\n- 전달 포트 80\n\n## 추가 구성\n\n이제 Nextcloud를 사용자 정의 도메인과 함께 사용하도록 설정하는 경우 config.php 파일을 열어 신뢰할 수있는 도메인을 사용자의 도메인으로 변경해야합니다.\n\nNextcloud를 네트워크에서 액세스하려는 경우 Nextcloud의 로컬 IP 주소를 추가하는 것이 유용할 수 있습니다.\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n```js\n'trusted_domains' =\u003e \narray (\n 0 =\u003e 'example.com',\n 1 =\u003e '192.168.1.12:8081',\n),\n'overwritehost' =\u003e 'example.com',\n'overwriteprotocol' =\u003e 'https',\n```\n\nNiginx Proxy Manager이 설정되어 있으므로 config.php 파일에 다음을 추가해야 합니다:\n\n```js\n'default_phone_region' =\u003e 'US',\n'trustedproxies' =\u003e \narray (\n 0 =\u003e 'NginxProxyManager',\n 1 =\u003e '192.168.0.145',\n),\n```\n\n일부 경고를 해결하려면 다음을 수행해야 합니다:\n  \n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n```js\n 'default_phone_region' =\u003e 'US', \n```\n\n메일 알림을 설정하려면 구성 파일에 다음을 추가해야 합니다. 필요한 값은 이메일 공급업체에서 얻어야 합니다.\n\n```js\n 'mail_from_address' =\u003e 'user', # 이메일 사용자를 입력하세요\n 'mail_smtpmode' =\u003e 'smtp',\n 'mail_sendmailmode' =\u003e 'smtp',\n 'mail_domain' =\u003e 'example.com', # 귀하의 이메일 도메인\n 'mail_smtphost' =\u003e 'smtp.example.com',\n 'mail_smtpport' =\u003e '465',\n 'mail_smtpauth' =\u003e 1,\n 'mail_smtpsecure' =\u003e 'ssl',\n 'mail_smtpname' =\u003e 'user@example.com',\n 'mail_smtppassword' =\u003e '비밀번호',\n```\n\n## 컨테이너 실행하기\n\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n```yaml\ndocker-compose up -d\n```\n\n축하합니다! Docker 컨테이너와 docker compose를 사용하여 Nextcloud를 설정했습니다! 궁금한 점이 있으면 언제든지 물어보세요.\n\n## 잠재적인 문제점\n\n- 502 Gateway 오류가 발생하면 호스트 서버의 도메인에 대한 브라우저 쿠키를 지워보세요. 대부분의 경우에 도움이 됩니다.\n- 정기적으로 Docker 이미지를 업데이트해야 합니다. Docker에서는 Nextcloud의 버전을 한 번에 건너뛸 수 없습니다. 예를 들어, 현재 버전이 24이고 가장 최신 버전이 26인 경우, 바로 26으로 업데이트하지 마세요. 저는 이를 까다로운 방법으로 배웠습니다. 먼저 25로 업데이트하세요. 그래서 정기적으로 `docker-compose pull` 명령을 실행해 주세요.","ogImage":{"url":"/assets/img/2024-05-27-DeployNextcloudwithDockerCompose_0.png"},"coverImage":"/assets/img/2024-05-27-DeployNextcloudwithDockerCompose_0.png","tag":["Tech"],"readingTime":8},"content":"\u003c!doctype html\u003e\n\u003chtml lang=\"en\"\u003e\n\u003chead\u003e\n\u003cmeta charset=\"utf-8\"\u003e\n\u003cmeta content=\"width=device-width, initial-scale=1\" name=\"viewport\"\u003e\n\u003c/head\u003e\n\u003cbody\u003e\n\u003cp\u003eDIY, 실험, 그리고 학습을 즐기며, Google Drive와 One Drive를 대체하기 위해 Nextcloud 서버를 설정했어요. 몇 년 동안 제 Nextcloud 인스턴스는 백업된 파일, 연락처, 캘린더, 노트 등이 모두 모여 있는 집이 되었고, Collabora 덕분에 서버에는 사무실 스위트도 갖췄네요.\u003c/p\u003e\n\u003cp\u003eNextcloud는 여러 서비스에 대한 멋진 오픈 소스 대안일 수 있어요.\u003c/p\u003e\n\u003cp\u003e좋은 점이든 나쁜 점이든, 저는 도커 컨테이너를 사용해 홈 서버에 Nextcloud를 배포하기로 결정했어요. 도커 경험을 쌓고자 하거나 Nextcloud 배포를 위한 도커 컴포즈 파일을 설정하는 방법을 찾고 있다면, 여기가 바로 옳은 장소에요.\u003c/p\u003e\n\u003cp\u003e다음은 docker-compose.yml입니다.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-yaml\"\u003e\u003cspan class=\"hljs-meta\"\u003e---\u003c/span\u003e\n\u003cspan class=\"hljs-attr\"\u003eversion:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e'3'\u003c/span\u003e\n\n\u003cspan class=\"hljs-attr\"\u003eservices:\u003c/span\u003e\n  \u003cspan class=\"hljs-attr\"\u003enextcloud:\u003c/span\u003e\n    \u003cspan class=\"hljs-attr\"\u003eimage:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003enextcloud\u003c/span\u003e\n    \u003cspan class=\"hljs-attr\"\u003econtainer_name:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003enextcloud\u003c/span\u003e\n    \u003cspan class=\"hljs-attr\"\u003erestart:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003eunless-stopped\u003c/span\u003e\n    \u003cspan class=\"hljs-attr\"\u003enetworks:\u003c/span\u003e \n      \u003cspan class=\"hljs-bullet\"\u003e-\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003ecloud\u003c/span\u003e\n    \u003cspan class=\"hljs-attr\"\u003edepends_on:\u003c/span\u003e\n      \u003cspan class=\"hljs-bullet\"\u003e-\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003enextclouddb\u003c/span\u003e\n      \u003cspan class=\"hljs-bullet\"\u003e-\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003eredis\u003c/span\u003e\n    \u003cspan class=\"hljs-attr\"\u003eports:\u003c/span\u003e\n      \u003cspan class=\"hljs-bullet\"\u003e-\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e8081\u003c/span\u003e\u003cspan class=\"hljs-string\"\u003e:80\u003c/span\u003e\n    \u003cspan class=\"hljs-attr\"\u003evolumes:\u003c/span\u003e\n      \u003cspan class=\"hljs-bullet\"\u003e-\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e./html:/var/www/html\u003c/span\u003e\n      \u003cspan class=\"hljs-bullet\"\u003e-\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e./custom_apps:/var/www/html/custom_apps\u003c/span\u003e\n      \u003cspan class=\"hljs-bullet\"\u003e-\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e./config:/var/www/html/config\u003c/span\u003e\n      \u003cspan class=\"hljs-bullet\"\u003e-\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e./data:/var/www/html/data\u003c/span\u003e\n    \u003cspan class=\"hljs-attr\"\u003eenvironment:\u003c/span\u003e\n      \u003cspan class=\"hljs-bullet\"\u003e-\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003ePUID=1000\u003c/span\u003e\n      \u003cspan class=\"hljs-bullet\"\u003e-\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003ePGID=1000\u003c/span\u003e\n      \u003cspan class=\"hljs-bullet\"\u003e-\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003eTZ=America/Los_Angeles\u003c/span\u003e\n      \u003cspan class=\"hljs-bullet\"\u003e-\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003eMYSQL_DATABASE=nextcloud\u003c/span\u003e\n      \u003cspan class=\"hljs-bullet\"\u003e-\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003eMYSQL_USER=nextcloud\u003c/span\u003e\n      \u003cspan class=\"hljs-bullet\"\u003e-\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003eMYSQL_PASSWORD=dbpassword\u003c/span\u003e\n      \u003cspan class=\"hljs-bullet\"\u003e-\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003eMYSQL_HOST=nextclouddb\u003c/span\u003e\n      \u003cspan class=\"hljs-bullet\"\u003e-\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003eREDIS_HOST=redis\u003c/span\u003e\n\n  \u003cspan class=\"hljs-attr\"\u003enextclouddb:\u003c/span\u003e\n    \u003cspan class=\"hljs-attr\"\u003eimage:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003emariadb\u003c/span\u003e\n    \u003cspan class=\"hljs-attr\"\u003econtainer_name:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003enextcloud-db\u003c/span\u003e\n    \u003cspan class=\"hljs-attr\"\u003erestart:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003eunless-stopped\u003c/span\u003e\n    \u003cspan class=\"hljs-attr\"\u003ecommand:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e--transaction-isolation=READ-COMMITTED\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e--binlog-format=ROW\u003c/span\u003e\n    \u003cspan class=\"hljs-attr\"\u003enetworks:\u003c/span\u003e \n      \u003cspan class=\"hljs-bullet\"\u003e-\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003ecloud\u003c/span\u003e\n    \u003cspan class=\"hljs-attr\"\u003evolumes:\u003c/span\u003e\n      \u003cspan class=\"hljs-bullet\"\u003e-\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e./nextclouddb:/var/lib/mysql\u003c/span\u003e\n    \u003cspan class=\"hljs-attr\"\u003eenvironment:\u003c/span\u003e\n      \u003cspan class=\"hljs-bullet\"\u003e-\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003ePUID=1000\u003c/span\u003e\n      \u003cspan class=\"hljs-bullet\"\u003e-\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003ePGID=1000\u003c/span\u003e\n      \u003cspan class=\"hljs-bullet\"\u003e-\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003eTZ=America/Los_Angeles\u003c/span\u003e\n      \u003cspan class=\"hljs-bullet\"\u003e-\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003eMYSQL_RANDOM_ROOT_PASSWORD=true\u003c/span\u003e\n      \u003cspan class=\"hljs-bullet\"\u003e-\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003eMYSQL_PASSWORD=dbpassword\u003c/span\u003e\n      \u003cspan class=\"hljs-bullet\"\u003e-\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003eMYSQL_DATABASE=nextcloud\u003c/span\u003e\n      \u003cspan class=\"hljs-bullet\"\u003e-\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003eMYSQL_USER=nextcloud\u003c/span\u003e\n      \n  \u003cspan class=\"hljs-attr\"\u003ecollabora:\u003c/span\u003e\n    \u003cspan class=\"hljs-attr\"\u003eimage:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003ecollabora/code\u003c/span\u003e\n    \u003cspan class=\"hljs-attr\"\u003econtainer_name:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003ecollabora\u003c/span\u003e\n    \u003cspan class=\"hljs-attr\"\u003erestart:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003eunless-stopped\u003c/span\u003e\n    \u003cspan class=\"hljs-attr\"\u003enetworks:\u003c/span\u003e \n      \u003cspan class=\"hljs-bullet\"\u003e-\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003ecloud\u003c/span\u003e\n    \u003cspan class=\"hljs-attr\"\u003eenvironment:\u003c/span\u003e\n      \u003cspan class=\"hljs-bullet\"\u003e-\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003ePUID=1000\u003c/span\u003e\n      \u003cspan class=\"hljs-bullet\"\u003e-\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003ePGID=1000\u003c/span\u003e\n      \u003cspan class=\"hljs-bullet\"\u003e-\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003eTZ=America/Los_Angeles\u003c/span\u003e\n      \u003cspan class=\"hljs-bullet\"\u003e-\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003epassword=password\u003c/span\u003e\n      \u003cspan class=\"hljs-bullet\"\u003e-\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003eusername=nextcloud\u003c/span\u003e\n      \u003cspan class=\"hljs-bullet\"\u003e-\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003edomain=example.com\u003c/span\u003e\n      \u003cspan class=\"hljs-bullet\"\u003e-\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003eextra_params=--o:ssl.enable=true\u003c/span\u003e\n    \u003cspan class=\"hljs-attr\"\u003eports:\u003c/span\u003e\n      \u003cspan class=\"hljs-bullet\"\u003e-\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e9980\u003c/span\u003e\u003cspan class=\"hljs-string\"\u003e:9980\u003c/span\u003e\n\n  \u003cspan class=\"hljs-attr\"\u003eredis:\u003c/span\u003e\n    \u003cspan class=\"hljs-attr\"\u003eimage:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003eredis:alpine\u003c/span\u003e\n    \u003cspan class=\"hljs-attr\"\u003econtainer_name:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003eredis\u003c/span\u003e\n    \u003cspan class=\"hljs-attr\"\u003evolumes:\u003c/span\u003e\n      \u003cspan class=\"hljs-bullet\"\u003e-\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e./redis:/data\u003c/span\u003e  \n    \u003cspan class=\"hljs-attr\"\u003enetworks:\u003c/span\u003e \n      \u003cspan class=\"hljs-bullet\"\u003e-\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003ecloud\u003c/span\u003e\n  \n  \u003cspan class=\"hljs-attr\"\u003enginx-proxy:\u003c/span\u003e\n    \u003cspan class=\"hljs-attr\"\u003eimage:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e'jc21/nginx-proxy-manager:latest'\u003c/span\u003e\n    \u003cspan class=\"hljs-attr\"\u003econtainer_name:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003enginx-proxy\u003c/span\u003e\n    \u003cspan class=\"hljs-attr\"\u003eenvironment:\u003c/span\u003e\n      \u003cspan class=\"hljs-bullet\"\u003e-\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003ePUID=1000\u003c/span\u003e\n      \u003cspan class=\"hljs-bullet\"\u003e-\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003ePGID=1000\u003c/span\u003e\n      \u003cspan class=\"hljs-bullet\"\u003e-\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003eTZ=America/Los_Angeles\u003c/span\u003e\n    \u003cspan class=\"hljs-attr\"\u003erestart:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003eunless-stopped\u003c/span\u003e\n    \u003cspan class=\"hljs-attr\"\u003eports:\u003c/span\u003e\n      \u003cspan class=\"hljs-bullet\"\u003e-\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e'80:80'\u003c/span\u003e\n      \u003cspan class=\"hljs-bullet\"\u003e-\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e'81:81'\u003c/span\u003e\n      \u003cspan class=\"hljs-bullet\"\u003e-\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e'443:443'\u003c/span\u003e\n    \u003cspan class=\"hljs-attr\"\u003evolumes:\u003c/span\u003e\n      \u003cspan class=\"hljs-bullet\"\u003e-\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e./data:/data\u003c/span\u003e\n      \u003cspan class=\"hljs-bullet\"\u003e-\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e./letsencrypt:/etc/letsencrypt\u003c/span\u003e\n\n\u003cspan class=\"hljs-attr\"\u003enetworks:\u003c/span\u003e\n  \u003cspan class=\"hljs-attr\"\u003ecloud:\u003c/span\u003e\n    \u003cspan class=\"hljs-attr\"\u003ename:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003ecloud\u003c/span\u003e\n    \u003cspan class=\"hljs-attr\"\u003edriver:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003ebridge\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e알겠어요. 이제 한 번 살펴볼게요.\u003c/p\u003e\n\u003cp\u003e이 Docker Compose 파일은 5개의 컨테이너를 배포합니다. 그들은 다음과 같습니다:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eNextcloud\u003c/li\u003e\n\u003cli\u003eNextcloud에 필요한 MySQL 데이터베이스\u003c/li\u003e\n\u003cli\u003eCollabora - 구글 문서와 유사한 멋진 오픈 소스 오피스 스위트입니다. Collabora Office에는 모바일 앱도 있습니다.\u003c/li\u003e\n\u003cli\u003eRedis - 메모리 캐싱입니다. 중요한 파일을 다음 클라우드에 의존할 계획이라면 Redis를 설정하는 것을 강력히 권장합니다.\u003c/li\u003e\n\u003cli\u003eNginx Proxy Manager - 서버로 들어오는 요청을 처리하는 리버스 프록시 매니저입니다.\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2\u003e도커 컴포즈\u003c/h2\u003e\n\u003cp\u003e각 줄이 하는 일에 대한 간단한 설명.\u003c/p\u003e\n\u003cp\u003eNextcloud:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-attr\"\u003enextcloud\u003c/span\u003e:\n    \u003cspan class=\"hljs-attr\"\u003eimage\u003c/span\u003e: nextcloud # 사용할 이미지입니다. 공식 \u003cspan class=\"hljs-title class_\"\u003eNextcloud\u003c/span\u003e 도커 이미지\n    \u003cspan class=\"hljs-attr\"\u003econtainer_name\u003c/span\u003e: nextcloud # 컨테이너의 이름입니다. 식별하는 데 도움이 됩니다\n    \u003cspan class=\"hljs-attr\"\u003erestart\u003c/span\u003e: unless-stopped # 컨테이너가 충돌하는 등의 문제가 발생하면 다시 시작되도록 설정\n    \u003cspan class=\"hljs-attr\"\u003enetworks\u003c/span\u003e: # 모든 컨테이너를 \u003cspan class=\"hljs-string\"\u003e\"cloud\"\u003c/span\u003e 네트워크를 통해 연결합니다\n      - cloud\n    \u003cspan class=\"hljs-attr\"\u003edepends_on\u003c/span\u003e: # \u003cspan class=\"hljs-title class_\"\u003eNextcloud\u003c/span\u003e를 시작하기 전에 데이터베이스와 레디스 컨테이너가 준비될 때까지 기다립니다\n      - nextclouddb \n      - redis\n    \u003cspan class=\"hljs-attr\"\u003eports\u003c/span\u003e: # 서버에 여러 웹 서비스가 있다면 포트를 변경해야 합니다. 저는 \u003cspan class=\"hljs-title class_\"\u003eNextcloud\u003c/span\u003e를 포트 \u003cspan class=\"hljs-number\"\u003e80\u003c/span\u003e에서 \u003cspan class=\"hljs-number\"\u003e8081\u003c/span\u003e로 연결하고 있습니다\n      - \u003cspan class=\"hljs-number\"\u003e8081\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e80\u003c/span\u003e\n    \u003cspan class=\"hljs-attr\"\u003evolumes\u003c/span\u003e: # 이 부분은 중요합니다. 컨테이너 내의 파일 디렉토리를 실제 컴퓨터의 디렉토리에 매핑합니다\n      - ./\u003cspan class=\"hljs-attr\"\u003ehtml\u003c/span\u003e:\u003cspan class=\"hljs-regexp\"\u003e/var/\u003c/span\u003ewww/html # 컨테이너 내의 /\u003cspan class=\"hljs-keyword\"\u003evar\u003c/span\u003e/www/html 디렉토리를 docker-compose.\u003cspan class=\"hljs-property\"\u003eyml\u003c/span\u003e 파일이 있는 폴더 내의 html 폴더에 매핑합니다\n      - ./\u003cspan class=\"hljs-attr\"\u003ecustom_apps\u003c/span\u003e:\u003cspan class=\"hljs-regexp\"\u003e/var/\u003c/span\u003ewww/html/custom_apps # 이러한 볼륨을 사용하면 컨테이너 내의 파일에 쉽게 액세스할 수 있습니다\n      - ./\u003cspan class=\"hljs-attr\"\u003econfig\u003c/span\u003e:\u003cspan class=\"hljs-regexp\"\u003e/var/\u003c/span\u003ewww/html/config\n      - ./\u003cspan class=\"hljs-attr\"\u003edata\u003c/span\u003e:\u003cspan class=\"hljs-regexp\"\u003e/var/\u003c/span\u003ewww/html/data\n    \u003cspan class=\"hljs-attr\"\u003eenvironment\u003c/span\u003e: # 환경 변수 설정\n      - \u003cspan class=\"hljs-variable constant_\"\u003ePUID\u003c/span\u003e=\u003cspan class=\"hljs-number\"\u003e1000\u003c/span\u003e # 사용자 \u003cspan class=\"hljs-variable constant_\"\u003eID\u003c/span\u003e입니다. 아마도 둘 다 \u003cspan class=\"hljs-number\"\u003e1000\u003c/span\u003e이어야 합니다. 이를 잘못 설정하면 파일 권한 문제가 발생할 수 있습니다\n      - \u003cspan class=\"hljs-variable constant_\"\u003ePGID\u003c/span\u003e=\u003cspan class=\"hljs-number\"\u003e1000\u003c/span\u003e # 사용자 \u003cspan class=\"hljs-variable constant_\"\u003eID\u003c/span\u003e를 설정하세요.\n      - \u003cspan class=\"hljs-variable constant_\"\u003eTZ\u003c/span\u003e=\u003cspan class=\"hljs-title class_\"\u003eAmerica\u003c/span\u003e/\u003cspan class=\"hljs-title class_\"\u003eLos\u003c/span\u003e_Angeles # 사용하는 시간대를 설정하세요\n      - \u003cspan class=\"hljs-variable constant_\"\u003eMYSQL_DATABASE\u003c/span\u003e=nextcloud # 다음 섹션에서 설정할 데이터베이스 정보입니다\n      - \u003cspan class=\"hljs-variable constant_\"\u003eMYSQL_USER\u003c/span\u003e=nextcloud\n      - \u003cspan class=\"hljs-variable constant_\"\u003eMYSQL_PASSWORD\u003c/span\u003e=dbpassword\n      - \u003cspan class=\"hljs-variable constant_\"\u003eMYSQL_HOST\u003c/span\u003e=nextclouddb\n      - \u003cspan class=\"hljs-variable constant_\"\u003eREDIS_HOST\u003c/span\u003e=redis # 사용할 \u003cspan class=\"hljs-title class_\"\u003eRedis\u003c/span\u003e 컨테이너\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eNextcloud 데이터베이스:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-yaml\"\u003e\u003cspan class=\"hljs-attr\"\u003enextclouddb:\u003c/span\u003e\n    \u003cspan class=\"hljs-attr\"\u003eimage:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003emariadb\u003c/span\u003e \u003cspan class=\"hljs-comment\"\u003e# 공식 mariadb 이미지\u003c/span\u003e\n    \u003cspan class=\"hljs-attr\"\u003econtainer_name:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003enextcloud-db\u003c/span\u003e \n    \u003cspan class=\"hljs-attr\"\u003erestart:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003eunless-stopped\u003c/span\u003e \n    \u003cspan class=\"hljs-attr\"\u003ecommand:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e--transaction-isolation=READ-COMMITTED\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e--binlog-format=ROW\u003c/span\u003e \u003cspan class=\"hljs-comment\"\u003e# 정말 기억이 나지 않아요. 알고 계시면 알려주세요.\u003c/span\u003e\n    \u003cspan class=\"hljs-attr\"\u003enetworks:\u003c/span\u003e \n      \u003cspan class=\"hljs-bullet\"\u003e-\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003ecloud\u003c/span\u003e\n    \u003cspan class=\"hljs-attr\"\u003evolumes:\u003c/span\u003e\n      \u003cspan class=\"hljs-bullet\"\u003e-\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e./nextclouddb:/var/lib/mysql\u003c/span\u003e\n    \u003cspan class=\"hljs-attr\"\u003eenvironment:\u003c/span\u003e\n      \u003cspan class=\"hljs-bullet\"\u003e-\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003ePUID=1000\u003c/span\u003e \u003cspan class=\"hljs-comment\"\u003e# 다른 컨테이너와 동일해야 함\u003c/span\u003e\n      \u003cspan class=\"hljs-bullet\"\u003e-\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003ePGID=1000\u003c/span\u003e\n      \u003cspan class=\"hljs-bullet\"\u003e-\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003eTZ=America/Los_Angeles\u003c/span\u003e\n      \u003cspan class=\"hljs-bullet\"\u003e-\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003eMYSQL_RANDOM_ROOT_PASSWORD=true\u003c/span\u003e\n      \u003cspan class=\"hljs-bullet\"\u003e-\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003eMYSQL_PASSWORD=dbpassword\u003c/span\u003e \u003cspan class=\"hljs-comment\"\u003e# Nextcloud 부분에 입력한 정보와 같아야 함\u003c/span\u003e\n      \u003cspan class=\"hljs-bullet\"\u003e-\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003eMYSQL_DATABASE=nextcloud\u003c/span\u003e\n      \u003cspan class=\"hljs-bullet\"\u003e-\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003eMYSQL_USER=nextcloud\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eCollabora (선택 사항, 하지만 정말 멋짐):\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-yaml\"\u003e\u003cspan class=\"hljs-attr\"\u003ecollabora:\u003c/span\u003e\n    \u003cspan class=\"hljs-attr\"\u003eimage:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003ecollabora/code:latest\u003c/span\u003e\n    \u003cspan class=\"hljs-attr\"\u003econtainer_name:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003ecollabora\u003c/span\u003e\n    \u003cspan class=\"hljs-attr\"\u003erestart:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003eunless-stopped\u003c/span\u003e\n    \u003cspan class=\"hljs-attr\"\u003enetworks:\u003c/span\u003e \n      \u003cspan class=\"hljs-bullet\"\u003e-\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003ecloud\u003c/span\u003e\n    \u003cspan class=\"hljs-attr\"\u003eenvironment:\u003c/span\u003e\n      \u003cspan class=\"hljs-bullet\"\u003e-\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003ePUID=1000\u003c/span\u003e\n      \u003cspan class=\"hljs-bullet\"\u003e-\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003ePGID=1000\u003c/span\u003e\n      \u003cspan class=\"hljs-bullet\"\u003e-\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003eTZ=America/Los_Angeles\u003c/span\u003e \u003cspan class=\"hljs-comment\"\u003e# 다른 것과 동일해야 함\u003c/span\u003e\n      \u003cspan class=\"hljs-bullet\"\u003e-\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003epassword=password\u003c/span\u003e \n      \u003cspan class=\"hljs-bullet\"\u003e-\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003eusername=nextcloud\u003c/span\u003e\n      \u003cspan class=\"hljs-bullet\"\u003e-\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003edomain=example.com\u003c/span\u003e \u003cspan class=\"hljs-comment\"\u003e# Nextcloud가 있는 도메인\u003c/span\u003e\n      \u003cspan class=\"hljs-bullet\"\u003e-\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003eextra_params=--o:ssl.enable=true\u003c/span\u003e \u003cspan class=\"hljs-comment\"\u003e# SSL을 사용하는 경우에 사용합니다. 꼭 사용해야 합니다.\u003c/span\u003e\n    \u003cspan class=\"hljs-attr\"\u003eports:\u003c/span\u003e\n      \u003cspan class=\"hljs-bullet\"\u003e-\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e9980\u003c/span\u003e\u003cspan class=\"hljs-string\"\u003e:9980\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eRedis (선택 사항이지만, 진지하게, 추가하세요. 파일 잠금 문제가 나타날 수 있으며 Redis가 이를 방지해줄 것입니다):\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-attr\"\u003eredis\u003c/span\u003e:\n    \u003cspan class=\"hljs-attr\"\u003eimage\u003c/span\u003e: \u003cspan class=\"hljs-attr\"\u003eredis\u003c/span\u003e:alpine\n    \u003cspan class=\"hljs-attr\"\u003econtainer_name\u003c/span\u003e: redis\n    \u003cspan class=\"hljs-attr\"\u003evolumes\u003c/span\u003e:\n      - ./\u003cspan class=\"hljs-attr\"\u003eredis\u003c/span\u003e:/data  \n    \u003cspan class=\"hljs-attr\"\u003enetworks\u003c/span\u003e: \n      - cloud\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eNginx Proxy Manager:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003enginx-\u003cspan class=\"hljs-attr\"\u003eproxy\u003c/span\u003e:\n    \u003cspan class=\"hljs-attr\"\u003eimage\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e'jc21/nginx-proxy-manager:latest'\u003c/span\u003e\n    \u003cspan class=\"hljs-attr\"\u003econtainer_name\u003c/span\u003e: nginx-proxy\n    \u003cspan class=\"hljs-attr\"\u003eenvironment\u003c/span\u003e:\n      - \u003cspan class=\"hljs-variable constant_\"\u003ePUID\u003c/span\u003e=\u003cspan class=\"hljs-number\"\u003e1000\u003c/span\u003e\n      - \u003cspan class=\"hljs-variable constant_\"\u003ePGID\u003c/span\u003e=\u003cspan class=\"hljs-number\"\u003e1000\u003c/span\u003e\n      - \u003cspan class=\"hljs-variable constant_\"\u003eTZ\u003c/span\u003e=\u003cspan class=\"hljs-title class_\"\u003eAmerica\u003c/span\u003e/\u003cspan class=\"hljs-title class_\"\u003eLos\u003c/span\u003e_Angeles\n    \u003cspan class=\"hljs-attr\"\u003erestart\u003c/span\u003e: unless-stopped\n    \u003cspan class=\"hljs-attr\"\u003eports\u003c/span\u003e:\n      - \u003cspan class=\"hljs-string\"\u003e'80:80'\u003c/span\u003e\n      - \u003cspan class=\"hljs-string\"\u003e'81:81'\u003c/span\u003e\n      - \u003cspan class=\"hljs-string\"\u003e'443:443'\u003c/span\u003e\n    \u003cspan class=\"hljs-attr\"\u003evolumes\u003c/span\u003e:\n      - ./\u003cspan class=\"hljs-attr\"\u003edata\u003c/span\u003e:/data\n      - ./\u003cspan class=\"hljs-attr\"\u003eletsencrypt\u003c/span\u003e:\u003cspan class=\"hljs-regexp\"\u003e/etc/\u003c/span\u003eletsencrypt\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eNginx Proxy Manager는 서버로 들어오는 트래픽을 Nextcloud로 전달하는 멋진 프로그램이에요. 새 호스트를 추가해보세요.\u003c/p\u003e\n\u003cp\u003e세부 정보 패널에 도메인 이름을 입력해주세요.\u003c/p\u003e\n\u003cp\u003eScheme = http, Forward Hostname = 이용 중인 기기의 로컬 IP 주소(예: 192.168.1.35), 전달할 포트 = 80.\u003c/p\u003e\n\u003cp\u003e자산 캐시, 일반적인 공격 차단, 웹소켓 지원은 모두 켜두시는 게 좋아요.\u003c/p\u003e\n\u003cp\u003e\"맞춤 위치\" 탭에서 caldav와 carddav를 활성화하여 캘린더와 연락처에 대한 원격 액세스를 허용할 예정입니다.\u003c/p\u003e\n\u003cp\u003e위치 1:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e위치 = /.well-known/caldav\u003c/li\u003e\n\u003cli\u003e스킴 = html\u003c/li\u003e\n\u003cli\u003e전방 호스트 이름 = \u003ccode\u003e로컬 IP\u003c/code\u003e/ remote.php/dav\u003c/li\u003e\n\u003cli\u003e전방 포트 80\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e위치 2:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e위치 = /.well-known/carddav\u003c/li\u003e\n\u003cli\u003escheme = html\u003c/li\u003e\n\u003cli\u003e전달 호스트 이름 = \u003ccode\u003e로컬 IP\u003c/code\u003e/ remote.php/dav\u003c/li\u003e\n\u003cli\u003e전달 포트 80\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2\u003e추가 구성\u003c/h2\u003e\n\u003cp\u003e이제 Nextcloud를 사용자 정의 도메인과 함께 사용하도록 설정하는 경우 config.php 파일을 열어 신뢰할 수있는 도메인을 사용자의 도메인으로 변경해야합니다.\u003c/p\u003e\n\u003cp\u003eNextcloud를 네트워크에서 액세스하려는 경우 Nextcloud의 로컬 IP 주소를 추가하는 것이 유용할 수 있습니다.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-string\"\u003e'trusted_domains'\u003c/span\u003e =\u003e \narray (\n \u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e =\u003e \u003cspan class=\"hljs-string\"\u003e'example.com'\u003c/span\u003e,\n \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e =\u003e \u003cspan class=\"hljs-string\"\u003e'192.168.1.12:8081'\u003c/span\u003e,\n),\n\u003cspan class=\"hljs-string\"\u003e'overwritehost'\u003c/span\u003e =\u003e \u003cspan class=\"hljs-string\"\u003e'example.com'\u003c/span\u003e,\n\u003cspan class=\"hljs-string\"\u003e'overwriteprotocol'\u003c/span\u003e =\u003e \u003cspan class=\"hljs-string\"\u003e'https'\u003c/span\u003e,\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eNiginx Proxy Manager이 설정되어 있으므로 config.php 파일에 다음을 추가해야 합니다:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-string\"\u003e'default_phone_region'\u003c/span\u003e =\u003e \u003cspan class=\"hljs-string\"\u003e'US'\u003c/span\u003e,\n\u003cspan class=\"hljs-string\"\u003e'trustedproxies'\u003c/span\u003e =\u003e \narray (\n \u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e =\u003e \u003cspan class=\"hljs-string\"\u003e'NginxProxyManager'\u003c/span\u003e,\n \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e =\u003e \u003cspan class=\"hljs-string\"\u003e'192.168.0.145'\u003c/span\u003e,\n),\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e일부 경고를 해결하려면 다음을 수행해야 합니다:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e \u003cspan class=\"hljs-string\"\u003e'default_phone_region'\u003c/span\u003e =\u003e \u003cspan class=\"hljs-string\"\u003e'US'\u003c/span\u003e, \n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e메일 알림을 설정하려면 구성 파일에 다음을 추가해야 합니다. 필요한 값은 이메일 공급업체에서 얻어야 합니다.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e \u003cspan class=\"hljs-string\"\u003e'mail_from_address'\u003c/span\u003e =\u003e \u003cspan class=\"hljs-string\"\u003e'user'\u003c/span\u003e, # 이메일 사용자를 입력하세요\n \u003cspan class=\"hljs-string\"\u003e'mail_smtpmode'\u003c/span\u003e =\u003e \u003cspan class=\"hljs-string\"\u003e'smtp'\u003c/span\u003e,\n \u003cspan class=\"hljs-string\"\u003e'mail_sendmailmode'\u003c/span\u003e =\u003e \u003cspan class=\"hljs-string\"\u003e'smtp'\u003c/span\u003e,\n \u003cspan class=\"hljs-string\"\u003e'mail_domain'\u003c/span\u003e =\u003e \u003cspan class=\"hljs-string\"\u003e'example.com'\u003c/span\u003e, # 귀하의 이메일 도메인\n \u003cspan class=\"hljs-string\"\u003e'mail_smtphost'\u003c/span\u003e =\u003e \u003cspan class=\"hljs-string\"\u003e'smtp.example.com'\u003c/span\u003e,\n \u003cspan class=\"hljs-string\"\u003e'mail_smtpport'\u003c/span\u003e =\u003e \u003cspan class=\"hljs-string\"\u003e'465'\u003c/span\u003e,\n \u003cspan class=\"hljs-string\"\u003e'mail_smtpauth'\u003c/span\u003e =\u003e \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e,\n \u003cspan class=\"hljs-string\"\u003e'mail_smtpsecure'\u003c/span\u003e =\u003e \u003cspan class=\"hljs-string\"\u003e'ssl'\u003c/span\u003e,\n \u003cspan class=\"hljs-string\"\u003e'mail_smtpname'\u003c/span\u003e =\u003e \u003cspan class=\"hljs-string\"\u003e'user@example.com'\u003c/span\u003e,\n \u003cspan class=\"hljs-string\"\u003e'mail_smtppassword'\u003c/span\u003e =\u003e \u003cspan class=\"hljs-string\"\u003e'비밀번호'\u003c/span\u003e,\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch2\u003e컨테이너 실행하기\u003c/h2\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-yaml\"\u003e\u003cspan class=\"hljs-string\"\u003edocker-compose\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003eup\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e-d\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e축하합니다! Docker 컨테이너와 docker compose를 사용하여 Nextcloud를 설정했습니다! 궁금한 점이 있으면 언제든지 물어보세요.\u003c/p\u003e\n\u003ch2\u003e잠재적인 문제점\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003e502 Gateway 오류가 발생하면 호스트 서버의 도메인에 대한 브라우저 쿠키를 지워보세요. 대부분의 경우에 도움이 됩니다.\u003c/li\u003e\n\u003cli\u003e정기적으로 Docker 이미지를 업데이트해야 합니다. Docker에서는 Nextcloud의 버전을 한 번에 건너뛸 수 없습니다. 예를 들어, 현재 버전이 24이고 가장 최신 버전이 26인 경우, 바로 26으로 업데이트하지 마세요. 저는 이를 까다로운 방법으로 배웠습니다. 먼저 25로 업데이트하세요. 그래서 정기적으로 \u003ccode\u003edocker-compose pull\u003c/code\u003e 명령을 실행해 주세요.\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/body\u003e\n\u003c/html\u003e\n"},"__N_SSG":true},"page":"/post/[slug]","query":{"slug":"2024-05-27-DeployNextcloudwithDockerCompose"},"buildId":"FH3Qr-mLAesqA0X5IFRQr","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>