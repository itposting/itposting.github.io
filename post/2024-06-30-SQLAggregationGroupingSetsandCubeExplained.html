<!DOCTYPE html><html lang="ko"><head><meta charSet="utf-8"/><title>SQL 집계 Grouping Sets와 Cube 쉽게 이해하기 | itposting</title><meta name="description" content=""/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><meta property="og:url" content="https://itposting.github.io///post/2024-06-30-SQLAggregationGroupingSetsandCubeExplained" data-gatsby-head="true"/><meta property="og:type" content="website" data-gatsby-head="true"/><meta property="og:site_name" content="SQL 집계 Grouping Sets와 Cube 쉽게 이해하기 | itposting" data-gatsby-head="true"/><meta property="og:title" content="SQL 집계 Grouping Sets와 Cube 쉽게 이해하기 | itposting" data-gatsby-head="true"/><meta property="og:description" content="" data-gatsby-head="true"/><meta property="og:image" content="/assets/img/2024-06-30-SQLAggregationGroupingSetsandCubeExplained_0.png" data-gatsby-head="true"/><meta property="og:locale" content="en_US" data-gatsby-head="true"/><meta name="twitter:card" content="summary_large_image" data-gatsby-head="true"/><meta property="twitter:domain" content="https://itposting.github.io/" data-gatsby-head="true"/><meta property="twitter:url" content="https://itposting.github.io///post/2024-06-30-SQLAggregationGroupingSetsandCubeExplained" data-gatsby-head="true"/><meta name="twitter:title" content="SQL 집계 Grouping Sets와 Cube 쉽게 이해하기 | itposting" data-gatsby-head="true"/><meta name="twitter:description" content="" data-gatsby-head="true"/><meta name="twitter:image" content="/assets/img/2024-06-30-SQLAggregationGroupingSetsandCubeExplained_0.png" data-gatsby-head="true"/><meta name="twitter:data1" content="Dev | itposting" data-gatsby-head="true"/><meta name="article:published_time" content="2024-06-30 23:24" data-gatsby-head="true"/><meta name="next-head-count" content="19"/><meta name="google-site-verification" content="a-yehRo3k3xv7fg6LqRaE8jlE42e5wP2bDE_2F849O4"/><link rel="stylesheet" href="/favicons/favicon.ico"/><link rel="icon" type="image/png" sizes="16x16" href="/assets/favicons/favicon-16x16.png"/><link rel="icon" type="image/png" sizes="32x32" href="/assets/favicons/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="96x96" href="/assets/favicons/favicon-96x96.png"/><link rel="icon" href="/favicons/apple-icon-180x180.png"/><link rel="apple-touch-icon" href="/favicons/apple-icon-180x180.png"/><link rel="apple-touch-startup-image" href="/startup.png"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="black"/><meta name="msapplication-config" content="/favicons/browserconfig.xml"/><script async="" src="https://www.googletagmanager.com/gtag/js?id=G-23YXDLKDCL"></script><script>window.dataLayer = window.dataLayer || [];
            function gtag(){dataLayer.push(arguments);}
            gtag('js', new Date());
          
            gtag('config', 'G-23YXDLKDCL');</script><link rel="preload" href="/_next/static/css/6e57edcf9f2ce551.css" as="style"/><link rel="stylesheet" href="/_next/static/css/6e57edcf9f2ce551.css" data-n-g=""/><link rel="preload" href="/_next/static/css/b8ef307c9aee1e34.css" as="style"/><link rel="stylesheet" href="/_next/static/css/b8ef307c9aee1e34.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/_next/static/chunks/webpack-ee6df16fdc6dae4d.js" defer=""></script><script src="/_next/static/chunks/framework-46611630e39cfdeb.js" defer=""></script><script src="/_next/static/chunks/main-cf4a52eec9a970a0.js" defer=""></script><script src="/_next/static/chunks/pages/_app-6fae11262ee5c69b.js" defer=""></script><script src="/_next/static/chunks/75fc9c18-ac4aa08aae62f90e.js" defer=""></script><script src="/_next/static/chunks/463-0429087d4c0b0335.js" defer=""></script><script src="/_next/static/chunks/pages/post/%5Bslug%5D-d849684d6d83f07a.js" defer=""></script><script src="/_next/static/8coAiP0lmiEK5aH6nkQkj/_buildManifest.js" defer=""></script><script src="/_next/static/8coAiP0lmiEK5aH6nkQkj/_ssgManifest.js" defer=""></script></head><body><div id="__next"><header class="Header_header__Z8PUO"><div class="Header_inner__tfr0u"><strong class="Header_title__Otn70"><a href="/">IT Posting</a></strong><nav class="Header_nav_area__6KVpk"><a class="nav_item" href="/posts/1">Posts</a></nav></div></header><main class="posts_container__NyRU3"><div class="posts_inner__i3n_i"><h1 class="posts_post_title__EbxNx">SQL 집계 Grouping Sets와 Cube 쉽게 이해하기</h1><div class="posts_meta__cR7lu"><div class="posts_profile_wrap__mslMl"><div class="posts_profile_image_wrap__kPikV"><img alt="SQL 집계 Grouping Sets와 Cube 쉽게 이해하기" loading="lazy" width="44" height="44" decoding="async" data-nimg="1" class="profile" style="color:transparent" src="/favicons/apple-icon-114x114.png"/></div><div class="posts_textarea__w_iKT"><span class="writer">IT Posting</span><span class="posts_info__5KJdN"><span class="posts_date__ctqHI">Posted On Jun 30, 2024</span><span class="posts_reading_time__f7YPP">8<!-- --> min read</span></span></div></div><img alt="" loading="lazy" width="50" height="50" decoding="async" data-nimg="1" class="posts_view_badge__tcbfm" style="color:transparent" src="https://hits.seeyoufarm.com/api/count/incr/badge.svg?url=https%3A%2F%2Fallround-coder.github.io/post/2024-06-30-SQLAggregationGroupingSetsandCubeExplained&amp;count_bg=%2379C83D&amp;title_bg=%23555555&amp;icon=&amp;icon_color=%23E7E7E7&amp;title=views&amp;edge_flat=false"/></div><article class="posts_post_content__n_L6j"><div><!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta content="width=device-width, initial-scale=1" name="viewport">
</head>
<body>
<p><img src="/assets/img/2024-06-30-SQLAggregationGroupingSetsandCubeExplained_0.png" alt="이미지"></p>
<h1>소개</h1>
<p>데이터 분석에서 SQL의 GROUP BY 절을 사용하면 다른 카테고리에 따라 데이터를 요약하거나 합산하는 유용한 방법입니다. 그러나 몇 가지 제한 사항이 있습니다:</p>
<ul>
<li>한 번에 고정된 수의 열을 그룹화 할 수 있습니다.</li>
<li>서로 다른 열의 조합으로 그룹화해야 하는 경우 쿼리가 길고 반복적인 경우가 발생할 수 있습니다.</li>
<li>성능이 떨어질 수 있습니다. 이는 테이블을 여러 번 스캔해야 하기 때문입니다.</li>
</ul>
<div class="content-ad"></div>
<p>다음 섹션에서는 이러한 문제를 더 자세히 살펴볼 것입니다. 그러나 먼저 데이터를 준비해 봅시다.</p>
<h1>데이터 준비</h1>
<p>다음은 product_sales라는 테이블을 만드는 방법입니다.</p>
<pre><code class="hljs language-js"><span class="hljs-variable constant_">CREATE</span> <span class="hljs-variable constant_">TABLE</span> product_sales (
 country <span class="hljs-title function_">VARCHAR</span>(<span class="hljs-number">30</span>)
 ,state <span class="hljs-title function_">VARCHAR</span>(<span class="hljs-number">20</span>)
 ,city <span class="hljs-title function_">VARCHAR</span>(<span class="hljs-number">20</span>)
 ,store <span class="hljs-title function_">VARCHAR</span>(<span class="hljs-number">20</span>)
 ,sales_amount <span class="hljs-title function_">DECIMAL</span>(<span class="hljs-number">10</span>, <span class="hljs-number">2</span>)
 )
</code></pre>
<div class="content-ad"></div>
<p>이 테이블에 더미 데이터를 삽입하는 코드가 있어요. 이것을 통해 개념을 더 잘 이해할 수 있을 거예요.</p>
<pre><code class="hljs language-js"><span class="hljs-variable constant_">INSERT</span> <span class="hljs-variable constant_">INTO</span> product_sales (country, state, city, store, product, sales_date, sales_amount) <span class="hljs-variable constant_">VALUES</span>
(<span class="hljs-string">'USA'</span>, <span class="hljs-string">'California'</span>, <span class="hljs-string">'Los Angeles'</span>, <span class="hljs-string">'Store A'</span>, <span class="hljs-string">'Product 1'</span>, <span class="hljs-string">'2024-01-01'</span>, <span class="hljs-number">100.00</span>),
(<span class="hljs-string">'USA'</span>, <span class="hljs-string">'California'</span>, <span class="hljs-string">'San Francisco'</span>, <span class="hljs-string">'Store B'</span>, <span class="hljs-string">'Product 2'</span>, <span class="hljs-string">'2024-01-02'</span>, <span class="hljs-number">150.00</span>),
(<span class="hljs-string">'USA'</span>, <span class="hljs-string">'New York'</span>, <span class="hljs-string">'New York'</span>, <span class="hljs-string">'Store C'</span>, <span class="hljs-string">'Product 1'</span>, <span class="hljs-string">'2024-01-03'</span>, <span class="hljs-number">200.00</span>),
(<span class="hljs-string">'USA'</span>, <span class="hljs-string">'New York'</span>, <span class="hljs-string">'New York'</span>, <span class="hljs-string">'Store C2'</span>, <span class="hljs-string">'Product 3'</span>, <span class="hljs-string">'2024-01-03'</span>,<span class="hljs-number">225.00</span>),
(<span class="hljs-string">'USA'</span>, <span class="hljs-string">'New York'</span>, <span class="hljs-string">'Buffalo'</span>, <span class="hljs-string">'Store D'</span>, <span class="hljs-string">'Product 3'</span>, <span class="hljs-string">'2024-01-04'</span>, <span class="hljs-number">250.00</span>),
(<span class="hljs-string">'Canada'</span>, <span class="hljs-string">'Ontario'</span>, <span class="hljs-string">'Toronto'</span>, <span class="hljs-string">'Store E'</span>, <span class="hljs-string">'Product 2'</span>, <span class="hljs-string">'2024-01-05'</span>, <span class="hljs-number">300.00</span>),
(<span class="hljs-string">'Canada'</span>, <span class="hljs-string">'British Columbia'</span>, <span class="hljs-string">'Vancouver'</span>, <span class="hljs-string">'Store F'</span>, <span class="hljs-string">'Product 1'</span>, <span class="hljs-string">'2024-01-06'</span>, <span class="hljs-number">350.00</span>),
(<span class="hljs-string">'India'</span>, <span class="hljs-string">'Maharashtra'</span>, <span class="hljs-string">'Mumbai'</span>, <span class="hljs-string">'Store G'</span>, <span class="hljs-string">'Product 2'</span>, <span class="hljs-string">'2024-01-07'</span>, <span class="hljs-number">400.00</span>),
(<span class="hljs-string">'India'</span>, <span class="hljs-string">'Karnataka'</span>, <span class="hljs-string">'Bangalore'</span>, <span class="hljs-string">'Store H'</span>, <span class="hljs-string">'Product 3'</span>, <span class="hljs-string">'2024-01-08'</span>, <span class="hljs-number">450.00</span>),
(<span class="hljs-string">'India'</span>, <span class="hljs-string">'Delhi'</span>, <span class="hljs-string">'New Delhi'</span>, <span class="hljs-string">'Store I'</span>, <span class="hljs-string">'Product 1'</span>, <span class="hljs-string">'2024-01-09'</span>, <span class="hljs-number">500.00</span>),
(<span class="hljs-string">'India'</span>, <span class="hljs-string">'Tamil Nadu'</span>, <span class="hljs-string">'Chennai'</span>, <span class="hljs-string">'Store J'</span>, <span class="hljs-string">'Product 2'</span>, <span class="hljs-string">'2024-01-10'</span>, <span class="hljs-number">550.00</span>),
(<span class="hljs-string">'USA'</span>, <span class="hljs-string">'Texas'</span>, <span class="hljs-string">'Houston'</span>, <span class="hljs-string">'Store K'</span>, <span class="hljs-string">'Product 1'</span>, <span class="hljs-string">'2024-01-11'</span>, <span class="hljs-number">600.00</span>),
(<span class="hljs-string">'USA'</span>, <span class="hljs-string">'Florida'</span>, <span class="hljs-string">'Miami'</span>, <span class="hljs-string">'Store L'</span>, <span class="hljs-string">'Product 3'</span>, <span class="hljs-string">'2024-01-12'</span>, <span class="hljs-number">650.00</span>),
(<span class="hljs-string">'Canada'</span>, <span class="hljs-string">'Quebec'</span>, <span class="hljs-string">'Montreal'</span>, <span class="hljs-string">'Store M'</span>, <span class="hljs-string">'Product 2'</span>, <span class="hljs-string">'2024-01-13'</span>, <span class="hljs-number">700.00</span>),
(<span class="hljs-string">'India'</span>, <span class="hljs-string">'West Bengal'</span>, <span class="hljs-string">'Kolkata'</span>, <span class="hljs-string">'Store N'</span>, <span class="hljs-string">'Product 3'</span>, <span class="hljs-string">'2024-01-14'</span>, <span class="hljs-number">750.00</span>);
</code></pre>
<p>product_sales 테이블을 조회하면 아래와 같은 데이터가 나올 거예요.</p>
<img src="/assets/img/2024-06-30-SQLAggregationGroupingSetsandCubeExplained_1.png">
<div class="content-ad"></div>
<h1>그룹화 세트 이해하기</h1>
<p>그룹화 세트 개념을 이해하기 위한 예제를 살펴보겠습니다. 이 예제에서는 미국의 총 매출을 보고, 주(state)와 도시(city)의 다양한 조합으로 그룹화하고 싶습니다. 아래 쿼리를 사용하여 GROUP BY 절만으로 이 작업을 수행할 수 있습니다.</p>
<pre><code class="hljs language-js"><span class="hljs-variable constant_">SELECT</span> state
 ,city
 ,<span class="hljs-title function_">SUM</span>(sales_amount) <span class="hljs-variable constant_">AS</span> total_sales
<span class="hljs-variable constant_">FROM</span> product_sales
<span class="hljs-variable constant_">WHERE</span> country = <span class="hljs-string">'USA'</span>
<span class="hljs-variable constant_">GROUP</span> <span class="hljs-variable constant_">BY</span> state
 ,city

<span class="hljs-variable constant_">UNION</span> <span class="hljs-variable constant_">ALL</span>

<span class="hljs-variable constant_">SELECT</span> state
 ,<span class="hljs-variable constant_">NULL</span> <span class="hljs-variable constant_">AS</span> city
 ,<span class="hljs-title function_">SUM</span>(sales_amount) <span class="hljs-variable constant_">AS</span> total_sales
<span class="hljs-variable constant_">FROM</span> product_sales
<span class="hljs-variable constant_">WHERE</span> country = <span class="hljs-string">'USA'</span>
<span class="hljs-variable constant_">GROUP</span> <span class="hljs-variable constant_">BY</span> state

<span class="hljs-variable constant_">UNION</span> <span class="hljs-variable constant_">ALL</span>

<span class="hljs-variable constant_">SELECT</span> <span class="hljs-variable constant_">NULL</span> <span class="hljs-variable constant_">AS</span> state
 ,city
 ,<span class="hljs-title function_">SUM</span>(sales_amount) <span class="hljs-variable constant_">AS</span> total_sales
<span class="hljs-variable constant_">FROM</span> product_sales
<span class="hljs-variable constant_">WHERE</span> country = <span class="hljs-string">'USA'</span>
<span class="hljs-variable constant_">GROUP</span> <span class="hljs-variable constant_">BY</span> city

<span class="hljs-variable constant_">UNION</span> <span class="hljs-variable constant_">ALL</span>

<span class="hljs-variable constant_">SELECT</span> <span class="hljs-variable constant_">NULL</span> <span class="hljs-variable constant_">AS</span> state
 ,<span class="hljs-variable constant_">NULL</span> <span class="hljs-variable constant_">AS</span> city
 ,<span class="hljs-title function_">SUM</span>(sales_amount) <span class="hljs-variable constant_">AS</span> total_sales
<span class="hljs-variable constant_">FROM</span> product_sales
<span class="hljs-variable constant_">WHERE</span> country = <span class="hljs-string">'USA'</span>;
</code></pre>
<p>쿼리는 다음과 유사한 결과를 생성합니다 -</p>
<div class="content-ad"></div>
<p><img src="/assets/img/2024-06-30-SQLAggregationGroupingSetsandCubeExplained_2.png" alt="2024-06-30-SQLAggregationGroupingSetsandCubeExplained_2.png"></p>
<p>이 접근 방식에는 두 가지 주요 문제가 있습니다:</p>
<ul>
<li>코드의 장황함: 비슷한 코드를 반복 타이핑해야 하며, 두 개의 열로는 관리할 수 있지만, 세 개 이상으로 늘어날수록 번거로워집니다. 이렇게 되면 운영 오버헤드가 증가하게 됩니다.</li>
<li>성능: 쿼리가 테이블을 여러 번 스캔합니다(이 예시에서는 네 번). 열의 수가 늘어날수록 - 예를 들어, 세 개의 열로 할 경우 - 쿼리는 테이블을 여덟 번 스캔합니다. 이 순차적인 스캔은 특히 대형 테이블의 경우 성능에 심각한 영향을 미치며, 실행 속도가 느려질 수 있습니다.</li>
</ul>
<p><img src="/assets/img/2024-06-30-SQLAggregationGroupingSetsandCubeExplained_3.png" alt="2024-06-30-SQLAggregationGroupingSetsandCubeExplained_3.png"></p>
<div class="content-ad"></div>
<p>하지만 Grouping Sets는 Group By 절의 하위 절로 해결책을 제공합니다. 이는 코드를 간소화할 뿐만 아니라 테이블을 한 번만 스캔하여 성능을 크게 향상시킵니다.</p>
<pre><code class="hljs language-js"><span class="hljs-variable constant_">SELECT</span> state
 ,city
 ,<span class="hljs-title function_">sum</span>(sales_amount) <span class="hljs-variable constant_">AS</span> total_sales
<span class="hljs-variable constant_">FROM</span> product_sales
<span class="hljs-variable constant_">WHERE</span> country = <span class="hljs-string">'USA'</span>
<span class="hljs-variable constant_">GROUP</span> <span class="hljs-variable constant_">BY</span> <span class="hljs-variable constant_">GROUPING</span> <span class="hljs-title function_">SETS</span>((state,city),(state), (city), ())
</code></pre>
<p>아래와 같이 보여지는 Grouping Sets를 사용할 때, 쿼리는 테이블을 한 번만 스캔합니다.</p>
<pre><code class="hljs language-js"><span class="hljs-variable constant_">EXPLAIN</span> 
<span class="hljs-variable constant_">SELECT</span> state
 ,city
 ,<span class="hljs-title function_">sum</span>(sales_amount) <span class="hljs-variable constant_">AS</span> total_sales
<span class="hljs-variable constant_">FROM</span> product_sales
<span class="hljs-variable constant_">WHERE</span> country = <span class="hljs-string">'USA'</span>
<span class="hljs-variable constant_">GROUP</span> <span class="hljs-variable constant_">BY</span> <span class="hljs-variable constant_">GROUPING</span> <span class="hljs-title function_">SETS</span>((state,city),(state), (city), ())
</code></pre>
<div class="content-ad"></div>
<img src="/assets/img/2024-06-30-SQLAggregationGroupingSetsandCubeExplained_4.png">
<p>이제 Grouping Sets에 세 번째 열을 포함하면, 쿼리는 다음과 같이 보일 수 있습니다 -</p>
<pre><code class="hljs language-js"><span class="hljs-variable constant_">SELECT</span> state
 ,city
 ,<span class="hljs-title function_">sum</span>(sales_amount) <span class="hljs-variable constant_">AS</span> total_sales
<span class="hljs-variable constant_">FROM</span> product_sales
<span class="hljs-variable constant_">WHERE</span> country = <span class="hljs-string">'USA'</span>
<span class="hljs-variable constant_">GROUP</span> <span class="hljs-variable constant_">BY</span> <span class="hljs-variable constant_">GROUPING</span> <span class="hljs-title function_">SETS</span>((state,city,store),(state,city), (state, store), 
(city, store), (state), (city), (store), ())
</code></pre>
<h1>CUBE 설명</h1>
<div class="content-ad"></div>
<p>위 예제에서 8가지 조합을 볼 수 있습니다. 그루핑 세트는 열의 수가 증가함에 따라 장황하고 오류가 발생할 수 있습니다. 이를 극복하기 위해 GROUP BY의 다른 하위 절인 CUBE가 있습니다. CUBE는 열의 모든 조합을 간결하게 제공합니다.</p>
<p>아래는 Markdown으로 서식이 지정된 쿼리 출력입니다. 빈 셀은 NULL 값을 나타냅니다.</p>
<pre><code class="hljs language-js">| state      | city          | total_sales |
|------------|---------------|------------|
|            |               | <span class="hljs-number">2175.00</span>    |
| <span class="hljs-title class_">New</span> <span class="hljs-title class_">York</span>   | <span class="hljs-title class_">New</span> <span class="hljs-title class_">York</span>      | <span class="hljs-number">225.00</span>     |
| <span class="hljs-title class_">New</span> <span class="hljs-title class_">York</span>   | <span class="hljs-title class_">New</span> <span class="hljs-title class_">York</span>      | <span class="hljs-number">200.00</span>     |
| <span class="hljs-title class_">California</span> | <span class="hljs-title class_">San</span> <span class="hljs-title class_">Francisco</span> | <span class="hljs-number">150.00</span>     |
| <span class="hljs-title class_">Texas</span>      | <span class="hljs-title class_">Houston</span>       | <span class="hljs-number">600.00</span>     |
| <span class="hljs-title class_">New</span> <span class="hljs-title class_">York</span>   | <span class="hljs-title class_">Buffalo</span>       | <span class="hljs-number">250.00</span>     |
| <span class="hljs-title class_">California</span> | <span class="hljs-title class_">Los</span> <span class="hljs-title class_">Angeles</span>   | <span class="hljs-number">100.00</span>     |
| <span class="hljs-title class_">Florida</span>    | <span class="hljs-title class_">Miami</span>         | <span class="hljs-number">650.00</span>     |
| <span class="hljs-title class_">California</span> | <span class="hljs-title class_">San</span> <span class="hljs-title class_">Francisco</span> | <span class="hljs-number">150.00</span>     |
| <span class="hljs-title class_">New</span> <span class="hljs-title class_">York</span>   | <span class="hljs-title class_">New</span> <span class="hljs-title class_">York</span>      | <span class="hljs-number">425.00</span>     |
| <span class="hljs-title class_">Florida</span>    | <span class="hljs-title class_">Miami</span>         | <span class="hljs-number">650.00</span>     |
| <span class="hljs-title class_">New</span> <span class="hljs-title class_">York</span>   | <span class="hljs-title class_">Buffalo</span>       | <span class="hljs-number">250.00</span>     |
| <span class="hljs-title class_">Texas</span>      | <span class="hljs-title class_">Houston</span>       | <span class="hljs-number">600.00</span>     |
| <span class="hljs-title class_">California</span> | <span class="hljs-title class_">Los</span> <span class="hljs-title class_">Angeles</span>   | <span class="hljs-number">100.00</span>     |
| <span class="hljs-title class_">New</span> <span class="hljs-title class_">York</span>   |               | <span class="hljs-number">675.00</span>     |
| <span class="hljs-title class_">Texas</span>      |               | <span class="hljs-number">600.00</span>     |
| <span class="hljs-title class_">California</span> |               | <span class="hljs-number">250.00</span>     |
| <span class="hljs-title class_">Florida</span>    |               | <span class="hljs-number">650.00</span>     |
|            | <span class="hljs-title class_">Buffalo</span>       | <span class="hljs-number">250.00</span>     |
|            | <span class="hljs-title class_">New</span> <span class="hljs-title class_">York</span>      | <span class="hljs-number">200.00</span>     |
|            | <span class="hljs-title class_">Miami</span>         | <span class="hljs-number">650.00</span>     |
|            | <span class="hljs-title class_">San</span> <span class="hljs-title class_">Francisco</span> | <span class="hljs-number">150.00</span>     |
|            | <span class="hljs-title class_">Los</span> <span class="hljs-title class_">Angeles</span>   | <span class="hljs-number">100.00</span>     |
|            | <span class="hljs-title class_">Houston</span>       | <span class="hljs-number">600.00</span>     |
|            | <span class="hljs-title class_">New</span> <span class="hljs-title class_">York</span>      | <span class="hljs-number">225.00</span>     |
|            | <span class="hljs-title class_">New</span> <span class="hljs-title class_">York</span>      | <span class="hljs-number">425.00</span>     |
|            | <span class="hljs-title class_">Houston</span>       | <span class="hljs-number">600.00</span>     |
|            | <span class="hljs-title class_">Buffalo</span>       | <span class="hljs-number">250.00</span>     |
|            | <span class="hljs-title class_">Los</span> <span class="hljs-title class_">Angeles</span>   | <span class="hljs-number">100.00</span>     |
|            | <span class="hljs-title class_">Miami</span>         | <span class="hljs-number">650.00</span>     |
|            | <span class="hljs-title class_">San</span> <span class="hljs-title class_">Francisco</span> | <span class="hljs-number">150.00</span>     |
| <span class="hljs-title class_">New</span> <span class="hljs-title class_">York</span>   |               | <span class="hljs-number">225.00</span>     |
| <span class="hljs-title class_">Texas</span>      |               | <span class="hljs-number">600.00</span>     |
| <span class="hljs-title class_">New</span> <span class="hljs-title class_">York</span>   |               | <span class="hljs-number">200.00</span>     |
| <span class="hljs-title class_">New</span> <span class="hljs-title class_">York</span>   |               | <span class="hljs-number">250.00</span>     |
| <span class="hljs-title class_">California</span> |               | <span class="hljs-number">150.00</span>     |
| <span class="hljs-title class_">California</span> |               | <span class="hljs-number">100.00</span>     |
| <span class="hljs-title class_">Florida</span>    |               | <span class="hljs-number">650.00</span>     |
|            |               | <span class="hljs-number">200.00</span>     |
|            |               | <span class="hljs-number">150.00</span>     |
|            |               | <span class="hljs-number">100.00</span>     |
|            |               | <span class="hljs-number">600.00</span>     |
|            |               | <span class="hljs-number">650.00</span>     |
|            |               | <span class="hljs-number">250.00</span>     |
|            |               | <span class="hljs-number">225.00</span>     |
</code></pre>
<div class="content-ad"></div>
<h1>요약</h1>
<p>여기서는 Grouping Sets 및 Cube와 같은 고급 Group By 하위 절이 코드의 간결성을 향상시키는 뿐만 아니라 성능을 향상시켜 고급 데이터 분석에 가치를 더하는 방법을 살펴보았습니다. 또한 탐색할 가치가 있는 다른 하위 절은 ROLLUP입니다.</p>
<p>또한, 이러한 기능들은 PostgreSQL에서 테스트되었으며 SQL Server에서도 지원됩니다. 이러한 개념을 적용하기 전에 귀하의 관계형 데이터베이스 관리 시스템이 이를 지원하는지 확인하십시오.</p>
</body>
</html>
</div></article></div></main></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"title":"SQL 집계 Grouping Sets와 Cube 쉽게 이해하기","description":"","date":"2024-06-30 23:24","slug":"2024-06-30-SQLAggregationGroupingSetsandCubeExplained","content":"\n\n\n![이미지](/assets/img/2024-06-30-SQLAggregationGroupingSetsandCubeExplained_0.png)\n\n# 소개\n\n데이터 분석에서 SQL의 GROUP BY 절을 사용하면 다른 카테고리에 따라 데이터를 요약하거나 합산하는 유용한 방법입니다. 그러나 몇 가지 제한 사항이 있습니다:\n\n- 한 번에 고정된 수의 열을 그룹화 할 수 있습니다.\n- 서로 다른 열의 조합으로 그룹화해야 하는 경우 쿼리가 길고 반복적인 경우가 발생할 수 있습니다.\n- 성능이 떨어질 수 있습니다. 이는 테이블을 여러 번 스캔해야 하기 때문입니다.\n\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n다음 섹션에서는 이러한 문제를 더 자세히 살펴볼 것입니다. 그러나 먼저 데이터를 준비해 봅시다.\n\n# 데이터 준비\n\n다음은 product_sales라는 테이블을 만드는 방법입니다.\n\n```js\nCREATE TABLE product_sales (\n country VARCHAR(30)\n ,state VARCHAR(20)\n ,city VARCHAR(20)\n ,store VARCHAR(20)\n ,sales_amount DECIMAL(10, 2)\n )\n```\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n이 테이블에 더미 데이터를 삽입하는 코드가 있어요. 이것을 통해 개념을 더 잘 이해할 수 있을 거예요.\n\n```js\nINSERT INTO product_sales (country, state, city, store, product, sales_date, sales_amount) VALUES\n('USA', 'California', 'Los Angeles', 'Store A', 'Product 1', '2024-01-01', 100.00),\n('USA', 'California', 'San Francisco', 'Store B', 'Product 2', '2024-01-02', 150.00),\n('USA', 'New York', 'New York', 'Store C', 'Product 1', '2024-01-03', 200.00),\n('USA', 'New York', 'New York', 'Store C2', 'Product 3', '2024-01-03',225.00),\n('USA', 'New York', 'Buffalo', 'Store D', 'Product 3', '2024-01-04', 250.00),\n('Canada', 'Ontario', 'Toronto', 'Store E', 'Product 2', '2024-01-05', 300.00),\n('Canada', 'British Columbia', 'Vancouver', 'Store F', 'Product 1', '2024-01-06', 350.00),\n('India', 'Maharashtra', 'Mumbai', 'Store G', 'Product 2', '2024-01-07', 400.00),\n('India', 'Karnataka', 'Bangalore', 'Store H', 'Product 3', '2024-01-08', 450.00),\n('India', 'Delhi', 'New Delhi', 'Store I', 'Product 1', '2024-01-09', 500.00),\n('India', 'Tamil Nadu', 'Chennai', 'Store J', 'Product 2', '2024-01-10', 550.00),\n('USA', 'Texas', 'Houston', 'Store K', 'Product 1', '2024-01-11', 600.00),\n('USA', 'Florida', 'Miami', 'Store L', 'Product 3', '2024-01-12', 650.00),\n('Canada', 'Quebec', 'Montreal', 'Store M', 'Product 2', '2024-01-13', 700.00),\n('India', 'West Bengal', 'Kolkata', 'Store N', 'Product 3', '2024-01-14', 750.00);\n```\n\nproduct_sales 테이블을 조회하면 아래와 같은 데이터가 나올 거예요.\n\n\u003cimg src=\"/assets/img/2024-06-30-SQLAggregationGroupingSetsandCubeExplained_1.png\" /\u003e\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n# 그룹화 세트 이해하기\n\n그룹화 세트 개념을 이해하기 위한 예제를 살펴보겠습니다. 이 예제에서는 미국의 총 매출을 보고, 주(state)와 도시(city)의 다양한 조합으로 그룹화하고 싶습니다. 아래 쿼리를 사용하여 GROUP BY 절만으로 이 작업을 수행할 수 있습니다.\n\n```js\nSELECT state\n ,city\n ,SUM(sales_amount) AS total_sales\nFROM product_sales\nWHERE country = 'USA'\nGROUP BY state\n ,city\n\nUNION ALL\n\nSELECT state\n ,NULL AS city\n ,SUM(sales_amount) AS total_sales\nFROM product_sales\nWHERE country = 'USA'\nGROUP BY state\n\nUNION ALL\n\nSELECT NULL AS state\n ,city\n ,SUM(sales_amount) AS total_sales\nFROM product_sales\nWHERE country = 'USA'\nGROUP BY city\n\nUNION ALL\n\nSELECT NULL AS state\n ,NULL AS city\n ,SUM(sales_amount) AS total_sales\nFROM product_sales\nWHERE country = 'USA';\n```\n\n쿼리는 다음과 유사한 결과를 생성합니다 -\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n![2024-06-30-SQLAggregationGroupingSetsandCubeExplained_2.png](/assets/img/2024-06-30-SQLAggregationGroupingSetsandCubeExplained_2.png)\n\n이 접근 방식에는 두 가지 주요 문제가 있습니다:\n\n- 코드의 장황함: 비슷한 코드를 반복 타이핑해야 하며, 두 개의 열로는 관리할 수 있지만, 세 개 이상으로 늘어날수록 번거로워집니다. 이렇게 되면 운영 오버헤드가 증가하게 됩니다.\n- 성능: 쿼리가 테이블을 여러 번 스캔합니다(이 예시에서는 네 번). 열의 수가 늘어날수록 - 예를 들어, 세 개의 열로 할 경우 - 쿼리는 테이블을 여덟 번 스캔합니다. 이 순차적인 스캔은 특히 대형 테이블의 경우 성능에 심각한 영향을 미치며, 실행 속도가 느려질 수 있습니다.\n\n![2024-06-30-SQLAggregationGroupingSetsandCubeExplained_3.png](/assets/img/2024-06-30-SQLAggregationGroupingSetsandCubeExplained_3.png)\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n하지만 Grouping Sets는 Group By 절의 하위 절로 해결책을 제공합니다. 이는 코드를 간소화할 뿐만 아니라 테이블을 한 번만 스캔하여 성능을 크게 향상시킵니다.\n\n```js\nSELECT state\n ,city\n ,sum(sales_amount) AS total_sales\nFROM product_sales\nWHERE country = 'USA'\nGROUP BY GROUPING SETS((state,city),(state), (city), ())\n```\n\n아래와 같이 보여지는 Grouping Sets를 사용할 때, 쿼리는 테이블을 한 번만 스캔합니다.\n\n```js\nEXPLAIN \nSELECT state\n ,city\n ,sum(sales_amount) AS total_sales\nFROM product_sales\nWHERE country = 'USA'\nGROUP BY GROUPING SETS((state,city),(state), (city), ())\n```\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n\u003cimg src=\"/assets/img/2024-06-30-SQLAggregationGroupingSetsandCubeExplained_4.png\" /\u003e\n\n이제 Grouping Sets에 세 번째 열을 포함하면, 쿼리는 다음과 같이 보일 수 있습니다 -\n\n```js\nSELECT state\n ,city\n ,sum(sales_amount) AS total_sales\nFROM product_sales\nWHERE country = 'USA'\nGROUP BY GROUPING SETS((state,city,store),(state,city), (state, store), \n(city, store), (state), (city), (store), ())\n```\n\n# CUBE 설명\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n위 예제에서 8가지 조합을 볼 수 있습니다. 그루핑 세트는 열의 수가 증가함에 따라 장황하고 오류가 발생할 수 있습니다. 이를 극복하기 위해 GROUP BY의 다른 하위 절인 CUBE가 있습니다. CUBE는 열의 모든 조합을 간결하게 제공합니다.\n\n아래는 Markdown으로 서식이 지정된 쿼리 출력입니다. 빈 셀은 NULL 값을 나타냅니다.\n\n```js\n| state      | city          | total_sales |\n|------------|---------------|------------|\n|            |               | 2175.00    |\n| New York   | New York      | 225.00     |\n| New York   | New York      | 200.00     |\n| California | San Francisco | 150.00     |\n| Texas      | Houston       | 600.00     |\n| New York   | Buffalo       | 250.00     |\n| California | Los Angeles   | 100.00     |\n| Florida    | Miami         | 650.00     |\n| California | San Francisco | 150.00     |\n| New York   | New York      | 425.00     |\n| Florida    | Miami         | 650.00     |\n| New York   | Buffalo       | 250.00     |\n| Texas      | Houston       | 600.00     |\n| California | Los Angeles   | 100.00     |\n| New York   |               | 675.00     |\n| Texas      |               | 600.00     |\n| California |               | 250.00     |\n| Florida    |               | 650.00     |\n|            | Buffalo       | 250.00     |\n|            | New York      | 200.00     |\n|            | Miami         | 650.00     |\n|            | San Francisco | 150.00     |\n|            | Los Angeles   | 100.00     |\n|            | Houston       | 600.00     |\n|            | New York      | 225.00     |\n|            | New York      | 425.00     |\n|            | Houston       | 600.00     |\n|            | Buffalo       | 250.00     |\n|            | Los Angeles   | 100.00     |\n|            | Miami         | 650.00     |\n|            | San Francisco | 150.00     |\n| New York   |               | 225.00     |\n| Texas      |               | 600.00     |\n| New York   |               | 200.00     |\n| New York   |               | 250.00     |\n| California |               | 150.00     |\n| California |               | 100.00     |\n| Florida    |               | 650.00     |\n|            |               | 200.00     |\n|            |               | 150.00     |\n|            |               | 100.00     |\n|            |               | 600.00     |\n|            |               | 650.00     |\n|            |               | 250.00     |\n|            |               | 225.00     |\n```\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n# 요약\n\n여기서는 Grouping Sets 및 Cube와 같은 고급 Group By 하위 절이 코드의 간결성을 향상시키는 뿐만 아니라 성능을 향상시켜 고급 데이터 분석에 가치를 더하는 방법을 살펴보았습니다. 또한 탐색할 가치가 있는 다른 하위 절은 ROLLUP입니다. \n\n또한, 이러한 기능들은 PostgreSQL에서 테스트되었으며 SQL Server에서도 지원됩니다. 이러한 개념을 적용하기 전에 귀하의 관계형 데이터베이스 관리 시스템이 이를 지원하는지 확인하십시오.","ogImage":{"url":"/assets/img/2024-06-30-SQLAggregationGroupingSetsandCubeExplained_0.png"},"coverImage":"/assets/img/2024-06-30-SQLAggregationGroupingSetsandCubeExplained_0.png","tag":["Tech"],"readingTime":8},"content":"\u003c!doctype html\u003e\n\u003chtml lang=\"en\"\u003e\n\u003chead\u003e\n\u003cmeta charset=\"utf-8\"\u003e\n\u003cmeta content=\"width=device-width, initial-scale=1\" name=\"viewport\"\u003e\n\u003c/head\u003e\n\u003cbody\u003e\n\u003cp\u003e\u003cimg src=\"/assets/img/2024-06-30-SQLAggregationGroupingSetsandCubeExplained_0.png\" alt=\"이미지\"\u003e\u003c/p\u003e\n\u003ch1\u003e소개\u003c/h1\u003e\n\u003cp\u003e데이터 분석에서 SQL의 GROUP BY 절을 사용하면 다른 카테고리에 따라 데이터를 요약하거나 합산하는 유용한 방법입니다. 그러나 몇 가지 제한 사항이 있습니다:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e한 번에 고정된 수의 열을 그룹화 할 수 있습니다.\u003c/li\u003e\n\u003cli\u003e서로 다른 열의 조합으로 그룹화해야 하는 경우 쿼리가 길고 반복적인 경우가 발생할 수 있습니다.\u003c/li\u003e\n\u003cli\u003e성능이 떨어질 수 있습니다. 이는 테이블을 여러 번 스캔해야 하기 때문입니다.\u003c/li\u003e\n\u003c/ul\u003e\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\u003cp\u003e다음 섹션에서는 이러한 문제를 더 자세히 살펴볼 것입니다. 그러나 먼저 데이터를 준비해 봅시다.\u003c/p\u003e\n\u003ch1\u003e데이터 준비\u003c/h1\u003e\n\u003cp\u003e다음은 product_sales라는 테이블을 만드는 방법입니다.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-variable constant_\"\u003eCREATE\u003c/span\u003e \u003cspan class=\"hljs-variable constant_\"\u003eTABLE\u003c/span\u003e product_sales (\n country \u003cspan class=\"hljs-title function_\"\u003eVARCHAR\u003c/span\u003e(\u003cspan class=\"hljs-number\"\u003e30\u003c/span\u003e)\n ,state \u003cspan class=\"hljs-title function_\"\u003eVARCHAR\u003c/span\u003e(\u003cspan class=\"hljs-number\"\u003e20\u003c/span\u003e)\n ,city \u003cspan class=\"hljs-title function_\"\u003eVARCHAR\u003c/span\u003e(\u003cspan class=\"hljs-number\"\u003e20\u003c/span\u003e)\n ,store \u003cspan class=\"hljs-title function_\"\u003eVARCHAR\u003c/span\u003e(\u003cspan class=\"hljs-number\"\u003e20\u003c/span\u003e)\n ,sales_amount \u003cspan class=\"hljs-title function_\"\u003eDECIMAL\u003c/span\u003e(\u003cspan class=\"hljs-number\"\u003e10\u003c/span\u003e, \u003cspan class=\"hljs-number\"\u003e2\u003c/span\u003e)\n )\n\u003c/code\u003e\u003c/pre\u003e\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\u003cp\u003e이 테이블에 더미 데이터를 삽입하는 코드가 있어요. 이것을 통해 개념을 더 잘 이해할 수 있을 거예요.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-variable constant_\"\u003eINSERT\u003c/span\u003e \u003cspan class=\"hljs-variable constant_\"\u003eINTO\u003c/span\u003e product_sales (country, state, city, store, product, sales_date, sales_amount) \u003cspan class=\"hljs-variable constant_\"\u003eVALUES\u003c/span\u003e\n(\u003cspan class=\"hljs-string\"\u003e'USA'\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'California'\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'Los Angeles'\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'Store A'\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'Product 1'\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'2024-01-01'\u003c/span\u003e, \u003cspan class=\"hljs-number\"\u003e100.00\u003c/span\u003e),\n(\u003cspan class=\"hljs-string\"\u003e'USA'\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'California'\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'San Francisco'\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'Store B'\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'Product 2'\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'2024-01-02'\u003c/span\u003e, \u003cspan class=\"hljs-number\"\u003e150.00\u003c/span\u003e),\n(\u003cspan class=\"hljs-string\"\u003e'USA'\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'New York'\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'New York'\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'Store C'\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'Product 1'\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'2024-01-03'\u003c/span\u003e, \u003cspan class=\"hljs-number\"\u003e200.00\u003c/span\u003e),\n(\u003cspan class=\"hljs-string\"\u003e'USA'\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'New York'\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'New York'\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'Store C2'\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'Product 3'\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'2024-01-03'\u003c/span\u003e,\u003cspan class=\"hljs-number\"\u003e225.00\u003c/span\u003e),\n(\u003cspan class=\"hljs-string\"\u003e'USA'\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'New York'\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'Buffalo'\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'Store D'\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'Product 3'\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'2024-01-04'\u003c/span\u003e, \u003cspan class=\"hljs-number\"\u003e250.00\u003c/span\u003e),\n(\u003cspan class=\"hljs-string\"\u003e'Canada'\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'Ontario'\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'Toronto'\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'Store E'\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'Product 2'\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'2024-01-05'\u003c/span\u003e, \u003cspan class=\"hljs-number\"\u003e300.00\u003c/span\u003e),\n(\u003cspan class=\"hljs-string\"\u003e'Canada'\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'British Columbia'\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'Vancouver'\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'Store F'\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'Product 1'\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'2024-01-06'\u003c/span\u003e, \u003cspan class=\"hljs-number\"\u003e350.00\u003c/span\u003e),\n(\u003cspan class=\"hljs-string\"\u003e'India'\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'Maharashtra'\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'Mumbai'\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'Store G'\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'Product 2'\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'2024-01-07'\u003c/span\u003e, \u003cspan class=\"hljs-number\"\u003e400.00\u003c/span\u003e),\n(\u003cspan class=\"hljs-string\"\u003e'India'\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'Karnataka'\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'Bangalore'\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'Store H'\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'Product 3'\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'2024-01-08'\u003c/span\u003e, \u003cspan class=\"hljs-number\"\u003e450.00\u003c/span\u003e),\n(\u003cspan class=\"hljs-string\"\u003e'India'\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'Delhi'\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'New Delhi'\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'Store I'\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'Product 1'\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'2024-01-09'\u003c/span\u003e, \u003cspan class=\"hljs-number\"\u003e500.00\u003c/span\u003e),\n(\u003cspan class=\"hljs-string\"\u003e'India'\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'Tamil Nadu'\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'Chennai'\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'Store J'\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'Product 2'\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'2024-01-10'\u003c/span\u003e, \u003cspan class=\"hljs-number\"\u003e550.00\u003c/span\u003e),\n(\u003cspan class=\"hljs-string\"\u003e'USA'\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'Texas'\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'Houston'\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'Store K'\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'Product 1'\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'2024-01-11'\u003c/span\u003e, \u003cspan class=\"hljs-number\"\u003e600.00\u003c/span\u003e),\n(\u003cspan class=\"hljs-string\"\u003e'USA'\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'Florida'\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'Miami'\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'Store L'\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'Product 3'\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'2024-01-12'\u003c/span\u003e, \u003cspan class=\"hljs-number\"\u003e650.00\u003c/span\u003e),\n(\u003cspan class=\"hljs-string\"\u003e'Canada'\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'Quebec'\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'Montreal'\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'Store M'\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'Product 2'\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'2024-01-13'\u003c/span\u003e, \u003cspan class=\"hljs-number\"\u003e700.00\u003c/span\u003e),\n(\u003cspan class=\"hljs-string\"\u003e'India'\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'West Bengal'\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'Kolkata'\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'Store N'\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'Product 3'\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'2024-01-14'\u003c/span\u003e, \u003cspan class=\"hljs-number\"\u003e750.00\u003c/span\u003e);\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eproduct_sales 테이블을 조회하면 아래와 같은 데이터가 나올 거예요.\u003c/p\u003e\n\u003cimg src=\"/assets/img/2024-06-30-SQLAggregationGroupingSetsandCubeExplained_1.png\"\u003e\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\u003ch1\u003e그룹화 세트 이해하기\u003c/h1\u003e\n\u003cp\u003e그룹화 세트 개념을 이해하기 위한 예제를 살펴보겠습니다. 이 예제에서는 미국의 총 매출을 보고, 주(state)와 도시(city)의 다양한 조합으로 그룹화하고 싶습니다. 아래 쿼리를 사용하여 GROUP BY 절만으로 이 작업을 수행할 수 있습니다.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-variable constant_\"\u003eSELECT\u003c/span\u003e state\n ,city\n ,\u003cspan class=\"hljs-title function_\"\u003eSUM\u003c/span\u003e(sales_amount) \u003cspan class=\"hljs-variable constant_\"\u003eAS\u003c/span\u003e total_sales\n\u003cspan class=\"hljs-variable constant_\"\u003eFROM\u003c/span\u003e product_sales\n\u003cspan class=\"hljs-variable constant_\"\u003eWHERE\u003c/span\u003e country = \u003cspan class=\"hljs-string\"\u003e'USA'\u003c/span\u003e\n\u003cspan class=\"hljs-variable constant_\"\u003eGROUP\u003c/span\u003e \u003cspan class=\"hljs-variable constant_\"\u003eBY\u003c/span\u003e state\n ,city\n\n\u003cspan class=\"hljs-variable constant_\"\u003eUNION\u003c/span\u003e \u003cspan class=\"hljs-variable constant_\"\u003eALL\u003c/span\u003e\n\n\u003cspan class=\"hljs-variable constant_\"\u003eSELECT\u003c/span\u003e state\n ,\u003cspan class=\"hljs-variable constant_\"\u003eNULL\u003c/span\u003e \u003cspan class=\"hljs-variable constant_\"\u003eAS\u003c/span\u003e city\n ,\u003cspan class=\"hljs-title function_\"\u003eSUM\u003c/span\u003e(sales_amount) \u003cspan class=\"hljs-variable constant_\"\u003eAS\u003c/span\u003e total_sales\n\u003cspan class=\"hljs-variable constant_\"\u003eFROM\u003c/span\u003e product_sales\n\u003cspan class=\"hljs-variable constant_\"\u003eWHERE\u003c/span\u003e country = \u003cspan class=\"hljs-string\"\u003e'USA'\u003c/span\u003e\n\u003cspan class=\"hljs-variable constant_\"\u003eGROUP\u003c/span\u003e \u003cspan class=\"hljs-variable constant_\"\u003eBY\u003c/span\u003e state\n\n\u003cspan class=\"hljs-variable constant_\"\u003eUNION\u003c/span\u003e \u003cspan class=\"hljs-variable constant_\"\u003eALL\u003c/span\u003e\n\n\u003cspan class=\"hljs-variable constant_\"\u003eSELECT\u003c/span\u003e \u003cspan class=\"hljs-variable constant_\"\u003eNULL\u003c/span\u003e \u003cspan class=\"hljs-variable constant_\"\u003eAS\u003c/span\u003e state\n ,city\n ,\u003cspan class=\"hljs-title function_\"\u003eSUM\u003c/span\u003e(sales_amount) \u003cspan class=\"hljs-variable constant_\"\u003eAS\u003c/span\u003e total_sales\n\u003cspan class=\"hljs-variable constant_\"\u003eFROM\u003c/span\u003e product_sales\n\u003cspan class=\"hljs-variable constant_\"\u003eWHERE\u003c/span\u003e country = \u003cspan class=\"hljs-string\"\u003e'USA'\u003c/span\u003e\n\u003cspan class=\"hljs-variable constant_\"\u003eGROUP\u003c/span\u003e \u003cspan class=\"hljs-variable constant_\"\u003eBY\u003c/span\u003e city\n\n\u003cspan class=\"hljs-variable constant_\"\u003eUNION\u003c/span\u003e \u003cspan class=\"hljs-variable constant_\"\u003eALL\u003c/span\u003e\n\n\u003cspan class=\"hljs-variable constant_\"\u003eSELECT\u003c/span\u003e \u003cspan class=\"hljs-variable constant_\"\u003eNULL\u003c/span\u003e \u003cspan class=\"hljs-variable constant_\"\u003eAS\u003c/span\u003e state\n ,\u003cspan class=\"hljs-variable constant_\"\u003eNULL\u003c/span\u003e \u003cspan class=\"hljs-variable constant_\"\u003eAS\u003c/span\u003e city\n ,\u003cspan class=\"hljs-title function_\"\u003eSUM\u003c/span\u003e(sales_amount) \u003cspan class=\"hljs-variable constant_\"\u003eAS\u003c/span\u003e total_sales\n\u003cspan class=\"hljs-variable constant_\"\u003eFROM\u003c/span\u003e product_sales\n\u003cspan class=\"hljs-variable constant_\"\u003eWHERE\u003c/span\u003e country = \u003cspan class=\"hljs-string\"\u003e'USA'\u003c/span\u003e;\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e쿼리는 다음과 유사한 결과를 생성합니다 -\u003c/p\u003e\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\u003cp\u003e\u003cimg src=\"/assets/img/2024-06-30-SQLAggregationGroupingSetsandCubeExplained_2.png\" alt=\"2024-06-30-SQLAggregationGroupingSetsandCubeExplained_2.png\"\u003e\u003c/p\u003e\n\u003cp\u003e이 접근 방식에는 두 가지 주요 문제가 있습니다:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e코드의 장황함: 비슷한 코드를 반복 타이핑해야 하며, 두 개의 열로는 관리할 수 있지만, 세 개 이상으로 늘어날수록 번거로워집니다. 이렇게 되면 운영 오버헤드가 증가하게 됩니다.\u003c/li\u003e\n\u003cli\u003e성능: 쿼리가 테이블을 여러 번 스캔합니다(이 예시에서는 네 번). 열의 수가 늘어날수록 - 예를 들어, 세 개의 열로 할 경우 - 쿼리는 테이블을 여덟 번 스캔합니다. 이 순차적인 스캔은 특히 대형 테이블의 경우 성능에 심각한 영향을 미치며, 실행 속도가 느려질 수 있습니다.\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e\u003cimg src=\"/assets/img/2024-06-30-SQLAggregationGroupingSetsandCubeExplained_3.png\" alt=\"2024-06-30-SQLAggregationGroupingSetsandCubeExplained_3.png\"\u003e\u003c/p\u003e\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\u003cp\u003e하지만 Grouping Sets는 Group By 절의 하위 절로 해결책을 제공합니다. 이는 코드를 간소화할 뿐만 아니라 테이블을 한 번만 스캔하여 성능을 크게 향상시킵니다.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-variable constant_\"\u003eSELECT\u003c/span\u003e state\n ,city\n ,\u003cspan class=\"hljs-title function_\"\u003esum\u003c/span\u003e(sales_amount) \u003cspan class=\"hljs-variable constant_\"\u003eAS\u003c/span\u003e total_sales\n\u003cspan class=\"hljs-variable constant_\"\u003eFROM\u003c/span\u003e product_sales\n\u003cspan class=\"hljs-variable constant_\"\u003eWHERE\u003c/span\u003e country = \u003cspan class=\"hljs-string\"\u003e'USA'\u003c/span\u003e\n\u003cspan class=\"hljs-variable constant_\"\u003eGROUP\u003c/span\u003e \u003cspan class=\"hljs-variable constant_\"\u003eBY\u003c/span\u003e \u003cspan class=\"hljs-variable constant_\"\u003eGROUPING\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003eSETS\u003c/span\u003e((state,city),(state), (city), ())\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e아래와 같이 보여지는 Grouping Sets를 사용할 때, 쿼리는 테이블을 한 번만 스캔합니다.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-variable constant_\"\u003eEXPLAIN\u003c/span\u003e \n\u003cspan class=\"hljs-variable constant_\"\u003eSELECT\u003c/span\u003e state\n ,city\n ,\u003cspan class=\"hljs-title function_\"\u003esum\u003c/span\u003e(sales_amount) \u003cspan class=\"hljs-variable constant_\"\u003eAS\u003c/span\u003e total_sales\n\u003cspan class=\"hljs-variable constant_\"\u003eFROM\u003c/span\u003e product_sales\n\u003cspan class=\"hljs-variable constant_\"\u003eWHERE\u003c/span\u003e country = \u003cspan class=\"hljs-string\"\u003e'USA'\u003c/span\u003e\n\u003cspan class=\"hljs-variable constant_\"\u003eGROUP\u003c/span\u003e \u003cspan class=\"hljs-variable constant_\"\u003eBY\u003c/span\u003e \u003cspan class=\"hljs-variable constant_\"\u003eGROUPING\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003eSETS\u003c/span\u003e((state,city),(state), (city), ())\n\u003c/code\u003e\u003c/pre\u003e\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\u003cimg src=\"/assets/img/2024-06-30-SQLAggregationGroupingSetsandCubeExplained_4.png\"\u003e\n\u003cp\u003e이제 Grouping Sets에 세 번째 열을 포함하면, 쿼리는 다음과 같이 보일 수 있습니다 -\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-variable constant_\"\u003eSELECT\u003c/span\u003e state\n ,city\n ,\u003cspan class=\"hljs-title function_\"\u003esum\u003c/span\u003e(sales_amount) \u003cspan class=\"hljs-variable constant_\"\u003eAS\u003c/span\u003e total_sales\n\u003cspan class=\"hljs-variable constant_\"\u003eFROM\u003c/span\u003e product_sales\n\u003cspan class=\"hljs-variable constant_\"\u003eWHERE\u003c/span\u003e country = \u003cspan class=\"hljs-string\"\u003e'USA'\u003c/span\u003e\n\u003cspan class=\"hljs-variable constant_\"\u003eGROUP\u003c/span\u003e \u003cspan class=\"hljs-variable constant_\"\u003eBY\u003c/span\u003e \u003cspan class=\"hljs-variable constant_\"\u003eGROUPING\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003eSETS\u003c/span\u003e((state,city,store),(state,city), (state, store), \n(city, store), (state), (city), (store), ())\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch1\u003eCUBE 설명\u003c/h1\u003e\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\u003cp\u003e위 예제에서 8가지 조합을 볼 수 있습니다. 그루핑 세트는 열의 수가 증가함에 따라 장황하고 오류가 발생할 수 있습니다. 이를 극복하기 위해 GROUP BY의 다른 하위 절인 CUBE가 있습니다. CUBE는 열의 모든 조합을 간결하게 제공합니다.\u003c/p\u003e\n\u003cp\u003e아래는 Markdown으로 서식이 지정된 쿼리 출력입니다. 빈 셀은 NULL 값을 나타냅니다.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e| state      | city          | total_sales |\n|------------|---------------|------------|\n|            |               | \u003cspan class=\"hljs-number\"\u003e2175.00\u003c/span\u003e    |\n| \u003cspan class=\"hljs-title class_\"\u003eNew\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eYork\u003c/span\u003e   | \u003cspan class=\"hljs-title class_\"\u003eNew\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eYork\u003c/span\u003e      | \u003cspan class=\"hljs-number\"\u003e225.00\u003c/span\u003e     |\n| \u003cspan class=\"hljs-title class_\"\u003eNew\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eYork\u003c/span\u003e   | \u003cspan class=\"hljs-title class_\"\u003eNew\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eYork\u003c/span\u003e      | \u003cspan class=\"hljs-number\"\u003e200.00\u003c/span\u003e     |\n| \u003cspan class=\"hljs-title class_\"\u003eCalifornia\u003c/span\u003e | \u003cspan class=\"hljs-title class_\"\u003eSan\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eFrancisco\u003c/span\u003e | \u003cspan class=\"hljs-number\"\u003e150.00\u003c/span\u003e     |\n| \u003cspan class=\"hljs-title class_\"\u003eTexas\u003c/span\u003e      | \u003cspan class=\"hljs-title class_\"\u003eHouston\u003c/span\u003e       | \u003cspan class=\"hljs-number\"\u003e600.00\u003c/span\u003e     |\n| \u003cspan class=\"hljs-title class_\"\u003eNew\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eYork\u003c/span\u003e   | \u003cspan class=\"hljs-title class_\"\u003eBuffalo\u003c/span\u003e       | \u003cspan class=\"hljs-number\"\u003e250.00\u003c/span\u003e     |\n| \u003cspan class=\"hljs-title class_\"\u003eCalifornia\u003c/span\u003e | \u003cspan class=\"hljs-title class_\"\u003eLos\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eAngeles\u003c/span\u003e   | \u003cspan class=\"hljs-number\"\u003e100.00\u003c/span\u003e     |\n| \u003cspan class=\"hljs-title class_\"\u003eFlorida\u003c/span\u003e    | \u003cspan class=\"hljs-title class_\"\u003eMiami\u003c/span\u003e         | \u003cspan class=\"hljs-number\"\u003e650.00\u003c/span\u003e     |\n| \u003cspan class=\"hljs-title class_\"\u003eCalifornia\u003c/span\u003e | \u003cspan class=\"hljs-title class_\"\u003eSan\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eFrancisco\u003c/span\u003e | \u003cspan class=\"hljs-number\"\u003e150.00\u003c/span\u003e     |\n| \u003cspan class=\"hljs-title class_\"\u003eNew\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eYork\u003c/span\u003e   | \u003cspan class=\"hljs-title class_\"\u003eNew\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eYork\u003c/span\u003e      | \u003cspan class=\"hljs-number\"\u003e425.00\u003c/span\u003e     |\n| \u003cspan class=\"hljs-title class_\"\u003eFlorida\u003c/span\u003e    | \u003cspan class=\"hljs-title class_\"\u003eMiami\u003c/span\u003e         | \u003cspan class=\"hljs-number\"\u003e650.00\u003c/span\u003e     |\n| \u003cspan class=\"hljs-title class_\"\u003eNew\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eYork\u003c/span\u003e   | \u003cspan class=\"hljs-title class_\"\u003eBuffalo\u003c/span\u003e       | \u003cspan class=\"hljs-number\"\u003e250.00\u003c/span\u003e     |\n| \u003cspan class=\"hljs-title class_\"\u003eTexas\u003c/span\u003e      | \u003cspan class=\"hljs-title class_\"\u003eHouston\u003c/span\u003e       | \u003cspan class=\"hljs-number\"\u003e600.00\u003c/span\u003e     |\n| \u003cspan class=\"hljs-title class_\"\u003eCalifornia\u003c/span\u003e | \u003cspan class=\"hljs-title class_\"\u003eLos\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eAngeles\u003c/span\u003e   | \u003cspan class=\"hljs-number\"\u003e100.00\u003c/span\u003e     |\n| \u003cspan class=\"hljs-title class_\"\u003eNew\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eYork\u003c/span\u003e   |               | \u003cspan class=\"hljs-number\"\u003e675.00\u003c/span\u003e     |\n| \u003cspan class=\"hljs-title class_\"\u003eTexas\u003c/span\u003e      |               | \u003cspan class=\"hljs-number\"\u003e600.00\u003c/span\u003e     |\n| \u003cspan class=\"hljs-title class_\"\u003eCalifornia\u003c/span\u003e |               | \u003cspan class=\"hljs-number\"\u003e250.00\u003c/span\u003e     |\n| \u003cspan class=\"hljs-title class_\"\u003eFlorida\u003c/span\u003e    |               | \u003cspan class=\"hljs-number\"\u003e650.00\u003c/span\u003e     |\n|            | \u003cspan class=\"hljs-title class_\"\u003eBuffalo\u003c/span\u003e       | \u003cspan class=\"hljs-number\"\u003e250.00\u003c/span\u003e     |\n|            | \u003cspan class=\"hljs-title class_\"\u003eNew\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eYork\u003c/span\u003e      | \u003cspan class=\"hljs-number\"\u003e200.00\u003c/span\u003e     |\n|            | \u003cspan class=\"hljs-title class_\"\u003eMiami\u003c/span\u003e         | \u003cspan class=\"hljs-number\"\u003e650.00\u003c/span\u003e     |\n|            | \u003cspan class=\"hljs-title class_\"\u003eSan\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eFrancisco\u003c/span\u003e | \u003cspan class=\"hljs-number\"\u003e150.00\u003c/span\u003e     |\n|            | \u003cspan class=\"hljs-title class_\"\u003eLos\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eAngeles\u003c/span\u003e   | \u003cspan class=\"hljs-number\"\u003e100.00\u003c/span\u003e     |\n|            | \u003cspan class=\"hljs-title class_\"\u003eHouston\u003c/span\u003e       | \u003cspan class=\"hljs-number\"\u003e600.00\u003c/span\u003e     |\n|            | \u003cspan class=\"hljs-title class_\"\u003eNew\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eYork\u003c/span\u003e      | \u003cspan class=\"hljs-number\"\u003e225.00\u003c/span\u003e     |\n|            | \u003cspan class=\"hljs-title class_\"\u003eNew\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eYork\u003c/span\u003e      | \u003cspan class=\"hljs-number\"\u003e425.00\u003c/span\u003e     |\n|            | \u003cspan class=\"hljs-title class_\"\u003eHouston\u003c/span\u003e       | \u003cspan class=\"hljs-number\"\u003e600.00\u003c/span\u003e     |\n|            | \u003cspan class=\"hljs-title class_\"\u003eBuffalo\u003c/span\u003e       | \u003cspan class=\"hljs-number\"\u003e250.00\u003c/span\u003e     |\n|            | \u003cspan class=\"hljs-title class_\"\u003eLos\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eAngeles\u003c/span\u003e   | \u003cspan class=\"hljs-number\"\u003e100.00\u003c/span\u003e     |\n|            | \u003cspan class=\"hljs-title class_\"\u003eMiami\u003c/span\u003e         | \u003cspan class=\"hljs-number\"\u003e650.00\u003c/span\u003e     |\n|            | \u003cspan class=\"hljs-title class_\"\u003eSan\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eFrancisco\u003c/span\u003e | \u003cspan class=\"hljs-number\"\u003e150.00\u003c/span\u003e     |\n| \u003cspan class=\"hljs-title class_\"\u003eNew\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eYork\u003c/span\u003e   |               | \u003cspan class=\"hljs-number\"\u003e225.00\u003c/span\u003e     |\n| \u003cspan class=\"hljs-title class_\"\u003eTexas\u003c/span\u003e      |               | \u003cspan class=\"hljs-number\"\u003e600.00\u003c/span\u003e     |\n| \u003cspan class=\"hljs-title class_\"\u003eNew\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eYork\u003c/span\u003e   |               | \u003cspan class=\"hljs-number\"\u003e200.00\u003c/span\u003e     |\n| \u003cspan class=\"hljs-title class_\"\u003eNew\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eYork\u003c/span\u003e   |               | \u003cspan class=\"hljs-number\"\u003e250.00\u003c/span\u003e     |\n| \u003cspan class=\"hljs-title class_\"\u003eCalifornia\u003c/span\u003e |               | \u003cspan class=\"hljs-number\"\u003e150.00\u003c/span\u003e     |\n| \u003cspan class=\"hljs-title class_\"\u003eCalifornia\u003c/span\u003e |               | \u003cspan class=\"hljs-number\"\u003e100.00\u003c/span\u003e     |\n| \u003cspan class=\"hljs-title class_\"\u003eFlorida\u003c/span\u003e    |               | \u003cspan class=\"hljs-number\"\u003e650.00\u003c/span\u003e     |\n|            |               | \u003cspan class=\"hljs-number\"\u003e200.00\u003c/span\u003e     |\n|            |               | \u003cspan class=\"hljs-number\"\u003e150.00\u003c/span\u003e     |\n|            |               | \u003cspan class=\"hljs-number\"\u003e100.00\u003c/span\u003e     |\n|            |               | \u003cspan class=\"hljs-number\"\u003e600.00\u003c/span\u003e     |\n|            |               | \u003cspan class=\"hljs-number\"\u003e650.00\u003c/span\u003e     |\n|            |               | \u003cspan class=\"hljs-number\"\u003e250.00\u003c/span\u003e     |\n|            |               | \u003cspan class=\"hljs-number\"\u003e225.00\u003c/span\u003e     |\n\u003c/code\u003e\u003c/pre\u003e\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\u003ch1\u003e요약\u003c/h1\u003e\n\u003cp\u003e여기서는 Grouping Sets 및 Cube와 같은 고급 Group By 하위 절이 코드의 간결성을 향상시키는 뿐만 아니라 성능을 향상시켜 고급 데이터 분석에 가치를 더하는 방법을 살펴보았습니다. 또한 탐색할 가치가 있는 다른 하위 절은 ROLLUP입니다.\u003c/p\u003e\n\u003cp\u003e또한, 이러한 기능들은 PostgreSQL에서 테스트되었으며 SQL Server에서도 지원됩니다. 이러한 개념을 적용하기 전에 귀하의 관계형 데이터베이스 관리 시스템이 이를 지원하는지 확인하십시오.\u003c/p\u003e\n\u003c/body\u003e\n\u003c/html\u003e\n"},"__N_SSG":true},"page":"/post/[slug]","query":{"slug":"2024-06-30-SQLAggregationGroupingSetsandCubeExplained"},"buildId":"8coAiP0lmiEK5aH6nkQkj","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>