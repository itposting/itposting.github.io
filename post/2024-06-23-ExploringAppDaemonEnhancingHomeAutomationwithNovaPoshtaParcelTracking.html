<!DOCTYPE html><html lang="ko"><head><meta charSet="utf-8"/><title>AppDaemon 탐구 NovaPoshta 소포 추적으로 홈 자동화 향상시키는 방법 | itposting</title><meta name="description" content=""/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><meta property="og:url" content="https://itposting.github.io///post/2024-06-23-ExploringAppDaemonEnhancingHomeAutomationwithNovaPoshtaParcelTracking" data-gatsby-head="true"/><meta property="og:type" content="website" data-gatsby-head="true"/><meta property="og:site_name" content="AppDaemon 탐구 NovaPoshta 소포 추적으로 홈 자동화 향상시키는 방법 | itposting" data-gatsby-head="true"/><meta property="og:title" content="AppDaemon 탐구 NovaPoshta 소포 추적으로 홈 자동화 향상시키는 방법 | itposting" data-gatsby-head="true"/><meta property="og:description" content="" data-gatsby-head="true"/><meta property="og:image" content="/assets/img/2024-06-23-ExploringAppDaemonEnhancingHomeAutomationwithNovaPoshtaParcelTracking_0.png" data-gatsby-head="true"/><meta property="og:locale" content="en_US" data-gatsby-head="true"/><meta name="twitter:card" content="summary_large_image" data-gatsby-head="true"/><meta property="twitter:domain" content="https://itposting.github.io/" data-gatsby-head="true"/><meta property="twitter:url" content="https://itposting.github.io///post/2024-06-23-ExploringAppDaemonEnhancingHomeAutomationwithNovaPoshtaParcelTracking" data-gatsby-head="true"/><meta name="twitter:title" content="AppDaemon 탐구 NovaPoshta 소포 추적으로 홈 자동화 향상시키는 방법 | itposting" data-gatsby-head="true"/><meta name="twitter:description" content="" data-gatsby-head="true"/><meta name="twitter:image" content="/assets/img/2024-06-23-ExploringAppDaemonEnhancingHomeAutomationwithNovaPoshtaParcelTracking_0.png" data-gatsby-head="true"/><meta name="twitter:data1" content="Dev | itposting" data-gatsby-head="true"/><meta name="article:published_time" content="2024-06-23 17:08" data-gatsby-head="true"/><meta name="next-head-count" content="19"/><meta name="google-site-verification" content="a-yehRo3k3xv7fg6LqRaE8jlE42e5wP2bDE_2F849O4"/><link rel="stylesheet" href="/favicons/favicon.ico"/><link rel="icon" type="image/png" sizes="16x16" href="/assets/favicons/favicon-16x16.png"/><link rel="icon" type="image/png" sizes="32x32" href="/assets/favicons/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="96x96" href="/assets/favicons/favicon-96x96.png"/><link rel="icon" href="/favicons/apple-icon-180x180.png"/><link rel="apple-touch-icon" href="/favicons/apple-icon-180x180.png"/><link rel="apple-touch-startup-image" href="/startup.png"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="black"/><meta name="msapplication-config" content="/favicons/browserconfig.xml"/><script async="" src="https://www.googletagmanager.com/gtag/js?id=G-23YXDLKDCL"></script><script>window.dataLayer = window.dataLayer || [];
            function gtag(){dataLayer.push(arguments);}
            gtag('js', new Date());
          
            gtag('config', 'G-23YXDLKDCL');</script><link rel="preload" href="/_next/static/css/6e57edcf9f2ce551.css" as="style"/><link rel="stylesheet" href="/_next/static/css/6e57edcf9f2ce551.css" data-n-g=""/><link rel="preload" href="/_next/static/css/b8ef307c9aee1e34.css" as="style"/><link rel="stylesheet" href="/_next/static/css/b8ef307c9aee1e34.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/_next/static/chunks/webpack-ee6df16fdc6dae4d.js" defer=""></script><script src="/_next/static/chunks/framework-46611630e39cfdeb.js" defer=""></script><script src="/_next/static/chunks/main-cf4a52eec9a970a0.js" defer=""></script><script src="/_next/static/chunks/pages/_app-6fae11262ee5c69b.js" defer=""></script><script src="/_next/static/chunks/75fc9c18-ac4aa08aae62f90e.js" defer=""></script><script src="/_next/static/chunks/463-0429087d4c0b0335.js" defer=""></script><script src="/_next/static/chunks/pages/post/%5Bslug%5D-d849684d6d83f07a.js" defer=""></script><script src="/_next/static/8coAiP0lmiEK5aH6nkQkj/_buildManifest.js" defer=""></script><script src="/_next/static/8coAiP0lmiEK5aH6nkQkj/_ssgManifest.js" defer=""></script></head><body><div id="__next"><header class="Header_header__Z8PUO"><div class="Header_inner__tfr0u"><strong class="Header_title__Otn70"><a href="/">IT Posting</a></strong><nav class="Header_nav_area__6KVpk"><a class="nav_item" href="/posts/1">Posts</a></nav></div></header><main class="posts_container__NyRU3"><div class="posts_inner__i3n_i"><h1 class="posts_post_title__EbxNx">AppDaemon 탐구 NovaPoshta 소포 추적으로 홈 자동화 향상시키는 방법</h1><div class="posts_meta__cR7lu"><div class="posts_profile_wrap__mslMl"><div class="posts_profile_image_wrap__kPikV"><img alt="AppDaemon 탐구 NovaPoshta 소포 추적으로 홈 자동화 향상시키는 방법" loading="lazy" width="44" height="44" decoding="async" data-nimg="1" class="profile" style="color:transparent" src="/favicons/apple-icon-114x114.png"/></div><div class="posts_textarea__w_iKT"><span class="writer">IT Posting</span><span class="posts_info__5KJdN"><span class="posts_date__ctqHI">Posted On Jun 23, 2024</span><span class="posts_reading_time__f7YPP">6<!-- --> min read</span></span></div></div><img alt="" loading="lazy" width="50" height="50" decoding="async" data-nimg="1" class="posts_view_badge__tcbfm" style="color:transparent" src="https://hits.seeyoufarm.com/api/count/incr/badge.svg?url=https%3A%2F%2Fallround-coder.github.io/post/2024-06-23-ExploringAppDaemonEnhancingHomeAutomationwithNovaPoshtaParcelTracking&amp;count_bg=%2379C83D&amp;title_bg=%23555555&amp;icon=&amp;icon_color=%23E7E7E7&amp;title=views&amp;edge_flat=false"/></div><article class="posts_post_content__n_L6j"><div><!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta content="width=device-width, initial-scale=1" name="viewport">
</head>
<body>
<img src="/assets/img/2024-06-23-ExploringAppDaemonEnhancingHomeAutomationwithNovaPoshtaParcelTracking_0.png">
<p>만약 나처럼 Home Assistant 애호가라면, 더 스마트한 자동화를 위해 모든 것을 연결하려고 할 것입니다. 최근에 나는 AppDaemon을 탐험하고 Python에 몰두하고 있어요. AppDaemon의 멋진 점 중 하나는 Home Assistant와 서비스를 통합하는 사용자 정의 앱을 만들 수 있다는 것인데, 이는 공식 또는 HACS 통합이 없는 서비스도 포함됩니다.</p>
<p>NovaPoshta(<a href="https://novaposhta.ua)%EB%8A%94" rel="nofollow" target="_blank">https://novaposhta.ua)는</a> 우크라이나 최대의 우편 및 퀄리어 회사로, 나는 그들의 소포 추적 서비스를 Home Assistant에 통합하고 싶었어요. 등록된 사용자에게 무료 API를 제공하며, 자세한 소포 정보 및 기타 정보를 제공합니다.</p>
<p>처음에는 기존의 사용자 정의 통합을 위해 GitHub를 검색했고 Dmitry Krasnoukhov의 사용자 정의 통합(<a href="https://github.com/krasnoukhov/homeassistant-nova-poshta)%EC%9D%84" rel="nofollow" target="_blank">https://github.com/krasnoukhov/homeassistant-nova-poshta)을</a> 발견했어요. 그러나 정보를 다르게 표현하고 싶었습니다. AppDaemon과 실험 중이었기 때문에 직접 앱을 작성하기로 결정했어요.</p>
<div class="content-ad"></div>
<p>먼저, 노바포셔(Nova Poshta)에 계정을 등록해야 합니다. 이미 서비스를 이용 중이라면 계정이 있을 가능성이 높습니다. <a href="https://new.novaposhta.ua/dashboard/" rel="nofollow" target="_blank">https://new.novaposhta.ua/dashboard/</a> 에서 계정 페이지에 로그인하고 설정 섹션으로 이동하여 새 API 키를 생성하세요. 이 키는 AppDaemon에서 API 호출을 하는 데 중요합니다. 자세한 API 문서는 <a href="https://developers.novaposhta.ua/documentation" rel="nofollow" target="_blank">https://developers.novaposhta.ua/documentation</a> 를 방문하세요.</p>
<p><img src="/assets/img/2024-06-23-ExploringAppDaemonEnhancingHomeAutomationwithNovaPoshtaParcelTracking_1.png" alt="이미지"></p>
<p><img src="/assets/img/2024-06-23-ExploringAppDaemonEnhancingHomeAutomationwithNovaPoshtaParcelTracking_2.png" alt="이미지"></p>
<h1>MQTT 센서 구성:</h1>
<div class="content-ad"></div>
<p>제 세팅에서는 Home Assistant에 MQTT 센서를 만들었습니다. 이 센서는 제 전화번호와 관련된 소포 수를 상태로 표시하고 발신자, 배송 상태 등과 같은 소포 세부 정보를 속성으로 제공합니다. 아래는 MQTT 센서 구성의 일부입니다:</p>
<pre><code class="hljs language-js">  <span class="hljs-attr">mqtt</span>:
    <span class="hljs-attr">sensor</span>:
      - <span class="hljs-attr">name</span>: <span class="hljs-string">"Novaposhta parcels Vijish"</span>
        <span class="hljs-attr">icon</span>: <span class="hljs-attr">mdi</span>:truck-fast
        <span class="hljs-attr">state_topic</span>: <span class="hljs-string">"ha/state/novaposhta/parcels/vijish"</span>
        <span class="hljs-attr">value_template</span>: <span class="hljs-string">"{ value_json|length }"</span>
        <span class="hljs-attr">json_attributes_topic</span>: <span class="hljs-string">"ha/state/novaposhta/parcels/vijish"</span>
</code></pre>
<p>JSON 구조를 페이로드로 게시할 수 있는 MQTT 센서를 선택했습니다. MQTT 센서에서 속성 주제를 지정하면 Home Assistant가 자동으로 해당 속성을 속성으로 통합합니다. 아래는 제 MQTT 센서의 코드입니다.</p>
<h1>AppDaemon 앱</h1>
<div class="content-ad"></div>
<p>그 다음은 AppDaemon 앱 자체를 살펴보겠습니다. 이전 글에서 언급했듯이, 저는 아직 파이썬에 상대적으로 새로운 사용자이며, ChatGPT가 아래 코드를 작성하고 최적화하는 데 큰 도움이 되었습니다.</p>
<pre><code class="hljs language-js"><span class="hljs-keyword">import</span> appdaemon.<span class="hljs-property">plugins</span>.<span class="hljs-property">hass</span>.<span class="hljs-property">hassapi</span> <span class="hljs-keyword">as</span> hass
<span class="hljs-keyword">import</span> requests
<span class="hljs-keyword">import</span> json
<span class="hljs-keyword">from</span> datetime <span class="hljs-keyword">import</span> datetime, timedelta

<span class="hljs-keyword">class</span> <span class="hljs-title class_">NovaPoshtaMQTTParcelTracker</span>(hass.<span class="hljs-property">Hass</span>):

    def <span class="hljs-title function_">initialize</span>(self):
        # <span class="hljs-variable constant_">API</span> 엔드포인트 및 <span class="hljs-variable constant_">API</span> 키 설정 (안전하게 저장된 것이어야 합니다)
        self.<span class="hljs-property">api_url</span> = <span class="hljs-string">"https://api.novaposhta.ua/v2.0/json/"</span>
        self.<span class="hljs-property">api_key</span> = self.<span class="hljs-property">args</span>[<span class="hljs-string">"api_key"</span>]  # <span class="hljs-title class_">AppDaemon</span> 구성에서 가져옴

        # <span class="hljs-variable constant_">MQTT</span> 브로커 구성
        self.<span class="hljs-property">mqtt_broker</span> = self.<span class="hljs-property">args</span>[<span class="hljs-string">"mqtt_broker"</span>]
        self.<span class="hljs-property">mqtt_port</span> = self.<span class="hljs-property">args</span>[<span class="hljs-string">"mqtt_port"</span>]
        self.<span class="hljs-property">mqtt_topic</span> = self.<span class="hljs-property">args</span>[<span class="hljs-string">"mqtt_topic"</span>]

        # 앱이 정기적으로 실행되도록 스케줄
        self.<span class="hljs-title function_">run_every</span>(self.<span class="hljs-property">fetch_parcel_details</span>, <span class="hljs-string">"now"</span>, self.<span class="hljs-property">args</span>.<span class="hljs-title function_">get</span>(<span class="hljs-string">"interval"</span>, <span class="hljs-number">3600</span>))

    # <span class="hljs-title function_">fetch_parcel_details</span>(), <span class="hljs-title function_">handle_success</span>(), <span class="hljs-title function_">get_readable_status</span>(), <span class="hljs-title function_">handle_error</span>(), <span class="hljs-title function_">publish_mqtt</span>() 등 다른 메소드들은 코드의 다른 부분들을 처리합니다.
    
</code></pre>
<ul>
<li>입력 값은 새로운 앱이 선언된 AppDaemon의 apps.yaml 파일 안에서 인수로 구성됩니다.</li>
<li>API 토큰 및 MQTT 서버 주소는 Home Assistant 구성에서와 유사하게 secrets.yaml 파일에 안전하게 저장됩니다. 이 파일은 Appdaemon 추가 구성 디렉토리에 위치해야 합니다.</li>
<li>데이터는 지난 30일 이내의 소포에 대해 검색되며, start_date = today - timedelta(days=30)를 수정하여 이를 조정할 수 있습니다.</li>
<li>검색된 각 소포는 Parcel1, Parcel2 등으로 순차적으로 새로운 속성을 생성합니다.</li>
<li>앱은 정기적으로 실행되며, 앱 구성 섹션에서 시간 간격을 설정할 수 있습니다. 기본적으로 지정되지 않은 경우 1시간마다 확인합니다.</li>
</ul>
<p>AppDaemon 앱을 시스템에 통합하려면 위의 코드를 apps.yaml 파일에 추가해야 합니다.</p>
<div class="content-ad"></div>
<pre><code class="hljs language-yaml"><span class="hljs-attr">novaposhta_parcel_tracker:</span>
  <span class="hljs-attr">module:</span> <span class="hljs-string">novaposhta_parcel_tracker</span>
  <span class="hljs-attr">class:</span> <span class="hljs-string">NovaPoshtaMQTTParcelTracker</span>
  <span class="hljs-attr">api_key:</span> <span class="hljs-type">!secret</span> <span class="hljs-string">novaposhta_token</span>
  <span class="hljs-attr">mqtt_broker:</span> <span class="hljs-type">!secret</span> <span class="hljs-string">mqtt_broker</span>  <span class="hljs-comment"># MQTT 브로커 주소로 교체하세요</span>
  <span class="hljs-attr">mqtt_port:</span> <span class="hljs-number">1883</span>  <span class="hljs-comment"># 일반적으로 MQTT의 기본 포트</span>
  <span class="hljs-attr">mqtt_topic:</span> <span class="hljs-string">"ha/state/novaposhta/parcels/vijish"</span>
  <span class="hljs-attr">interval:</span> <span class="hljs-number">600</span>  <span class="hljs-comment"># 매 10분마다 확인</span>

<span class="hljs-comment"># 자동화:</span>

<span class="hljs-string">센서</span> <span class="hljs-string">데이터를</span> <span class="hljs-string">활용하여</span> <span class="hljs-string">자동화를</span> <span class="hljs-string">생성할</span> <span class="hljs-string">수</span> <span class="hljs-string">있습니다.</span> <span class="hljs-string">예를</span> <span class="hljs-string">들어,</span> <span class="hljs-string">집이나</span> <span class="hljs-string">직장</span> <span class="hljs-string">구역을</span> <span class="hljs-string">떠나고</span> <span class="hljs-string">송장이</span> <span class="hljs-string">도착했지만</span> <span class="hljs-string">아직</span> <span class="hljs-string">수취되지</span> <span class="hljs-string">않은</span> <span class="hljs-string">경우</span> <span class="hljs-string">알림을</span> <span class="hljs-string">설정할</span> <span class="hljs-string">수</span> <span class="hljs-string">있습니다.</span>

  <span class="hljs-attr">automation:</span>
    <span class="hljs-bullet">-</span> <span class="hljs-attr">alias:</span> <span class="hljs-string">"Novaposhta 송장 알림"</span>
      <span class="hljs-attr">id:</span> <span class="hljs-string">"automation_notification_novaposhta_parcel_arrived"</span>
      <span class="hljs-attr">trigger:</span>
        <span class="hljs-bullet">-</span> <span class="hljs-attr">platform:</span> <span class="hljs-string">zone</span>
          <span class="hljs-attr">entity_id:</span> <span class="hljs-string">person.vijish</span>
          <span class="hljs-attr">zone:</span> <span class="hljs-string">zone.home</span>
        <span class="hljs-bullet">-</span> <span class="hljs-attr">platform:</span> <span class="hljs-string">zone</span>
          <span class="hljs-attr">entity_id:</span> <span class="hljs-string">person.vijish</span>
          <span class="hljs-attr">zone:</span> <span class="hljs-string">zone.work</span>
          <span class="hljs-attr">event:</span> <span class="hljs-string">leave</span>
      <span class="hljs-attr">condition:</span>
        <span class="hljs-bullet">-</span> <span class="hljs-attr">condition:</span> <span class="hljs-string">and</span>
          <span class="hljs-attr">conditions:</span>
            <span class="hljs-bullet">-</span> <span class="hljs-attr">condition:</span> <span class="hljs-string">template</span>
              <span class="hljs-attr">value_template:</span> <span class="hljs-string">>
                { for key, value in states.sensor.novaposhta_parcels_vijish.attributes.items() }
                  { if key.startswith('Parcel') and value.get('Status') == 'Parcel Arrived' }
                    true
                  { endif }
                { endfor }              
</span>      <span class="hljs-attr">mode:</span> <span class="hljs-string">single</span>
      <span class="hljs-attr">max_exceeded:</span> <span class="hljs-string">silent</span>
      <span class="hljs-attr">action:</span>
        <span class="hljs-bullet">-</span> <span class="hljs-attr">service:</span> <span class="hljs-string">telegram_bot.send_message</span>
          <span class="hljs-attr">data:</span>
            <span class="hljs-attr">title:</span> <span class="hljs-string">"&#x3C;b>Нова Пошта&#x3C;/b>"</span>
            <span class="hljs-attr">target:</span> <span class="hljs-type">!secret</span> <span class="hljs-string">tele_id_vm</span>
            <span class="hljs-attr">message:</span> <span class="hljs-string">>
              다음 송장이 도착했습니다:
              { for key, value in states.sensor.novaposhta_parcels_vijish.attributes.items() }
                { if key.startswith('Parcel') and value.get('Status') == 'Parcel Arrived' }
                  &#x3C;b>{ key }:&#x3C;/b>
                    발신인: { value.get('Sender') }
                    송장: { value.get('Parcel') }  
                    배달 주소: { value.get('Delivery address') }
                { endif }
              { endfor }
</span>            <span class="hljs-attr">parse_mode:</span> <span class="hljs-string">html</span>

<span class="hljs-string">&#x3C;div</span> <span class="hljs-string">class="content-ad">&#x3C;/div></span>

<span class="hljs-string">이것으로</span> <span class="hljs-string">모두</span> <span class="hljs-string">마무리되었어요.</span> <span class="hljs-string">이</span> <span class="hljs-string">글이</span> <span class="hljs-string">홈</span> <span class="hljs-string">어시스턴트의</span> <span class="hljs-string">AppDaemon</span> <span class="hljs-string">기능을</span> <span class="hljs-string">더욱</span> <span class="hljs-string">흥미롭게</span> <span class="hljs-string">탐구하는</span> <span class="hljs-string">데</span> <span class="hljs-string">도움이</span> <span class="hljs-string">되었기를</span> <span class="hljs-string">바랍니다.</span> <span class="hljs-string">비슷한</span> <span class="hljs-string">사용</span> <span class="hljs-string">사례에</span> <span class="hljs-string">대한</span> <span class="hljs-string">여러분의</span> <span class="hljs-string">생각과</span> <span class="hljs-string">코드</span> <span class="hljs-string">개선을</span> <span class="hljs-string">위한</span> <span class="hljs-string">제안을</span> <span class="hljs-string">정말로</span> <span class="hljs-string">감사히</span> <span class="hljs-string">받겠어요!</span>

<span class="hljs-string">즐거운</span> <span class="hljs-string">스마트</span> <span class="hljs-string">홈</span> <span class="hljs-string">만들기</span> <span class="hljs-string">되세요!</span>
</code></pre>
</body>
</html>
</div></article></div></main></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"title":"AppDaemon 탐구 NovaPoshta 소포 추적으로 홈 자동화 향상시키는 방법","description":"","date":"2024-06-23 17:08","slug":"2024-06-23-ExploringAppDaemonEnhancingHomeAutomationwithNovaPoshtaParcelTracking","content":"\n\n\u003cimg src=\"/assets/img/2024-06-23-ExploringAppDaemonEnhancingHomeAutomationwithNovaPoshtaParcelTracking_0.png\" /\u003e\n\n만약 나처럼 Home Assistant 애호가라면, 더 스마트한 자동화를 위해 모든 것을 연결하려고 할 것입니다. 최근에 나는 AppDaemon을 탐험하고 Python에 몰두하고 있어요. AppDaemon의 멋진 점 중 하나는 Home Assistant와 서비스를 통합하는 사용자 정의 앱을 만들 수 있다는 것인데, 이는 공식 또는 HACS 통합이 없는 서비스도 포함됩니다.\n\nNovaPoshta(https://novaposhta.ua)는 우크라이나 최대의 우편 및 퀄리어 회사로, 나는 그들의 소포 추적 서비스를 Home Assistant에 통합하고 싶었어요. 등록된 사용자에게 무료 API를 제공하며, 자세한 소포 정보 및 기타 정보를 제공합니다.\n\n처음에는 기존의 사용자 정의 통합을 위해 GitHub를 검색했고 Dmitry Krasnoukhov의 사용자 정의 통합(https://github.com/krasnoukhov/homeassistant-nova-poshta)을 발견했어요. 그러나 정보를 다르게 표현하고 싶었습니다. AppDaemon과 실험 중이었기 때문에 직접 앱을 작성하기로 결정했어요.\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n먼저, 노바포셔(Nova Poshta)에 계정을 등록해야 합니다. 이미 서비스를 이용 중이라면 계정이 있을 가능성이 높습니다. https://new.novaposhta.ua/dashboard/ 에서 계정 페이지에 로그인하고 설정 섹션으로 이동하여 새 API 키를 생성하세요. 이 키는 AppDaemon에서 API 호출을 하는 데 중요합니다. 자세한 API 문서는 https://developers.novaposhta.ua/documentation 를 방문하세요.\n\n![이미지](/assets/img/2024-06-23-ExploringAppDaemonEnhancingHomeAutomationwithNovaPoshtaParcelTracking_1.png)\n\n![이미지](/assets/img/2024-06-23-ExploringAppDaemonEnhancingHomeAutomationwithNovaPoshtaParcelTracking_2.png)\n\n# MQTT 센서 구성:\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n제 세팅에서는 Home Assistant에 MQTT 센서를 만들었습니다. 이 센서는 제 전화번호와 관련된 소포 수를 상태로 표시하고 발신자, 배송 상태 등과 같은 소포 세부 정보를 속성으로 제공합니다. 아래는 MQTT 센서 구성의 일부입니다:\n\n```js\n  mqtt:\n    sensor:\n      - name: \"Novaposhta parcels Vijish\"\n        icon: mdi:truck-fast\n        state_topic: \"ha/state/novaposhta/parcels/vijish\"\n        value_template: \"{ value_json|length }\"\n        json_attributes_topic: \"ha/state/novaposhta/parcels/vijish\"\n```\n\nJSON 구조를 페이로드로 게시할 수 있는 MQTT 센서를 선택했습니다. MQTT 센서에서 속성 주제를 지정하면 Home Assistant가 자동으로 해당 속성을 속성으로 통합합니다. 아래는 제 MQTT 센서의 코드입니다.\n\n# AppDaemon 앱\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n그 다음은 AppDaemon 앱 자체를 살펴보겠습니다. 이전 글에서 언급했듯이, 저는 아직 파이썬에 상대적으로 새로운 사용자이며, ChatGPT가 아래 코드를 작성하고 최적화하는 데 큰 도움이 되었습니다.\n\n```js\nimport appdaemon.plugins.hass.hassapi as hass\nimport requests\nimport json\nfrom datetime import datetime, timedelta\n\nclass NovaPoshtaMQTTParcelTracker(hass.Hass):\n\n    def initialize(self):\n        # API 엔드포인트 및 API 키 설정 (안전하게 저장된 것이어야 합니다)\n        self.api_url = \"https://api.novaposhta.ua/v2.0/json/\"\n        self.api_key = self.args[\"api_key\"]  # AppDaemon 구성에서 가져옴\n\n        # MQTT 브로커 구성\n        self.mqtt_broker = self.args[\"mqtt_broker\"]\n        self.mqtt_port = self.args[\"mqtt_port\"]\n        self.mqtt_topic = self.args[\"mqtt_topic\"]\n\n        # 앱이 정기적으로 실행되도록 스케줄\n        self.run_every(self.fetch_parcel_details, \"now\", self.args.get(\"interval\", 3600))\n\n    # fetch_parcel_details(), handle_success(), get_readable_status(), handle_error(), publish_mqtt() 등 다른 메소드들은 코드의 다른 부분들을 처리합니다.\n    \n```\n\n- 입력 값은 새로운 앱이 선언된 AppDaemon의 apps.yaml 파일 안에서 인수로 구성됩니다.\n- API 토큰 및 MQTT 서버 주소는 Home Assistant 구성에서와 유사하게 secrets.yaml 파일에 안전하게 저장됩니다. 이 파일은 Appdaemon 추가 구성 디렉토리에 위치해야 합니다.\n- 데이터는 지난 30일 이내의 소포에 대해 검색되며, start_date = today - timedelta(days=30)를 수정하여 이를 조정할 수 있습니다.\n- 검색된 각 소포는 Parcel1, Parcel2 등으로 순차적으로 새로운 속성을 생성합니다.\n- 앱은 정기적으로 실행되며, 앱 구성 섹션에서 시간 간격을 설정할 수 있습니다. 기본적으로 지정되지 않은 경우 1시간마다 확인합니다.\n\nAppDaemon 앱을 시스템에 통합하려면 위의 코드를 apps.yaml 파일에 추가해야 합니다.\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n```yaml\nnovaposhta_parcel_tracker:\n  module: novaposhta_parcel_tracker\n  class: NovaPoshtaMQTTParcelTracker\n  api_key: !secret novaposhta_token\n  mqtt_broker: !secret mqtt_broker  # MQTT 브로커 주소로 교체하세요\n  mqtt_port: 1883  # 일반적으로 MQTT의 기본 포트\n  mqtt_topic: \"ha/state/novaposhta/parcels/vijish\"\n  interval: 600  # 매 10분마다 확인\n\n# 자동화:\n\n센서 데이터를 활용하여 자동화를 생성할 수 있습니다. 예를 들어, 집이나 직장 구역을 떠나고 송장이 도착했지만 아직 수취되지 않은 경우 알림을 설정할 수 있습니다.\n\n  automation:\n    - alias: \"Novaposhta 송장 알림\"\n      id: \"automation_notification_novaposhta_parcel_arrived\"\n      trigger:\n        - platform: zone\n          entity_id: person.vijish\n          zone: zone.home\n        - platform: zone\n          entity_id: person.vijish\n          zone: zone.work\n          event: leave\n      condition:\n        - condition: and\n          conditions:\n            - condition: template\n              value_template: \u003e\n                { for key, value in states.sensor.novaposhta_parcels_vijish.attributes.items() }\n                  { if key.startswith('Parcel') and value.get('Status') == 'Parcel Arrived' }\n                    true\n                  { endif }\n                { endfor }              \n      mode: single\n      max_exceeded: silent\n      action:\n        - service: telegram_bot.send_message\n          data:\n            title: \"\u003cb\u003eНова Пошта\u003c/b\u003e\"\n            target: !secret tele_id_vm\n            message: \u003e\n              다음 송장이 도착했습니다:\n              { for key, value in states.sensor.novaposhta_parcels_vijish.attributes.items() }\n                { if key.startswith('Parcel') and value.get('Status') == 'Parcel Arrived' }\n                  \u003cb\u003e{ key }:\u003c/b\u003e\n                    발신인: { value.get('Sender') }\n                    송장: { value.get('Parcel') }  \n                    배달 주소: { value.get('Delivery address') }\n                { endif }\n              { endfor }\n            parse_mode: html\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n이것으로 모두 마무리되었어요. 이 글이 홈 어시스턴트의 AppDaemon 기능을 더욱 흥미롭게 탐구하는 데 도움이 되었기를 바랍니다. 비슷한 사용 사례에 대한 여러분의 생각과 코드 개선을 위한 제안을 정말로 감사히 받겠어요!\n\n즐거운 스마트 홈 만들기 되세요!","ogImage":{"url":"/assets/img/2024-06-23-ExploringAppDaemonEnhancingHomeAutomationwithNovaPoshtaParcelTracking_0.png"},"coverImage":"/assets/img/2024-06-23-ExploringAppDaemonEnhancingHomeAutomationwithNovaPoshtaParcelTracking_0.png","tag":["Tech"],"readingTime":6},"content":"\u003c!doctype html\u003e\n\u003chtml lang=\"en\"\u003e\n\u003chead\u003e\n\u003cmeta charset=\"utf-8\"\u003e\n\u003cmeta content=\"width=device-width, initial-scale=1\" name=\"viewport\"\u003e\n\u003c/head\u003e\n\u003cbody\u003e\n\u003cimg src=\"/assets/img/2024-06-23-ExploringAppDaemonEnhancingHomeAutomationwithNovaPoshtaParcelTracking_0.png\"\u003e\n\u003cp\u003e만약 나처럼 Home Assistant 애호가라면, 더 스마트한 자동화를 위해 모든 것을 연결하려고 할 것입니다. 최근에 나는 AppDaemon을 탐험하고 Python에 몰두하고 있어요. AppDaemon의 멋진 점 중 하나는 Home Assistant와 서비스를 통합하는 사용자 정의 앱을 만들 수 있다는 것인데, 이는 공식 또는 HACS 통합이 없는 서비스도 포함됩니다.\u003c/p\u003e\n\u003cp\u003eNovaPoshta(\u003ca href=\"https://novaposhta.ua)%EB%8A%94\" rel=\"nofollow\" target=\"_blank\"\u003ehttps://novaposhta.ua)는\u003c/a\u003e 우크라이나 최대의 우편 및 퀄리어 회사로, 나는 그들의 소포 추적 서비스를 Home Assistant에 통합하고 싶었어요. 등록된 사용자에게 무료 API를 제공하며, 자세한 소포 정보 및 기타 정보를 제공합니다.\u003c/p\u003e\n\u003cp\u003e처음에는 기존의 사용자 정의 통합을 위해 GitHub를 검색했고 Dmitry Krasnoukhov의 사용자 정의 통합(\u003ca href=\"https://github.com/krasnoukhov/homeassistant-nova-poshta)%EC%9D%84\" rel=\"nofollow\" target=\"_blank\"\u003ehttps://github.com/krasnoukhov/homeassistant-nova-poshta)을\u003c/a\u003e 발견했어요. 그러나 정보를 다르게 표현하고 싶었습니다. AppDaemon과 실험 중이었기 때문에 직접 앱을 작성하기로 결정했어요.\u003c/p\u003e\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\u003cp\u003e먼저, 노바포셔(Nova Poshta)에 계정을 등록해야 합니다. 이미 서비스를 이용 중이라면 계정이 있을 가능성이 높습니다. \u003ca href=\"https://new.novaposhta.ua/dashboard/\" rel=\"nofollow\" target=\"_blank\"\u003ehttps://new.novaposhta.ua/dashboard/\u003c/a\u003e 에서 계정 페이지에 로그인하고 설정 섹션으로 이동하여 새 API 키를 생성하세요. 이 키는 AppDaemon에서 API 호출을 하는 데 중요합니다. 자세한 API 문서는 \u003ca href=\"https://developers.novaposhta.ua/documentation\" rel=\"nofollow\" target=\"_blank\"\u003ehttps://developers.novaposhta.ua/documentation\u003c/a\u003e 를 방문하세요.\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/assets/img/2024-06-23-ExploringAppDaemonEnhancingHomeAutomationwithNovaPoshtaParcelTracking_1.png\" alt=\"이미지\"\u003e\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/assets/img/2024-06-23-ExploringAppDaemonEnhancingHomeAutomationwithNovaPoshtaParcelTracking_2.png\" alt=\"이미지\"\u003e\u003c/p\u003e\n\u003ch1\u003eMQTT 센서 구성:\u003c/h1\u003e\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\u003cp\u003e제 세팅에서는 Home Assistant에 MQTT 센서를 만들었습니다. 이 센서는 제 전화번호와 관련된 소포 수를 상태로 표시하고 발신자, 배송 상태 등과 같은 소포 세부 정보를 속성으로 제공합니다. 아래는 MQTT 센서 구성의 일부입니다:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e  \u003cspan class=\"hljs-attr\"\u003emqtt\u003c/span\u003e:\n    \u003cspan class=\"hljs-attr\"\u003esensor\u003c/span\u003e:\n      - \u003cspan class=\"hljs-attr\"\u003ename\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\"Novaposhta parcels Vijish\"\u003c/span\u003e\n        \u003cspan class=\"hljs-attr\"\u003eicon\u003c/span\u003e: \u003cspan class=\"hljs-attr\"\u003emdi\u003c/span\u003e:truck-fast\n        \u003cspan class=\"hljs-attr\"\u003estate_topic\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\"ha/state/novaposhta/parcels/vijish\"\u003c/span\u003e\n        \u003cspan class=\"hljs-attr\"\u003evalue_template\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\"{ value_json|length }\"\u003c/span\u003e\n        \u003cspan class=\"hljs-attr\"\u003ejson_attributes_topic\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\"ha/state/novaposhta/parcels/vijish\"\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eJSON 구조를 페이로드로 게시할 수 있는 MQTT 센서를 선택했습니다. MQTT 센서에서 속성 주제를 지정하면 Home Assistant가 자동으로 해당 속성을 속성으로 통합합니다. 아래는 제 MQTT 센서의 코드입니다.\u003c/p\u003e\n\u003ch1\u003eAppDaemon 앱\u003c/h1\u003e\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\u003cp\u003e그 다음은 AppDaemon 앱 자체를 살펴보겠습니다. 이전 글에서 언급했듯이, 저는 아직 파이썬에 상대적으로 새로운 사용자이며, ChatGPT가 아래 코드를 작성하고 최적화하는 데 큰 도움이 되었습니다.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e appdaemon.\u003cspan class=\"hljs-property\"\u003eplugins\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003ehass\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003ehassapi\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003eas\u003c/span\u003e hass\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e requests\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e json\n\u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e datetime \u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e datetime, timedelta\n\n\u003cspan class=\"hljs-keyword\"\u003eclass\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eNovaPoshtaMQTTParcelTracker\u003c/span\u003e(hass.\u003cspan class=\"hljs-property\"\u003eHass\u003c/span\u003e):\n\n    def \u003cspan class=\"hljs-title function_\"\u003einitialize\u003c/span\u003e(self):\n        # \u003cspan class=\"hljs-variable constant_\"\u003eAPI\u003c/span\u003e 엔드포인트 및 \u003cspan class=\"hljs-variable constant_\"\u003eAPI\u003c/span\u003e 키 설정 (안전하게 저장된 것이어야 합니다)\n        self.\u003cspan class=\"hljs-property\"\u003eapi_url\u003c/span\u003e = \u003cspan class=\"hljs-string\"\u003e\"https://api.novaposhta.ua/v2.0/json/\"\u003c/span\u003e\n        self.\u003cspan class=\"hljs-property\"\u003eapi_key\u003c/span\u003e = self.\u003cspan class=\"hljs-property\"\u003eargs\u003c/span\u003e[\u003cspan class=\"hljs-string\"\u003e\"api_key\"\u003c/span\u003e]  # \u003cspan class=\"hljs-title class_\"\u003eAppDaemon\u003c/span\u003e 구성에서 가져옴\n\n        # \u003cspan class=\"hljs-variable constant_\"\u003eMQTT\u003c/span\u003e 브로커 구성\n        self.\u003cspan class=\"hljs-property\"\u003emqtt_broker\u003c/span\u003e = self.\u003cspan class=\"hljs-property\"\u003eargs\u003c/span\u003e[\u003cspan class=\"hljs-string\"\u003e\"mqtt_broker\"\u003c/span\u003e]\n        self.\u003cspan class=\"hljs-property\"\u003emqtt_port\u003c/span\u003e = self.\u003cspan class=\"hljs-property\"\u003eargs\u003c/span\u003e[\u003cspan class=\"hljs-string\"\u003e\"mqtt_port\"\u003c/span\u003e]\n        self.\u003cspan class=\"hljs-property\"\u003emqtt_topic\u003c/span\u003e = self.\u003cspan class=\"hljs-property\"\u003eargs\u003c/span\u003e[\u003cspan class=\"hljs-string\"\u003e\"mqtt_topic\"\u003c/span\u003e]\n\n        # 앱이 정기적으로 실행되도록 스케줄\n        self.\u003cspan class=\"hljs-title function_\"\u003erun_every\u003c/span\u003e(self.\u003cspan class=\"hljs-property\"\u003efetch_parcel_details\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\"now\"\u003c/span\u003e, self.\u003cspan class=\"hljs-property\"\u003eargs\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003eget\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\"interval\"\u003c/span\u003e, \u003cspan class=\"hljs-number\"\u003e3600\u003c/span\u003e))\n\n    # \u003cspan class=\"hljs-title function_\"\u003efetch_parcel_details\u003c/span\u003e(), \u003cspan class=\"hljs-title function_\"\u003ehandle_success\u003c/span\u003e(), \u003cspan class=\"hljs-title function_\"\u003eget_readable_status\u003c/span\u003e(), \u003cspan class=\"hljs-title function_\"\u003ehandle_error\u003c/span\u003e(), \u003cspan class=\"hljs-title function_\"\u003epublish_mqtt\u003c/span\u003e() 등 다른 메소드들은 코드의 다른 부분들을 처리합니다.\n    \n\u003c/code\u003e\u003c/pre\u003e\n\u003cul\u003e\n\u003cli\u003e입력 값은 새로운 앱이 선언된 AppDaemon의 apps.yaml 파일 안에서 인수로 구성됩니다.\u003c/li\u003e\n\u003cli\u003eAPI 토큰 및 MQTT 서버 주소는 Home Assistant 구성에서와 유사하게 secrets.yaml 파일에 안전하게 저장됩니다. 이 파일은 Appdaemon 추가 구성 디렉토리에 위치해야 합니다.\u003c/li\u003e\n\u003cli\u003e데이터는 지난 30일 이내의 소포에 대해 검색되며, start_date = today - timedelta(days=30)를 수정하여 이를 조정할 수 있습니다.\u003c/li\u003e\n\u003cli\u003e검색된 각 소포는 Parcel1, Parcel2 등으로 순차적으로 새로운 속성을 생성합니다.\u003c/li\u003e\n\u003cli\u003e앱은 정기적으로 실행되며, 앱 구성 섹션에서 시간 간격을 설정할 수 있습니다. 기본적으로 지정되지 않은 경우 1시간마다 확인합니다.\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eAppDaemon 앱을 시스템에 통합하려면 위의 코드를 apps.yaml 파일에 추가해야 합니다.\u003c/p\u003e\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-yaml\"\u003e\u003cspan class=\"hljs-attr\"\u003enovaposhta_parcel_tracker:\u003c/span\u003e\n  \u003cspan class=\"hljs-attr\"\u003emodule:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003enovaposhta_parcel_tracker\u003c/span\u003e\n  \u003cspan class=\"hljs-attr\"\u003eclass:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003eNovaPoshtaMQTTParcelTracker\u003c/span\u003e\n  \u003cspan class=\"hljs-attr\"\u003eapi_key:\u003c/span\u003e \u003cspan class=\"hljs-type\"\u003e!secret\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003enovaposhta_token\u003c/span\u003e\n  \u003cspan class=\"hljs-attr\"\u003emqtt_broker:\u003c/span\u003e \u003cspan class=\"hljs-type\"\u003e!secret\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003emqtt_broker\u003c/span\u003e  \u003cspan class=\"hljs-comment\"\u003e# MQTT 브로커 주소로 교체하세요\u003c/span\u003e\n  \u003cspan class=\"hljs-attr\"\u003emqtt_port:\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e1883\u003c/span\u003e  \u003cspan class=\"hljs-comment\"\u003e# 일반적으로 MQTT의 기본 포트\u003c/span\u003e\n  \u003cspan class=\"hljs-attr\"\u003emqtt_topic:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"ha/state/novaposhta/parcels/vijish\"\u003c/span\u003e\n  \u003cspan class=\"hljs-attr\"\u003einterval:\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e600\u003c/span\u003e  \u003cspan class=\"hljs-comment\"\u003e# 매 10분마다 확인\u003c/span\u003e\n\n\u003cspan class=\"hljs-comment\"\u003e# 자동화:\u003c/span\u003e\n\n\u003cspan class=\"hljs-string\"\u003e센서\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e데이터를\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e활용하여\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e자동화를\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e생성할\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e수\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e있습니다.\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e예를\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e들어,\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e집이나\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e직장\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e구역을\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e떠나고\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e송장이\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e도착했지만\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e아직\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e수취되지\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e않은\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e경우\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e알림을\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e설정할\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e수\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e있습니다.\u003c/span\u003e\n\n  \u003cspan class=\"hljs-attr\"\u003eautomation:\u003c/span\u003e\n    \u003cspan class=\"hljs-bullet\"\u003e-\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003ealias:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"Novaposhta 송장 알림\"\u003c/span\u003e\n      \u003cspan class=\"hljs-attr\"\u003eid:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"automation_notification_novaposhta_parcel_arrived\"\u003c/span\u003e\n      \u003cspan class=\"hljs-attr\"\u003etrigger:\u003c/span\u003e\n        \u003cspan class=\"hljs-bullet\"\u003e-\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003eplatform:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003ezone\u003c/span\u003e\n          \u003cspan class=\"hljs-attr\"\u003eentity_id:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003eperson.vijish\u003c/span\u003e\n          \u003cspan class=\"hljs-attr\"\u003ezone:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003ezone.home\u003c/span\u003e\n        \u003cspan class=\"hljs-bullet\"\u003e-\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003eplatform:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003ezone\u003c/span\u003e\n          \u003cspan class=\"hljs-attr\"\u003eentity_id:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003eperson.vijish\u003c/span\u003e\n          \u003cspan class=\"hljs-attr\"\u003ezone:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003ezone.work\u003c/span\u003e\n          \u003cspan class=\"hljs-attr\"\u003eevent:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003eleave\u003c/span\u003e\n      \u003cspan class=\"hljs-attr\"\u003econdition:\u003c/span\u003e\n        \u003cspan class=\"hljs-bullet\"\u003e-\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003econdition:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003eand\u003c/span\u003e\n          \u003cspan class=\"hljs-attr\"\u003econditions:\u003c/span\u003e\n            \u003cspan class=\"hljs-bullet\"\u003e-\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003econdition:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003etemplate\u003c/span\u003e\n              \u003cspan class=\"hljs-attr\"\u003evalue_template:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\u003e\n                { for key, value in states.sensor.novaposhta_parcels_vijish.attributes.items() }\n                  { if key.startswith('Parcel') and value.get('Status') == 'Parcel Arrived' }\n                    true\n                  { endif }\n                { endfor }              \n\u003c/span\u003e      \u003cspan class=\"hljs-attr\"\u003emode:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003esingle\u003c/span\u003e\n      \u003cspan class=\"hljs-attr\"\u003emax_exceeded:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003esilent\u003c/span\u003e\n      \u003cspan class=\"hljs-attr\"\u003eaction:\u003c/span\u003e\n        \u003cspan class=\"hljs-bullet\"\u003e-\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003eservice:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003etelegram_bot.send_message\u003c/span\u003e\n          \u003cspan class=\"hljs-attr\"\u003edata:\u003c/span\u003e\n            \u003cspan class=\"hljs-attr\"\u003etitle:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"\u0026#x3C;b\u003eНова Пошта\u0026#x3C;/b\u003e\"\u003c/span\u003e\n            \u003cspan class=\"hljs-attr\"\u003etarget:\u003c/span\u003e \u003cspan class=\"hljs-type\"\u003e!secret\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003etele_id_vm\u003c/span\u003e\n            \u003cspan class=\"hljs-attr\"\u003emessage:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\u003e\n              다음 송장이 도착했습니다:\n              { for key, value in states.sensor.novaposhta_parcels_vijish.attributes.items() }\n                { if key.startswith('Parcel') and value.get('Status') == 'Parcel Arrived' }\n                  \u0026#x3C;b\u003e{ key }:\u0026#x3C;/b\u003e\n                    발신인: { value.get('Sender') }\n                    송장: { value.get('Parcel') }  \n                    배달 주소: { value.get('Delivery address') }\n                { endif }\n              { endfor }\n\u003c/span\u003e            \u003cspan class=\"hljs-attr\"\u003eparse_mode:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003ehtml\u003c/span\u003e\n\n\u003cspan class=\"hljs-string\"\u003e\u0026#x3C;div\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003eclass=\"content-ad\"\u003e\u0026#x3C;/div\u003e\u003c/span\u003e\n\n\u003cspan class=\"hljs-string\"\u003e이것으로\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e모두\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e마무리되었어요.\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e이\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e글이\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e홈\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e어시스턴트의\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003eAppDaemon\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e기능을\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e더욱\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e흥미롭게\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e탐구하는\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e데\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e도움이\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e되었기를\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e바랍니다.\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e비슷한\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e사용\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e사례에\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e대한\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e여러분의\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e생각과\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e코드\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e개선을\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e위한\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e제안을\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e정말로\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e감사히\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e받겠어요!\u003c/span\u003e\n\n\u003cspan class=\"hljs-string\"\u003e즐거운\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e스마트\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e홈\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e만들기\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e되세요!\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003c/body\u003e\n\u003c/html\u003e\n"},"__N_SSG":true},"page":"/post/[slug]","query":{"slug":"2024-06-23-ExploringAppDaemonEnhancingHomeAutomationwithNovaPoshtaParcelTracking"},"buildId":"8coAiP0lmiEK5aH6nkQkj","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>