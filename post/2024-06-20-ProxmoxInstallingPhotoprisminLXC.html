<!DOCTYPE html><html lang="ko"><head><meta charSet="utf-8"/><title>프록시목스Proxmox LXC에 포토프리즘Photoprism 설치하기 | itposting</title><meta name="description" content=""/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><meta property="og:url" content="https://itposting.github.io///post/2024-06-20-ProxmoxInstallingPhotoprisminLXC" data-gatsby-head="true"/><meta property="og:type" content="website" data-gatsby-head="true"/><meta property="og:site_name" content="프록시목스Proxmox LXC에 포토프리즘Photoprism 설치하기 | itposting" data-gatsby-head="true"/><meta property="og:title" content="프록시목스Proxmox LXC에 포토프리즘Photoprism 설치하기 | itposting" data-gatsby-head="true"/><meta property="og:description" content="" data-gatsby-head="true"/><meta property="og:image" content="/assets/img/2024-06-20-ProxmoxInstallingPhotoprisminLXC_0.png" data-gatsby-head="true"/><meta property="og:locale" content="en_US" data-gatsby-head="true"/><meta name="twitter:card" content="summary_large_image" data-gatsby-head="true"/><meta property="twitter:domain" content="https://itposting.github.io/" data-gatsby-head="true"/><meta property="twitter:url" content="https://itposting.github.io///post/2024-06-20-ProxmoxInstallingPhotoprisminLXC" data-gatsby-head="true"/><meta name="twitter:title" content="프록시목스Proxmox LXC에 포토프리즘Photoprism 설치하기 | itposting" data-gatsby-head="true"/><meta name="twitter:description" content="" data-gatsby-head="true"/><meta name="twitter:image" content="/assets/img/2024-06-20-ProxmoxInstallingPhotoprisminLXC_0.png" data-gatsby-head="true"/><meta name="twitter:data1" content="Dev | itposting" data-gatsby-head="true"/><meta name="article:published_time" content="2024-06-20 17:14" data-gatsby-head="true"/><meta name="next-head-count" content="19"/><meta name="google-site-verification" content="a-yehRo3k3xv7fg6LqRaE8jlE42e5wP2bDE_2F849O4"/><link rel="stylesheet" href="/favicons/favicon.ico"/><link rel="icon" type="image/png" sizes="16x16" href="/assets/favicons/favicon-16x16.png"/><link rel="icon" type="image/png" sizes="32x32" href="/assets/favicons/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="96x96" href="/assets/favicons/favicon-96x96.png"/><link rel="icon" href="/favicons/apple-icon-180x180.png"/><link rel="apple-touch-icon" href="/favicons/apple-icon-180x180.png"/><link rel="apple-touch-startup-image" href="/startup.png"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="black"/><meta name="msapplication-config" content="/favicons/browserconfig.xml"/><script async="" src="https://www.googletagmanager.com/gtag/js?id=G-23YXDLKDCL"></script><script>window.dataLayer = window.dataLayer || [];
            function gtag(){dataLayer.push(arguments);}
            gtag('js', new Date());
          
            gtag('config', 'G-23YXDLKDCL');</script><link rel="preload" href="/_next/static/css/6e57edcf9f2ce551.css" as="style"/><link rel="stylesheet" href="/_next/static/css/6e57edcf9f2ce551.css" data-n-g=""/><link rel="preload" href="/_next/static/css/b8ef307c9aee1e34.css" as="style"/><link rel="stylesheet" href="/_next/static/css/b8ef307c9aee1e34.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/_next/static/chunks/webpack-ee6df16fdc6dae4d.js" defer=""></script><script src="/_next/static/chunks/framework-46611630e39cfdeb.js" defer=""></script><script src="/_next/static/chunks/main-cf4a52eec9a970a0.js" defer=""></script><script src="/_next/static/chunks/pages/_app-6fae11262ee5c69b.js" defer=""></script><script src="/_next/static/chunks/75fc9c18-ac4aa08aae62f90e.js" defer=""></script><script src="/_next/static/chunks/463-0429087d4c0b0335.js" defer=""></script><script src="/_next/static/chunks/pages/post/%5Bslug%5D-d849684d6d83f07a.js" defer=""></script><script src="/_next/static/8coAiP0lmiEK5aH6nkQkj/_buildManifest.js" defer=""></script><script src="/_next/static/8coAiP0lmiEK5aH6nkQkj/_ssgManifest.js" defer=""></script></head><body><div id="__next"><header class="Header_header__Z8PUO"><div class="Header_inner__tfr0u"><strong class="Header_title__Otn70"><a href="/">IT Posting</a></strong><nav class="Header_nav_area__6KVpk"><a class="nav_item" href="/posts/1">Posts</a></nav></div></header><main class="posts_container__NyRU3"><div class="posts_inner__i3n_i"><h1 class="posts_post_title__EbxNx">프록시목스Proxmox LXC에 포토프리즘Photoprism 설치하기</h1><div class="posts_meta__cR7lu"><div class="posts_profile_wrap__mslMl"><div class="posts_profile_image_wrap__kPikV"><img alt="프록시목스Proxmox LXC에 포토프리즘Photoprism 설치하기" loading="lazy" width="44" height="44" decoding="async" data-nimg="1" class="profile" style="color:transparent" src="/favicons/apple-icon-114x114.png"/></div><div class="posts_textarea__w_iKT"><span class="writer">IT Posting</span><span class="posts_info__5KJdN"><span class="posts_date__ctqHI">Posted On Jun 20, 2024</span><span class="posts_reading_time__f7YPP">8<!-- --> min read</span></span></div></div><img alt="" loading="lazy" width="50" height="50" decoding="async" data-nimg="1" class="posts_view_badge__tcbfm" style="color:transparent" src="https://hits.seeyoufarm.com/api/count/incr/badge.svg?url=https%3A%2F%2Fallround-coder.github.io/post/2024-06-20-ProxmoxInstallingPhotoprisminLXC&amp;count_bg=%2379C83D&amp;title_bg=%23555555&amp;icon=&amp;icon_color=%23E7E7E7&amp;title=views&amp;edge_flat=false"/></div><article class="posts_post_content__n_L6j"><div><!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta content="width=device-width, initial-scale=1" name="viewport">
</head>
<body>
<p><img src="/assets/img/2024-06-20-ProxmoxInstallingPhotoprisminLXC_0.png" alt="이미지"></p>
<p>Photoprism은 AI 기반의 멋진 사진 관리 서비스로, 여러분의 사진을 색인화, 보기 및 공유할 수 있습니다. 해당 기능에 대해 자세히 알아볼 수 있는 공식 웹사이트가 있습니다. 오늘은 가정 환경에서 Proxmox의 LXC 컨테이너에 이를 설치해 보겠습니다.</p>
<h2>요구 사항:</h2>
<ul>
<li>Proxmox가 완전히 설치되고 구성되어 있으며 GUI에 액세스할 수 있어야 합니다.</li>
<li>정적 IP 주소를 설정하고 정적 IP, DHCP 범위에 대한 기본적인 지식이 있는 라우터 제어 패널에 액세스해야 합니다.</li>
<li>사진 및 섬네일에 충분한 스토리지 공간이 있어야 합니다. (대부분의 컬렉션은 총 200GB까지 용량을 차지할 수 있다고 알려져 있습니다. 이 강좌에서는 NAS의 네트워크 공유를 사용할 것이지만, 원하는 경우 로컬 디스크의 폴더를 사용할 수도 있습니다.)</li>
<li>터미널에 대한 기본 지식이 필요합니다. (파일을 열고 저장하는 등)</li>
<li>Proxmox 컨테이너에 대한 기본 지식이 필요합니다. (LXC 템플릿 다운로드, 컨테이너 설정 등)</li>
</ul>
<div class="content-ad"></div>
<h2>컨테이너 생성:</h2>
<p>다음 리소스를 사용하여 컨테이너를 생성하세요:</p>
<ul>
<li>선택한 호스트 이름 (컨테이너 이름)을 가진 관리자 권한이 있는 컨테이너를 만듭니다.</li>
</ul>
<p><img src="/assets/img/2024-06-20-ProxmoxInstallingPhotoprisminLXC_1.png" alt="이미지"></p>
<div class="content-ad"></div>
<ul>
<li>당신이 좋아하는 리눅스 플레이버는 무엇인가요? 저는 여기서 Debian 11을 사용했어요.</li>
<li>~16GB의 루트 저장공간입니다. (사진을 저장하기에는 절대 충분하지 않아요. 외부 저장공간을 꼭 사용하시길 강력히 추천드려요. 제 개인 NAS에서 저장 공간을 사용하겠습니다.)</li>
</ul>
<p><img src="/assets/img/2024-06-20-ProxmoxInstallingPhotoprisminLXC_2.png" alt="첨부된 이미지"></p>
<ul>
<li>시스템의 모든 코어를 사용하세요 (4~8개가 좋습니다).</li>
</ul>
<p><img src="/assets/img/2024-06-20-ProxmoxInstallingPhotoprisminLXC_3.png" alt="첨부된 이미지"></p>
<div class="content-ad"></div>
<ul>
<li>8GB RAM 이상, 4GB 스왑 이상이 필요합니다.</li>
</ul>
<p><img src="/assets/img/2024-06-20-ProxmoxInstallingPhotoprisminLXC_4.png" alt="이미지"></p>
<ul>
<li>DHCP IPv4 주소를 선택하시고, 나중에 라우터에서 설정할 수 있습니다.</li>
</ul>
<p><img src="/assets/img/2024-06-20-ProxmoxInstallingPhotoprisminLXC_5.png" alt="이미지"></p>
<div class="content-ad"></div>
<ul>
<li>나머지는 기본값으로 둔 채로 컨테이너를 시작하지 마세요.</li>
<li>컨테이너 측면 표시줄의 옵션으로 이동하여 다음을 활성화하세요:</li>
</ul>
<pre><code class="hljs language-js">nesting=<span class="hljs-number">1</span>
<span class="hljs-variable constant_">SMB</span>/<span class="hljs-variable constant_">CIFS</span>=<span class="hljs-number">1</span> # 외부 공유를 사용하는 경우에만 선택적으로 필요
</code></pre>
<p><img src="/assets/img/2024-06-20-ProxmoxInstallingPhotoprisminLXC_6.png" alt="이미지"></p>
<ul>
<li>이제 컨테이너를 시작하세요.</li>
</ul>
<div class="content-ad"></div>
<h2>IP 주소 설정하기:</h2>
<p>정적 IP 주소를 설정하면 서비스에 더 쉽게 액세스할 수 있습니다.</p>
<p>이 단계는 라우터마다 다를 수 있습니다. 제어 패널에 로그인해야 합니다. 일반적으로 192.168.xxx.1을 통해 액세스할 수 있습니다. 그리고 컨테이너에 정적 IP 주소를 추가하셔야 합니다. 정적 IP 할당이 DHCP 할당 범위와 겹치지 않도록 주의하셔야 합니다. 일반적으로 정적 IP에는 192.168.xxx.1~192.168.xxx.50을 추천합니다.</p>
<p>참고: 만약 컨테이너가 라우터 장치 목록에 나타나지 않으면, 컨테이너로 돌아가 apt update를 실행하고 라우터 화면을 새로고침하세요.</p>
<div class="content-ad"></div>
<p>대부분 인기있는 라우터에 대해 이 작업을 하는 방법을 다루는 YouTube 동영상이 많이 있습니다. 이 작업을 완료한 후 컨테이너를 다시 부팅하십시오. Proxmox를 다시 부팅할 필요는 없습니다.</p>
<h2>스토리지 설정:</h2>
<p>이전에 언급했던 대로 16Gb의 부팅 디스크 공간은 대량의 섬네일이나 사진을 저장하기에 부족합니다. Proxmox 호스트 디스크에 충분한 공간이 있고 lvm 스토리지로 적절히 구성된 경우, 부팅 디스크에 200-300GB의 스토리지를 추가하고 계속 진행할 수 있습니다.</p>
<p>저는 컨테이너 부팅 디스크에 파일을 저장하는 것을 좋아하지 않으며 가능한 한 작게 유지합니다. Proxmox 호스트 디스크가 가득 차는 경우... 복구는 가능하지만 절대로 처지고 싶지 않은 상황입니다.</p>
<div class="content-ad"></div>
<p>이 경우에는 NAS가 있어서 192.168.xxx.yy에 위치한 appdata라는 SMB 공유 폴더를 노출시킵니다.</p>
<p>필요한 패키지를 설치하십시오:</p>
<pre><code class="hljs language-js">apt install cifs-utils
</code></pre>
<p>마운트 폴더를 생성하세요:</p>
<div class="content-ad"></div>
<pre><code class="hljs language-js">/media/appdata를 만들기
</code></pre>
<p>SMB 자격 증명 파일을 만들기:</p>
<pre><code class="hljs language-js">/root/.<span class="hljs-property">smb</span>에 nano 사용
</code></pre>
<p>다음과 같이 자격 증명을 파일에 추가하세요:</p>
<div class="content-ad"></div>
<pre><code class="hljs language-js">사용자 이름=당신의_사용자_이름
비밀번호=당신의_비밀번호
</code></pre>
<p>fstab 설정하기:</p>
<pre><code class="hljs language-js">nano /etc/fstab
</code></pre>
<p>다음 줄을 추가하십시오:
설정에 맞게 192.168.xxx.yy/appdata를 변경하십시오.</p>
<div class="content-ad"></div>
<pre><code class="hljs language-js"><span class="hljs-comment">//192.168.xxx.yy/appdata /media/appdata cifs credentials=/root/.smb,uid=0,gid=0,dir_mode=0777,file_mode=0777,users,rw,iocharset=utf8,noperm 0 0</span>
</code></pre>
<p>이제 <code>mount -a</code>를 실행하여 공유를 마운트하세요.</p>
<h2>Photoprism 설치:</h2>
<p>이제 컨테이너와 저장소가 설정되었으므로 Photoprism을 설치할 준비가 되었습니다.</p>
<div class="content-ad"></div>
<p>기존 패키지를 업데이트하세요:</p>
<pre><code class="hljs language-bash">apt update &#x26;&#x26; apt upgrade
</code></pre>
<p>필요한 패키지를 설치하세요:</p>
<pre><code class="hljs language-bash">apt install -y gcc g++ git gnupg make zip unzip ffmpeg exiftool darktable libpng-dev libjpeg-dev libtiff-dev imagemagick libheif-examples
</code></pre>
<div class="content-ad"></div>
<p>Node.js 설치하기:</p>
<pre><code class="hljs language-js">wget <span class="hljs-attr">https</span>:<span class="hljs-comment">//deb.nodesource.com/setup_18.x -O node_setup.sh</span>
chmod +x node_setup.<span class="hljs-property">sh</span>
./node_setup.<span class="hljs-property">sh</span>
apt install -y nodejs
rm node_setup.<span class="hljs-property">sh</span>
</code></pre>
<p>GoLang 설치하기:
본 안내서 작성 시점에서 1.20.6 버전이 최신입니다. 최신 버전을 확인하려면 웹 사이트를 방문하여 URL을 변경해 주세요.</p>
<pre><code class="hljs language-js">wget <span class="hljs-attr">https</span>:<span class="hljs-comment">//golang.org/dl/go1.20.6.linux-amd64.tar.gz</span>
rm -rf /usr/local/go
tar -C /usr/local -xzf go1<span class="hljs-number">.20</span><span class="hljs-number">.6</span>.<span class="hljs-property">linux</span>-amd64.<span class="hljs-property">tar</span>.<span class="hljs-property">gz</span>
ln -s /usr/local/go/bin/go /usr/local/bin/go
rm go1<span class="hljs-number">.20</span><span class="hljs-number">.6</span>.<span class="hljs-property">linux</span>-amd64.<span class="hljs-property">tar</span>.<span class="hljs-property">gz</span>
</code></pre>
<div class="content-ad"></div>
<p>텐서플로우 설치:
이 버전은 AVX2 호환 CPU용입니다 (현대적인 CPU 대부분이 해당됩니다). Photoprism 웹사이트에서 단순히 AVX 용이나 AVX를 지원하지 않는 CPU 용 버전을 찾을 수 있습니다.</p>
<pre><code class="hljs language-js">wget <span class="hljs-attr">https</span>:<span class="hljs-comment">//dl.photoprism.org/tensorflow/linux/libtensorflow-linux-avx2-1.15.2.tar.gz</span>
sudo tar -C /usr/local -xzf libtensorflow-linux-avx2-<span class="hljs-number">1.15</span><span class="hljs-number">.2</span>.<span class="hljs-property">tar</span>.<span class="hljs-property">gz</span>
sudo ldconfig
rm libtensorflow-linux-avx2-<span class="hljs-number">1.15</span><span class="hljs-number">.2</span>.<span class="hljs-property">tar</span>.<span class="hljs-property">gz</span>
</code></pre>
<p>Photoprism 다운로드 및 설치:
Photoprism을 빌드하는 과정에서 많은 메모리가 사용될 수 있습니다. 여기서처럼 컨테이너를 구성한 경우 오류가 발생하지 않아야 합니다. 메모리 부족(OOM) 오류가 발생하면 이를 확인하고 각 make 단계를 개별적으로 실행하세요.</p>
<pre><code class="hljs language-js">mkdir -p /opt/photoprism/bin
git clone <span class="hljs-attr">https</span>:<span class="hljs-comment">//github.com/photoprism/photoprism.git</span>
cd photoprism
git checkout release
make all
./scripts/build.<span class="hljs-property">sh</span> prod /opt/photoprism/bin/photoprism
cp -a assets/ <span class="hljs-regexp">/opt/</span>photoprism/assets/
</code></pre>
<div class="content-ad"></div>
<h2>구성:</h2>
<p>Photoprism의 작업 디렉토리를 만들고 구성 파일을 추가하세요.
전체 구성 옵션은 여기를 참조하세요.</p>
<pre><code class="hljs language-js">mkdir /<span class="hljs-keyword">var</span>/lib/photoprism
nano /<span class="hljs-keyword">var</span>/lib/photoprism/.<span class="hljs-property">env</span>
</code></pre>
<p>다음을 구성 파일에 추가하세요:
기본 SQLite 데이터베이스를 작은 컬렉션 이외의 것에는 권장하지 않습니다. 이를 위해 MariaDB를 사용하는 것을 고려해보세요. MariaDB를 설치하는 방법에 대한 별도 가이드가 있습니다.</p>
<div class="content-ad"></div>
<p>저장 요소를 변경하려면 Photoprism 저장 경로를 마운트된 폴더로 변경해야 합니다. 저의 경우에는 /media/appdata가 될 것입니다.</p>
<pre><code class="hljs language-js"># 초기 admin 사용자의 비밀번호
<span class="hljs-variable constant_">PHOTOPRISM_AUTH_MODE</span>=<span class="hljs-string">"password"</span>
<span class="hljs-variable constant_">PHOTOPRISM_ADMIN_PASSWORD</span>=<span class="hljs-string">"photoprism"</span>

# <span class="hljs-title class_">Photoprism</span> 저장 디렉터리
<span class="hljs-variable constant_">PHOTOPRISM_STORAGE_PATH</span>=<span class="hljs-string">"/var/lib/photoprism"</span>
<span class="hljs-variable constant_">PHOTOPRISM_ORIGINALS_PATH</span>=<span class="hljs-string">"/var/lib/photoprism/photos/Originals"</span>
<span class="hljs-variable constant_">PHOTOPRISM_IMPORT_PATH</span>=<span class="hljs-string">"/var/lib/photoprism/photos/Import"</span>

# <span class="hljs-title class_">SQLite</span> 대신 <span class="hljs-title class_">MariaDB</span>/<span class="hljs-title class_">MySQL</span>을 사용하는 경우 아래 주석 해제 (기본 설정값)
# <span class="hljs-variable constant_">PHOTOPRISM_DATABASE_DRIVER</span>=<span class="hljs-string">"mysql"</span>
# <span class="hljs-variable constant_">PHOTOPRISM_DATABASE_SERVER</span>=<span class="hljs-string">"MYSQL_IP_HERE:PORT"</span>
# <span class="hljs-variable constant_">PHOTOPRISM_DATABASE_NAME</span>=<span class="hljs-string">"DB_NAME"</span>
# <span class="hljs-variable constant_">PHOTOPRISM_DATABASE_USER</span>=<span class="hljs-string">"USER_NAME"</span>
# <span class="hljs-variable constant_">PHOTOPRISM_DATABASE_PASSWORD</span>=<span class="hljs-string">"PASSWORD"</span>
</code></pre>
<p>Photoprism 서비스 설정:
Photoprism이 부팅될 때 시작되도록 설정합니다.</p>
<p>서비스 정의 파일 생성:</p>
<div class="content-ad"></div>
<pre><code class="hljs language-js">nano /etc/systemd/system/photoprism.<span class="hljs-property">service</span>
</code></pre>
<p>서비스 파일에 다음을 추가하세요:</p>
<pre><code class="hljs language-js">[<span class="hljs-title class_">Unit</span>]
<span class="hljs-title class_">Description</span>=<span class="hljs-title class_">PhotoPrism</span> 서비스
<span class="hljs-title class_">After</span>=network.<span class="hljs-property">target</span>
<span class="hljs-title class_">StartLimitIntervalSec</span>=<span class="hljs-number">500</span>
<span class="hljs-title class_">StartLimitBurst</span>=<span class="hljs-number">5</span>

[<span class="hljs-title class_">Service</span>]
<span class="hljs-title class_">Type</span>=simple
<span class="hljs-title class_">Restart</span>=on-failure
<span class="hljs-title class_">RestartSec</span>=5s
<span class="hljs-title class_">WorkingDirectory</span>=<span class="hljs-regexp">/opt/</span>photoprism
<span class="hljs-title class_">EnvironmentFile</span>=<span class="hljs-regexp">/var/</span>lib/photoprism/.<span class="hljs-property">env</span>
<span class="hljs-title class_">ExecStart</span>=<span class="hljs-regexp">/opt/</span>photoprism/bin/photoprism up
<span class="hljs-title class_">ExecStop</span>=<span class="hljs-regexp">/opt/</span>photoprism/bin/photoprism down

[<span class="hljs-title class_">Install</span>]
<span class="hljs-title class_">WantedBy</span>=multi-user.<span class="hljs-property">target</span>
</code></pre>
<p>이제 데몬을 다시로드하고 서비스를 시작하세요!</p>
<div class="content-ad"></div>
<pre><code class="hljs language-js">systemctl daemon-reload
systemctl start photoprism
systemctl enable photoprism
</code></pre>
<p>서비스 상태를 확인하세요:</p>
<pre><code class="hljs language-js">systemctl status photoprism
</code></pre>
<p>모든 것이 잘 실행됐다면 (활성화된 상태는 녹색으로 표시됩니다):</p>
<div class="content-ad"></div>
<p><img src="/assets/img/2024-06-20-ProxmoxInstallingPhotoprisminLXC_7.png" alt="이미지"></p>
<p>지금은 이전에 설정한 IP 주소와 포트 2342를 통해 서버에 액세스할 수 있어야 합니다.</p>
<pre><code class="hljs language-js"><span class="hljs-attr">http</span>:<span class="hljs-comment">//YOUR-IP:2342</span>
</code></pre>
<h2>크레딧:</h2>
<div class="content-ad"></div>
<p>포토프리즘 설치는 아래 안내서를 기반으로 진행되었고, 제게는 너무나 귀중한 정보입니다. 문제 해결이 필요할 때 대비하여 읽어보는 것을 고려해보세요.</p>
<p>고지사항:</p>
<p>이 문서는 프로덕션 또는 비즈니스 환경에서의 설정을 위한 안내서가 아니며, 공개 인터넷에 노출할 준비가 된 상태가 아닙니다.</p>
<p>저는 IT 전문가가 아닙니다. 기술 지원도 제공하지 않습니다. 서버를 가진 대학생입니다. 시스템에서 실행하는 모든 명령어에 대한 최종 책임은 여러분에게 있습니다.</p>
<div class="content-ad"></div>
<p>질문이 있으면 댓글을 남겨주세요. 즐거운 시간 보내세요!</p>
</body>
</html>
</div></article></div></main></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"title":"프록시목스Proxmox LXC에 포토프리즘Photoprism 설치하기","description":"","date":"2024-06-20 17:14","slug":"2024-06-20-ProxmoxInstallingPhotoprisminLXC","content":"\n\n![이미지](/assets/img/2024-06-20-ProxmoxInstallingPhotoprisminLXC_0.png)\n\nPhotoprism은 AI 기반의 멋진 사진 관리 서비스로, 여러분의 사진을 색인화, 보기 및 공유할 수 있습니다. 해당 기능에 대해 자세히 알아볼 수 있는 공식 웹사이트가 있습니다. 오늘은 가정 환경에서 Proxmox의 LXC 컨테이너에 이를 설치해 보겠습니다.\n\n## 요구 사항:\n\n- Proxmox가 완전히 설치되고 구성되어 있으며 GUI에 액세스할 수 있어야 합니다.\n- 정적 IP 주소를 설정하고 정적 IP, DHCP 범위에 대한 기본적인 지식이 있는 라우터 제어 패널에 액세스해야 합니다.\n- 사진 및 섬네일에 충분한 스토리지 공간이 있어야 합니다. (대부분의 컬렉션은 총 200GB까지 용량을 차지할 수 있다고 알려져 있습니다. 이 강좌에서는 NAS의 네트워크 공유를 사용할 것이지만, 원하는 경우 로컬 디스크의 폴더를 사용할 수도 있습니다.)\n- 터미널에 대한 기본 지식이 필요합니다. (파일을 열고 저장하는 등)\n- Proxmox 컨테이너에 대한 기본 지식이 필요합니다. (LXC 템플릿 다운로드, 컨테이너 설정 등)\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n## 컨테이너 생성:\n\n다음 리소스를 사용하여 컨테이너를 생성하세요:\n\n- 선택한 호스트 이름 (컨테이너 이름)을 가진 관리자 권한이 있는 컨테이너를 만듭니다.\n\n![이미지](/assets/img/2024-06-20-ProxmoxInstallingPhotoprisminLXC_1.png)\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n-  당신이 좋아하는 리눅스 플레이버는 무엇인가요? 저는 여기서 Debian 11을 사용했어요.\n- ~16GB의 루트 저장공간입니다. (사진을 저장하기에는 절대 충분하지 않아요. 외부 저장공간을 꼭 사용하시길 강력히 추천드려요. 제 개인 NAS에서 저장 공간을 사용하겠습니다.)\n\n![첨부된 이미지](/assets/img/2024-06-20-ProxmoxInstallingPhotoprisminLXC_2.png)\n\n- 시스템의 모든 코어를 사용하세요 (4~8개가 좋습니다).\n\n![첨부된 이미지](/assets/img/2024-06-20-ProxmoxInstallingPhotoprisminLXC_3.png)\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n- 8GB RAM 이상, 4GB 스왑 이상이 필요합니다.\n\n![이미지](/assets/img/2024-06-20-ProxmoxInstallingPhotoprisminLXC_4.png)\n\n- DHCP IPv4 주소를 선택하시고, 나중에 라우터에서 설정할 수 있습니다.\n\n![이미지](/assets/img/2024-06-20-ProxmoxInstallingPhotoprisminLXC_5.png)\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n- 나머지는 기본값으로 둔 채로 컨테이너를 시작하지 마세요.\n- 컨테이너 측면 표시줄의 옵션으로 이동하여 다음을 활성화하세요:\n\n```js\nnesting=1\nSMB/CIFS=1 # 외부 공유를 사용하는 경우에만 선택적으로 필요\n```\n\n![이미지](/assets/img/2024-06-20-ProxmoxInstallingPhotoprisminLXC_6.png)\n\n- 이제 컨테이너를 시작하세요.\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n## IP 주소 설정하기:\n\n정적 IP 주소를 설정하면 서비스에 더 쉽게 액세스할 수 있습니다.\n\n이 단계는 라우터마다 다를 수 있습니다. 제어 패널에 로그인해야 합니다. 일반적으로 192.168.xxx.1을 통해 액세스할 수 있습니다. 그리고 컨테이너에 정적 IP 주소를 추가하셔야 합니다. 정적 IP 할당이 DHCP 할당 범위와 겹치지 않도록 주의하셔야 합니다. 일반적으로 정적 IP에는 192.168.xxx.1~192.168.xxx.50을 추천합니다.\n\n참고: 만약 컨테이너가 라우터 장치 목록에 나타나지 않으면, 컨테이너로 돌아가 apt update를 실행하고 라우터 화면을 새로고침하세요.\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n대부분 인기있는 라우터에 대해 이 작업을 하는 방법을 다루는 YouTube 동영상이 많이 있습니다. 이 작업을 완료한 후 컨테이너를 다시 부팅하십시오. Proxmox를 다시 부팅할 필요는 없습니다.\n\n## 스토리지 설정:\n\n이전에 언급했던 대로 16Gb의 부팅 디스크 공간은 대량의 섬네일이나 사진을 저장하기에 부족합니다. Proxmox 호스트 디스크에 충분한 공간이 있고 lvm 스토리지로 적절히 구성된 경우, 부팅 디스크에 200-300GB의 스토리지를 추가하고 계속 진행할 수 있습니다.\n\n저는 컨테이너 부팅 디스크에 파일을 저장하는 것을 좋아하지 않으며 가능한 한 작게 유지합니다. Proxmox 호스트 디스크가 가득 차는 경우... 복구는 가능하지만 절대로 처지고 싶지 않은 상황입니다.\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n이 경우에는 NAS가 있어서 192.168.xxx.yy에 위치한 appdata라는 SMB 공유 폴더를 노출시킵니다.\n\n필요한 패키지를 설치하십시오:\n\n```js\napt install cifs-utils\n```\n\n마운트 폴더를 생성하세요:\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n```js\r\n/media/appdata를 만들기\r\n```\n\nSMB 자격 증명 파일을 만들기:\n\n```js\r\n/root/.smb에 nano 사용\r\n```\n\n다음과 같이 자격 증명을 파일에 추가하세요:\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n```js\n사용자 이름=당신의_사용자_이름\n비밀번호=당신의_비밀번호\n```\n\nfstab 설정하기:\n\n```js\nnano /etc/fstab\n```\n\n다음 줄을 추가하십시오:\n설정에 맞게 192.168.xxx.yy/appdata를 변경하십시오.\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n```js\n//192.168.xxx.yy/appdata /media/appdata cifs credentials=/root/.smb,uid=0,gid=0,dir_mode=0777,file_mode=0777,users,rw,iocharset=utf8,noperm 0 0\n```\n\n이제 `mount -a`를 실행하여 공유를 마운트하세요.\n\n## Photoprism 설치:\n\n이제 컨테이너와 저장소가 설정되었으므로 Photoprism을 설치할 준비가 되었습니다.\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n기존 패키지를 업데이트하세요:\n\n```bash\napt update \u0026\u0026 apt upgrade\n```\n\n필요한 패키지를 설치하세요:\n\n```bash\napt install -y gcc g++ git gnupg make zip unzip ffmpeg exiftool darktable libpng-dev libjpeg-dev libtiff-dev imagemagick libheif-examples\n```\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\nNode.js 설치하기:\n\n```js\nwget https://deb.nodesource.com/setup_18.x -O node_setup.sh\nchmod +x node_setup.sh\n./node_setup.sh\napt install -y nodejs\nrm node_setup.sh\n```\n\nGoLang 설치하기:\n본 안내서 작성 시점에서 1.20.6 버전이 최신입니다. 최신 버전을 확인하려면 웹 사이트를 방문하여 URL을 변경해 주세요.\n\n```js\nwget https://golang.org/dl/go1.20.6.linux-amd64.tar.gz\nrm -rf /usr/local/go\ntar -C /usr/local -xzf go1.20.6.linux-amd64.tar.gz\nln -s /usr/local/go/bin/go /usr/local/bin/go\nrm go1.20.6.linux-amd64.tar.gz\n```\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n텐서플로우 설치:\n이 버전은 AVX2 호환 CPU용입니다 (현대적인 CPU 대부분이 해당됩니다). Photoprism 웹사이트에서 단순히 AVX 용이나 AVX를 지원하지 않는 CPU 용 버전을 찾을 수 있습니다.\n\n```js\nwget https://dl.photoprism.org/tensorflow/linux/libtensorflow-linux-avx2-1.15.2.tar.gz\nsudo tar -C /usr/local -xzf libtensorflow-linux-avx2-1.15.2.tar.gz\nsudo ldconfig\nrm libtensorflow-linux-avx2-1.15.2.tar.gz\n```\n\nPhotoprism 다운로드 및 설치:\nPhotoprism을 빌드하는 과정에서 많은 메모리가 사용될 수 있습니다. 여기서처럼 컨테이너를 구성한 경우 오류가 발생하지 않아야 합니다. 메모리 부족(OOM) 오류가 발생하면 이를 확인하고 각 make 단계를 개별적으로 실행하세요.\n\n```js\nmkdir -p /opt/photoprism/bin\ngit clone https://github.com/photoprism/photoprism.git\ncd photoprism\ngit checkout release\nmake all\n./scripts/build.sh prod /opt/photoprism/bin/photoprism\ncp -a assets/ /opt/photoprism/assets/\n```\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n## 구성:\n\nPhotoprism의 작업 디렉토리를 만들고 구성 파일을 추가하세요.\n전체 구성 옵션은 여기를 참조하세요.\n\n```js\nmkdir /var/lib/photoprism\nnano /var/lib/photoprism/.env\n```\n\n다음을 구성 파일에 추가하세요:\n기본 SQLite 데이터베이스를 작은 컬렉션 이외의 것에는 권장하지 않습니다. 이를 위해 MariaDB를 사용하는 것을 고려해보세요. MariaDB를 설치하는 방법에 대한 별도 가이드가 있습니다.\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n저장 요소를 변경하려면 Photoprism 저장 경로를 마운트된 폴더로 변경해야 합니다. 저의 경우에는 /media/appdata가 될 것입니다.\n\n```js\n# 초기 admin 사용자의 비밀번호\nPHOTOPRISM_AUTH_MODE=\"password\"\nPHOTOPRISM_ADMIN_PASSWORD=\"photoprism\"\n\n# Photoprism 저장 디렉터리\nPHOTOPRISM_STORAGE_PATH=\"/var/lib/photoprism\"\nPHOTOPRISM_ORIGINALS_PATH=\"/var/lib/photoprism/photos/Originals\"\nPHOTOPRISM_IMPORT_PATH=\"/var/lib/photoprism/photos/Import\"\n\n# SQLite 대신 MariaDB/MySQL을 사용하는 경우 아래 주석 해제 (기본 설정값)\n# PHOTOPRISM_DATABASE_DRIVER=\"mysql\"\n# PHOTOPRISM_DATABASE_SERVER=\"MYSQL_IP_HERE:PORT\"\n# PHOTOPRISM_DATABASE_NAME=\"DB_NAME\"\n# PHOTOPRISM_DATABASE_USER=\"USER_NAME\"\n# PHOTOPRISM_DATABASE_PASSWORD=\"PASSWORD\"\n```\n\nPhotoprism 서비스 설정:\nPhotoprism이 부팅될 때 시작되도록 설정합니다.\n\n서비스 정의 파일 생성:\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n```js\nnano /etc/systemd/system/photoprism.service\n```\n\n서비스 파일에 다음을 추가하세요:\n\n```js\n[Unit]\nDescription=PhotoPrism 서비스\nAfter=network.target\nStartLimitIntervalSec=500\nStartLimitBurst=5\n\n[Service]\nType=simple\nRestart=on-failure\nRestartSec=5s\nWorkingDirectory=/opt/photoprism\nEnvironmentFile=/var/lib/photoprism/.env\nExecStart=/opt/photoprism/bin/photoprism up\nExecStop=/opt/photoprism/bin/photoprism down\n\n[Install]\nWantedBy=multi-user.target\n```\n\n이제 데몬을 다시로드하고 서비스를 시작하세요!\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n```js\nsystemctl daemon-reload\nsystemctl start photoprism\nsystemctl enable photoprism\n```\n\n서비스 상태를 확인하세요:\n\n```js\nsystemctl status photoprism\n```\n\n모든 것이 잘 실행됐다면 (활성화된 상태는 녹색으로 표시됩니다):\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n\n![이미지](/assets/img/2024-06-20-ProxmoxInstallingPhotoprisminLXC_7.png)\n\n지금은 이전에 설정한 IP 주소와 포트 2342를 통해 서버에 액세스할 수 있어야 합니다.\n\n```js\nhttp://YOUR-IP:2342\n```\n\n## 크레딧:\n\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n포토프리즘 설치는 아래 안내서를 기반으로 진행되었고, 제게는 너무나 귀중한 정보입니다. 문제 해결이 필요할 때 대비하여 읽어보는 것을 고려해보세요.\n\n고지사항:\n\n이 문서는 프로덕션 또는 비즈니스 환경에서의 설정을 위한 안내서가 아니며, 공개 인터넷에 노출할 준비가 된 상태가 아닙니다.\n\n저는 IT 전문가가 아닙니다. 기술 지원도 제공하지 않습니다. 서버를 가진 대학생입니다. 시스템에서 실행하는 모든 명령어에 대한 최종 책임은 여러분에게 있습니다.\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n질문이 있으면 댓글을 남겨주세요. 즐거운 시간 보내세요!","ogImage":{"url":"/assets/img/2024-06-20-ProxmoxInstallingPhotoprisminLXC_0.png"},"coverImage":"/assets/img/2024-06-20-ProxmoxInstallingPhotoprisminLXC_0.png","tag":["Tech"],"readingTime":8},"content":"\u003c!doctype html\u003e\n\u003chtml lang=\"en\"\u003e\n\u003chead\u003e\n\u003cmeta charset=\"utf-8\"\u003e\n\u003cmeta content=\"width=device-width, initial-scale=1\" name=\"viewport\"\u003e\n\u003c/head\u003e\n\u003cbody\u003e\n\u003cp\u003e\u003cimg src=\"/assets/img/2024-06-20-ProxmoxInstallingPhotoprisminLXC_0.png\" alt=\"이미지\"\u003e\u003c/p\u003e\n\u003cp\u003ePhotoprism은 AI 기반의 멋진 사진 관리 서비스로, 여러분의 사진을 색인화, 보기 및 공유할 수 있습니다. 해당 기능에 대해 자세히 알아볼 수 있는 공식 웹사이트가 있습니다. 오늘은 가정 환경에서 Proxmox의 LXC 컨테이너에 이를 설치해 보겠습니다.\u003c/p\u003e\n\u003ch2\u003e요구 사항:\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003eProxmox가 완전히 설치되고 구성되어 있으며 GUI에 액세스할 수 있어야 합니다.\u003c/li\u003e\n\u003cli\u003e정적 IP 주소를 설정하고 정적 IP, DHCP 범위에 대한 기본적인 지식이 있는 라우터 제어 패널에 액세스해야 합니다.\u003c/li\u003e\n\u003cli\u003e사진 및 섬네일에 충분한 스토리지 공간이 있어야 합니다. (대부분의 컬렉션은 총 200GB까지 용량을 차지할 수 있다고 알려져 있습니다. 이 강좌에서는 NAS의 네트워크 공유를 사용할 것이지만, 원하는 경우 로컬 디스크의 폴더를 사용할 수도 있습니다.)\u003c/li\u003e\n\u003cli\u003e터미널에 대한 기본 지식이 필요합니다. (파일을 열고 저장하는 등)\u003c/li\u003e\n\u003cli\u003eProxmox 컨테이너에 대한 기본 지식이 필요합니다. (LXC 템플릿 다운로드, 컨테이너 설정 등)\u003c/li\u003e\n\u003c/ul\u003e\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\u003ch2\u003e컨테이너 생성:\u003c/h2\u003e\n\u003cp\u003e다음 리소스를 사용하여 컨테이너를 생성하세요:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e선택한 호스트 이름 (컨테이너 이름)을 가진 관리자 권한이 있는 컨테이너를 만듭니다.\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e\u003cimg src=\"/assets/img/2024-06-20-ProxmoxInstallingPhotoprisminLXC_1.png\" alt=\"이미지\"\u003e\u003c/p\u003e\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\u003cul\u003e\n\u003cli\u003e당신이 좋아하는 리눅스 플레이버는 무엇인가요? 저는 여기서 Debian 11을 사용했어요.\u003c/li\u003e\n\u003cli\u003e~16GB의 루트 저장공간입니다. (사진을 저장하기에는 절대 충분하지 않아요. 외부 저장공간을 꼭 사용하시길 강력히 추천드려요. 제 개인 NAS에서 저장 공간을 사용하겠습니다.)\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e\u003cimg src=\"/assets/img/2024-06-20-ProxmoxInstallingPhotoprisminLXC_2.png\" alt=\"첨부된 이미지\"\u003e\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e시스템의 모든 코어를 사용하세요 (4~8개가 좋습니다).\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e\u003cimg src=\"/assets/img/2024-06-20-ProxmoxInstallingPhotoprisminLXC_3.png\" alt=\"첨부된 이미지\"\u003e\u003c/p\u003e\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\u003cul\u003e\n\u003cli\u003e8GB RAM 이상, 4GB 스왑 이상이 필요합니다.\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e\u003cimg src=\"/assets/img/2024-06-20-ProxmoxInstallingPhotoprisminLXC_4.png\" alt=\"이미지\"\u003e\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eDHCP IPv4 주소를 선택하시고, 나중에 라우터에서 설정할 수 있습니다.\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e\u003cimg src=\"/assets/img/2024-06-20-ProxmoxInstallingPhotoprisminLXC_5.png\" alt=\"이미지\"\u003e\u003c/p\u003e\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\u003cul\u003e\n\u003cli\u003e나머지는 기본값으로 둔 채로 컨테이너를 시작하지 마세요.\u003c/li\u003e\n\u003cli\u003e컨테이너 측면 표시줄의 옵션으로 이동하여 다음을 활성화하세요:\u003c/li\u003e\n\u003c/ul\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003enesting=\u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e\n\u003cspan class=\"hljs-variable constant_\"\u003eSMB\u003c/span\u003e/\u003cspan class=\"hljs-variable constant_\"\u003eCIFS\u003c/span\u003e=\u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e # 외부 공유를 사용하는 경우에만 선택적으로 필요\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e\u003cimg src=\"/assets/img/2024-06-20-ProxmoxInstallingPhotoprisminLXC_6.png\" alt=\"이미지\"\u003e\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e이제 컨테이너를 시작하세요.\u003c/li\u003e\n\u003c/ul\u003e\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\u003ch2\u003eIP 주소 설정하기:\u003c/h2\u003e\n\u003cp\u003e정적 IP 주소를 설정하면 서비스에 더 쉽게 액세스할 수 있습니다.\u003c/p\u003e\n\u003cp\u003e이 단계는 라우터마다 다를 수 있습니다. 제어 패널에 로그인해야 합니다. 일반적으로 192.168.xxx.1을 통해 액세스할 수 있습니다. 그리고 컨테이너에 정적 IP 주소를 추가하셔야 합니다. 정적 IP 할당이 DHCP 할당 범위와 겹치지 않도록 주의하셔야 합니다. 일반적으로 정적 IP에는 192.168.xxx.1~192.168.xxx.50을 추천합니다.\u003c/p\u003e\n\u003cp\u003e참고: 만약 컨테이너가 라우터 장치 목록에 나타나지 않으면, 컨테이너로 돌아가 apt update를 실행하고 라우터 화면을 새로고침하세요.\u003c/p\u003e\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\u003cp\u003e대부분 인기있는 라우터에 대해 이 작업을 하는 방법을 다루는 YouTube 동영상이 많이 있습니다. 이 작업을 완료한 후 컨테이너를 다시 부팅하십시오. Proxmox를 다시 부팅할 필요는 없습니다.\u003c/p\u003e\n\u003ch2\u003e스토리지 설정:\u003c/h2\u003e\n\u003cp\u003e이전에 언급했던 대로 16Gb의 부팅 디스크 공간은 대량의 섬네일이나 사진을 저장하기에 부족합니다. Proxmox 호스트 디스크에 충분한 공간이 있고 lvm 스토리지로 적절히 구성된 경우, 부팅 디스크에 200-300GB의 스토리지를 추가하고 계속 진행할 수 있습니다.\u003c/p\u003e\n\u003cp\u003e저는 컨테이너 부팅 디스크에 파일을 저장하는 것을 좋아하지 않으며 가능한 한 작게 유지합니다. Proxmox 호스트 디스크가 가득 차는 경우... 복구는 가능하지만 절대로 처지고 싶지 않은 상황입니다.\u003c/p\u003e\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\u003cp\u003e이 경우에는 NAS가 있어서 192.168.xxx.yy에 위치한 appdata라는 SMB 공유 폴더를 노출시킵니다.\u003c/p\u003e\n\u003cp\u003e필요한 패키지를 설치하십시오:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003eapt install cifs-utils\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e마운트 폴더를 생성하세요:\u003c/p\u003e\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e/media/appdata를 만들기\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eSMB 자격 증명 파일을 만들기:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e/root/.\u003cspan class=\"hljs-property\"\u003esmb\u003c/span\u003e에 nano 사용\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e다음과 같이 자격 증명을 파일에 추가하세요:\u003c/p\u003e\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e사용자 이름=당신의_사용자_이름\n비밀번호=당신의_비밀번호\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003efstab 설정하기:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003enano /etc/fstab\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e다음 줄을 추가하십시오:\n설정에 맞게 192.168.xxx.yy/appdata를 변경하십시오.\u003c/p\u003e\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-comment\"\u003e//192.168.xxx.yy/appdata /media/appdata cifs credentials=/root/.smb,uid=0,gid=0,dir_mode=0777,file_mode=0777,users,rw,iocharset=utf8,noperm 0 0\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e이제 \u003ccode\u003emount -a\u003c/code\u003e를 실행하여 공유를 마운트하세요.\u003c/p\u003e\n\u003ch2\u003ePhotoprism 설치:\u003c/h2\u003e\n\u003cp\u003e이제 컨테이너와 저장소가 설정되었으므로 Photoprism을 설치할 준비가 되었습니다.\u003c/p\u003e\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\u003cp\u003e기존 패키지를 업데이트하세요:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-bash\"\u003eapt update \u0026#x26;\u0026#x26; apt upgrade\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e필요한 패키지를 설치하세요:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-bash\"\u003eapt install -y gcc g++ git gnupg make zip unzip ffmpeg exiftool darktable libpng-dev libjpeg-dev libtiff-dev imagemagick libheif-examples\n\u003c/code\u003e\u003c/pre\u003e\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\u003cp\u003eNode.js 설치하기:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003ewget \u003cspan class=\"hljs-attr\"\u003ehttps\u003c/span\u003e:\u003cspan class=\"hljs-comment\"\u003e//deb.nodesource.com/setup_18.x -O node_setup.sh\u003c/span\u003e\nchmod +x node_setup.\u003cspan class=\"hljs-property\"\u003esh\u003c/span\u003e\n./node_setup.\u003cspan class=\"hljs-property\"\u003esh\u003c/span\u003e\napt install -y nodejs\nrm node_setup.\u003cspan class=\"hljs-property\"\u003esh\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eGoLang 설치하기:\n본 안내서 작성 시점에서 1.20.6 버전이 최신입니다. 최신 버전을 확인하려면 웹 사이트를 방문하여 URL을 변경해 주세요.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003ewget \u003cspan class=\"hljs-attr\"\u003ehttps\u003c/span\u003e:\u003cspan class=\"hljs-comment\"\u003e//golang.org/dl/go1.20.6.linux-amd64.tar.gz\u003c/span\u003e\nrm -rf /usr/local/go\ntar -C /usr/local -xzf go1\u003cspan class=\"hljs-number\"\u003e.20\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.6\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003elinux\u003c/span\u003e-amd64.\u003cspan class=\"hljs-property\"\u003etar\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003egz\u003c/span\u003e\nln -s /usr/local/go/bin/go /usr/local/bin/go\nrm go1\u003cspan class=\"hljs-number\"\u003e.20\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.6\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003elinux\u003c/span\u003e-amd64.\u003cspan class=\"hljs-property\"\u003etar\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003egz\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\u003cp\u003e텐서플로우 설치:\n이 버전은 AVX2 호환 CPU용입니다 (현대적인 CPU 대부분이 해당됩니다). Photoprism 웹사이트에서 단순히 AVX 용이나 AVX를 지원하지 않는 CPU 용 버전을 찾을 수 있습니다.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003ewget \u003cspan class=\"hljs-attr\"\u003ehttps\u003c/span\u003e:\u003cspan class=\"hljs-comment\"\u003e//dl.photoprism.org/tensorflow/linux/libtensorflow-linux-avx2-1.15.2.tar.gz\u003c/span\u003e\nsudo tar -C /usr/local -xzf libtensorflow-linux-avx2-\u003cspan class=\"hljs-number\"\u003e1.15\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.2\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003etar\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003egz\u003c/span\u003e\nsudo ldconfig\nrm libtensorflow-linux-avx2-\u003cspan class=\"hljs-number\"\u003e1.15\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.2\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003etar\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003egz\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003ePhotoprism 다운로드 및 설치:\nPhotoprism을 빌드하는 과정에서 많은 메모리가 사용될 수 있습니다. 여기서처럼 컨테이너를 구성한 경우 오류가 발생하지 않아야 합니다. 메모리 부족(OOM) 오류가 발생하면 이를 확인하고 각 make 단계를 개별적으로 실행하세요.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003emkdir -p /opt/photoprism/bin\ngit clone \u003cspan class=\"hljs-attr\"\u003ehttps\u003c/span\u003e:\u003cspan class=\"hljs-comment\"\u003e//github.com/photoprism/photoprism.git\u003c/span\u003e\ncd photoprism\ngit checkout release\nmake all\n./scripts/build.\u003cspan class=\"hljs-property\"\u003esh\u003c/span\u003e prod /opt/photoprism/bin/photoprism\ncp -a assets/ \u003cspan class=\"hljs-regexp\"\u003e/opt/\u003c/span\u003ephotoprism/assets/\n\u003c/code\u003e\u003c/pre\u003e\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\u003ch2\u003e구성:\u003c/h2\u003e\n\u003cp\u003ePhotoprism의 작업 디렉토리를 만들고 구성 파일을 추가하세요.\n전체 구성 옵션은 여기를 참조하세요.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003emkdir /\u003cspan class=\"hljs-keyword\"\u003evar\u003c/span\u003e/lib/photoprism\nnano /\u003cspan class=\"hljs-keyword\"\u003evar\u003c/span\u003e/lib/photoprism/.\u003cspan class=\"hljs-property\"\u003eenv\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e다음을 구성 파일에 추가하세요:\n기본 SQLite 데이터베이스를 작은 컬렉션 이외의 것에는 권장하지 않습니다. 이를 위해 MariaDB를 사용하는 것을 고려해보세요. MariaDB를 설치하는 방법에 대한 별도 가이드가 있습니다.\u003c/p\u003e\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\u003cp\u003e저장 요소를 변경하려면 Photoprism 저장 경로를 마운트된 폴더로 변경해야 합니다. 저의 경우에는 /media/appdata가 될 것입니다.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e# 초기 admin 사용자의 비밀번호\n\u003cspan class=\"hljs-variable constant_\"\u003ePHOTOPRISM_AUTH_MODE\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\"password\"\u003c/span\u003e\n\u003cspan class=\"hljs-variable constant_\"\u003ePHOTOPRISM_ADMIN_PASSWORD\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\"photoprism\"\u003c/span\u003e\n\n# \u003cspan class=\"hljs-title class_\"\u003ePhotoprism\u003c/span\u003e 저장 디렉터리\n\u003cspan class=\"hljs-variable constant_\"\u003ePHOTOPRISM_STORAGE_PATH\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\"/var/lib/photoprism\"\u003c/span\u003e\n\u003cspan class=\"hljs-variable constant_\"\u003ePHOTOPRISM_ORIGINALS_PATH\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\"/var/lib/photoprism/photos/Originals\"\u003c/span\u003e\n\u003cspan class=\"hljs-variable constant_\"\u003ePHOTOPRISM_IMPORT_PATH\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\"/var/lib/photoprism/photos/Import\"\u003c/span\u003e\n\n# \u003cspan class=\"hljs-title class_\"\u003eSQLite\u003c/span\u003e 대신 \u003cspan class=\"hljs-title class_\"\u003eMariaDB\u003c/span\u003e/\u003cspan class=\"hljs-title class_\"\u003eMySQL\u003c/span\u003e을 사용하는 경우 아래 주석 해제 (기본 설정값)\n# \u003cspan class=\"hljs-variable constant_\"\u003ePHOTOPRISM_DATABASE_DRIVER\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\"mysql\"\u003c/span\u003e\n# \u003cspan class=\"hljs-variable constant_\"\u003ePHOTOPRISM_DATABASE_SERVER\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\"MYSQL_IP_HERE:PORT\"\u003c/span\u003e\n# \u003cspan class=\"hljs-variable constant_\"\u003ePHOTOPRISM_DATABASE_NAME\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\"DB_NAME\"\u003c/span\u003e\n# \u003cspan class=\"hljs-variable constant_\"\u003ePHOTOPRISM_DATABASE_USER\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\"USER_NAME\"\u003c/span\u003e\n# \u003cspan class=\"hljs-variable constant_\"\u003ePHOTOPRISM_DATABASE_PASSWORD\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\"PASSWORD\"\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003ePhotoprism 서비스 설정:\nPhotoprism이 부팅될 때 시작되도록 설정합니다.\u003c/p\u003e\n\u003cp\u003e서비스 정의 파일 생성:\u003c/p\u003e\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003enano /etc/systemd/system/photoprism.\u003cspan class=\"hljs-property\"\u003eservice\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e서비스 파일에 다음을 추가하세요:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e[\u003cspan class=\"hljs-title class_\"\u003eUnit\u003c/span\u003e]\n\u003cspan class=\"hljs-title class_\"\u003eDescription\u003c/span\u003e=\u003cspan class=\"hljs-title class_\"\u003ePhotoPrism\u003c/span\u003e 서비스\n\u003cspan class=\"hljs-title class_\"\u003eAfter\u003c/span\u003e=network.\u003cspan class=\"hljs-property\"\u003etarget\u003c/span\u003e\n\u003cspan class=\"hljs-title class_\"\u003eStartLimitIntervalSec\u003c/span\u003e=\u003cspan class=\"hljs-number\"\u003e500\u003c/span\u003e\n\u003cspan class=\"hljs-title class_\"\u003eStartLimitBurst\u003c/span\u003e=\u003cspan class=\"hljs-number\"\u003e5\u003c/span\u003e\n\n[\u003cspan class=\"hljs-title class_\"\u003eService\u003c/span\u003e]\n\u003cspan class=\"hljs-title class_\"\u003eType\u003c/span\u003e=simple\n\u003cspan class=\"hljs-title class_\"\u003eRestart\u003c/span\u003e=on-failure\n\u003cspan class=\"hljs-title class_\"\u003eRestartSec\u003c/span\u003e=5s\n\u003cspan class=\"hljs-title class_\"\u003eWorkingDirectory\u003c/span\u003e=\u003cspan class=\"hljs-regexp\"\u003e/opt/\u003c/span\u003ephotoprism\n\u003cspan class=\"hljs-title class_\"\u003eEnvironmentFile\u003c/span\u003e=\u003cspan class=\"hljs-regexp\"\u003e/var/\u003c/span\u003elib/photoprism/.\u003cspan class=\"hljs-property\"\u003eenv\u003c/span\u003e\n\u003cspan class=\"hljs-title class_\"\u003eExecStart\u003c/span\u003e=\u003cspan class=\"hljs-regexp\"\u003e/opt/\u003c/span\u003ephotoprism/bin/photoprism up\n\u003cspan class=\"hljs-title class_\"\u003eExecStop\u003c/span\u003e=\u003cspan class=\"hljs-regexp\"\u003e/opt/\u003c/span\u003ephotoprism/bin/photoprism down\n\n[\u003cspan class=\"hljs-title class_\"\u003eInstall\u003c/span\u003e]\n\u003cspan class=\"hljs-title class_\"\u003eWantedBy\u003c/span\u003e=multi-user.\u003cspan class=\"hljs-property\"\u003etarget\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e이제 데몬을 다시로드하고 서비스를 시작하세요!\u003c/p\u003e\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003esystemctl daemon-reload\nsystemctl start photoprism\nsystemctl enable photoprism\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e서비스 상태를 확인하세요:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003esystemctl status photoprism\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e모든 것이 잘 실행됐다면 (활성화된 상태는 녹색으로 표시됩니다):\u003c/p\u003e\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\u003cp\u003e\u003cimg src=\"/assets/img/2024-06-20-ProxmoxInstallingPhotoprisminLXC_7.png\" alt=\"이미지\"\u003e\u003c/p\u003e\n\u003cp\u003e지금은 이전에 설정한 IP 주소와 포트 2342를 통해 서버에 액세스할 수 있어야 합니다.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-attr\"\u003ehttp\u003c/span\u003e:\u003cspan class=\"hljs-comment\"\u003e//YOUR-IP:2342\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch2\u003e크레딧:\u003c/h2\u003e\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\u003cp\u003e포토프리즘 설치는 아래 안내서를 기반으로 진행되었고, 제게는 너무나 귀중한 정보입니다. 문제 해결이 필요할 때 대비하여 읽어보는 것을 고려해보세요.\u003c/p\u003e\n\u003cp\u003e고지사항:\u003c/p\u003e\n\u003cp\u003e이 문서는 프로덕션 또는 비즈니스 환경에서의 설정을 위한 안내서가 아니며, 공개 인터넷에 노출할 준비가 된 상태가 아닙니다.\u003c/p\u003e\n\u003cp\u003e저는 IT 전문가가 아닙니다. 기술 지원도 제공하지 않습니다. 서버를 가진 대학생입니다. 시스템에서 실행하는 모든 명령어에 대한 최종 책임은 여러분에게 있습니다.\u003c/p\u003e\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\u003cp\u003e질문이 있으면 댓글을 남겨주세요. 즐거운 시간 보내세요!\u003c/p\u003e\n\u003c/body\u003e\n\u003c/html\u003e\n"},"__N_SSG":true},"page":"/post/[slug]","query":{"slug":"2024-06-20-ProxmoxInstallingPhotoprisminLXC"},"buildId":"8coAiP0lmiEK5aH6nkQkj","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>