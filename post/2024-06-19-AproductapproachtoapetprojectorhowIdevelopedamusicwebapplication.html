<!DOCTYPE html><html lang="ko"><head><meta charSet="utf-8"/><title>애완동물 프로젝트에 적용한 제품 접근 방식, 또는 음악 웹 애플리케이션 개발 이야기 | itposting</title><meta name="description" content=""/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><meta property="og:url" content="https://itposting.github.io///post/2024-06-19-AproductapproachtoapetprojectorhowIdevelopedamusicwebapplication" data-gatsby-head="true"/><meta property="og:type" content="website" data-gatsby-head="true"/><meta property="og:site_name" content="애완동물 프로젝트에 적용한 제품 접근 방식, 또는 음악 웹 애플리케이션 개발 이야기 | itposting" data-gatsby-head="true"/><meta property="og:title" content="애완동물 프로젝트에 적용한 제품 접근 방식, 또는 음악 웹 애플리케이션 개발 이야기 | itposting" data-gatsby-head="true"/><meta property="og:description" content="" data-gatsby-head="true"/><meta property="og:image" content="/assets/img/2024-06-19-AproductapproachtoapetprojectorhowIdevelopedamusicwebapplication_0.png" data-gatsby-head="true"/><meta property="og:locale" content="en_US" data-gatsby-head="true"/><meta name="twitter:card" content="summary_large_image" data-gatsby-head="true"/><meta property="twitter:domain" content="https://itposting.github.io/" data-gatsby-head="true"/><meta property="twitter:url" content="https://itposting.github.io///post/2024-06-19-AproductapproachtoapetprojectorhowIdevelopedamusicwebapplication" data-gatsby-head="true"/><meta name="twitter:title" content="애완동물 프로젝트에 적용한 제품 접근 방식, 또는 음악 웹 애플리케이션 개발 이야기 | itposting" data-gatsby-head="true"/><meta name="twitter:description" content="" data-gatsby-head="true"/><meta name="twitter:image" content="/assets/img/2024-06-19-AproductapproachtoapetprojectorhowIdevelopedamusicwebapplication_0.png" data-gatsby-head="true"/><meta name="twitter:data1" content="Dev | itposting" data-gatsby-head="true"/><meta name="article:published_time" content="2024-06-19 02:36" data-gatsby-head="true"/><meta name="next-head-count" content="19"/><meta name="google-site-verification" content="a-yehRo3k3xv7fg6LqRaE8jlE42e5wP2bDE_2F849O4"/><link rel="stylesheet" href="/favicons/favicon.ico"/><link rel="icon" type="image/png" sizes="16x16" href="/assets/favicons/favicon-16x16.png"/><link rel="icon" type="image/png" sizes="32x32" href="/assets/favicons/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="96x96" href="/assets/favicons/favicon-96x96.png"/><link rel="icon" href="/favicons/apple-icon-180x180.png"/><link rel="apple-touch-icon" href="/favicons/apple-icon-180x180.png"/><link rel="apple-touch-startup-image" href="/startup.png"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="black"/><meta name="msapplication-config" content="/favicons/browserconfig.xml"/><script async="" src="https://www.googletagmanager.com/gtag/js?id=G-23YXDLKDCL"></script><script>window.dataLayer = window.dataLayer || [];
            function gtag(){dataLayer.push(arguments);}
            gtag('js', new Date());
          
            gtag('config', 'G-23YXDLKDCL');</script><link rel="preload" href="/_next/static/css/6e57edcf9f2ce551.css" as="style"/><link rel="stylesheet" href="/_next/static/css/6e57edcf9f2ce551.css" data-n-g=""/><link rel="preload" href="/_next/static/css/b8ef307c9aee1e34.css" as="style"/><link rel="stylesheet" href="/_next/static/css/b8ef307c9aee1e34.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/_next/static/chunks/webpack-ee6df16fdc6dae4d.js" defer=""></script><script src="/_next/static/chunks/framework-46611630e39cfdeb.js" defer=""></script><script src="/_next/static/chunks/main-cf4a52eec9a970a0.js" defer=""></script><script src="/_next/static/chunks/pages/_app-6fae11262ee5c69b.js" defer=""></script><script src="/_next/static/chunks/75fc9c18-ac4aa08aae62f90e.js" defer=""></script><script src="/_next/static/chunks/463-0429087d4c0b0335.js" defer=""></script><script src="/_next/static/chunks/pages/post/%5Bslug%5D-d849684d6d83f07a.js" defer=""></script><script src="/_next/static/8coAiP0lmiEK5aH6nkQkj/_buildManifest.js" defer=""></script><script src="/_next/static/8coAiP0lmiEK5aH6nkQkj/_ssgManifest.js" defer=""></script></head><body><div id="__next"><header class="Header_header__Z8PUO"><div class="Header_inner__tfr0u"><strong class="Header_title__Otn70"><a href="/">IT Posting</a></strong><nav class="Header_nav_area__6KVpk"><a class="nav_item" href="/posts/1">Posts</a></nav></div></header><main class="posts_container__NyRU3"><div class="posts_inner__i3n_i"><h1 class="posts_post_title__EbxNx">애완동물 프로젝트에 적용한 제품 접근 방식, 또는 음악 웹 애플리케이션 개발 이야기</h1><div class="posts_meta__cR7lu"><div class="posts_profile_wrap__mslMl"><div class="posts_profile_image_wrap__kPikV"><img alt="애완동물 프로젝트에 적용한 제품 접근 방식, 또는 음악 웹 애플리케이션 개발 이야기" loading="lazy" width="44" height="44" decoding="async" data-nimg="1" class="profile" style="color:transparent" src="/favicons/apple-icon-114x114.png"/></div><div class="posts_textarea__w_iKT"><span class="writer">IT Posting</span><span class="posts_info__5KJdN"><span class="posts_date__ctqHI">Posted On Jun 19, 2024</span><span class="posts_reading_time__f7YPP">13<!-- --> min read</span></span></div></div><img alt="" loading="lazy" width="50" height="50" decoding="async" data-nimg="1" class="posts_view_badge__tcbfm" style="color:transparent" src="https://hits.seeyoufarm.com/api/count/incr/badge.svg?url=https%3A%2F%2Fallround-coder.github.io/post/2024-06-19-AproductapproachtoapetprojectorhowIdevelopedamusicwebapplication&amp;count_bg=%2379C83D&amp;title_bg=%23555555&amp;icon=&amp;icon_color=%23E7E7E7&amp;title=views&amp;edge_flat=false"/></div><article class="posts_post_content__n_L6j"><div><!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta content="width=device-width, initial-scale=1" name="viewport">
</head>
<body>
<img src="/assets/img/2024-06-19-AproductapproachtoapetprojectorhowIdevelopedamusicwebapplication_0.png">
<p>음악을 좋아하고 개발을 결합하면 무엇이 일어날까요? 제 경우에는 음악 스트리밍 웹 애플리케이션을 만들기 위한 펫 프로젝트로 이어졌습니다. 저는 "Nexway"에서 프론트엔드 개발자로 일하는 Andrey입니다. 이제 펫 프로젝트 개발에 대한 효율적인 학습 방법을 설명하겠습니다.</p>
<p>모든 기술을 업무를 통해 습득할 수 없다는 사실은 명확합니다. 이때 펫 프로젝트가 유용하게 활용됩니다. 펫 프로젝트를 통해 새로운 것을 시도할 수 있을 뿐만 아니라 아이디어와 기술을 제한 없이 실험할 수 있는 기회를 제공합니다.</p>
<p>펫 프로젝트를 실험실 연습이 아닌 미래 제품으로 본다면, 전체 개발 주기를 더 잘 이해할 수 있습니다. 이 접근 방식으로 먼저 고객의 역할을 맡아 문제를 해결하는 방법과 가장 좋은 방법을 결정하고, 원하는 기술을 구현하는 데 가장 용이한 기술을 선택하는 방법을 생각할 수 있습니다.</p>
<div class="content-ad"></div>
<p>제품 접근 방식은 개발 프로세스를 작은 단위로 바라볼 수 있게 해줍니다. 직접 우선 순위를 정하고 작업이 어디에서 비롯되었는지 이해하는 데 도움이 됩니다. 아키텍처를 어떻게 구축할지와 새로운 기능을 추가하기 쉽게 만들기 위해 어떤 기술 스택을 선택할지에 대해 질문을 시작합니다 (응용 프로그램이 성장할수록 새로운 기능을 추가하려는 욕구도 커진다고 고려합니다).</p>
<p>이제 제 애왽 프로젝트 개발에 대해 이 방법을 사용하여 얻은 경험에 대해 이야기하겠습니다.</p>
<p>프로젝트 소개</p>
<p>저는 Spotify, Apple Music 등 음악 스트리밍 애플리케이션에서 영감을 받아 이 프로젝트를 시작하기로 결심했습니다. 브라우저의 기능을 활용하여 음악 파일을 사용하기를 원했기 때문에 음악 주제가 가까웠고 zaycev.net의 나만의 버전을 만들고 싶었습니다.</p>
<div class="content-ad"></div>
<p>이 시점에서는 고객이 있는 것처럼 프로젝트 요구 사항을 구체화하는 것이 중요합니다 (실제로는 본인이어도 좋습니다). 요구 사항은 업무 계획을 작성하고 자신이 관심 있는 기능을 구현하는 데 집중할 수 있도록 도와줍니다. 이렇게 하면 프로젝트를 완료하기 위한 자신에 대한 약속을 만들 수 있습니다.</p>
<p>펫 프로젝트를 제품 프로토 타입으로 살펴보고 있기 때문에 이를 사용할 수 있는 사람들에 대해 고민하는 것이 좋습니다. 애플리케이션의 잠재적 사용자는 누구나 일 수 있고, 사용자 커뮤니티가 공통 음악 라이브러리를 확대할 수 있도록 할 예정입니다. 또한 응용 프로그램은 인디 아티스트들을 대상으로 하며, 새로운 청취자를 발견하고 광고를 무료로 진행할 수 있는 기회를 제공할 것입니다.</p>
<p>아래에는 프로젝트에 대해 개요를 작성한 요구 사항들이 있습니다:</p>
<div class="content-ad"></div>
<p>친화적인 톤으로 번역해보겠습니다.</p>
<p>사용성:</p>
<ul>
<li>직접 UI 컴포넌트 라이브러리(UI 킷)를 사용하여 인터페이스를 구현하십시오.</li>
<li>볼륨 조절, 재생, 이전 또는 다음 트랙으로 전환하는 버튼 및 일시 정지 기능이 있는 기능적 플레이어를 구현하십시오.</li>
<li>언어 전환 및 어두운/밝은 테마로 사용자의 기호에 맞게 인터페이스를 사용자 정의할 수 있는 기능을 추가하십시오.</li>
</ul>
<p>기술적 요구사항:</p>
<ul>
<li>Web Audio API를 기반으로 구현된 자체 음악 플레이어를 사용하여 음악 트랙 및 라디오를 재생하십시오.</li>
<li>사용자가 등록할 때 "인간"임을 확인하기 위해 확인 코드가 포함된 이메일을 보내는 방식으로 등록을 검증하십시오.</li>
<li>CI/CD를 설정하여 초기 사용자가 기능이 추가될 때 즉시 새로운 기능을 볼 수 있도록 하십시오.</li>
</ul>
<div class="content-ad"></div>
<p>사용자 중심:</p>
<ul>
<li>전 세계의 라디오 방송을들을 수 있게 합니다.</li>
<li>사용자 커뮤니티에게 음악 라이브러리를 확장할 수 있는 기회를 제공합니다.</li>
<li>소셜 미디어 및 메신저 앱에서 애플리케이션을 공유할 수 있는 기능 추가</li>
<li>아티스트, 제목, 라디오 이름, 국가, 장르로 음악을 검색할 수 있는 자동완성 제안 기능 제공</li>
<li>사용자가 선호하는 음악과 라디오 방송 추가 가능</li>
<li>사용자가 음악 트랙을 컴퓨터로 다운로드할 수 있는 기능 추가</li>
<li>이메일로 리셋 코드를 보내 비밀번호를 재설정할 수 있는 기능 제공</li>
</ul>
<p>아키텍처 설계</p>
<p>컨셉을 설명하고 요구 사항을 수집한 후, 미래 응용 프로그램의 아키텍처를 설명합니다. 제 경우에는 다음과 같습니다:</p>
<div class="content-ad"></div>
<p><img src="/assets/img/2024-06-19-AproductapproachtoapetprojectorhowIdevelopedamusicwebapplication_2.png" alt="Web Application"></p>
<p>기술 스택 선택</p>
<p>프론트엔드: 어플리케이션의 클라이언트 측 구현을 위해 가장 익숙한 기술 스택을 선택했습니다 — React, Redux Tool Kit, Typescript, Webpack.</p>
<p>그 후에는 실험을 하기로 결정하고 Webpack 대신 Vite를 사용하기로 했습니다. HMR을 통해 개발 속도가 향상되고, 빌드 구성을 몇 분 안에 작성할 수 있다는 점이 이유입니다. 다국어 처리를 위해 i18next를 사용했고, 스타일 작업에는 SCSS를 선택했습니다. Tailwind도 고려했지만, 어플리케이션의 일반 디자인 시스템을 설명하고자 했기 때문에 전역 변수와 중첩 작업이 편리했기 때문에 SCSS를 선택했습니다.</p>
<div class="content-ad"></div>
<p>UI 킷: 컴포넌트 라이브러리의 경우, 나는 Storybook, React, Typescript, SCSS, Webpack까지만 진행하기로 결정했습니다. 라이브러리를 개발해본 경험이 없었기 때문에 빌더의 선택이 중요했는데, Webpack에서 많은 자료와 코드 예제를 찾을 수 있었습니다.</p>
<p>백엔드: 여기서는 Express.js와 Nest.js 사이에서 오랫동않 고민했습니다. Nest.js에서는 객체 지향적인 접근 방식을 좋아했고, Express.js에서는 간단한 서버를 빠르게 작성할 수 있는 능력과 이미 약간의 경험을 가지고 있었습니다. 결과적으로 Express.js에서 결정하기로 했습니다. 또한 이전에 작업해 본 적이 없었던 클라우드가 트랙을 저장하는 데 필요할 것이라는 것도 분명했습니다. 작은 검색 결과, 클라우드와 쉽게 상호 작용할 수 있게 해주는 라이브러리를 발견했습니다. 인증에는 세션+쿠키 접근 방식을 사용하기로 결정했습니다. 파일 처리에는 multer를 사용했는데, 문서의 명확성과 클라우드로 전송하기 전에 파일을 메모리에 저장할 수 있는 기능이 마음에 들었습니다. 클라이언트와 서버 간의 통신은 REST API를 통해 이루어져야 했습니다.</p>
<p>기술적 설계 디자인</p>
<p>인터페이스 컴포넌트와 데이터베이스 테이블의 상호 작용을 설명합니다.</p>
<div class="content-ad"></div>
<p><img src="/assets/img/2024-06-19-AproductapproachtoapetprojectorhowIdevelopedamusicwebapplication_3.png" alt="이미지"></p>
<p><img src="/assets/img/2024-06-19-AproductapproachtoapetprojectorhowIdevelopedamusicwebapplication_4.png" alt="이미지"></p>
<p>사용자 디자인 설계</p>
<p>안타깝게도 UX/UI 디자인에 대해 얕은 지식만 가지고 있어서 처음부터 사용자 인터페이스를 만들 수 없었습니다. 그래서 인터넷에서 적절한 준비된 디자인을 찾아 구현했습니다.</p>
<div class="content-ad"></div>
<p>기능 구현</p>
<p>이 섹션에서는 애플리케이션을 배포하는 모든 단계를 자세히 설명하고 싶지는 않습니다. 대신, 흥미로운 기능을 더 자세히 설명하겠습니다. 동시에 초보자들에게 더욱 유용하고 완전한 기사를 만들기 위해 프로젝트의 소스 코드 저장소 링크를 뒤에 첨부했습니다.</p>
<p>예를 들어 Sequelize 트랜잭션을 사용하여 클라우드에 트랙을 업로드하는 Express 컨트롤러의 구현 방법은 다음과 같습니다. 먼저 클라우드 업로드 서비스를 호출한 다음 데이터베이스 쓰기 서비스를 호출하고 변경 사항을 저장하도록 합니다. 오류 발생 시 모든 변경 사항이 롤백되어 데이터가 일관되게 유지되며 작업이 원자적으로 수행됩니다.</p>
<pre><code class="hljs language-js">tracksController.<span class="hljs-title function_">post</span>(
   <span class="hljs-string">'/uploadTrack'</span>,
   authChecker,
   upload.<span class="hljs-title function_">fields</span>([
       { <span class="hljs-attr">name</span>: <span class="hljs-string">'cover'</span>, <span class="hljs-attr">maxCount</span>: <span class="hljs-number">1</span> },
       { <span class="hljs-attr">name</span>: <span class="hljs-string">'track'</span>, <span class="hljs-attr">maxCount</span>: <span class="hljs-number">1</span> }
   ]),
   <span class="hljs-keyword">async</span> (req, res, next) => {
       <span class="hljs-keyword">const</span> t = <span class="hljs-keyword">await</span> sequelize.<span class="hljs-title function_">transaction</span>()
       <span class="hljs-keyword">try</span> {
           <span class="hljs-keyword">const</span> { trackName, artist } = req.<span class="hljs-property">body</span>

           <span class="hljs-keyword">const</span> cover = req.<span class="hljs-property">files</span>?.<span class="hljs-property">cover</span>[<span class="hljs-number">0</span>]?.<span class="hljs-property">buffer</span>
           <span class="hljs-keyword">const</span> track = req.<span class="hljs-property">files</span>?.<span class="hljs-property">track</span>[<span class="hljs-number">0</span>]?.<span class="hljs-property">buffer</span>

           <span class="hljs-keyword">const</span> { img, mp3 } = <span class="hljs-keyword">await</span> cloudService.<span class="hljs-title function_">upload</span>({
               track,
               cover
           })
           <span class="hljs-keyword">await</span> tracksService.<span class="hljs-title function_">addTrack</span>({
               artist,
               trackName,
               img,
               mp3,
               <span class="hljs-attr">moderated</span>: <span class="hljs-literal">false</span>
           })
           <span class="hljs-keyword">await</span> t.<span class="hljs-title function_">commit</span>()
           res.<span class="hljs-title function_">sendStatus</span>(<span class="hljs-number">200</span>)
       } <span class="hljs-keyword">catch</span> (e) {
           <span class="hljs-keyword">await</span> t.<span class="hljs-title function_">rollback</span>()
           <span class="hljs-title function_">next</span>(e)
       }
   }
)
</code></pre>
<div class="content-ad"></div>
<pre><code class="hljs language-js"><span class="hljs-keyword">const</span> s3 = <span class="hljs-keyword">new</span> <span class="hljs-title function_">S3</span>({
   <span class="hljs-attr">auth</span>: {
       <span class="hljs-attr">accessKeyId</span>: process.<span class="hljs-property">env</span>.<span class="hljs-property">ACCESS_KEY_ID</span>,
       <span class="hljs-attr">secretAccessKey</span>: process.<span class="hljs-property">env</span>.<span class="hljs-property">SECRET_ACCESS_KEY</span>
   },
   <span class="hljs-title class_">Bucket</span>: <span class="hljs-string">'nirvana-tracks'</span>,
   <span class="hljs-attr">debug</span>: <span class="hljs-literal">false</span>
})

<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">upload</span>(<span class="hljs-params">{ track, cover }</span>) {
   <span class="hljs-keyword">try</span> {
       <span class="hljs-keyword">let</span> mp3 = <span class="hljs-keyword">await</span> s3.<span class="hljs-title class_">Upload</span>(
           {
               <span class="hljs-attr">buffer</span>: track
           },
           <span class="hljs-string">'/mp3/'</span>
       )
       <span class="hljs-keyword">let</span> img = <span class="hljs-keyword">await</span> s3.<span class="hljs-title class_">Upload</span>(
           {
               <span class="hljs-attr">buffer</span>: cover
           },
           <span class="hljs-string">'/img/'</span>
       )
       <span class="hljs-keyword">if</span> (mp3 &#x26;&#x26; track) {
           <span class="hljs-keyword">return</span> { <span class="hljs-attr">img</span>: img.<span class="hljs-property">Location</span>, <span class="hljs-attr">mp3</span>: mp3.<span class="hljs-property">Location</span> }
       } <span class="hljs-keyword">else</span> {
           <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">'업로드할 수 없습니다.'</span>)
       }
   } <span class="hljs-keyword">catch</span> (e) {
       <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(e)
       <span class="hljs-keyword">throw</span> e
   }
}

<span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = {
   upload
}
</code></pre>
<p>라디오 브라우저 라이브러리를 외부 API로부터 더 독립적으로 만들기 위해 집합 요청을 수행하여 라이브러리의 모든 라디오 스테이션에 대한 단일 요청을 만들어 데이터베이스를 시드로 채웠습니다. 여기에서도 커버 링크가 유효한지 확인했습니다.</p>
<pre><code class="hljs language-js"><span class="hljs-keyword">const</span> <span class="hljs-title class_">RadioBrowser</span> = <span class="hljs-built_in">require</span>(<span class="hljs-string">'radio-browser'</span>)
<span class="hljs-keyword">const</span> { <span class="hljs-attr">v4</span>: uuidv4 } = <span class="hljs-built_in">require</span>(<span class="hljs-string">'uuid'</span>)
<span class="hljs-keyword">const</span> checkImage = <span class="hljs-built_in">require</span>(<span class="hljs-string">'../../web/utils/checkImage'</span>)

<span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = {
   <span class="hljs-keyword">async</span> <span class="hljs-title function_">up</span>(<span class="hljs-params">queryInterface, Sequelize</span>) {
       <span class="hljs-keyword">const</span> radios = <span class="hljs-keyword">await</span> <span class="hljs-title class_">RadioBrowser</span>.<span class="hljs-title function_">getStations</span>({ <span class="hljs-attr">limit</span>: <span class="hljs-number">100</span> })
       <span class="hljs-keyword">const</span> radiosWithUsefulFields = <span class="hljs-keyword">await</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">all</span>(
           radios.<span class="hljs-title function_">map</span>(<span class="hljs-keyword">async</span> el => {
               <span class="hljs-keyword">return</span> {
                   <span class="hljs-attr">id</span>: <span class="hljs-title function_">uuidv4</span>(),
                   <span class="hljs-attr">name</span>: el.<span class="hljs-property">name</span>,
                   <span class="hljs-attr">url</span>: el.<span class="hljs-property">url</span>,
                   <span class="hljs-attr">votes</span>: el.<span class="hljs-property">votes</span>,
                   <span class="hljs-attr">country</span>: el.<span class="hljs-property">country</span>,
                   <span class="hljs-attr">favicon</span>: (<span class="hljs-keyword">await</span> <span class="hljs-title function_">checkImage</span>(el.<span class="hljs-property">favicon</span>)) ? el.<span class="hljs-property">favicon</span> : <span class="hljs-string">''</span>,
                   <span class="hljs-attr">tags</span>: el.<span class="hljs-property">tags</span>,
                   <span class="hljs-attr">lastcheckoktime</span>: el.<span class="hljs-property">lastcheckoktime</span>
               }
           })
       )
       <span class="hljs-keyword">await</span> queryInterface.<span class="hljs-title function_">bulkInsert</span>(<span class="hljs-string">'Radios'</span>, radiosWithUsefulFields, {})
   },

   <span class="hljs-keyword">async</span> <span class="hljs-title function_">down</span>(<span class="hljs-params">queryInterface, Sequelize</span>) {
       <span class="hljs-keyword">await</span> queryInterface.<span class="hljs-title function_">bulkDelete</span>(<span class="hljs-string">'Radios'</span>, <span class="hljs-literal">null</span>, {})
   }
}
</code></pre>
<pre><code class="hljs language-js"><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">checkImage</span>(<span class="hljs-params">url</span>) {
   <span class="hljs-keyword">return</span> <span class="hljs-title function_">fetch</span>(url)
       .<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">response</span> =></span> {
           <span class="hljs-keyword">if</span> (response.<span class="hljs-property">ok</span>) {
               <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>
           } <span class="hljs-keyword">else</span> {
               <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>
           }
       })
       .<span class="hljs-title function_">catch</span>(<span class="hljs-function"><span class="hljs-params">error</span> =></span> {
           <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>
       })
}

<span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = checkImage
</code></pre>
<div class="content-ad"></div>
<p>내가 커스텀 플레이어의 구현 방법을 설명해 줄게. 기본적으로 useRef를 사용해서 오디오 요소에 대한 참조를 가져와 웹 오디오 API에 액세스했어. 그런 다음 오디오 API에서 가져온 데이터를 React 상태와 연결해서 리렌더링을 트리거하도록 했어. 이 접근법으로 기능을 확장하기 시작했고, 트랙 전환, 드래그 앤 드롭 되감기, 볼륨 제어, 일시 정지 등을 구현했어.</p>
<pre><code class="hljs language-js"><span class="hljs-keyword">return</span> (
       &#x3C;>
           &#x3C;audio
               src={currentTrack?.url}
               ref={audioElem as LegacyRef&#x3C;HTMLAudioElement>}
               onTimeUpdate={() => {
                   onPlaying({
                       audioElem:
                           audioElem as MutableRefObject&#x3C;HTMLAudioElement>,
                       setCurrentTrack,
                       currentTrack
                   })
               }
           />
</code></pre>
<p>트랙 선택 시 자동으로 트랙을 시작하는 커스텀 훅 구현 예제야.</p>
<pre><code class="hljs language-js"><span class="hljs-keyword">import</span> { useLayoutEffect } <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>


<span class="hljs-keyword">import</span> { usePlayOnMountArgs } <span class="hljs-keyword">from</span> <span class="hljs-string">'./types'</span>


<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">usePlayOnMount</span>(<span class="hljs-params">{
   tracks,
   setCurrentTrack,
   position,
   audioElem,
   setIsPlaying
}: usePlayOnMountArgs</span>) {
   <span class="hljs-title function_">useLayoutEffect</span>(<span class="hljs-function">() =></span> {
       <span class="hljs-title function_">setCurrentTrack</span>(tracks[position])
       <span class="hljs-keyword">const</span> timeoutId = <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =></span> {
           audioElem?.<span class="hljs-property">current</span>?.<span class="hljs-title function_">play</span>()
           <span class="hljs-title function_">setIsPlaying</span>(<span class="hljs-literal">true</span>)
       }, <span class="hljs-number">500</span>)
       <span class="hljs-keyword">return</span> <span class="hljs-function">() =></span> {
           <span class="hljs-built_in">clearTimeout</span>(timeoutId)
       }
   }, [tracks, position])
}
</code></pre>
<div class="content-ad"></div>
<p>사용자가 노래를 들으며 더 몰입할 수 있도록 레이아웃을 약간 보완하기로 했어요. 그리고 어플리케이션의 이름(Nirvana)이 정당하다는 느낌을 주도록 했어요.</p>
<p>이를 위해, 플레이어의 배경에 트랙 커버의 색상으로 흐릿한 안개를 만들었는데, 해당 안개가 반짝거리도록 했어요. 그리고 어떤 이유로 인해 커버가 없는 경우에는 어플리케이션의 색상으로 안개를 만들었어요. 이런 효과를 이런 식으로 구현했어요:</p>
<pre><code class="hljs language-js">&#x3C;div
	className={styles.<span class="hljs-property">playerBg</span>}
	style={{
		<span class="hljs-attr">backgroundImage</span>:
			currentTrack.<span class="hljs-property">img</span> &#x26;&#x26; <span class="hljs-string">`url(<span class="hljs-subst">${currentTrack.img}</span>)`</span>
	}}
>&#x3C;/div>
</code></pre>
<pre><code class="hljs language-js">@<span class="hljs-keyword">import</span> <span class="hljs-string">'../../constants/colors.scss'</span>;

.<span class="hljs-property">playerBg</span> {
	z-<span class="hljs-attr">index</span>: <span class="hljs-number">0</span>;
	<span class="hljs-attr">height</span>: <span class="hljs-number">20</span>%;
	<span class="hljs-attr">width</span>: 120vw;
	<span class="hljs-attr">opacity</span>: <span class="hljs-number">0.85</span>;
	<span class="hljs-attr">position</span>: fixed;
	<span class="hljs-attr">bottom</span>: -<span class="hljs-number">5</span>%;
	<span class="hljs-attr">left</span>: -5vw;
	background-<span class="hljs-attr">image</span>: linear-<span class="hljs-title function_">gradient</span>(
		90deg,
		<span class="hljs-title function_">rgba</span>(<span class="hljs-number">243</span>, <span class="hljs-number">243</span>, <span class="hljs-number">243</span>, <span class="hljs-number">1</span>) <span class="hljs-number">0</span>%,
		<span class="hljs-title function_">rgba</span>(<span class="hljs-number">94</span>, <span class="hljs-number">233</span>, <span class="hljs-number">191</span>, <span class="hljs-number">1</span>) <span class="hljs-number">19</span>%,
		<span class="hljs-title function_">rgba</span>(<span class="hljs-number">47</span>, <span class="hljs-number">105</span>, <span class="hljs-number">255</span>, <span class="hljs-number">1</span>) <span class="hljs-number">54</span>%,
		<span class="hljs-title function_">rgba</span>(<span class="hljs-number">99</span>, <span class="hljs-number">96</span>, <span class="hljs-number">255</span>, <span class="hljs-number">1</span>) <span class="hljs-number">82</span>%,
		<span class="hljs-title function_">rgba</span>(<span class="hljs-number">161</span>, <span class="hljs-number">106</span>, <span class="hljs-number">232</span>, <span class="hljs-number">1</span>) <span class="hljs-number">100</span>%
	);
	<span class="hljs-attr">filter</span>: <span class="hljs-title function_">blur</span>(30px);
	background-<span class="hljs-attr">repeat</span>: no-repeat;
	background-<span class="hljs-attr">size</span>: <span class="hljs-number">300</span>% <span class="hljs-number">300</span>%;
	<span class="hljs-attr">animation</span>: <span class="hljs-title class_">AnimateBG</span> 100s ease-<span class="hljs-keyword">in</span>-out infinite;
}

@keyframes <span class="hljs-title class_">AnimateBG</span> {
	<span class="hljs-number">0</span>% {
		background-<span class="hljs-attr">position</span>: <span class="hljs-number">0</span>% <span class="hljs-number">50</span>%;
	}
	<span class="hljs-number">50</span>% {
		background-<span class="hljs-attr">position</span>: <span class="hljs-number">100</span>% <span class="hljs-number">50</span>%;
	}
	<span class="hljs-number">100</span>% {
		background-<span class="hljs-attr">position</span>: <span class="hljs-number">0</span>% <span class="hljs-number">50</span>%;
	}
}
</code></pre>
<div class="content-ad"></div>
<img src="/assets/img/2024-06-19-AproductapproachtoapetprojectorhowIdevelopedamusicwebapplication_5.png">
<p>CI/CD</p>
<p>어플리케이션에 대한 자동화된 테스트가 없었습니다. 대신에 프로젝트 링크를 모든 친구들과 지인들에게 보내어 피드백을 받고 버그를 발견하는 데 도움을 받았습니다. 이 프로세스를 가속화하기 위해 GitHub Actions를 사용한 간단한 CI 파이프라인을 작성하기로 결정했습니다.</p>
<pre><code class="hljs language-js"><span class="hljs-attr">name</span>: onPush
run-<span class="hljs-attr">name</span>: <span class="hljs-title class_">Actions</span> on push
<span class="hljs-attr">on</span>: [push]
<span class="hljs-attr">jobs</span>:
   <span class="hljs-attr">init</span>:
       runs-<span class="hljs-attr">on</span>: ubuntu-latest
       <span class="hljs-attr">strategy</span>:
           <span class="hljs-attr">matrix</span>:
               node-<span class="hljs-attr">version</span>: [<span class="hljs-number">21.</span>x]
       <span class="hljs-attr">steps</span>:
           - <span class="hljs-attr">uses</span>: actions/checkout@v3
           - <span class="hljs-attr">name</span>: <span class="hljs-title class_">Staring</span> <span class="hljs-title class_">Node</span>.<span class="hljs-property">js</span> ${matrix.<span class="hljs-property">node</span>-version}
             <span class="hljs-attr">uses</span>: actions/setup-node@v3
             <span class="hljs-attr">with</span>:
                 node-<span class="hljs-attr">version</span>: ${matrix.<span class="hljs-property">node</span>-version}
           - <span class="hljs-attr">name</span>: install modules
             <span class="hljs-attr">run</span>: npm install
           - <span class="hljs-attr">name</span>: install prettier
             <span class="hljs-attr">run</span>: npm install --<span class="hljs-variable language_">global</span> prettier
           - <span class="hljs-attr">name</span>: formatting code
             <span class="hljs-attr">run</span>: prettier . -w
           - <span class="hljs-attr">name</span>: build project
             <span class="hljs-attr">run</span>: npm run build
</code></pre>
<div class="content-ad"></div>
<p>Render에 배포하기로 결정했어요. 거기서 데이터베이스, 백엔드, 그리고 클라이언트를 쉽게 배포할 수 있고 Render가 GitHub 저장소에서 변경 사항도 가져온다는 점이 마음에 들었어요.</p>
<p>내가 마주한 어려움</p>
<p>주요 어려움은 저작권 문제에서 생겼어요. 라디오 섹션을 관리자만 이용할 수 있게 만들어야 했고, 업로드된 트랙은 관리자가 확인한 후에만 일반 피드에 추가되도록 해야 했어요 (지금은 데이터베이스를 통해서만 확인할 수 있어요).</p>
<p>가끔씩 재생과 일시정지를 자주 바꿀 때 브라우저 API가 "play() 요청이 pause() 호출에 의해 중단되었습니다"라는 오류를 던지는 이유도 완전히 명확하지는 않았어요. 그러나 나는 커스텀 debounce 훅과 lodash의 해당 함수를 사용하여 이 문제를 해결할 수 있었어요. 아래는 이 문제에 대한 내 해결책이에요.</p>
<div class="content-ad"></div>
<pre><code class="hljs language-js"><span class="hljs-keyword">import</span> { useEffect } <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>
<span class="hljs-keyword">import</span> { useDebounceOnPlayPauseArgs } <span class="hljs-keyword">from</span> <span class="hljs-string">'./types'</span>


<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">useDebounceOnPlayPause</span>(<span class="hljs-params">{
   audioElem,
   isPlaying
}: useDebounceOnPlayPauseArgs</span>) {
   <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =></span> {
       <span class="hljs-keyword">const</span> timeoutId = <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =></span> {
           <span class="hljs-keyword">if</span> (isPlaying) {
               audioElem?.<span class="hljs-property">current</span>?.<span class="hljs-title function_">play</span>()
           } <span class="hljs-keyword">else</span> {
               audioElem?.<span class="hljs-property">current</span>?.<span class="hljs-title function_">pause</span>()
           }
       }, <span class="hljs-number">500</span>)
       <span class="hljs-keyword">return</span> <span class="hljs-function">() =></span> {
           <span class="hljs-built_in">clearTimeout</span>(timeoutId)
       }
   }, [isPlaying])
}
</code></pre>
<p>그리고 모바일 적응에 많은 시간을 들였으며 UI를 과다하게 로드하지 않기 위해 일부 기능을 포기해야 했습니다. 어느 시점에서 최소한의 버튼을 사용하고 터치에 집중하기로 결정했습니다. 예를 들어, 트랙 목록을 스와이프로 스크롤하거나 캐러셀과 상호 작용할 수 있습니다. 저는 react-swipeable을 사용하여 이를 구현했습니다. 프로젝트 작업의 마지막 단계에서는 친구, 프론트엔드 및 노드.js 백엔드 개발자에게 코드 검토를 요청하여 일부 수정을 하였습니다. 새로운 관점을 통해 논리를 더 잘 분해할 수 있었습니다. 배포 후 친구들이 버그를 지적하고 UX를 개선하기 위한 조언을 해주었습니다.</p>
<p>프로젝트의 현재 상태는 어떻습니까?</p>
<p>이 프로젝트는 Lighthouse에 따르면 꽤 양호한 성능 지표를 보여줍니다.</p>
<div class="content-ad"></div>
<img src="/assets/img/2024-06-19-AproductapproachtoapetprojectorhowIdevelopedamusicwebapplication_6.png">
<p>소스 코드는 GitHub를 통해 공개되어 있어 관심 있는 누구든지 확인할 수 있습니다.</p>
<p><a href="https://github.com/ABurov30/nirvana-ui" rel="nofollow" target="_blank">https://github.com/ABurov30/nirvana-ui</a>
<a href="https://github.com/ABurov30/nirvana-client" rel="nofollow" target="_blank">https://github.com/ABurov30/nirvana-client</a>
<a href="https://github.com/ABurov30/nirvana-server" rel="nofollow" target="_blank">https://github.com/ABurov30/nirvana-server</a></p>
<p>UI 킷은 npm에 발행되었습니다.</p>
<div class="content-ad"></div>
<p><a href="https://www.npmjs.com/package/nirvana-uikit" rel="nofollow" target="_blank">https://www.npmjs.com/package/nirvana-uikit</a></p>
<p>결론 도출</p>
<p>이 이른바 펫 프로젝트 덕분에 고객과 실행자 모두의 역할을 맡아 제품 접근 방식을 적용하고, 독립적으로 애플리케이션 개발 프로세스를 처음부터 구축했습니다. 기술 스택을 결정하는 방법을 배우고, 클라우드와 Web Audio API를 활용했으며, 자체 UI 라이브러리를 개발하고 새로운 기술을 시도해 보았습니다.</p>
<p>앞으로는 이 프로젝트를 기반으로 새로운 기술을 도입하여 애플리케이션에 기능을 추가해 보려고 합니다. 예를 들어, 세 가지 프로젝트로 마이크로 프론트엔드를 만들어 보려고 합니다:</p>
<div class="content-ad"></div>
<p>리액트, Vite, Redux로 만든 주요 Nirvana 음악 애플리케이션</p>
<p>Next.js로 만든 애플리케이션의 주요 프로모션 페이지</p>
<p>Vue, Socket.io, Graph Ql을 사용하여 만든 애플리케이션 내의 채팅 (jotai나 zustand와 같이 명확하지 않은 상태 관리자를 사용할 수도 있어요).</p>
<p>그리고 사용자가 업로드한 콘텐츠를 수동으로 확인하는 것은 상당히 어려우므로 저작권 자동 유효성 검사를 추가하고 싶어요, 이 과정을 자동화하고 싶어요.</p>
</body>
</html>
</div></article></div></main></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"title":"애완동물 프로젝트에 적용한 제품 접근 방식, 또는 음악 웹 애플리케이션 개발 이야기","description":"","date":"2024-06-19 02:36","slug":"2024-06-19-AproductapproachtoapetprojectorhowIdevelopedamusicwebapplication","content":"\n\n\u003cimg src=\"/assets/img/2024-06-19-AproductapproachtoapetprojectorhowIdevelopedamusicwebapplication_0.png\" /\u003e\n\n음악을 좋아하고 개발을 결합하면 무엇이 일어날까요? 제 경우에는 음악 스트리밍 웹 애플리케이션을 만들기 위한 펫 프로젝트로 이어졌습니다. 저는 \"Nexway\"에서 프론트엔드 개발자로 일하는 Andrey입니다. 이제 펫 프로젝트 개발에 대한 효율적인 학습 방법을 설명하겠습니다.\n\n모든 기술을 업무를 통해 습득할 수 없다는 사실은 명확합니다. 이때 펫 프로젝트가 유용하게 활용됩니다. 펫 프로젝트를 통해 새로운 것을 시도할 수 있을 뿐만 아니라 아이디어와 기술을 제한 없이 실험할 수 있는 기회를 제공합니다.\n\n펫 프로젝트를 실험실 연습이 아닌 미래 제품으로 본다면, 전체 개발 주기를 더 잘 이해할 수 있습니다. 이 접근 방식으로 먼저 고객의 역할을 맡아 문제를 해결하는 방법과 가장 좋은 방법을 결정하고, 원하는 기술을 구현하는 데 가장 용이한 기술을 선택하는 방법을 생각할 수 있습니다.\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n제품 접근 방식은 개발 프로세스를 작은 단위로 바라볼 수 있게 해줍니다. 직접 우선 순위를 정하고 작업이 어디에서 비롯되었는지 이해하는 데 도움이 됩니다. 아키텍처를 어떻게 구축할지와 새로운 기능을 추가하기 쉽게 만들기 위해 어떤 기술 스택을 선택할지에 대해 질문을 시작합니다 (응용 프로그램이 성장할수록 새로운 기능을 추가하려는 욕구도 커진다고 고려합니다).\n\n이제 제 애왽 프로젝트 개발에 대해 이 방법을 사용하여 얻은 경험에 대해 이야기하겠습니다.\n\n프로젝트 소개\n\n저는 Spotify, Apple Music 등 음악 스트리밍 애플리케이션에서 영감을 받아 이 프로젝트를 시작하기로 결심했습니다. 브라우저의 기능을 활용하여 음악 파일을 사용하기를 원했기 때문에 음악 주제가 가까웠고 zaycev.net의 나만의 버전을 만들고 싶었습니다.\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n이 시점에서는 고객이 있는 것처럼 프로젝트 요구 사항을 구체화하는 것이 중요합니다 (실제로는 본인이어도 좋습니다). 요구 사항은 업무 계획을 작성하고 자신이 관심 있는 기능을 구현하는 데 집중할 수 있도록 도와줍니다. 이렇게 하면 프로젝트를 완료하기 위한 자신에 대한 약속을 만들 수 있습니다.\n\n펫 프로젝트를 제품 프로토 타입으로 살펴보고 있기 때문에 이를 사용할 수 있는 사람들에 대해 고민하는 것이 좋습니다. 애플리케이션의 잠재적 사용자는 누구나 일 수 있고, 사용자 커뮤니티가 공통 음악 라이브러리를 확대할 수 있도록 할 예정입니다. 또한 응용 프로그램은 인디 아티스트들을 대상으로 하며, 새로운 청취자를 발견하고 광고를 무료로 진행할 수 있는 기회를 제공할 것입니다.\n\n아래에는 프로젝트에 대해 개요를 작성한 요구 사항들이 있습니다:\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n친화적인 톤으로 번역해보겠습니다.\n\n사용성:\n\n- 직접 UI 컴포넌트 라이브러리(UI 킷)를 사용하여 인터페이스를 구현하십시오.\n- 볼륨 조절, 재생, 이전 또는 다음 트랙으로 전환하는 버튼 및 일시 정지 기능이 있는 기능적 플레이어를 구현하십시오.\n- 언어 전환 및 어두운/밝은 테마로 사용자의 기호에 맞게 인터페이스를 사용자 정의할 수 있는 기능을 추가하십시오.\n\n기술적 요구사항:\n\n- Web Audio API를 기반으로 구현된 자체 음악 플레이어를 사용하여 음악 트랙 및 라디오를 재생하십시오.\n- 사용자가 등록할 때 \"인간\"임을 확인하기 위해 확인 코드가 포함된 이메일을 보내는 방식으로 등록을 검증하십시오.\n- CI/CD를 설정하여 초기 사용자가 기능이 추가될 때 즉시 새로운 기능을 볼 수 있도록 하십시오.\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n사용자 중심:\n\n- 전 세계의 라디오 방송을들을 수 있게 합니다.\n- 사용자 커뮤니티에게 음악 라이브러리를 확장할 수 있는 기회를 제공합니다.\n- 소셜 미디어 및 메신저 앱에서 애플리케이션을 공유할 수 있는 기능 추가\n- 아티스트, 제목, 라디오 이름, 국가, 장르로 음악을 검색할 수 있는 자동완성 제안 기능 제공\n- 사용자가 선호하는 음악과 라디오 방송 추가 가능\n- 사용자가 음악 트랙을 컴퓨터로 다운로드할 수 있는 기능 추가\n- 이메일로 리셋 코드를 보내 비밀번호를 재설정할 수 있는 기능 제공\n\n아키텍처 설계\n\n컨셉을 설명하고 요구 사항을 수집한 후, 미래 응용 프로그램의 아키텍처를 설명합니다. 제 경우에는 다음과 같습니다:\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n\n![Web Application](/assets/img/2024-06-19-AproductapproachtoapetprojectorhowIdevelopedamusicwebapplication_2.png)\n\n기술 스택 선택\n\n프론트엔드: 어플리케이션의 클라이언트 측 구현을 위해 가장 익숙한 기술 스택을 선택했습니다 — React, Redux Tool Kit, Typescript, Webpack.\n\n그 후에는 실험을 하기로 결정하고 Webpack 대신 Vite를 사용하기로 했습니다. HMR을 통해 개발 속도가 향상되고, 빌드 구성을 몇 분 안에 작성할 수 있다는 점이 이유입니다. 다국어 처리를 위해 i18next를 사용했고, 스타일 작업에는 SCSS를 선택했습니다. Tailwind도 고려했지만, 어플리케이션의 일반 디자인 시스템을 설명하고자 했기 때문에 전역 변수와 중첩 작업이 편리했기 때문에 SCSS를 선택했습니다.\n\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\nUI 킷: 컴포넌트 라이브러리의 경우, 나는 Storybook, React, Typescript, SCSS, Webpack까지만 진행하기로 결정했습니다. 라이브러리를 개발해본 경험이 없었기 때문에 빌더의 선택이 중요했는데, Webpack에서 많은 자료와 코드 예제를 찾을 수 있었습니다.\n\n백엔드: 여기서는 Express.js와 Nest.js 사이에서 오랫동않 고민했습니다. Nest.js에서는 객체 지향적인 접근 방식을 좋아했고, Express.js에서는 간단한 서버를 빠르게 작성할 수 있는 능력과 이미 약간의 경험을 가지고 있었습니다. 결과적으로 Express.js에서 결정하기로 했습니다. 또한 이전에 작업해 본 적이 없었던 클라우드가 트랙을 저장하는 데 필요할 것이라는 것도 분명했습니다. 작은 검색 결과, 클라우드와 쉽게 상호 작용할 수 있게 해주는 라이브러리를 발견했습니다. 인증에는 세션+쿠키 접근 방식을 사용하기로 결정했습니다. 파일 처리에는 multer를 사용했는데, 문서의 명확성과 클라우드로 전송하기 전에 파일을 메모리에 저장할 수 있는 기능이 마음에 들었습니다. 클라이언트와 서버 간의 통신은 REST API를 통해 이루어져야 했습니다.\n\n기술적 설계 디자인\n\n인터페이스 컴포넌트와 데이터베이스 테이블의 상호 작용을 설명합니다.\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n![이미지](/assets/img/2024-06-19-AproductapproachtoapetprojectorhowIdevelopedamusicwebapplication_3.png)\n\n![이미지](/assets/img/2024-06-19-AproductapproachtoapetprojectorhowIdevelopedamusicwebapplication_4.png)\n\n사용자 디자인 설계\n\n안타깝게도 UX/UI 디자인에 대해 얕은 지식만 가지고 있어서 처음부터 사용자 인터페이스를 만들 수 없었습니다. 그래서 인터넷에서 적절한 준비된 디자인을 찾아 구현했습니다.\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n기능 구현\n\n이 섹션에서는 애플리케이션을 배포하는 모든 단계를 자세히 설명하고 싶지는 않습니다. 대신, 흥미로운 기능을 더 자세히 설명하겠습니다. 동시에 초보자들에게 더욱 유용하고 완전한 기사를 만들기 위해 프로젝트의 소스 코드 저장소 링크를 뒤에 첨부했습니다.\n\n예를 들어 Sequelize 트랜잭션을 사용하여 클라우드에 트랙을 업로드하는 Express 컨트롤러의 구현 방법은 다음과 같습니다. 먼저 클라우드 업로드 서비스를 호출한 다음 데이터베이스 쓰기 서비스를 호출하고 변경 사항을 저장하도록 합니다. 오류 발생 시 모든 변경 사항이 롤백되어 데이터가 일관되게 유지되며 작업이 원자적으로 수행됩니다.\n\n```js\ntracksController.post(\n   '/uploadTrack',\n   authChecker,\n   upload.fields([\n       { name: 'cover', maxCount: 1 },\n       { name: 'track', maxCount: 1 }\n   ]),\n   async (req, res, next) =\u003e {\n       const t = await sequelize.transaction()\n       try {\n           const { trackName, artist } = req.body\n\n           const cover = req.files?.cover[0]?.buffer\n           const track = req.files?.track[0]?.buffer\n\n           const { img, mp3 } = await cloudService.upload({\n               track,\n               cover\n           })\n           await tracksService.addTrack({\n               artist,\n               trackName,\n               img,\n               mp3,\n               moderated: false\n           })\n           await t.commit()\n           res.sendStatus(200)\n       } catch (e) {\n           await t.rollback()\n           next(e)\n       }\n   }\n)\n```\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n```js\nconst s3 = new S3({\n   auth: {\n       accessKeyId: process.env.ACCESS_KEY_ID,\n       secretAccessKey: process.env.SECRET_ACCESS_KEY\n   },\n   Bucket: 'nirvana-tracks',\n   debug: false\n})\n\nasync function upload({ track, cover }) {\n   try {\n       let mp3 = await s3.Upload(\n           {\n               buffer: track\n           },\n           '/mp3/'\n       )\n       let img = await s3.Upload(\n           {\n               buffer: cover\n           },\n           '/img/'\n       )\n       if (mp3 \u0026\u0026 track) {\n           return { img: img.Location, mp3: mp3.Location }\n       } else {\n           throw new Error('업로드할 수 없습니다.')\n       }\n   } catch (e) {\n       console.error(e)\n       throw e\n   }\n}\n\nmodule.exports = {\n   upload\n}\n```\n\n라디오 브라우저 라이브러리를 외부 API로부터 더 독립적으로 만들기 위해 집합 요청을 수행하여 라이브러리의 모든 라디오 스테이션에 대한 단일 요청을 만들어 데이터베이스를 시드로 채웠습니다. 여기에서도 커버 링크가 유효한지 확인했습니다.\n\n```js\nconst RadioBrowser = require('radio-browser')\nconst { v4: uuidv4 } = require('uuid')\nconst checkImage = require('../../web/utils/checkImage')\n\nmodule.exports = {\n   async up(queryInterface, Sequelize) {\n       const radios = await RadioBrowser.getStations({ limit: 100 })\n       const radiosWithUsefulFields = await Promise.all(\n           radios.map(async el =\u003e {\n               return {\n                   id: uuidv4(),\n                   name: el.name,\n                   url: el.url,\n                   votes: el.votes,\n                   country: el.country,\n                   favicon: (await checkImage(el.favicon)) ? el.favicon : '',\n                   tags: el.tags,\n                   lastcheckoktime: el.lastcheckoktime\n               }\n           })\n       )\n       await queryInterface.bulkInsert('Radios', radiosWithUsefulFields, {})\n   },\n\n   async down(queryInterface, Sequelize) {\n       await queryInterface.bulkDelete('Radios', null, {})\n   }\n}\n```\n\n```js\nasync function checkImage(url) {\n   return fetch(url)\n       .then(response =\u003e {\n           if (response.ok) {\n               return true\n           } else {\n               return false\n           }\n       })\n       .catch(error =\u003e {\n           return false\n       })\n}\n\nmodule.exports = checkImage\n```\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n내가 커스텀 플레이어의 구현 방법을 설명해 줄게. 기본적으로 useRef를 사용해서 오디오 요소에 대한 참조를 가져와 웹 오디오 API에 액세스했어. 그런 다음 오디오 API에서 가져온 데이터를 React 상태와 연결해서 리렌더링을 트리거하도록 했어. 이 접근법으로 기능을 확장하기 시작했고, 트랙 전환, 드래그 앤 드롭 되감기, 볼륨 제어, 일시 정지 등을 구현했어.\n\n```js\nreturn (\n       \u003c\u003e\n           \u003caudio\n               src={currentTrack?.url}\n               ref={audioElem as LegacyRef\u003cHTMLAudioElement\u003e}\n               onTimeUpdate={() =\u003e {\n                   onPlaying({\n                       audioElem:\n                           audioElem as MutableRefObject\u003cHTMLAudioElement\u003e,\n                       setCurrentTrack,\n                       currentTrack\n                   })\n               }\n           /\u003e\n```\n\n트랙 선택 시 자동으로 트랙을 시작하는 커스텀 훅 구현 예제야.\n\n```js\nimport { useLayoutEffect } from 'react'\n\n\nimport { usePlayOnMountArgs } from './types'\n\n\nexport function usePlayOnMount({\n   tracks,\n   setCurrentTrack,\n   position,\n   audioElem,\n   setIsPlaying\n}: usePlayOnMountArgs) {\n   useLayoutEffect(() =\u003e {\n       setCurrentTrack(tracks[position])\n       const timeoutId = setTimeout(() =\u003e {\n           audioElem?.current?.play()\n           setIsPlaying(true)\n       }, 500)\n       return () =\u003e {\n           clearTimeout(timeoutId)\n       }\n   }, [tracks, position])\n}\n```\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n사용자가 노래를 들으며 더 몰입할 수 있도록 레이아웃을 약간 보완하기로 했어요. 그리고 어플리케이션의 이름(Nirvana)이 정당하다는 느낌을 주도록 했어요.\n\n이를 위해, 플레이어의 배경에 트랙 커버의 색상으로 흐릿한 안개를 만들었는데, 해당 안개가 반짝거리도록 했어요. 그리고 어떤 이유로 인해 커버가 없는 경우에는 어플리케이션의 색상으로 안개를 만들었어요. 이런 효과를 이런 식으로 구현했어요:\n\n```js\n\u003cdiv\n\tclassName={styles.playerBg}\n\tstyle={{\n\t\tbackgroundImage:\n\t\t\tcurrentTrack.img \u0026\u0026 `url(${currentTrack.img})`\n\t}}\n\u003e\u003c/div\u003e\n```\n\n```js\n@import '../../constants/colors.scss';\n\n.playerBg {\n\tz-index: 0;\n\theight: 20%;\n\twidth: 120vw;\n\topacity: 0.85;\n\tposition: fixed;\n\tbottom: -5%;\n\tleft: -5vw;\n\tbackground-image: linear-gradient(\n\t\t90deg,\n\t\trgba(243, 243, 243, 1) 0%,\n\t\trgba(94, 233, 191, 1) 19%,\n\t\trgba(47, 105, 255, 1) 54%,\n\t\trgba(99, 96, 255, 1) 82%,\n\t\trgba(161, 106, 232, 1) 100%\n\t);\n\tfilter: blur(30px);\n\tbackground-repeat: no-repeat;\n\tbackground-size: 300% 300%;\n\tanimation: AnimateBG 100s ease-in-out infinite;\n}\n\n@keyframes AnimateBG {\n\t0% {\n\t\tbackground-position: 0% 50%;\n\t}\n\t50% {\n\t\tbackground-position: 100% 50%;\n\t}\n\t100% {\n\t\tbackground-position: 0% 50%;\n\t}\n}\n```\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n\u003cimg src=\"/assets/img/2024-06-19-AproductapproachtoapetprojectorhowIdevelopedamusicwebapplication_5.png\" /\u003e\n\nCI/CD\n\n어플리케이션에 대한 자동화된 테스트가 없었습니다. 대신에 프로젝트 링크를 모든 친구들과 지인들에게 보내어 피드백을 받고 버그를 발견하는 데 도움을 받았습니다. 이 프로세스를 가속화하기 위해 GitHub Actions를 사용한 간단한 CI 파이프라인을 작성하기로 결정했습니다.\n\n```js\nname: onPush\nrun-name: Actions on push\non: [push]\njobs:\n   init:\n       runs-on: ubuntu-latest\n       strategy:\n           matrix:\n               node-version: [21.x]\n       steps:\n           - uses: actions/checkout@v3\n           - name: Staring Node.js ${matrix.node-version}\n             uses: actions/setup-node@v3\n             with:\n                 node-version: ${matrix.node-version}\n           - name: install modules\n             run: npm install\n           - name: install prettier\n             run: npm install --global prettier\n           - name: formatting code\n             run: prettier . -w\n           - name: build project\n             run: npm run build\n```\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\nRender에 배포하기로 결정했어요. 거기서 데이터베이스, 백엔드, 그리고 클라이언트를 쉽게 배포할 수 있고 Render가 GitHub 저장소에서 변경 사항도 가져온다는 점이 마음에 들었어요.\n\n내가 마주한 어려움\n\n주요 어려움은 저작권 문제에서 생겼어요. 라디오 섹션을 관리자만 이용할 수 있게 만들어야 했고, 업로드된 트랙은 관리자가 확인한 후에만 일반 피드에 추가되도록 해야 했어요 (지금은 데이터베이스를 통해서만 확인할 수 있어요).\n\n가끔씩 재생과 일시정지를 자주 바꿀 때 브라우저 API가 \"play() 요청이 pause() 호출에 의해 중단되었습니다\"라는 오류를 던지는 이유도 완전히 명확하지는 않았어요. 그러나 나는 커스텀 debounce 훅과 lodash의 해당 함수를 사용하여 이 문제를 해결할 수 있었어요. 아래는 이 문제에 대한 내 해결책이에요.\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n```js\nimport { useEffect } from 'react'\nimport { useDebounceOnPlayPauseArgs } from './types'\n\n\nexport function useDebounceOnPlayPause({\n   audioElem,\n   isPlaying\n}: useDebounceOnPlayPauseArgs) {\n   useEffect(() =\u003e {\n       const timeoutId = setTimeout(() =\u003e {\n           if (isPlaying) {\n               audioElem?.current?.play()\n           } else {\n               audioElem?.current?.pause()\n           }\n       }, 500)\n       return () =\u003e {\n           clearTimeout(timeoutId)\n       }\n   }, [isPlaying])\n}\n```\n\n그리고 모바일 적응에 많은 시간을 들였으며 UI를 과다하게 로드하지 않기 위해 일부 기능을 포기해야 했습니다. 어느 시점에서 최소한의 버튼을 사용하고 터치에 집중하기로 결정했습니다. 예를 들어, 트랙 목록을 스와이프로 스크롤하거나 캐러셀과 상호 작용할 수 있습니다. 저는 react-swipeable을 사용하여 이를 구현했습니다. 프로젝트 작업의 마지막 단계에서는 친구, 프론트엔드 및 노드.js 백엔드 개발자에게 코드 검토를 요청하여 일부 수정을 하였습니다. 새로운 관점을 통해 논리를 더 잘 분해할 수 있었습니다. 배포 후 친구들이 버그를 지적하고 UX를 개선하기 위한 조언을 해주었습니다.\n\n프로젝트의 현재 상태는 어떻습니까?\n\n이 프로젝트는 Lighthouse에 따르면 꽤 양호한 성능 지표를 보여줍니다.\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n\n\u003cimg src=\"/assets/img/2024-06-19-AproductapproachtoapetprojectorhowIdevelopedamusicwebapplication_6.png\" /\u003e\n\n소스 코드는 GitHub를 통해 공개되어 있어 관심 있는 누구든지 확인할 수 있습니다.\n\nhttps://github.com/ABurov30/nirvana-ui\nhttps://github.com/ABurov30/nirvana-client\nhttps://github.com/ABurov30/nirvana-server\n\nUI 킷은 npm에 발행되었습니다.\n\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\nhttps://www.npmjs.com/package/nirvana-uikit\n\n결론 도출\n\n이 이른바 펫 프로젝트 덕분에 고객과 실행자 모두의 역할을 맡아 제품 접근 방식을 적용하고, 독립적으로 애플리케이션 개발 프로세스를 처음부터 구축했습니다. 기술 스택을 결정하는 방법을 배우고, 클라우드와 Web Audio API를 활용했으며, 자체 UI 라이브러리를 개발하고 새로운 기술을 시도해 보았습니다.\n\n앞으로는 이 프로젝트를 기반으로 새로운 기술을 도입하여 애플리케이션에 기능을 추가해 보려고 합니다. 예를 들어, 세 가지 프로젝트로 마이크로 프론트엔드를 만들어 보려고 합니다:\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n리액트, Vite, Redux로 만든 주요 Nirvana 음악 애플리케이션\n\nNext.js로 만든 애플리케이션의 주요 프로모션 페이지\n\nVue, Socket.io, Graph Ql을 사용하여 만든 애플리케이션 내의 채팅 (jotai나 zustand와 같이 명확하지 않은 상태 관리자를 사용할 수도 있어요).\n\n그리고 사용자가 업로드한 콘텐츠를 수동으로 확인하는 것은 상당히 어려우므로 저작권 자동 유효성 검사를 추가하고 싶어요, 이 과정을 자동화하고 싶어요.","ogImage":{"url":"/assets/img/2024-06-19-AproductapproachtoapetprojectorhowIdevelopedamusicwebapplication_0.png"},"coverImage":"/assets/img/2024-06-19-AproductapproachtoapetprojectorhowIdevelopedamusicwebapplication_0.png","tag":["Tech"],"readingTime":13},"content":"\u003c!doctype html\u003e\n\u003chtml lang=\"en\"\u003e\n\u003chead\u003e\n\u003cmeta charset=\"utf-8\"\u003e\n\u003cmeta content=\"width=device-width, initial-scale=1\" name=\"viewport\"\u003e\n\u003c/head\u003e\n\u003cbody\u003e\n\u003cimg src=\"/assets/img/2024-06-19-AproductapproachtoapetprojectorhowIdevelopedamusicwebapplication_0.png\"\u003e\n\u003cp\u003e음악을 좋아하고 개발을 결합하면 무엇이 일어날까요? 제 경우에는 음악 스트리밍 웹 애플리케이션을 만들기 위한 펫 프로젝트로 이어졌습니다. 저는 \"Nexway\"에서 프론트엔드 개발자로 일하는 Andrey입니다. 이제 펫 프로젝트 개발에 대한 효율적인 학습 방법을 설명하겠습니다.\u003c/p\u003e\n\u003cp\u003e모든 기술을 업무를 통해 습득할 수 없다는 사실은 명확합니다. 이때 펫 프로젝트가 유용하게 활용됩니다. 펫 프로젝트를 통해 새로운 것을 시도할 수 있을 뿐만 아니라 아이디어와 기술을 제한 없이 실험할 수 있는 기회를 제공합니다.\u003c/p\u003e\n\u003cp\u003e펫 프로젝트를 실험실 연습이 아닌 미래 제품으로 본다면, 전체 개발 주기를 더 잘 이해할 수 있습니다. 이 접근 방식으로 먼저 고객의 역할을 맡아 문제를 해결하는 방법과 가장 좋은 방법을 결정하고, 원하는 기술을 구현하는 데 가장 용이한 기술을 선택하는 방법을 생각할 수 있습니다.\u003c/p\u003e\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\u003cp\u003e제품 접근 방식은 개발 프로세스를 작은 단위로 바라볼 수 있게 해줍니다. 직접 우선 순위를 정하고 작업이 어디에서 비롯되었는지 이해하는 데 도움이 됩니다. 아키텍처를 어떻게 구축할지와 새로운 기능을 추가하기 쉽게 만들기 위해 어떤 기술 스택을 선택할지에 대해 질문을 시작합니다 (응용 프로그램이 성장할수록 새로운 기능을 추가하려는 욕구도 커진다고 고려합니다).\u003c/p\u003e\n\u003cp\u003e이제 제 애왽 프로젝트 개발에 대해 이 방법을 사용하여 얻은 경험에 대해 이야기하겠습니다.\u003c/p\u003e\n\u003cp\u003e프로젝트 소개\u003c/p\u003e\n\u003cp\u003e저는 Spotify, Apple Music 등 음악 스트리밍 애플리케이션에서 영감을 받아 이 프로젝트를 시작하기로 결심했습니다. 브라우저의 기능을 활용하여 음악 파일을 사용하기를 원했기 때문에 음악 주제가 가까웠고 zaycev.net의 나만의 버전을 만들고 싶었습니다.\u003c/p\u003e\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\u003cp\u003e이 시점에서는 고객이 있는 것처럼 프로젝트 요구 사항을 구체화하는 것이 중요합니다 (실제로는 본인이어도 좋습니다). 요구 사항은 업무 계획을 작성하고 자신이 관심 있는 기능을 구현하는 데 집중할 수 있도록 도와줍니다. 이렇게 하면 프로젝트를 완료하기 위한 자신에 대한 약속을 만들 수 있습니다.\u003c/p\u003e\n\u003cp\u003e펫 프로젝트를 제품 프로토 타입으로 살펴보고 있기 때문에 이를 사용할 수 있는 사람들에 대해 고민하는 것이 좋습니다. 애플리케이션의 잠재적 사용자는 누구나 일 수 있고, 사용자 커뮤니티가 공통 음악 라이브러리를 확대할 수 있도록 할 예정입니다. 또한 응용 프로그램은 인디 아티스트들을 대상으로 하며, 새로운 청취자를 발견하고 광고를 무료로 진행할 수 있는 기회를 제공할 것입니다.\u003c/p\u003e\n\u003cp\u003e아래에는 프로젝트에 대해 개요를 작성한 요구 사항들이 있습니다:\u003c/p\u003e\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\u003cp\u003e친화적인 톤으로 번역해보겠습니다.\u003c/p\u003e\n\u003cp\u003e사용성:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e직접 UI 컴포넌트 라이브러리(UI 킷)를 사용하여 인터페이스를 구현하십시오.\u003c/li\u003e\n\u003cli\u003e볼륨 조절, 재생, 이전 또는 다음 트랙으로 전환하는 버튼 및 일시 정지 기능이 있는 기능적 플레이어를 구현하십시오.\u003c/li\u003e\n\u003cli\u003e언어 전환 및 어두운/밝은 테마로 사용자의 기호에 맞게 인터페이스를 사용자 정의할 수 있는 기능을 추가하십시오.\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e기술적 요구사항:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eWeb Audio API를 기반으로 구현된 자체 음악 플레이어를 사용하여 음악 트랙 및 라디오를 재생하십시오.\u003c/li\u003e\n\u003cli\u003e사용자가 등록할 때 \"인간\"임을 확인하기 위해 확인 코드가 포함된 이메일을 보내는 방식으로 등록을 검증하십시오.\u003c/li\u003e\n\u003cli\u003eCI/CD를 설정하여 초기 사용자가 기능이 추가될 때 즉시 새로운 기능을 볼 수 있도록 하십시오.\u003c/li\u003e\n\u003c/ul\u003e\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\u003cp\u003e사용자 중심:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e전 세계의 라디오 방송을들을 수 있게 합니다.\u003c/li\u003e\n\u003cli\u003e사용자 커뮤니티에게 음악 라이브러리를 확장할 수 있는 기회를 제공합니다.\u003c/li\u003e\n\u003cli\u003e소셜 미디어 및 메신저 앱에서 애플리케이션을 공유할 수 있는 기능 추가\u003c/li\u003e\n\u003cli\u003e아티스트, 제목, 라디오 이름, 국가, 장르로 음악을 검색할 수 있는 자동완성 제안 기능 제공\u003c/li\u003e\n\u003cli\u003e사용자가 선호하는 음악과 라디오 방송 추가 가능\u003c/li\u003e\n\u003cli\u003e사용자가 음악 트랙을 컴퓨터로 다운로드할 수 있는 기능 추가\u003c/li\u003e\n\u003cli\u003e이메일로 리셋 코드를 보내 비밀번호를 재설정할 수 있는 기능 제공\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e아키텍처 설계\u003c/p\u003e\n\u003cp\u003e컨셉을 설명하고 요구 사항을 수집한 후, 미래 응용 프로그램의 아키텍처를 설명합니다. 제 경우에는 다음과 같습니다:\u003c/p\u003e\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\u003cp\u003e\u003cimg src=\"/assets/img/2024-06-19-AproductapproachtoapetprojectorhowIdevelopedamusicwebapplication_2.png\" alt=\"Web Application\"\u003e\u003c/p\u003e\n\u003cp\u003e기술 스택 선택\u003c/p\u003e\n\u003cp\u003e프론트엔드: 어플리케이션의 클라이언트 측 구현을 위해 가장 익숙한 기술 스택을 선택했습니다 — React, Redux Tool Kit, Typescript, Webpack.\u003c/p\u003e\n\u003cp\u003e그 후에는 실험을 하기로 결정하고 Webpack 대신 Vite를 사용하기로 했습니다. HMR을 통해 개발 속도가 향상되고, 빌드 구성을 몇 분 안에 작성할 수 있다는 점이 이유입니다. 다국어 처리를 위해 i18next를 사용했고, 스타일 작업에는 SCSS를 선택했습니다. Tailwind도 고려했지만, 어플리케이션의 일반 디자인 시스템을 설명하고자 했기 때문에 전역 변수와 중첩 작업이 편리했기 때문에 SCSS를 선택했습니다.\u003c/p\u003e\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\u003cp\u003eUI 킷: 컴포넌트 라이브러리의 경우, 나는 Storybook, React, Typescript, SCSS, Webpack까지만 진행하기로 결정했습니다. 라이브러리를 개발해본 경험이 없었기 때문에 빌더의 선택이 중요했는데, Webpack에서 많은 자료와 코드 예제를 찾을 수 있었습니다.\u003c/p\u003e\n\u003cp\u003e백엔드: 여기서는 Express.js와 Nest.js 사이에서 오랫동않 고민했습니다. Nest.js에서는 객체 지향적인 접근 방식을 좋아했고, Express.js에서는 간단한 서버를 빠르게 작성할 수 있는 능력과 이미 약간의 경험을 가지고 있었습니다. 결과적으로 Express.js에서 결정하기로 했습니다. 또한 이전에 작업해 본 적이 없었던 클라우드가 트랙을 저장하는 데 필요할 것이라는 것도 분명했습니다. 작은 검색 결과, 클라우드와 쉽게 상호 작용할 수 있게 해주는 라이브러리를 발견했습니다. 인증에는 세션+쿠키 접근 방식을 사용하기로 결정했습니다. 파일 처리에는 multer를 사용했는데, 문서의 명확성과 클라우드로 전송하기 전에 파일을 메모리에 저장할 수 있는 기능이 마음에 들었습니다. 클라이언트와 서버 간의 통신은 REST API를 통해 이루어져야 했습니다.\u003c/p\u003e\n\u003cp\u003e기술적 설계 디자인\u003c/p\u003e\n\u003cp\u003e인터페이스 컴포넌트와 데이터베이스 테이블의 상호 작용을 설명합니다.\u003c/p\u003e\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\u003cp\u003e\u003cimg src=\"/assets/img/2024-06-19-AproductapproachtoapetprojectorhowIdevelopedamusicwebapplication_3.png\" alt=\"이미지\"\u003e\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/assets/img/2024-06-19-AproductapproachtoapetprojectorhowIdevelopedamusicwebapplication_4.png\" alt=\"이미지\"\u003e\u003c/p\u003e\n\u003cp\u003e사용자 디자인 설계\u003c/p\u003e\n\u003cp\u003e안타깝게도 UX/UI 디자인에 대해 얕은 지식만 가지고 있어서 처음부터 사용자 인터페이스를 만들 수 없었습니다. 그래서 인터넷에서 적절한 준비된 디자인을 찾아 구현했습니다.\u003c/p\u003e\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\u003cp\u003e기능 구현\u003c/p\u003e\n\u003cp\u003e이 섹션에서는 애플리케이션을 배포하는 모든 단계를 자세히 설명하고 싶지는 않습니다. 대신, 흥미로운 기능을 더 자세히 설명하겠습니다. 동시에 초보자들에게 더욱 유용하고 완전한 기사를 만들기 위해 프로젝트의 소스 코드 저장소 링크를 뒤에 첨부했습니다.\u003c/p\u003e\n\u003cp\u003e예를 들어 Sequelize 트랜잭션을 사용하여 클라우드에 트랙을 업로드하는 Express 컨트롤러의 구현 방법은 다음과 같습니다. 먼저 클라우드 업로드 서비스를 호출한 다음 데이터베이스 쓰기 서비스를 호출하고 변경 사항을 저장하도록 합니다. 오류 발생 시 모든 변경 사항이 롤백되어 데이터가 일관되게 유지되며 작업이 원자적으로 수행됩니다.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003etracksController.\u003cspan class=\"hljs-title function_\"\u003epost\u003c/span\u003e(\n   \u003cspan class=\"hljs-string\"\u003e'/uploadTrack'\u003c/span\u003e,\n   authChecker,\n   upload.\u003cspan class=\"hljs-title function_\"\u003efields\u003c/span\u003e([\n       { \u003cspan class=\"hljs-attr\"\u003ename\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e'cover'\u003c/span\u003e, \u003cspan class=\"hljs-attr\"\u003emaxCount\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e },\n       { \u003cspan class=\"hljs-attr\"\u003ename\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e'track'\u003c/span\u003e, \u003cspan class=\"hljs-attr\"\u003emaxCount\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e }\n   ]),\n   \u003cspan class=\"hljs-keyword\"\u003easync\u003c/span\u003e (req, res, next) =\u003e {\n       \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e t = \u003cspan class=\"hljs-keyword\"\u003eawait\u003c/span\u003e sequelize.\u003cspan class=\"hljs-title function_\"\u003etransaction\u003c/span\u003e()\n       \u003cspan class=\"hljs-keyword\"\u003etry\u003c/span\u003e {\n           \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e { trackName, artist } = req.\u003cspan class=\"hljs-property\"\u003ebody\u003c/span\u003e\n\n           \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e cover = req.\u003cspan class=\"hljs-property\"\u003efiles\u003c/span\u003e?.\u003cspan class=\"hljs-property\"\u003ecover\u003c/span\u003e[\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e]?.\u003cspan class=\"hljs-property\"\u003ebuffer\u003c/span\u003e\n           \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e track = req.\u003cspan class=\"hljs-property\"\u003efiles\u003c/span\u003e?.\u003cspan class=\"hljs-property\"\u003etrack\u003c/span\u003e[\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e]?.\u003cspan class=\"hljs-property\"\u003ebuffer\u003c/span\u003e\n\n           \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e { img, mp3 } = \u003cspan class=\"hljs-keyword\"\u003eawait\u003c/span\u003e cloudService.\u003cspan class=\"hljs-title function_\"\u003eupload\u003c/span\u003e({\n               track,\n               cover\n           })\n           \u003cspan class=\"hljs-keyword\"\u003eawait\u003c/span\u003e tracksService.\u003cspan class=\"hljs-title function_\"\u003eaddTrack\u003c/span\u003e({\n               artist,\n               trackName,\n               img,\n               mp3,\n               \u003cspan class=\"hljs-attr\"\u003emoderated\u003c/span\u003e: \u003cspan class=\"hljs-literal\"\u003efalse\u003c/span\u003e\n           })\n           \u003cspan class=\"hljs-keyword\"\u003eawait\u003c/span\u003e t.\u003cspan class=\"hljs-title function_\"\u003ecommit\u003c/span\u003e()\n           res.\u003cspan class=\"hljs-title function_\"\u003esendStatus\u003c/span\u003e(\u003cspan class=\"hljs-number\"\u003e200\u003c/span\u003e)\n       } \u003cspan class=\"hljs-keyword\"\u003ecatch\u003c/span\u003e (e) {\n           \u003cspan class=\"hljs-keyword\"\u003eawait\u003c/span\u003e t.\u003cspan class=\"hljs-title function_\"\u003erollback\u003c/span\u003e()\n           \u003cspan class=\"hljs-title function_\"\u003enext\u003c/span\u003e(e)\n       }\n   }\n)\n\u003c/code\u003e\u003c/pre\u003e\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e s3 = \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003eS3\u003c/span\u003e({\n   \u003cspan class=\"hljs-attr\"\u003eauth\u003c/span\u003e: {\n       \u003cspan class=\"hljs-attr\"\u003eaccessKeyId\u003c/span\u003e: process.\u003cspan class=\"hljs-property\"\u003eenv\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003eACCESS_KEY_ID\u003c/span\u003e,\n       \u003cspan class=\"hljs-attr\"\u003esecretAccessKey\u003c/span\u003e: process.\u003cspan class=\"hljs-property\"\u003eenv\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003eSECRET_ACCESS_KEY\u003c/span\u003e\n   },\n   \u003cspan class=\"hljs-title class_\"\u003eBucket\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e'nirvana-tracks'\u003c/span\u003e,\n   \u003cspan class=\"hljs-attr\"\u003edebug\u003c/span\u003e: \u003cspan class=\"hljs-literal\"\u003efalse\u003c/span\u003e\n})\n\n\u003cspan class=\"hljs-keyword\"\u003easync\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003efunction\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003eupload\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003e{ track, cover }\u003c/span\u003e) {\n   \u003cspan class=\"hljs-keyword\"\u003etry\u003c/span\u003e {\n       \u003cspan class=\"hljs-keyword\"\u003elet\u003c/span\u003e mp3 = \u003cspan class=\"hljs-keyword\"\u003eawait\u003c/span\u003e s3.\u003cspan class=\"hljs-title class_\"\u003eUpload\u003c/span\u003e(\n           {\n               \u003cspan class=\"hljs-attr\"\u003ebuffer\u003c/span\u003e: track\n           },\n           \u003cspan class=\"hljs-string\"\u003e'/mp3/'\u003c/span\u003e\n       )\n       \u003cspan class=\"hljs-keyword\"\u003elet\u003c/span\u003e img = \u003cspan class=\"hljs-keyword\"\u003eawait\u003c/span\u003e s3.\u003cspan class=\"hljs-title class_\"\u003eUpload\u003c/span\u003e(\n           {\n               \u003cspan class=\"hljs-attr\"\u003ebuffer\u003c/span\u003e: cover\n           },\n           \u003cspan class=\"hljs-string\"\u003e'/img/'\u003c/span\u003e\n       )\n       \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (mp3 \u0026#x26;\u0026#x26; track) {\n           \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e { \u003cspan class=\"hljs-attr\"\u003eimg\u003c/span\u003e: img.\u003cspan class=\"hljs-property\"\u003eLocation\u003c/span\u003e, \u003cspan class=\"hljs-attr\"\u003emp3\u003c/span\u003e: mp3.\u003cspan class=\"hljs-property\"\u003eLocation\u003c/span\u003e }\n       } \u003cspan class=\"hljs-keyword\"\u003eelse\u003c/span\u003e {\n           \u003cspan class=\"hljs-keyword\"\u003ethrow\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eError\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e'업로드할 수 없습니다.'\u003c/span\u003e)\n       }\n   } \u003cspan class=\"hljs-keyword\"\u003ecatch\u003c/span\u003e (e) {\n       \u003cspan class=\"hljs-variable language_\"\u003econsole\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003eerror\u003c/span\u003e(e)\n       \u003cspan class=\"hljs-keyword\"\u003ethrow\u003c/span\u003e e\n   }\n}\n\n\u003cspan class=\"hljs-variable language_\"\u003emodule\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003eexports\u003c/span\u003e = {\n   upload\n}\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e라디오 브라우저 라이브러리를 외부 API로부터 더 독립적으로 만들기 위해 집합 요청을 수행하여 라이브러리의 모든 라디오 스테이션에 대한 단일 요청을 만들어 데이터베이스를 시드로 채웠습니다. 여기에서도 커버 링크가 유효한지 확인했습니다.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eRadioBrowser\u003c/span\u003e = \u003cspan class=\"hljs-built_in\"\u003erequire\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e'radio-browser'\u003c/span\u003e)\n\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e { \u003cspan class=\"hljs-attr\"\u003ev4\u003c/span\u003e: uuidv4 } = \u003cspan class=\"hljs-built_in\"\u003erequire\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e'uuid'\u003c/span\u003e)\n\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e checkImage = \u003cspan class=\"hljs-built_in\"\u003erequire\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e'../../web/utils/checkImage'\u003c/span\u003e)\n\n\u003cspan class=\"hljs-variable language_\"\u003emodule\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003eexports\u003c/span\u003e = {\n   \u003cspan class=\"hljs-keyword\"\u003easync\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003eup\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003equeryInterface, Sequelize\u003c/span\u003e) {\n       \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e radios = \u003cspan class=\"hljs-keyword\"\u003eawait\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eRadioBrowser\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003egetStations\u003c/span\u003e({ \u003cspan class=\"hljs-attr\"\u003elimit\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e100\u003c/span\u003e })\n       \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e radiosWithUsefulFields = \u003cspan class=\"hljs-keyword\"\u003eawait\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003ePromise\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003eall\u003c/span\u003e(\n           radios.\u003cspan class=\"hljs-title function_\"\u003emap\u003c/span\u003e(\u003cspan class=\"hljs-keyword\"\u003easync\u003c/span\u003e el =\u003e {\n               \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e {\n                   \u003cspan class=\"hljs-attr\"\u003eid\u003c/span\u003e: \u003cspan class=\"hljs-title function_\"\u003euuidv4\u003c/span\u003e(),\n                   \u003cspan class=\"hljs-attr\"\u003ename\u003c/span\u003e: el.\u003cspan class=\"hljs-property\"\u003ename\u003c/span\u003e,\n                   \u003cspan class=\"hljs-attr\"\u003eurl\u003c/span\u003e: el.\u003cspan class=\"hljs-property\"\u003eurl\u003c/span\u003e,\n                   \u003cspan class=\"hljs-attr\"\u003evotes\u003c/span\u003e: el.\u003cspan class=\"hljs-property\"\u003evotes\u003c/span\u003e,\n                   \u003cspan class=\"hljs-attr\"\u003ecountry\u003c/span\u003e: el.\u003cspan class=\"hljs-property\"\u003ecountry\u003c/span\u003e,\n                   \u003cspan class=\"hljs-attr\"\u003efavicon\u003c/span\u003e: (\u003cspan class=\"hljs-keyword\"\u003eawait\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003echeckImage\u003c/span\u003e(el.\u003cspan class=\"hljs-property\"\u003efavicon\u003c/span\u003e)) ? el.\u003cspan class=\"hljs-property\"\u003efavicon\u003c/span\u003e : \u003cspan class=\"hljs-string\"\u003e''\u003c/span\u003e,\n                   \u003cspan class=\"hljs-attr\"\u003etags\u003c/span\u003e: el.\u003cspan class=\"hljs-property\"\u003etags\u003c/span\u003e,\n                   \u003cspan class=\"hljs-attr\"\u003elastcheckoktime\u003c/span\u003e: el.\u003cspan class=\"hljs-property\"\u003elastcheckoktime\u003c/span\u003e\n               }\n           })\n       )\n       \u003cspan class=\"hljs-keyword\"\u003eawait\u003c/span\u003e queryInterface.\u003cspan class=\"hljs-title function_\"\u003ebulkInsert\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e'Radios'\u003c/span\u003e, radiosWithUsefulFields, {})\n   },\n\n   \u003cspan class=\"hljs-keyword\"\u003easync\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003edown\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003equeryInterface, Sequelize\u003c/span\u003e) {\n       \u003cspan class=\"hljs-keyword\"\u003eawait\u003c/span\u003e queryInterface.\u003cspan class=\"hljs-title function_\"\u003ebulkDelete\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e'Radios'\u003c/span\u003e, \u003cspan class=\"hljs-literal\"\u003enull\u003c/span\u003e, {})\n   }\n}\n\u003c/code\u003e\u003c/pre\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-keyword\"\u003easync\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003efunction\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003echeckImage\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003eurl\u003c/span\u003e) {\n   \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003efetch\u003c/span\u003e(url)\n       .\u003cspan class=\"hljs-title function_\"\u003ethen\u003c/span\u003e(\u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-params\"\u003eresponse\u003c/span\u003e =\u003e\u003c/span\u003e {\n           \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (response.\u003cspan class=\"hljs-property\"\u003eok\u003c/span\u003e) {\n               \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e \u003cspan class=\"hljs-literal\"\u003etrue\u003c/span\u003e\n           } \u003cspan class=\"hljs-keyword\"\u003eelse\u003c/span\u003e {\n               \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e \u003cspan class=\"hljs-literal\"\u003efalse\u003c/span\u003e\n           }\n       })\n       .\u003cspan class=\"hljs-title function_\"\u003ecatch\u003c/span\u003e(\u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-params\"\u003eerror\u003c/span\u003e =\u003e\u003c/span\u003e {\n           \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e \u003cspan class=\"hljs-literal\"\u003efalse\u003c/span\u003e\n       })\n}\n\n\u003cspan class=\"hljs-variable language_\"\u003emodule\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003eexports\u003c/span\u003e = checkImage\n\u003c/code\u003e\u003c/pre\u003e\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\u003cp\u003e내가 커스텀 플레이어의 구현 방법을 설명해 줄게. 기본적으로 useRef를 사용해서 오디오 요소에 대한 참조를 가져와 웹 오디오 API에 액세스했어. 그런 다음 오디오 API에서 가져온 데이터를 React 상태와 연결해서 리렌더링을 트리거하도록 했어. 이 접근법으로 기능을 확장하기 시작했고, 트랙 전환, 드래그 앤 드롭 되감기, 볼륨 제어, 일시 정지 등을 구현했어.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e (\n       \u0026#x3C;\u003e\n           \u0026#x3C;audio\n               src={currentTrack?.url}\n               ref={audioElem as LegacyRef\u0026#x3C;HTMLAudioElement\u003e}\n               onTimeUpdate={() =\u003e {\n                   onPlaying({\n                       audioElem:\n                           audioElem as MutableRefObject\u0026#x3C;HTMLAudioElement\u003e,\n                       setCurrentTrack,\n                       currentTrack\n                   })\n               }\n           /\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e트랙 선택 시 자동으로 트랙을 시작하는 커스텀 훅 구현 예제야.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e { useLayoutEffect } \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e'react'\u003c/span\u003e\n\n\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e { usePlayOnMountArgs } \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e'./types'\u003c/span\u003e\n\n\n\u003cspan class=\"hljs-keyword\"\u003eexport\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003efunction\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003eusePlayOnMount\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003e{\n   tracks,\n   setCurrentTrack,\n   position,\n   audioElem,\n   setIsPlaying\n}: usePlayOnMountArgs\u003c/span\u003e) {\n   \u003cspan class=\"hljs-title function_\"\u003euseLayoutEffect\u003c/span\u003e(\u003cspan class=\"hljs-function\"\u003e() =\u003e\u003c/span\u003e {\n       \u003cspan class=\"hljs-title function_\"\u003esetCurrentTrack\u003c/span\u003e(tracks[position])\n       \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e timeoutId = \u003cspan class=\"hljs-built_in\"\u003esetTimeout\u003c/span\u003e(\u003cspan class=\"hljs-function\"\u003e() =\u003e\u003c/span\u003e {\n           audioElem?.\u003cspan class=\"hljs-property\"\u003ecurrent\u003c/span\u003e?.\u003cspan class=\"hljs-title function_\"\u003eplay\u003c/span\u003e()\n           \u003cspan class=\"hljs-title function_\"\u003esetIsPlaying\u003c/span\u003e(\u003cspan class=\"hljs-literal\"\u003etrue\u003c/span\u003e)\n       }, \u003cspan class=\"hljs-number\"\u003e500\u003c/span\u003e)\n       \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e \u003cspan class=\"hljs-function\"\u003e() =\u003e\u003c/span\u003e {\n           \u003cspan class=\"hljs-built_in\"\u003eclearTimeout\u003c/span\u003e(timeoutId)\n       }\n   }, [tracks, position])\n}\n\u003c/code\u003e\u003c/pre\u003e\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\u003cp\u003e사용자가 노래를 들으며 더 몰입할 수 있도록 레이아웃을 약간 보완하기로 했어요. 그리고 어플리케이션의 이름(Nirvana)이 정당하다는 느낌을 주도록 했어요.\u003c/p\u003e\n\u003cp\u003e이를 위해, 플레이어의 배경에 트랙 커버의 색상으로 흐릿한 안개를 만들었는데, 해당 안개가 반짝거리도록 했어요. 그리고 어떤 이유로 인해 커버가 없는 경우에는 어플리케이션의 색상으로 안개를 만들었어요. 이런 효과를 이런 식으로 구현했어요:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u0026#x3C;div\n\tclassName={styles.\u003cspan class=\"hljs-property\"\u003eplayerBg\u003c/span\u003e}\n\tstyle={{\n\t\t\u003cspan class=\"hljs-attr\"\u003ebackgroundImage\u003c/span\u003e:\n\t\t\tcurrentTrack.\u003cspan class=\"hljs-property\"\u003eimg\u003c/span\u003e \u0026#x26;\u0026#x26; \u003cspan class=\"hljs-string\"\u003e`url(\u003cspan class=\"hljs-subst\"\u003e${currentTrack.img}\u003c/span\u003e)`\u003c/span\u003e\n\t}}\n\u003e\u0026#x3C;/div\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e@\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e'../../constants/colors.scss'\u003c/span\u003e;\n\n.\u003cspan class=\"hljs-property\"\u003eplayerBg\u003c/span\u003e {\n\tz-\u003cspan class=\"hljs-attr\"\u003eindex\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e;\n\t\u003cspan class=\"hljs-attr\"\u003eheight\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e20\u003c/span\u003e%;\n\t\u003cspan class=\"hljs-attr\"\u003ewidth\u003c/span\u003e: 120vw;\n\t\u003cspan class=\"hljs-attr\"\u003eopacity\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e0.85\u003c/span\u003e;\n\t\u003cspan class=\"hljs-attr\"\u003eposition\u003c/span\u003e: fixed;\n\t\u003cspan class=\"hljs-attr\"\u003ebottom\u003c/span\u003e: -\u003cspan class=\"hljs-number\"\u003e5\u003c/span\u003e%;\n\t\u003cspan class=\"hljs-attr\"\u003eleft\u003c/span\u003e: -5vw;\n\tbackground-\u003cspan class=\"hljs-attr\"\u003eimage\u003c/span\u003e: linear-\u003cspan class=\"hljs-title function_\"\u003egradient\u003c/span\u003e(\n\t\t90deg,\n\t\t\u003cspan class=\"hljs-title function_\"\u003ergba\u003c/span\u003e(\u003cspan class=\"hljs-number\"\u003e243\u003c/span\u003e, \u003cspan class=\"hljs-number\"\u003e243\u003c/span\u003e, \u003cspan class=\"hljs-number\"\u003e243\u003c/span\u003e, \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e) \u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e%,\n\t\t\u003cspan class=\"hljs-title function_\"\u003ergba\u003c/span\u003e(\u003cspan class=\"hljs-number\"\u003e94\u003c/span\u003e, \u003cspan class=\"hljs-number\"\u003e233\u003c/span\u003e, \u003cspan class=\"hljs-number\"\u003e191\u003c/span\u003e, \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e) \u003cspan class=\"hljs-number\"\u003e19\u003c/span\u003e%,\n\t\t\u003cspan class=\"hljs-title function_\"\u003ergba\u003c/span\u003e(\u003cspan class=\"hljs-number\"\u003e47\u003c/span\u003e, \u003cspan class=\"hljs-number\"\u003e105\u003c/span\u003e, \u003cspan class=\"hljs-number\"\u003e255\u003c/span\u003e, \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e) \u003cspan class=\"hljs-number\"\u003e54\u003c/span\u003e%,\n\t\t\u003cspan class=\"hljs-title function_\"\u003ergba\u003c/span\u003e(\u003cspan class=\"hljs-number\"\u003e99\u003c/span\u003e, \u003cspan class=\"hljs-number\"\u003e96\u003c/span\u003e, \u003cspan class=\"hljs-number\"\u003e255\u003c/span\u003e, \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e) \u003cspan class=\"hljs-number\"\u003e82\u003c/span\u003e%,\n\t\t\u003cspan class=\"hljs-title function_\"\u003ergba\u003c/span\u003e(\u003cspan class=\"hljs-number\"\u003e161\u003c/span\u003e, \u003cspan class=\"hljs-number\"\u003e106\u003c/span\u003e, \u003cspan class=\"hljs-number\"\u003e232\u003c/span\u003e, \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e) \u003cspan class=\"hljs-number\"\u003e100\u003c/span\u003e%\n\t);\n\t\u003cspan class=\"hljs-attr\"\u003efilter\u003c/span\u003e: \u003cspan class=\"hljs-title function_\"\u003eblur\u003c/span\u003e(30px);\n\tbackground-\u003cspan class=\"hljs-attr\"\u003erepeat\u003c/span\u003e: no-repeat;\n\tbackground-\u003cspan class=\"hljs-attr\"\u003esize\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e300\u003c/span\u003e% \u003cspan class=\"hljs-number\"\u003e300\u003c/span\u003e%;\n\t\u003cspan class=\"hljs-attr\"\u003eanimation\u003c/span\u003e: \u003cspan class=\"hljs-title class_\"\u003eAnimateBG\u003c/span\u003e 100s ease-\u003cspan class=\"hljs-keyword\"\u003ein\u003c/span\u003e-out infinite;\n}\n\n@keyframes \u003cspan class=\"hljs-title class_\"\u003eAnimateBG\u003c/span\u003e {\n\t\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e% {\n\t\tbackground-\u003cspan class=\"hljs-attr\"\u003eposition\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e% \u003cspan class=\"hljs-number\"\u003e50\u003c/span\u003e%;\n\t}\n\t\u003cspan class=\"hljs-number\"\u003e50\u003c/span\u003e% {\n\t\tbackground-\u003cspan class=\"hljs-attr\"\u003eposition\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e100\u003c/span\u003e% \u003cspan class=\"hljs-number\"\u003e50\u003c/span\u003e%;\n\t}\n\t\u003cspan class=\"hljs-number\"\u003e100\u003c/span\u003e% {\n\t\tbackground-\u003cspan class=\"hljs-attr\"\u003eposition\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e% \u003cspan class=\"hljs-number\"\u003e50\u003c/span\u003e%;\n\t}\n}\n\u003c/code\u003e\u003c/pre\u003e\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\u003cimg src=\"/assets/img/2024-06-19-AproductapproachtoapetprojectorhowIdevelopedamusicwebapplication_5.png\"\u003e\n\u003cp\u003eCI/CD\u003c/p\u003e\n\u003cp\u003e어플리케이션에 대한 자동화된 테스트가 없었습니다. 대신에 프로젝트 링크를 모든 친구들과 지인들에게 보내어 피드백을 받고 버그를 발견하는 데 도움을 받았습니다. 이 프로세스를 가속화하기 위해 GitHub Actions를 사용한 간단한 CI 파이프라인을 작성하기로 결정했습니다.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-attr\"\u003ename\u003c/span\u003e: onPush\nrun-\u003cspan class=\"hljs-attr\"\u003ename\u003c/span\u003e: \u003cspan class=\"hljs-title class_\"\u003eActions\u003c/span\u003e on push\n\u003cspan class=\"hljs-attr\"\u003eon\u003c/span\u003e: [push]\n\u003cspan class=\"hljs-attr\"\u003ejobs\u003c/span\u003e:\n   \u003cspan class=\"hljs-attr\"\u003einit\u003c/span\u003e:\n       runs-\u003cspan class=\"hljs-attr\"\u003eon\u003c/span\u003e: ubuntu-latest\n       \u003cspan class=\"hljs-attr\"\u003estrategy\u003c/span\u003e:\n           \u003cspan class=\"hljs-attr\"\u003ematrix\u003c/span\u003e:\n               node-\u003cspan class=\"hljs-attr\"\u003eversion\u003c/span\u003e: [\u003cspan class=\"hljs-number\"\u003e21.\u003c/span\u003ex]\n       \u003cspan class=\"hljs-attr\"\u003esteps\u003c/span\u003e:\n           - \u003cspan class=\"hljs-attr\"\u003euses\u003c/span\u003e: actions/checkout@v3\n           - \u003cspan class=\"hljs-attr\"\u003ename\u003c/span\u003e: \u003cspan class=\"hljs-title class_\"\u003eStaring\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eNode\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003ejs\u003c/span\u003e ${matrix.\u003cspan class=\"hljs-property\"\u003enode\u003c/span\u003e-version}\n             \u003cspan class=\"hljs-attr\"\u003euses\u003c/span\u003e: actions/setup-node@v3\n             \u003cspan class=\"hljs-attr\"\u003ewith\u003c/span\u003e:\n                 node-\u003cspan class=\"hljs-attr\"\u003eversion\u003c/span\u003e: ${matrix.\u003cspan class=\"hljs-property\"\u003enode\u003c/span\u003e-version}\n           - \u003cspan class=\"hljs-attr\"\u003ename\u003c/span\u003e: install modules\n             \u003cspan class=\"hljs-attr\"\u003erun\u003c/span\u003e: npm install\n           - \u003cspan class=\"hljs-attr\"\u003ename\u003c/span\u003e: install prettier\n             \u003cspan class=\"hljs-attr\"\u003erun\u003c/span\u003e: npm install --\u003cspan class=\"hljs-variable language_\"\u003eglobal\u003c/span\u003e prettier\n           - \u003cspan class=\"hljs-attr\"\u003ename\u003c/span\u003e: formatting code\n             \u003cspan class=\"hljs-attr\"\u003erun\u003c/span\u003e: prettier . -w\n           - \u003cspan class=\"hljs-attr\"\u003ename\u003c/span\u003e: build project\n             \u003cspan class=\"hljs-attr\"\u003erun\u003c/span\u003e: npm run build\n\u003c/code\u003e\u003c/pre\u003e\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\u003cp\u003eRender에 배포하기로 결정했어요. 거기서 데이터베이스, 백엔드, 그리고 클라이언트를 쉽게 배포할 수 있고 Render가 GitHub 저장소에서 변경 사항도 가져온다는 점이 마음에 들었어요.\u003c/p\u003e\n\u003cp\u003e내가 마주한 어려움\u003c/p\u003e\n\u003cp\u003e주요 어려움은 저작권 문제에서 생겼어요. 라디오 섹션을 관리자만 이용할 수 있게 만들어야 했고, 업로드된 트랙은 관리자가 확인한 후에만 일반 피드에 추가되도록 해야 했어요 (지금은 데이터베이스를 통해서만 확인할 수 있어요).\u003c/p\u003e\n\u003cp\u003e가끔씩 재생과 일시정지를 자주 바꿀 때 브라우저 API가 \"play() 요청이 pause() 호출에 의해 중단되었습니다\"라는 오류를 던지는 이유도 완전히 명확하지는 않았어요. 그러나 나는 커스텀 debounce 훅과 lodash의 해당 함수를 사용하여 이 문제를 해결할 수 있었어요. 아래는 이 문제에 대한 내 해결책이에요.\u003c/p\u003e\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e { useEffect } \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e'react'\u003c/span\u003e\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e { useDebounceOnPlayPauseArgs } \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e'./types'\u003c/span\u003e\n\n\n\u003cspan class=\"hljs-keyword\"\u003eexport\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003efunction\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003euseDebounceOnPlayPause\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003e{\n   audioElem,\n   isPlaying\n}: useDebounceOnPlayPauseArgs\u003c/span\u003e) {\n   \u003cspan class=\"hljs-title function_\"\u003euseEffect\u003c/span\u003e(\u003cspan class=\"hljs-function\"\u003e() =\u003e\u003c/span\u003e {\n       \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e timeoutId = \u003cspan class=\"hljs-built_in\"\u003esetTimeout\u003c/span\u003e(\u003cspan class=\"hljs-function\"\u003e() =\u003e\u003c/span\u003e {\n           \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (isPlaying) {\n               audioElem?.\u003cspan class=\"hljs-property\"\u003ecurrent\u003c/span\u003e?.\u003cspan class=\"hljs-title function_\"\u003eplay\u003c/span\u003e()\n           } \u003cspan class=\"hljs-keyword\"\u003eelse\u003c/span\u003e {\n               audioElem?.\u003cspan class=\"hljs-property\"\u003ecurrent\u003c/span\u003e?.\u003cspan class=\"hljs-title function_\"\u003epause\u003c/span\u003e()\n           }\n       }, \u003cspan class=\"hljs-number\"\u003e500\u003c/span\u003e)\n       \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e \u003cspan class=\"hljs-function\"\u003e() =\u003e\u003c/span\u003e {\n           \u003cspan class=\"hljs-built_in\"\u003eclearTimeout\u003c/span\u003e(timeoutId)\n       }\n   }, [isPlaying])\n}\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e그리고 모바일 적응에 많은 시간을 들였으며 UI를 과다하게 로드하지 않기 위해 일부 기능을 포기해야 했습니다. 어느 시점에서 최소한의 버튼을 사용하고 터치에 집중하기로 결정했습니다. 예를 들어, 트랙 목록을 스와이프로 스크롤하거나 캐러셀과 상호 작용할 수 있습니다. 저는 react-swipeable을 사용하여 이를 구현했습니다. 프로젝트 작업의 마지막 단계에서는 친구, 프론트엔드 및 노드.js 백엔드 개발자에게 코드 검토를 요청하여 일부 수정을 하였습니다. 새로운 관점을 통해 논리를 더 잘 분해할 수 있었습니다. 배포 후 친구들이 버그를 지적하고 UX를 개선하기 위한 조언을 해주었습니다.\u003c/p\u003e\n\u003cp\u003e프로젝트의 현재 상태는 어떻습니까?\u003c/p\u003e\n\u003cp\u003e이 프로젝트는 Lighthouse에 따르면 꽤 양호한 성능 지표를 보여줍니다.\u003c/p\u003e\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\u003cimg src=\"/assets/img/2024-06-19-AproductapproachtoapetprojectorhowIdevelopedamusicwebapplication_6.png\"\u003e\n\u003cp\u003e소스 코드는 GitHub를 통해 공개되어 있어 관심 있는 누구든지 확인할 수 있습니다.\u003c/p\u003e\n\u003cp\u003e\u003ca href=\"https://github.com/ABurov30/nirvana-ui\" rel=\"nofollow\" target=\"_blank\"\u003ehttps://github.com/ABurov30/nirvana-ui\u003c/a\u003e\n\u003ca href=\"https://github.com/ABurov30/nirvana-client\" rel=\"nofollow\" target=\"_blank\"\u003ehttps://github.com/ABurov30/nirvana-client\u003c/a\u003e\n\u003ca href=\"https://github.com/ABurov30/nirvana-server\" rel=\"nofollow\" target=\"_blank\"\u003ehttps://github.com/ABurov30/nirvana-server\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003eUI 킷은 npm에 발행되었습니다.\u003c/p\u003e\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\u003cp\u003e\u003ca href=\"https://www.npmjs.com/package/nirvana-uikit\" rel=\"nofollow\" target=\"_blank\"\u003ehttps://www.npmjs.com/package/nirvana-uikit\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003e결론 도출\u003c/p\u003e\n\u003cp\u003e이 이른바 펫 프로젝트 덕분에 고객과 실행자 모두의 역할을 맡아 제품 접근 방식을 적용하고, 독립적으로 애플리케이션 개발 프로세스를 처음부터 구축했습니다. 기술 스택을 결정하는 방법을 배우고, 클라우드와 Web Audio API를 활용했으며, 자체 UI 라이브러리를 개발하고 새로운 기술을 시도해 보았습니다.\u003c/p\u003e\n\u003cp\u003e앞으로는 이 프로젝트를 기반으로 새로운 기술을 도입하여 애플리케이션에 기능을 추가해 보려고 합니다. 예를 들어, 세 가지 프로젝트로 마이크로 프론트엔드를 만들어 보려고 합니다:\u003c/p\u003e\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\u003cp\u003e리액트, Vite, Redux로 만든 주요 Nirvana 음악 애플리케이션\u003c/p\u003e\n\u003cp\u003eNext.js로 만든 애플리케이션의 주요 프로모션 페이지\u003c/p\u003e\n\u003cp\u003eVue, Socket.io, Graph Ql을 사용하여 만든 애플리케이션 내의 채팅 (jotai나 zustand와 같이 명확하지 않은 상태 관리자를 사용할 수도 있어요).\u003c/p\u003e\n\u003cp\u003e그리고 사용자가 업로드한 콘텐츠를 수동으로 확인하는 것은 상당히 어려우므로 저작권 자동 유효성 검사를 추가하고 싶어요, 이 과정을 자동화하고 싶어요.\u003c/p\u003e\n\u003c/body\u003e\n\u003c/html\u003e\n"},"__N_SSG":true},"page":"/post/[slug]","query":{"slug":"2024-06-19-AproductapproachtoapetprojectorhowIdevelopedamusicwebapplication"},"buildId":"8coAiP0lmiEK5aH6nkQkj","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>