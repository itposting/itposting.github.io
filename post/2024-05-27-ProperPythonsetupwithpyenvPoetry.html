<!DOCTYPE html><html lang="ko"><head><meta charSet="utf-8"/><title>적절한 Python 설정 pyenv와 Poetry | itposting</title><meta name="description" content=""/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><meta property="og:url" content="https://itposting.github.io///post/2024-05-27-ProperPythonsetupwithpyenvPoetry" data-gatsby-head="true"/><meta property="og:type" content="website" data-gatsby-head="true"/><meta property="og:site_name" content="적절한 Python 설정 pyenv와 Poetry | itposting" data-gatsby-head="true"/><meta property="og:title" content="적절한 Python 설정 pyenv와 Poetry | itposting" data-gatsby-head="true"/><meta property="og:description" content="" data-gatsby-head="true"/><meta property="og:image" content="/assets/img/2024-05-27-ProperPythonsetupwithpyenvPoetry_0.png" data-gatsby-head="true"/><meta property="og:locale" content="en_US" data-gatsby-head="true"/><meta name="twitter:card" content="summary_large_image" data-gatsby-head="true"/><meta property="twitter:domain" content="https://itposting.github.io/" data-gatsby-head="true"/><meta property="twitter:url" content="https://itposting.github.io///post/2024-05-27-ProperPythonsetupwithpyenvPoetry" data-gatsby-head="true"/><meta name="twitter:title" content="적절한 Python 설정 pyenv와 Poetry | itposting" data-gatsby-head="true"/><meta name="twitter:description" content="" data-gatsby-head="true"/><meta name="twitter:image" content="/assets/img/2024-05-27-ProperPythonsetupwithpyenvPoetry_0.png" data-gatsby-head="true"/><meta name="twitter:data1" content="Dev | itposting" data-gatsby-head="true"/><meta name="article:published_time" content="2024-05-27 13:52" data-gatsby-head="true"/><meta name="next-head-count" content="19"/><meta name="google-site-verification" content="a-yehRo3k3xv7fg6LqRaE8jlE42e5wP2bDE_2F849O4"/><link rel="stylesheet" href="/favicons/favicon.ico"/><link rel="icon" type="image/png" sizes="16x16" href="/assets/favicons/favicon-16x16.png"/><link rel="icon" type="image/png" sizes="32x32" href="/assets/favicons/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="96x96" href="/assets/favicons/favicon-96x96.png"/><link rel="icon" href="/favicons/apple-icon-180x180.png"/><link rel="apple-touch-icon" href="/favicons/apple-icon-180x180.png"/><link rel="apple-touch-startup-image" href="/startup.png"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="black"/><meta name="msapplication-config" content="/favicons/browserconfig.xml"/><script async="" src="https://www.googletagmanager.com/gtag/js?id=G-23YXDLKDCL"></script><script>window.dataLayer = window.dataLayer || [];
            function gtag(){dataLayer.push(arguments);}
            gtag('js', new Date());
          
            gtag('config', 'G-23YXDLKDCL');</script><link rel="preload" href="/_next/static/css/6e57edcf9f2ce551.css" as="style"/><link rel="stylesheet" href="/_next/static/css/6e57edcf9f2ce551.css" data-n-g=""/><link rel="preload" href="/_next/static/css/acd99c507555fdc6.css" as="style"/><link rel="stylesheet" href="/_next/static/css/acd99c507555fdc6.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/_next/static/chunks/webpack-ee6df16fdc6dae4d.js" defer=""></script><script src="/_next/static/chunks/framework-46611630e39cfdeb.js" defer=""></script><script src="/_next/static/chunks/main-cf4a52eec9a970a0.js" defer=""></script><script src="/_next/static/chunks/pages/_app-6fae11262ee5c69b.js" defer=""></script><script src="/_next/static/chunks/75fc9c18-4a646156c659a948.js" defer=""></script><script src="/_next/static/chunks/348-d11c34b645b13f5b.js" defer=""></script><script src="/_next/static/chunks/162-4172e84c8e2aa747.js" defer=""></script><script src="/_next/static/chunks/pages/post/%5Bslug%5D-0fd008072af5a644.js" defer=""></script><script src="/_next/static/kNTo-t2jvQG5kfHDWIcB-/_buildManifest.js" defer=""></script><script src="/_next/static/kNTo-t2jvQG5kfHDWIcB-/_ssgManifest.js" defer=""></script></head><body><div id="__next"><header class="Header_header__Z8PUO"><div class="Header_inner__tfr0u"><strong class="Header_title__Otn70"><a href="/">IT Posting</a></strong><nav class="Header_nav_area__6KVpk"><a class="nav_item" href="/posts/1">Posts</a></nav></div></header><main class="posts_container__NyRU3"><div class="posts_inner__i3n_i"><h1 class="posts_post_title__EbxNx">적절한 Python 설정 pyenv와 Poetry</h1><div class="posts_meta__cR7lu"><div class="posts_profile_wrap__mslMl"><div class="posts_profile_image_wrap__kPikV"><img alt="적절한 Python 설정 pyenv와 Poetry" loading="lazy" width="44" height="44" decoding="async" data-nimg="1" class="profile" style="color:transparent" src="/favicons/apple-icon-114x114.png"/></div><div class="posts_textarea__w_iKT"><span class="writer">IT Posting</span><span class="posts_info__5KJdN"><span class="posts_date__ctqHI">Posted On May 27, 2024</span><span class="posts_reading_time__f7YPP">8<!-- --> min read</span></span></div></div><img alt="" loading="lazy" width="50" height="50" decoding="async" data-nimg="1" class="posts_view_badge__tcbfm" style="color:transparent" src="https://hits.seeyoufarm.com/api/count/incr/badge.svg?url=https%3A%2F%2Fallround-coder.github.io/post/2024-05-27-ProperPythonsetupwithpyenvPoetry&amp;count_bg=%2379C83D&amp;title_bg=%23555555&amp;icon=&amp;icon_color=%23E7E7E7&amp;title=views&amp;edge_flat=false"/></div><article class="posts_post_content__n_L6j"><div><!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta content="width=device-width, initial-scale=1" name="viewport">
</head>
<body>
<p>많은 경우, 사람들이 Python의 로컬(개발) 환경 설정에서 고민하는 것을 자주 볼 수 있어요. 솔직히 말하자면, 쉽지 않아요. 그러나 동시에 안정성과 문제 해결 능력을 위해 중요하답니다.</p>
<p>이 글은 로컬 Python 환경을 제대로 설정하는 방법을 설명하는 또 다른 글이 될 거예요. 우리의 경우에는 pyenv와 Poetry를 사용할 거에요. 이미 이 링크들에는 필요한 모든 정보가 포함되어 있지만, 정보가 너무 많아 보일 수 있어요. 이 글에서는 평균적인 Python 애플리케이션을 위한 로컬 개발 환경 설정에만 초점을 맞추려고 해요.</p>
<p><img src="/assets/img/2024-05-27-ProperPythonsetupwithpyenvPoetry_0.png" alt="이미지"></p>
<h1>pyenv</h1>
<h2>pyenv 설치</h2>
<p>첫 번째 단계는 pyenv를 설치하는 것입니다. 이는 각기 다른 운영 체제에 특정하므로 아래 문서의 지침을 따라주시기 바랍니다: <a href="https://github.com/pyenv/pyenv?tab=readme-ov-file#installation" rel="nofollow" target="_blank">https://github.com/pyenv/pyenv?tab=readme-ov-file#installation</a></p>
<p>리눅스 배포판을 사용 중이시라면, 다음을 실행해주십시오:</p>
<pre><code class="hljs language-js">curl <span class="hljs-attr">https</span>:<span class="hljs-comment">//pyenv.run | bash</span>
</code></pre>
<p>pyenv은 ~/.pyenv 위치에 설치됩니다.</p>
<p>pyenv를 로드 경로에 추가해야하는 몇 가지 추가 단계가 나타날 것입니다. 이 단계도 실행하세요. 저의 경우에는 ZSH를 사용하기 때문에 이러한 줄을 ~/.zshrc에 추가해야 합니다. 이 문서에 ZSH를 설치하는 방법은 포함되어 있지 않습니다. 도움이 필요하면 언제든지 연락해 주세요.</p>
<p>이제 터미널을 다시 열어주세요.</p>
<p>새 터미널에서 pyenv를 실행하여 테스트해보세요. 명령어 목록이 표시된다면 사용할 준비가 된 것입니다.</p>
<h2>Python 설치</h2>
<p>우리가 먼저 해야 할 일은 터미널에서 기본적으로 활성화된 Python 버전을 확인하는 것입니다. 제 예시에서는 Raspberry Pi OS 12.4 (Bookworm)를 실행하는 Raspberry Pi 5 (8GB)에서 작업하고 있습니다.</p>
<pre><code class="hljs language-js">[~]$ which python
/usr/bin/python
</code></pre>
<p>이것은 OS와 함께 제공되는 표준 Python입니다.</p>
<p>다음으로 pyenv에서 Python 버전을 확인합니다:</p>
<pre><code class="hljs language-js">[~]$ pyenv versions
* system (set by /home/vandermeij/.<span class="hljs-property">pyenv</span>/version)
</code></pre>
<p>여기에는 Python 버전이 없다는 것을 알려줍니다. 지금은 아무것도 설치되지 않았습니다. 좋은 일이죠.</p>
<p>pyenv를 통해 Python 버전을 설치하려면 몇 가지 의존성을 설치해야 합니다. 여러분의 운영 체제에 해당하는 의존성을 설치하려면 다음 문서를 참조해주세요: <a href="https://github.com/pyenv/pyenv/wiki#suggested-build-environment" rel="nofollow" target="_blank">https://github.com/pyenv/pyenv/wiki#suggested-build-environment</a></p>
<p>우리 상황에서:</p>
<pre><code class="hljs language-bash">sudo apt update; sudo apt install build-essential libssl-dev zlib1g-dev \
libbz2-dev libreadline-dev libsqlite3-dev curl \
libncursesw5-dev xz-utils tk-dev libxml2-dev libxmlsec1-dev libffi-dev liblzma-dev
</code></pre>
<p>이제 Python을 설치할 수 있습니다. 예를들어, 버전 3.11:</p>
<pre><code class="hljs language-bash">[~]$ pyenv install 3.11
Python-3.11.7.tar.xz 다운로드 중...
-> https://www.python.org/ftp/python/3.11.7/Python-3.11.7.tar.xz
Python-3.11.7 설치 중...
</code></pre>
<p>다음은 pyenv에서 Python 버전을 다시 확인해 봅시다:</p>
<pre><code class="hljs language-js">[~]$ pyenv versions
* system (set by /home/vandermeij/.<span class="hljs-property">pyenv</span>/version)
  <span class="hljs-number">3.11</span><span class="hljs-number">.7</span>
</code></pre>
<p>여기서 3.11.7 버전이 설치되어 있는 것을 확인할 수 있습니다.</p>
<p>이제 활성화하고 버전을 다시 확인해 봅시다:</p>
<pre><code class="hljs language-md">[~]$ pyenv global 3.11.7
[~]$ pyenv versions
system

<span class="hljs-bullet">-</span> 3.11.7 (set by /home/vandermeij/.pyenv/version)
</code></pre>
<p>지금은 Python 3.11.7이 활성화된 Python 버전으로, 전역적이며 시스템 전역으로 적용되었음을 확인했습니다.</p>
<p>다시 한 번 기본 Python 버전을 확인해보세요:</p>
<pre><code class="hljs language-md">[~]$ which python
/home/vandermeij/.pyenv/shims/python
</code></pre>
<p>위치가 /usr/bin/python과 다르다는 것을 주목하세요. 이제 pyenv가 유지 관리하는 심볼릭 링크를 가리킵니다. 이건 좋은 일이에요! 이제 penv versions로 확인할 수 있듯이 선택한 Python 버전을 가리킵니다.</p>
<p>시스템 Python으로 다시 변경하면, 이 변경 사항은 OS에서의 Python 버전을 관리하는 pyenv versions에만 반영됩니다.</p>
<pre><code class="hljs language-bash">[~]$ pyenv global system
[~]$ pyenv versions
* system (<span class="hljs-built_in">set</span> by /home/vandermeij/.pyenv/version)
  3.11.7
[~]$ <span class="hljs-built_in">which</span> python
/home/vandermeij/.pyenv/shims/python
</code></pre>
<h2>사용법</h2>
<p>저는 주로 pyenv를 주요 Python 배포 업체로 사용합니다. 기본 시스템 Python을 거의 사용하지 않아요. 저의 컴퓨터에서는 이렇게 나와요:</p>
<pre><code class="hljs language-js">[~]$ pyenv versions
  system
* <span class="hljs-number">3.11</span><span class="hljs-number">.7</span> (set by /home/vandermeij/.<span class="hljs-property">pyenv</span>/version)
</code></pre>
<p>때로는 프로젝트에서 다른 Python 버전을 사용하고 싶을 수도 있어요, 예를 들어 Python 3.12를 사용하고 싶다고 가정해봅시다. 전역 Python 버전을 변경하는 것 외에도 pyenv를 통해 로컬 버전을 사용할 수도 있어요.</p>
<p>testapp이라는 작은 프로젝트를 만든다고 가정해봅시다.</p>
<pre><code class="hljs language-js">[~]$ mkdir testapp
[~]$ cd testapp
</code></pre>
<p>다음으로 pyenv를 사용하여 로컬 Python 버전을 설정합니다:</p>
<pre><code class="hljs language-js">[~/testapp]$ pyenv local <span class="hljs-number">3.12</span>
<span class="hljs-attr">pyenv</span>: version <span class="hljs-string">`3.12' not installed
</span></code></pre>
<p>버전 3.12가 아직 설치되지 않았다고 알려줍니다.</p>
<p>그럼 설치해보겠습니다:</p>
<pre><code class="hljs language-js">[~/testapp]$ pyenv install <span class="hljs-number">3.12</span>
<span class="hljs-title class_">Python</span>-<span class="hljs-number">3.12</span><span class="hljs-number">.1</span>.<span class="hljs-property">tar</span>.<span class="hljs-property">xz</span>를 다운로드 중...
-> <span class="hljs-attr">https</span>:<span class="hljs-comment">//www.python.org/ftp/python/3.12.1/Python-3.12.1.tar.xz</span>
<span class="hljs-title class_">Python</span>-<span class="hljs-number">3.12</span><span class="hljs-number">.1</span>을 설치 중...
</code></pre>
<p>다시 시도해보세요:</p>
<pre><code class="hljs language-js">[~/testapp]$ pyenv local <span class="hljs-number">3.12</span>
[~/testapp]$ pyenv versions
  system
  <span class="hljs-number">3.11</span><span class="hljs-number">.7</span>
* <span class="hljs-number">3.12</span><span class="hljs-number">.1</span> (설정 위치: <span class="hljs-regexp">/home/</span>vandermeij/testapp/.<span class="hljs-property">python</span>-version)
</code></pre>
<p>파이썬 3.12.1이 활성화되어 있는 것을 확인할 수 있어요. 이는 이 폴더 내의 .python-version이라는 로컬 파일로 인해 터미널에서 특정 버전을 로드하도록 pyenv에 알려주기 때문이에요.</p>
<p>서브 폴더를 제외한 다른 폴더로 이동하면 활성화된 파이썬 버전이 재설정됩니다:</p>
<pre><code class="hljs language-js">[~]$ pyenv versions
  system
* <span class="hljs-number">3.11</span><span class="hljs-number">.7</span> (set by /home/vandermeij/.<span class="hljs-property">pyenv</span>/version)
  <span class="hljs-number">3.12</span><span class="hljs-number">.1</span>
</code></pre>
<p>pyenv를 사용하면 로컬 또는 전역 파이썬 버전에 관해 항상 사용 중인 파이썬 버전을 알 수 있고 완전한 제어권을 가질 수 있어요.</p>
<p>다음 적절한 개발 환경 설정 단계는 외부 라이브러리/의존성을 설치하기 위해 가상 환경을 사용하는 것입니다. 이렇게 함으로써 a) 우리의 pyenv Python 배포를 깨끗하게 유지할 수 있고, b) 다른 프로젝트와 충돌하지 않습니다. 이에 대해 저는 Poetry를 추천합니다.</p>
<h1>Poetry</h1>
<h2>설치</h2>
<p>새로 설치한 pyenv Python 버전에 설치할 유일한 외부 라이브러리는 Poetry입니다.</p>
<pre><code class="hljs language-sh">[~]$ pip install poetry
[~]$ poetry -V
Poetry (version 1.7.1)
</code></pre>
<p>이 작업을 각 Python 버전마다 수행하십시오.</p>
<pre><code class="hljs language-sh">[~/testapp]$ poetry -V
pyenv: poetry: <span class="hljs-built_in">command</span> not found
</code></pre>
<h2>사용법</h2>
<p>새 프로젝트를 시작하려면 poetry init -q를 실행해 보세요. 이렇게 하면 pyproject.toml 파일이 생성됩니다.</p>
<p>이제 의존성을 추가할 수 있게 됩니다. 하지만 그 전에 가상 환경을 활성화해야 합니다. poetry shell을 실행하세요:</p>
<pre><code class="hljs language-js">[~/testapp]$ poetry shell
<span class="hljs-title class_">Creating</span> virtualenv testapp-b6lGsqOc-py3<span class="hljs-number">.12</span> <span class="hljs-keyword">in</span> /home/vandermeij/.<span class="hljs-property">cache</span>/pypoetry/virtualenvs
<span class="hljs-title class_">Spawning</span> shell within /home/vandermeij/.<span class="hljs-property">cache</span>/pypoetry/virtualenvs/testapp-b6lGsqOc-py3<span class="hljs-number">.12</span>
[~<span class="hljs-regexp">/testapp]$ emulate bash -c '. /</span>home/vandermeij/.<span class="hljs-property">cache</span>/pypoetry/virtualenvs/testapp-b6lGsqOc-py3<span class="hljs-number">.12</span>/bin/activate<span class="hljs-string">'
(testapp-py3.12) [~/testapp]$
</span></code></pre>
<p>이렇게 하면 가상 환경 (virtualenv)이 생성되고, 이미 존재하지 않는 경우 새 쉘이 생성되며 해당 가상 환경이 활성화됩니다. 프롬프트(PS1)에서 확인할 수 있습니다: (testapp-py3.12) [~/testapp]$.</p>
<p>현재 which python을 실행하면 가상 환경에 연결된 다른 심볼릭 링크를 볼 수 있습니다:</p>
<pre><code class="hljs language-js">(testapp-py3<span class="hljs-number">.12</span>) [~/testapp]$ which python
/home/vandermeij/.<span class="hljs-property">cache</span>/pypoetry/virtualenvs/testapp-b6lGsqOc-py3<span class="hljs-number">.12</span>/bin/python
</code></pre>
<p>확인하세요. pyenv로 활성화된 Python 버전과 동일하지만 이제 가상 환경으로 묶여 있습니다.</p>
<pre><code class="hljs language-js">(testapp-py3<span class="hljs-number">.12</span>) [~/testapp]$ python -V
<span class="hljs-title class_">Python</span> <span class="hljs-number">3.12</span><span class="hljs-number">.1</span>
</code></pre>
<p>이 가상 환경에서는 종속 항목을 설치할 것입니다.</p>
<p>이미 pyproject.toml 파일이 있는 경우, 단지 그것을 포함하는 git 저장소를 복제했기 때문에, 프로젝트 자체가 파이썬 라이브러리인지 여부에 따라 poetry install 또는 poetry install --no-root를 실행할 수 있습니다. 우리의 경우, testapp은 파이썬 라이브러리가 아닙니다:</p>
<pre><code class="hljs language-js">(testapp-py3<span class="hljs-number">.12</span>) [~/testapp]$ poetry install --no-root
잠금 파일에서 종속성을 설치 중
</code></pre>
<p>이제 FastAPI와 같은 새로운 종속성을 추가할 수 있습니다. poetry add fastapi를 사용하거나 pyproject.toml 파일을 수동으로 편집할 수 있습니다. 일반적으로 후자를 사용합니다.</p>
<p>패스트API를 수동으로 추가하겠습니다. 좋아하는 편집기로 pyproject.toml 파일을 열고 다음 줄을 변경하세요 (fastapi = "*"):</p>
<p>[tool.poetry.dependencies]
python = "^3.12"
fastapi = "*"</p>
<p>이제 Poetry 업데이트를 실행해보세요:</p>
<p>(testapp-py3.12) [~/testapp]$ poetry update
의존성 업데이트 중
의존성 해결 중... (6.6초)</p>
<p>패키지 작업: 9개 설치, 0개 업데이트, 0개 제거</p>
<p>• idna (3.6) 설치 중
• sniffio (1.3.0) 설치 중
• typing-extensions (4.9.0) 설치 중
• annotated-types (0.6.0) 설치 중
• anyio (4.2.0) 설치 중
• pydantic-core (2.14.6) 설치 중
• pydantic (2.5.3) 설치 중
• starlette (0.35.1) 설치 중
• fastapi (0.109.0) 설치 중</p>
<p>잠금 파일 작성 완료</p>
<p>가상 환경이 FastAPI 및 해당 종속성들로 풍부해졌어요. 보너스로, Poetry가 poetry.lock 파일을 생성했는데, 이 파일에는 설치된 각 (하위)종속성의 특정 버전이 포함되어 있어요.</p>
<p>다음 파일을 git에 추가해주세요:</p>
<ul>
<li>.python-version</li>
<li>pyproject.toml</li>
<li>poetry.lock</li>
</ul>
<p>이제 pyenv와 Poetry를 사용하여 깔끔하고 적절한 Python 개발 환경을 구축했어요.</p>
<p>모든 가상 환경의 전체 개요를 보려면 poetry env list를 실행하세요:</p>
<pre><code class="hljs language-js">(testapp-py3<span class="hljs-number">.12</span>) [~/testapp]$ poetry env list
testapp-b6lGsqOc-py3<span class="hljs-number">.12</span> (<span class="hljs-title class_">Activated</span>)
</code></pre>
<p>전용 쉘을 종료하려면 CTRL+D를 누르거나 exit를 입력하세요:</p>
<pre><code class="hljs language-js">(testapp-py3<span class="hljs-number">.12</span>) [~/testapp]$ exit
[~/testapp]$
</code></pre>
<h1>결론</h1>
<p>pyenv 및 Poetry는 로컬 개발 환경을 위한 강력한 도구를 제공합니다. 이를 사용하는 것을 강력히 권장합니다. 저는 그것을 사용하여 매우 만족하고 있습니다.</p>
<p>앞서 간단히 언급했듯이 중요 파일을 저장하기 위해 git을 사용해주세요. 또한, 어플리케이션을 설치할 때는 어디에서든 poetry.lock 파일을 사용해주세요. 예를 들어, Docker에서.</p>
<p>이 글에 관한 질문, 문의 또는 의견이 있으시다면 언제든지 연락해주세요. 도움이 되겠습니다. 여기나 제 개인 웹사이트에서 저에게 연락을 주셔도 됩니다.</p>
</body>
</html>
</div></article></div></main></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"title":"적절한 Python 설정 pyenv와 Poetry","description":"","date":"2024-05-27 13:52","slug":"2024-05-27-ProperPythonsetupwithpyenvPoetry","content":"\n많은 경우, 사람들이 Python의 로컬(개발) 환경 설정에서 고민하는 것을 자주 볼 수 있어요. 솔직히 말하자면, 쉽지 않아요. 그러나 동시에 안정성과 문제 해결 능력을 위해 중요하답니다.\n\n이 글은 로컬 Python 환경을 제대로 설정하는 방법을 설명하는 또 다른 글이 될 거예요. 우리의 경우에는 pyenv와 Poetry를 사용할 거에요. 이미 이 링크들에는 필요한 모든 정보가 포함되어 있지만, 정보가 너무 많아 보일 수 있어요. 이 글에서는 평균적인 Python 애플리케이션을 위한 로컬 개발 환경 설정에만 초점을 맞추려고 해요.\n\n![이미지](/assets/img/2024-05-27-ProperPythonsetupwithpyenvPoetry_0.png)\n\n# pyenv\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n## pyenv 설치\n\n첫 번째 단계는 pyenv를 설치하는 것입니다. 이는 각기 다른 운영 체제에 특정하므로 아래 문서의 지침을 따라주시기 바랍니다: [https://github.com/pyenv/pyenv?tab=readme-ov-file#installation](https://github.com/pyenv/pyenv?tab=readme-ov-file#installation)\n\n리눅스 배포판을 사용 중이시라면, 다음을 실행해주십시오:\n\n```js\ncurl https://pyenv.run | bash\n```\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\npyenv은 ~/.pyenv 위치에 설치됩니다.\n\npyenv를 로드 경로에 추가해야하는 몇 가지 추가 단계가 나타날 것입니다. 이 단계도 실행하세요. 저의 경우에는 ZSH를 사용하기 때문에 이러한 줄을 ~/.zshrc에 추가해야 합니다. 이 문서에 ZSH를 설치하는 방법은 포함되어 있지 않습니다. 도움이 필요하면 언제든지 연락해 주세요.\n\n이제 터미널을 다시 열어주세요.\n\n새 터미널에서 pyenv를 실행하여 테스트해보세요. 명령어 목록이 표시된다면 사용할 준비가 된 것입니다.\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n## Python 설치\n\n우리가 먼저 해야 할 일은 터미널에서 기본적으로 활성화된 Python 버전을 확인하는 것입니다. 제 예시에서는 Raspberry Pi OS 12.4 (Bookworm)를 실행하는 Raspberry Pi 5 (8GB)에서 작업하고 있습니다.\n\n```js\n[~]$ which python\n/usr/bin/python\n```\n\n이것은 OS와 함께 제공되는 표준 Python입니다.\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n다음으로 pyenv에서 Python 버전을 확인합니다:\n\n```js\n[~]$ pyenv versions\n* system (set by /home/vandermeij/.pyenv/version)\n```\n\n여기에는 Python 버전이 없다는 것을 알려줍니다. 지금은 아무것도 설치되지 않았습니다. 좋은 일이죠.\n\npyenv를 통해 Python 버전을 설치하려면 몇 가지 의존성을 설치해야 합니다. 여러분의 운영 체제에 해당하는 의존성을 설치하려면 다음 문서를 참조해주세요: https://github.com/pyenv/pyenv/wiki#suggested-build-environment\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n우리 상황에서:\n\n```bash\nsudo apt update; sudo apt install build-essential libssl-dev zlib1g-dev \\\nlibbz2-dev libreadline-dev libsqlite3-dev curl \\\nlibncursesw5-dev xz-utils tk-dev libxml2-dev libxmlsec1-dev libffi-dev liblzma-dev\n```\n\n이제 Python을 설치할 수 있습니다. 예를들어, 버전 3.11:\n\n```bash\n[~]$ pyenv install 3.11\nPython-3.11.7.tar.xz 다운로드 중...\n-\u003e https://www.python.org/ftp/python/3.11.7/Python-3.11.7.tar.xz\nPython-3.11.7 설치 중...\n```\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n다음은 pyenv에서 Python 버전을 다시 확인해 봅시다:\n\n```js\n[~]$ pyenv versions\n* system (set by /home/vandermeij/.pyenv/version)\n  3.11.7\n```\n\n여기서 3.11.7 버전이 설치되어 있는 것을 확인할 수 있습니다.\n\n이제 활성화하고 버전을 다시 확인해 봅시다:\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n```md\n[~]$ pyenv global 3.11.7\n[~]$ pyenv versions\nsystem\n\n- 3.11.7 (set by /home/vandermeij/.pyenv/version)\n```\n\n지금은 Python 3.11.7이 활성화된 Python 버전으로, 전역적이며 시스템 전역으로 적용되었음을 확인했습니다.\n\n다시 한 번 기본 Python 버전을 확인해보세요:\n\n```md\n[~]$ which python\n/home/vandermeij/.pyenv/shims/python\n```\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n위치가 /usr/bin/python과 다르다는 것을 주목하세요. 이제 pyenv가 유지 관리하는 심볼릭 링크를 가리킵니다. 이건 좋은 일이에요! 이제 penv versions로 확인할 수 있듯이 선택한 Python 버전을 가리킵니다.\n\n시스템 Python으로 다시 변경하면, 이 변경 사항은 OS에서의 Python 버전을 관리하는 pyenv versions에만 반영됩니다.\n\n```bash\n[~]$ pyenv global system\n[~]$ pyenv versions\n* system (set by /home/vandermeij/.pyenv/version)\n  3.11.7\n[~]$ which python\n/home/vandermeij/.pyenv/shims/python\n```\n\n## 사용법\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n저는 주로 pyenv를 주요 Python 배포 업체로 사용합니다. 기본 시스템 Python을 거의 사용하지 않아요. 저의 컴퓨터에서는 이렇게 나와요:\n\n```js\n[~]$ pyenv versions\n  system\n* 3.11.7 (set by /home/vandermeij/.pyenv/version)\n```\n\n때로는 프로젝트에서 다른 Python 버전을 사용하고 싶을 수도 있어요, 예를 들어 Python 3.12를 사용하고 싶다고 가정해봅시다. 전역 Python 버전을 변경하는 것 외에도 pyenv를 통해 로컬 버전을 사용할 수도 있어요.\n\ntestapp이라는 작은 프로젝트를 만든다고 가정해봅시다.\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n```js\n[~]$ mkdir testapp\n[~]$ cd testapp\n```\n\n다음으로 pyenv를 사용하여 로컬 Python 버전을 설정합니다:\n\n```js\n[~/testapp]$ pyenv local 3.12\npyenv: version `3.12' not installed\n```\n\n버전 3.12가 아직 설치되지 않았다고 알려줍니다.\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n그럼 설치해보겠습니다:\n\n```js\n[~/testapp]$ pyenv install 3.12\nPython-3.12.1.tar.xz를 다운로드 중...\n-\u003e https://www.python.org/ftp/python/3.12.1/Python-3.12.1.tar.xz\nPython-3.12.1을 설치 중...\n```\n\n다시 시도해보세요:\n\n```js\n[~/testapp]$ pyenv local 3.12\n[~/testapp]$ pyenv versions\n  system\n  3.11.7\n* 3.12.1 (설정 위치: /home/vandermeij/testapp/.python-version)\n```\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n파이썬 3.12.1이 활성화되어 있는 것을 확인할 수 있어요. 이는 이 폴더 내의 .python-version이라는 로컬 파일로 인해 터미널에서 특정 버전을 로드하도록 pyenv에 알려주기 때문이에요.\n\n서브 폴더를 제외한 다른 폴더로 이동하면 활성화된 파이썬 버전이 재설정됩니다:\n\n```js\n[~]$ pyenv versions\n  system\n* 3.11.7 (set by /home/vandermeij/.pyenv/version)\n  3.12.1\n```\n\npyenv를 사용하면 로컬 또는 전역 파이썬 버전에 관해 항상 사용 중인 파이썬 버전을 알 수 있고 완전한 제어권을 가질 수 있어요.\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n다음 적절한 개발 환경 설정 단계는 외부 라이브러리/의존성을 설치하기 위해 가상 환경을 사용하는 것입니다. 이렇게 함으로써 a) 우리의 pyenv Python 배포를 깨끗하게 유지할 수 있고, b) 다른 프로젝트와 충돌하지 않습니다. 이에 대해 저는 Poetry를 추천합니다.\n\n# Poetry\n\n## 설치\n\n새로 설치한 pyenv Python 버전에 설치할 유일한 외부 라이브러리는 Poetry입니다.\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n```sh\n[~]$ pip install poetry\n[~]$ poetry -V\nPoetry (version 1.7.1)\n```\n\n이 작업을 각 Python 버전마다 수행하십시오.\n\n```sh\n[~/testapp]$ poetry -V\npyenv: poetry: command not found\n```\n\n## 사용법\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n새 프로젝트를 시작하려면 poetry init -q를 실행해 보세요. 이렇게 하면 pyproject.toml 파일이 생성됩니다.\n\n이제 의존성을 추가할 수 있게 됩니다. 하지만 그 전에 가상 환경을 활성화해야 합니다. poetry shell을 실행하세요:\n\n```js\n[~/testapp]$ poetry shell\nCreating virtualenv testapp-b6lGsqOc-py3.12 in /home/vandermeij/.cache/pypoetry/virtualenvs\nSpawning shell within /home/vandermeij/.cache/pypoetry/virtualenvs/testapp-b6lGsqOc-py3.12\n[~/testapp]$ emulate bash -c '. /home/vandermeij/.cache/pypoetry/virtualenvs/testapp-b6lGsqOc-py3.12/bin/activate'\n(testapp-py3.12) [~/testapp]$\n```\n\n이렇게 하면 가상 환경 (virtualenv)이 생성되고, 이미 존재하지 않는 경우 새 쉘이 생성되며 해당 가상 환경이 활성화됩니다. 프롬프트(PS1)에서 확인할 수 있습니다: (testapp-py3.12) [~/testapp]$.\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n현재 which python을 실행하면 가상 환경에 연결된 다른 심볼릭 링크를 볼 수 있습니다:\n\n```js\n(testapp-py3.12) [~/testapp]$ which python\n/home/vandermeij/.cache/pypoetry/virtualenvs/testapp-b6lGsqOc-py3.12/bin/python\n```\n\n확인하세요. pyenv로 활성화된 Python 버전과 동일하지만 이제 가상 환경으로 묶여 있습니다.\n\n```js\n(testapp-py3.12) [~/testapp]$ python -V\nPython 3.12.1\n```\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n이 가상 환경에서는 종속 항목을 설치할 것입니다.\n\n이미 pyproject.toml 파일이 있는 경우, 단지 그것을 포함하는 git 저장소를 복제했기 때문에, 프로젝트 자체가 파이썬 라이브러리인지 여부에 따라 poetry install 또는 poetry install --no-root를 실행할 수 있습니다. 우리의 경우, testapp은 파이썬 라이브러리가 아닙니다:\n\n```js\n(testapp-py3.12) [~/testapp]$ poetry install --no-root\n잠금 파일에서 종속성을 설치 중\n```\n\n이제 FastAPI와 같은 새로운 종속성을 추가할 수 있습니다. poetry add fastapi를 사용하거나 pyproject.toml 파일을 수동으로 편집할 수 있습니다. 일반적으로 후자를 사용합니다.\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n패스트API를 수동으로 추가하겠습니다. 좋아하는 편집기로 pyproject.toml 파일을 열고 다음 줄을 변경하세요 (fastapi = \"\\*\"):\n\n\n[tool.poetry.dependencies]\npython = \"^3.12\"\nfastapi = \"*\"\n\n\n이제 Poetry 업데이트를 실행해보세요:\n\n\n(testapp-py3.12) [~/testapp]$ poetry update\n의존성 업데이트 중\n의존성 해결 중... (6.6초)\n\n패키지 작업: 9개 설치, 0개 업데이트, 0개 제거\n\n  • idna (3.6) 설치 중\n  • sniffio (1.3.0) 설치 중\n  • typing-extensions (4.9.0) 설치 중\n  • annotated-types (0.6.0) 설치 중\n  • anyio (4.2.0) 설치 중\n  • pydantic-core (2.14.6) 설치 중\n  • pydantic (2.5.3) 설치 중\n  • starlette (0.35.1) 설치 중\n  • fastapi (0.109.0) 설치 중\n\n잠금 파일 작성 완료\n\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n가상 환경이 FastAPI 및 해당 종속성들로 풍부해졌어요. 보너스로, Poetry가 poetry.lock 파일을 생성했는데, 이 파일에는 설치된 각 (하위)종속성의 특정 버전이 포함되어 있어요.\n\n다음 파일을 git에 추가해주세요:\n\n- .python-version\n- pyproject.toml\n- poetry.lock\n\n이제 pyenv와 Poetry를 사용하여 깔끔하고 적절한 Python 개발 환경을 구축했어요.\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n모든 가상 환경의 전체 개요를 보려면 poetry env list를 실행하세요:\n\n```js\n(testapp-py3.12) [~/testapp]$ poetry env list\ntestapp-b6lGsqOc-py3.12 (Activated)\n```\n\n전용 쉘을 종료하려면 CTRL+D를 누르거나 exit를 입력하세요:\n\n```js\n(testapp-py3.12) [~/testapp]$ exit\n[~/testapp]$\n```\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n# 결론\n\npyenv 및 Poetry는 로컬 개발 환경을 위한 강력한 도구를 제공합니다. 이를 사용하는 것을 강력히 권장합니다. 저는 그것을 사용하여 매우 만족하고 있습니다.\n\n앞서 간단히 언급했듯이 중요 파일을 저장하기 위해 git을 사용해주세요. 또한, 어플리케이션을 설치할 때는 어디에서든 poetry.lock 파일을 사용해주세요. 예를 들어, Docker에서.\n\n이 글에 관한 질문, 문의 또는 의견이 있으시다면 언제든지 연락해주세요. 도움이 되겠습니다. 여기나 제 개인 웹사이트에서 저에게 연락을 주셔도 됩니다.\n","ogImage":{"url":"/assets/img/2024-05-27-ProperPythonsetupwithpyenvPoetry_0.png"},"coverImage":"/assets/img/2024-05-27-ProperPythonsetupwithpyenvPoetry_0.png","tag":["Tech"],"readingTime":8},"content":"\u003c!doctype html\u003e\n\u003chtml lang=\"en\"\u003e\n\u003chead\u003e\n\u003cmeta charset=\"utf-8\"\u003e\n\u003cmeta content=\"width=device-width, initial-scale=1\" name=\"viewport\"\u003e\n\u003c/head\u003e\n\u003cbody\u003e\n\u003cp\u003e많은 경우, 사람들이 Python의 로컬(개발) 환경 설정에서 고민하는 것을 자주 볼 수 있어요. 솔직히 말하자면, 쉽지 않아요. 그러나 동시에 안정성과 문제 해결 능력을 위해 중요하답니다.\u003c/p\u003e\n\u003cp\u003e이 글은 로컬 Python 환경을 제대로 설정하는 방법을 설명하는 또 다른 글이 될 거예요. 우리의 경우에는 pyenv와 Poetry를 사용할 거에요. 이미 이 링크들에는 필요한 모든 정보가 포함되어 있지만, 정보가 너무 많아 보일 수 있어요. 이 글에서는 평균적인 Python 애플리케이션을 위한 로컬 개발 환경 설정에만 초점을 맞추려고 해요.\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/assets/img/2024-05-27-ProperPythonsetupwithpyenvPoetry_0.png\" alt=\"이미지\"\u003e\u003c/p\u003e\n\u003ch1\u003epyenv\u003c/h1\u003e\n\u003ch2\u003epyenv 설치\u003c/h2\u003e\n\u003cp\u003e첫 번째 단계는 pyenv를 설치하는 것입니다. 이는 각기 다른 운영 체제에 특정하므로 아래 문서의 지침을 따라주시기 바랍니다: \u003ca href=\"https://github.com/pyenv/pyenv?tab=readme-ov-file#installation\" rel=\"nofollow\" target=\"_blank\"\u003ehttps://github.com/pyenv/pyenv?tab=readme-ov-file#installation\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003e리눅스 배포판을 사용 중이시라면, 다음을 실행해주십시오:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003ecurl \u003cspan class=\"hljs-attr\"\u003ehttps\u003c/span\u003e:\u003cspan class=\"hljs-comment\"\u003e//pyenv.run | bash\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003epyenv은 ~/.pyenv 위치에 설치됩니다.\u003c/p\u003e\n\u003cp\u003epyenv를 로드 경로에 추가해야하는 몇 가지 추가 단계가 나타날 것입니다. 이 단계도 실행하세요. 저의 경우에는 ZSH를 사용하기 때문에 이러한 줄을 ~/.zshrc에 추가해야 합니다. 이 문서에 ZSH를 설치하는 방법은 포함되어 있지 않습니다. 도움이 필요하면 언제든지 연락해 주세요.\u003c/p\u003e\n\u003cp\u003e이제 터미널을 다시 열어주세요.\u003c/p\u003e\n\u003cp\u003e새 터미널에서 pyenv를 실행하여 테스트해보세요. 명령어 목록이 표시된다면 사용할 준비가 된 것입니다.\u003c/p\u003e\n\u003ch2\u003ePython 설치\u003c/h2\u003e\n\u003cp\u003e우리가 먼저 해야 할 일은 터미널에서 기본적으로 활성화된 Python 버전을 확인하는 것입니다. 제 예시에서는 Raspberry Pi OS 12.4 (Bookworm)를 실행하는 Raspberry Pi 5 (8GB)에서 작업하고 있습니다.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e[~]$ which python\n/usr/bin/python\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e이것은 OS와 함께 제공되는 표준 Python입니다.\u003c/p\u003e\n\u003cp\u003e다음으로 pyenv에서 Python 버전을 확인합니다:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e[~]$ pyenv versions\n* system (set by /home/vandermeij/.\u003cspan class=\"hljs-property\"\u003epyenv\u003c/span\u003e/version)\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e여기에는 Python 버전이 없다는 것을 알려줍니다. 지금은 아무것도 설치되지 않았습니다. 좋은 일이죠.\u003c/p\u003e\n\u003cp\u003epyenv를 통해 Python 버전을 설치하려면 몇 가지 의존성을 설치해야 합니다. 여러분의 운영 체제에 해당하는 의존성을 설치하려면 다음 문서를 참조해주세요: \u003ca href=\"https://github.com/pyenv/pyenv/wiki#suggested-build-environment\" rel=\"nofollow\" target=\"_blank\"\u003ehttps://github.com/pyenv/pyenv/wiki#suggested-build-environment\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003e우리 상황에서:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-bash\"\u003esudo apt update; sudo apt install build-essential libssl-dev zlib1g-dev \\\nlibbz2-dev libreadline-dev libsqlite3-dev curl \\\nlibncursesw5-dev xz-utils tk-dev libxml2-dev libxmlsec1-dev libffi-dev liblzma-dev\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e이제 Python을 설치할 수 있습니다. 예를들어, 버전 3.11:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-bash\"\u003e[~]$ pyenv install 3.11\nPython-3.11.7.tar.xz 다운로드 중...\n-\u003e https://www.python.org/ftp/python/3.11.7/Python-3.11.7.tar.xz\nPython-3.11.7 설치 중...\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e다음은 pyenv에서 Python 버전을 다시 확인해 봅시다:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e[~]$ pyenv versions\n* system (set by /home/vandermeij/.\u003cspan class=\"hljs-property\"\u003epyenv\u003c/span\u003e/version)\n  \u003cspan class=\"hljs-number\"\u003e3.11\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.7\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e여기서 3.11.7 버전이 설치되어 있는 것을 확인할 수 있습니다.\u003c/p\u003e\n\u003cp\u003e이제 활성화하고 버전을 다시 확인해 봅시다:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-md\"\u003e[~]$ pyenv global 3.11.7\n[~]$ pyenv versions\nsystem\n\n\u003cspan class=\"hljs-bullet\"\u003e-\u003c/span\u003e 3.11.7 (set by /home/vandermeij/.pyenv/version)\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e지금은 Python 3.11.7이 활성화된 Python 버전으로, 전역적이며 시스템 전역으로 적용되었음을 확인했습니다.\u003c/p\u003e\n\u003cp\u003e다시 한 번 기본 Python 버전을 확인해보세요:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-md\"\u003e[~]$ which python\n/home/vandermeij/.pyenv/shims/python\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e위치가 /usr/bin/python과 다르다는 것을 주목하세요. 이제 pyenv가 유지 관리하는 심볼릭 링크를 가리킵니다. 이건 좋은 일이에요! 이제 penv versions로 확인할 수 있듯이 선택한 Python 버전을 가리킵니다.\u003c/p\u003e\n\u003cp\u003e시스템 Python으로 다시 변경하면, 이 변경 사항은 OS에서의 Python 버전을 관리하는 pyenv versions에만 반영됩니다.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-bash\"\u003e[~]$ pyenv global system\n[~]$ pyenv versions\n* system (\u003cspan class=\"hljs-built_in\"\u003eset\u003c/span\u003e by /home/vandermeij/.pyenv/version)\n  3.11.7\n[~]$ \u003cspan class=\"hljs-built_in\"\u003ewhich\u003c/span\u003e python\n/home/vandermeij/.pyenv/shims/python\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch2\u003e사용법\u003c/h2\u003e\n\u003cp\u003e저는 주로 pyenv를 주요 Python 배포 업체로 사용합니다. 기본 시스템 Python을 거의 사용하지 않아요. 저의 컴퓨터에서는 이렇게 나와요:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e[~]$ pyenv versions\n  system\n* \u003cspan class=\"hljs-number\"\u003e3.11\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.7\u003c/span\u003e (set by /home/vandermeij/.\u003cspan class=\"hljs-property\"\u003epyenv\u003c/span\u003e/version)\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e때로는 프로젝트에서 다른 Python 버전을 사용하고 싶을 수도 있어요, 예를 들어 Python 3.12를 사용하고 싶다고 가정해봅시다. 전역 Python 버전을 변경하는 것 외에도 pyenv를 통해 로컬 버전을 사용할 수도 있어요.\u003c/p\u003e\n\u003cp\u003etestapp이라는 작은 프로젝트를 만든다고 가정해봅시다.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e[~]$ mkdir testapp\n[~]$ cd testapp\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e다음으로 pyenv를 사용하여 로컬 Python 버전을 설정합니다:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e[~/testapp]$ pyenv local \u003cspan class=\"hljs-number\"\u003e3.12\u003c/span\u003e\n\u003cspan class=\"hljs-attr\"\u003epyenv\u003c/span\u003e: version \u003cspan class=\"hljs-string\"\u003e`3.12' not installed\n\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e버전 3.12가 아직 설치되지 않았다고 알려줍니다.\u003c/p\u003e\n\u003cp\u003e그럼 설치해보겠습니다:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e[~/testapp]$ pyenv install \u003cspan class=\"hljs-number\"\u003e3.12\u003c/span\u003e\n\u003cspan class=\"hljs-title class_\"\u003ePython\u003c/span\u003e-\u003cspan class=\"hljs-number\"\u003e3.12\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.1\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003etar\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003exz\u003c/span\u003e를 다운로드 중...\n-\u003e \u003cspan class=\"hljs-attr\"\u003ehttps\u003c/span\u003e:\u003cspan class=\"hljs-comment\"\u003e//www.python.org/ftp/python/3.12.1/Python-3.12.1.tar.xz\u003c/span\u003e\n\u003cspan class=\"hljs-title class_\"\u003ePython\u003c/span\u003e-\u003cspan class=\"hljs-number\"\u003e3.12\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.1\u003c/span\u003e을 설치 중...\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e다시 시도해보세요:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e[~/testapp]$ pyenv local \u003cspan class=\"hljs-number\"\u003e3.12\u003c/span\u003e\n[~/testapp]$ pyenv versions\n  system\n  \u003cspan class=\"hljs-number\"\u003e3.11\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.7\u003c/span\u003e\n* \u003cspan class=\"hljs-number\"\u003e3.12\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.1\u003c/span\u003e (설정 위치: \u003cspan class=\"hljs-regexp\"\u003e/home/\u003c/span\u003evandermeij/testapp/.\u003cspan class=\"hljs-property\"\u003epython\u003c/span\u003e-version)\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e파이썬 3.12.1이 활성화되어 있는 것을 확인할 수 있어요. 이는 이 폴더 내의 .python-version이라는 로컬 파일로 인해 터미널에서 특정 버전을 로드하도록 pyenv에 알려주기 때문이에요.\u003c/p\u003e\n\u003cp\u003e서브 폴더를 제외한 다른 폴더로 이동하면 활성화된 파이썬 버전이 재설정됩니다:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e[~]$ pyenv versions\n  system\n* \u003cspan class=\"hljs-number\"\u003e3.11\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.7\u003c/span\u003e (set by /home/vandermeij/.\u003cspan class=\"hljs-property\"\u003epyenv\u003c/span\u003e/version)\n  \u003cspan class=\"hljs-number\"\u003e3.12\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.1\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003epyenv를 사용하면 로컬 또는 전역 파이썬 버전에 관해 항상 사용 중인 파이썬 버전을 알 수 있고 완전한 제어권을 가질 수 있어요.\u003c/p\u003e\n\u003cp\u003e다음 적절한 개발 환경 설정 단계는 외부 라이브러리/의존성을 설치하기 위해 가상 환경을 사용하는 것입니다. 이렇게 함으로써 a) 우리의 pyenv Python 배포를 깨끗하게 유지할 수 있고, b) 다른 프로젝트와 충돌하지 않습니다. 이에 대해 저는 Poetry를 추천합니다.\u003c/p\u003e\n\u003ch1\u003ePoetry\u003c/h1\u003e\n\u003ch2\u003e설치\u003c/h2\u003e\n\u003cp\u003e새로 설치한 pyenv Python 버전에 설치할 유일한 외부 라이브러리는 Poetry입니다.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-sh\"\u003e[~]$ pip install poetry\n[~]$ poetry -V\nPoetry (version 1.7.1)\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e이 작업을 각 Python 버전마다 수행하십시오.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-sh\"\u003e[~/testapp]$ poetry -V\npyenv: poetry: \u003cspan class=\"hljs-built_in\"\u003ecommand\u003c/span\u003e not found\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch2\u003e사용법\u003c/h2\u003e\n\u003cp\u003e새 프로젝트를 시작하려면 poetry init -q를 실행해 보세요. 이렇게 하면 pyproject.toml 파일이 생성됩니다.\u003c/p\u003e\n\u003cp\u003e이제 의존성을 추가할 수 있게 됩니다. 하지만 그 전에 가상 환경을 활성화해야 합니다. poetry shell을 실행하세요:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e[~/testapp]$ poetry shell\n\u003cspan class=\"hljs-title class_\"\u003eCreating\u003c/span\u003e virtualenv testapp-b6lGsqOc-py3\u003cspan class=\"hljs-number\"\u003e.12\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003ein\u003c/span\u003e /home/vandermeij/.\u003cspan class=\"hljs-property\"\u003ecache\u003c/span\u003e/pypoetry/virtualenvs\n\u003cspan class=\"hljs-title class_\"\u003eSpawning\u003c/span\u003e shell within /home/vandermeij/.\u003cspan class=\"hljs-property\"\u003ecache\u003c/span\u003e/pypoetry/virtualenvs/testapp-b6lGsqOc-py3\u003cspan class=\"hljs-number\"\u003e.12\u003c/span\u003e\n[~\u003cspan class=\"hljs-regexp\"\u003e/testapp]$ emulate bash -c '. /\u003c/span\u003ehome/vandermeij/.\u003cspan class=\"hljs-property\"\u003ecache\u003c/span\u003e/pypoetry/virtualenvs/testapp-b6lGsqOc-py3\u003cspan class=\"hljs-number\"\u003e.12\u003c/span\u003e/bin/activate\u003cspan class=\"hljs-string\"\u003e'\n(testapp-py3.12) [~/testapp]$\n\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e이렇게 하면 가상 환경 (virtualenv)이 생성되고, 이미 존재하지 않는 경우 새 쉘이 생성되며 해당 가상 환경이 활성화됩니다. 프롬프트(PS1)에서 확인할 수 있습니다: (testapp-py3.12) [~/testapp]$.\u003c/p\u003e\n\u003cp\u003e현재 which python을 실행하면 가상 환경에 연결된 다른 심볼릭 링크를 볼 수 있습니다:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e(testapp-py3\u003cspan class=\"hljs-number\"\u003e.12\u003c/span\u003e) [~/testapp]$ which python\n/home/vandermeij/.\u003cspan class=\"hljs-property\"\u003ecache\u003c/span\u003e/pypoetry/virtualenvs/testapp-b6lGsqOc-py3\u003cspan class=\"hljs-number\"\u003e.12\u003c/span\u003e/bin/python\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e확인하세요. pyenv로 활성화된 Python 버전과 동일하지만 이제 가상 환경으로 묶여 있습니다.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e(testapp-py3\u003cspan class=\"hljs-number\"\u003e.12\u003c/span\u003e) [~/testapp]$ python -V\n\u003cspan class=\"hljs-title class_\"\u003ePython\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e3.12\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.1\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e이 가상 환경에서는 종속 항목을 설치할 것입니다.\u003c/p\u003e\n\u003cp\u003e이미 pyproject.toml 파일이 있는 경우, 단지 그것을 포함하는 git 저장소를 복제했기 때문에, 프로젝트 자체가 파이썬 라이브러리인지 여부에 따라 poetry install 또는 poetry install --no-root를 실행할 수 있습니다. 우리의 경우, testapp은 파이썬 라이브러리가 아닙니다:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e(testapp-py3\u003cspan class=\"hljs-number\"\u003e.12\u003c/span\u003e) [~/testapp]$ poetry install --no-root\n잠금 파일에서 종속성을 설치 중\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e이제 FastAPI와 같은 새로운 종속성을 추가할 수 있습니다. poetry add fastapi를 사용하거나 pyproject.toml 파일을 수동으로 편집할 수 있습니다. 일반적으로 후자를 사용합니다.\u003c/p\u003e\n\u003cp\u003e패스트API를 수동으로 추가하겠습니다. 좋아하는 편집기로 pyproject.toml 파일을 열고 다음 줄을 변경하세요 (fastapi = \"*\"):\u003c/p\u003e\n\u003cp\u003e[tool.poetry.dependencies]\npython = \"^3.12\"\nfastapi = \"*\"\u003c/p\u003e\n\u003cp\u003e이제 Poetry 업데이트를 실행해보세요:\u003c/p\u003e\n\u003cp\u003e(testapp-py3.12) [~/testapp]$ poetry update\n의존성 업데이트 중\n의존성 해결 중... (6.6초)\u003c/p\u003e\n\u003cp\u003e패키지 작업: 9개 설치, 0개 업데이트, 0개 제거\u003c/p\u003e\n\u003cp\u003e• idna (3.6) 설치 중\n• sniffio (1.3.0) 설치 중\n• typing-extensions (4.9.0) 설치 중\n• annotated-types (0.6.0) 설치 중\n• anyio (4.2.0) 설치 중\n• pydantic-core (2.14.6) 설치 중\n• pydantic (2.5.3) 설치 중\n• starlette (0.35.1) 설치 중\n• fastapi (0.109.0) 설치 중\u003c/p\u003e\n\u003cp\u003e잠금 파일 작성 완료\u003c/p\u003e\n\u003cp\u003e가상 환경이 FastAPI 및 해당 종속성들로 풍부해졌어요. 보너스로, Poetry가 poetry.lock 파일을 생성했는데, 이 파일에는 설치된 각 (하위)종속성의 특정 버전이 포함되어 있어요.\u003c/p\u003e\n\u003cp\u003e다음 파일을 git에 추가해주세요:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e.python-version\u003c/li\u003e\n\u003cli\u003epyproject.toml\u003c/li\u003e\n\u003cli\u003epoetry.lock\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e이제 pyenv와 Poetry를 사용하여 깔끔하고 적절한 Python 개발 환경을 구축했어요.\u003c/p\u003e\n\u003cp\u003e모든 가상 환경의 전체 개요를 보려면 poetry env list를 실행하세요:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e(testapp-py3\u003cspan class=\"hljs-number\"\u003e.12\u003c/span\u003e) [~/testapp]$ poetry env list\ntestapp-b6lGsqOc-py3\u003cspan class=\"hljs-number\"\u003e.12\u003c/span\u003e (\u003cspan class=\"hljs-title class_\"\u003eActivated\u003c/span\u003e)\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e전용 쉘을 종료하려면 CTRL+D를 누르거나 exit를 입력하세요:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e(testapp-py3\u003cspan class=\"hljs-number\"\u003e.12\u003c/span\u003e) [~/testapp]$ exit\n[~/testapp]$\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch1\u003e결론\u003c/h1\u003e\n\u003cp\u003epyenv 및 Poetry는 로컬 개발 환경을 위한 강력한 도구를 제공합니다. 이를 사용하는 것을 강력히 권장합니다. 저는 그것을 사용하여 매우 만족하고 있습니다.\u003c/p\u003e\n\u003cp\u003e앞서 간단히 언급했듯이 중요 파일을 저장하기 위해 git을 사용해주세요. 또한, 어플리케이션을 설치할 때는 어디에서든 poetry.lock 파일을 사용해주세요. 예를 들어, Docker에서.\u003c/p\u003e\n\u003cp\u003e이 글에 관한 질문, 문의 또는 의견이 있으시다면 언제든지 연락해주세요. 도움이 되겠습니다. 여기나 제 개인 웹사이트에서 저에게 연락을 주셔도 됩니다.\u003c/p\u003e\n\u003c/body\u003e\n\u003c/html\u003e\n"},"__N_SSG":true},"page":"/post/[slug]","query":{"slug":"2024-05-27-ProperPythonsetupwithpyenvPoetry"},"buildId":"kNTo-t2jvQG5kfHDWIcB-","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>