<!DOCTYPE html><html lang="ko"><head><meta charSet="utf-8"/><title>파이썬 Streamlit과 GPT4 UNHCR 난민 데이터 매핑 방법 | itposting</title><meta name="description" content=""/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><meta property="og:url" content="https://itposting.github.io///post/2024-06-19-PythonStreamlitAndGPT4HowToMapUNHCRRefugeeData" data-gatsby-head="true"/><meta property="og:type" content="website" data-gatsby-head="true"/><meta property="og:site_name" content="파이썬 Streamlit과 GPT4 UNHCR 난민 데이터 매핑 방법 | itposting" data-gatsby-head="true"/><meta property="og:title" content="파이썬 Streamlit과 GPT4 UNHCR 난민 데이터 매핑 방법 | itposting" data-gatsby-head="true"/><meta property="og:description" content="" data-gatsby-head="true"/><meta property="og:image" content="/assets/img/2024-06-19-PythonStreamlitAndGPT4HowToMapUNHCRRefugeeData_0.png" data-gatsby-head="true"/><meta property="og:locale" content="en_US" data-gatsby-head="true"/><meta name="twitter:card" content="summary_large_image" data-gatsby-head="true"/><meta property="twitter:domain" content="https://itposting.github.io/" data-gatsby-head="true"/><meta property="twitter:url" content="https://itposting.github.io///post/2024-06-19-PythonStreamlitAndGPT4HowToMapUNHCRRefugeeData" data-gatsby-head="true"/><meta name="twitter:title" content="파이썬 Streamlit과 GPT4 UNHCR 난민 데이터 매핑 방법 | itposting" data-gatsby-head="true"/><meta name="twitter:description" content="" data-gatsby-head="true"/><meta name="twitter:image" content="/assets/img/2024-06-19-PythonStreamlitAndGPT4HowToMapUNHCRRefugeeData_0.png" data-gatsby-head="true"/><meta name="twitter:data1" content="Dev | itposting" data-gatsby-head="true"/><meta name="article:published_time" content="2024-06-19 05:02" data-gatsby-head="true"/><meta name="next-head-count" content="19"/><meta name="google-site-verification" content="a-yehRo3k3xv7fg6LqRaE8jlE42e5wP2bDE_2F849O4"/><link rel="stylesheet" href="/favicons/favicon.ico"/><link rel="icon" type="image/png" sizes="16x16" href="/assets/favicons/favicon-16x16.png"/><link rel="icon" type="image/png" sizes="32x32" href="/assets/favicons/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="96x96" href="/assets/favicons/favicon-96x96.png"/><link rel="icon" href="/favicons/apple-icon-180x180.png"/><link rel="apple-touch-icon" href="/favicons/apple-icon-180x180.png"/><link rel="apple-touch-startup-image" href="/startup.png"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="black"/><meta name="msapplication-config" content="/favicons/browserconfig.xml"/><script async="" src="https://www.googletagmanager.com/gtag/js?id=G-23YXDLKDCL"></script><script>window.dataLayer = window.dataLayer || [];
            function gtag(){dataLayer.push(arguments);}
            gtag('js', new Date());
          
            gtag('config', 'G-23YXDLKDCL');</script><link rel="preload" href="/_next/static/css/6e57edcf9f2ce551.css" as="style"/><link rel="stylesheet" href="/_next/static/css/6e57edcf9f2ce551.css" data-n-g=""/><link rel="preload" href="/_next/static/css/b8ef307c9aee1e34.css" as="style"/><link rel="stylesheet" href="/_next/static/css/b8ef307c9aee1e34.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/_next/static/chunks/webpack-ee6df16fdc6dae4d.js" defer=""></script><script src="/_next/static/chunks/framework-46611630e39cfdeb.js" defer=""></script><script src="/_next/static/chunks/main-cf4a52eec9a970a0.js" defer=""></script><script src="/_next/static/chunks/pages/_app-6fae11262ee5c69b.js" defer=""></script><script src="/_next/static/chunks/75fc9c18-4a646156c659a948.js" defer=""></script><script src="/_next/static/chunks/348-d11c34b645b13f5b.js" defer=""></script><script src="/_next/static/chunks/162-4172e84c8e2aa747.js" defer=""></script><script src="/_next/static/chunks/pages/post/%5Bslug%5D-0fd008072af5a644.js" defer=""></script><script src="/_next/static/FH3Qr-mLAesqA0X5IFRQr/_buildManifest.js" defer=""></script><script src="/_next/static/FH3Qr-mLAesqA0X5IFRQr/_ssgManifest.js" defer=""></script></head><body><div id="__next"><header class="Header_header__Z8PUO"><div class="Header_inner__tfr0u"><strong class="Header_title__Otn70"><a href="/">IT Posting</a></strong><nav class="Header_nav_area__6KVpk"><a class="nav_item" href="/posts/1">Posts</a></nav></div></header><main class="posts_container__NyRU3"><div class="posts_inner__i3n_i"><h1 class="posts_post_title__EbxNx">파이썬 Streamlit과 GPT4 UNHCR 난민 데이터 매핑 방법</h1><div class="posts_meta__cR7lu"><div class="posts_profile_wrap__mslMl"><div class="posts_profile_image_wrap__kPikV"><img alt="파이썬 Streamlit과 GPT4 UNHCR 난민 데이터 매핑 방법" loading="lazy" width="44" height="44" decoding="async" data-nimg="1" class="profile" style="color:transparent" src="/favicons/apple-icon-114x114.png"/></div><div class="posts_textarea__w_iKT"><span class="writer">IT Posting</span><span class="posts_info__5KJdN"><span class="posts_date__ctqHI">Posted On Jun 19, 2024</span><span class="posts_reading_time__f7YPP">8<!-- --> min read</span></span></div></div><img alt="" loading="lazy" width="50" height="50" decoding="async" data-nimg="1" class="posts_view_badge__tcbfm" style="color:transparent" src="https://hits.seeyoufarm.com/api/count/incr/badge.svg?url=https%3A%2F%2Fallround-coder.github.io/post/2024-06-19-PythonStreamlitAndGPT4HowToMapUNHCRRefugeeData&amp;count_bg=%2379C83D&amp;title_bg=%23555555&amp;icon=&amp;icon_color=%23E7E7E7&amp;title=views&amp;edge_flat=false"/></div><article class="posts_post_content__n_L6j"><div><!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta content="width=device-width, initial-scale=1" name="viewport">
</head>
<body>
<p><img src="/assets/img/2024-06-19-PythonStreamlitAndGPT4HowToMapUNHCRRefugeeData_0.png" alt="Python Streamlit"></p>
<p>파이썬 Streamlit은 상호 작용적인 웹 인터페이스를 만드는 놀라운 프레임워크입니다. GPT-4는 빠르게 작동하는 Streamlit 코드를 만들어 줄 수 있어요.</p>
<p>파이썬 Plotly와 함께 사용하면 데이터 시각화에 아름다운 지도와 차트를 손쉽게 만들 수 있어요.</p>
<p>대부분의 경우, 제가 증명해줄 필요가 있죠. 그러니까 제가 어떻게 보여줄지 기대해 주세요.</p>
<p>웹 인터페이스에서 CSV 데이터 세트를 사용하여 다양한 데이터 시각화를 만들 수 있습니다. 추가로 슬라이더 및 드롭다운 메뉴와 같은 상호 작용 레이어를 여러 개 추가할 수도 있습니다. 이 모든 작업은 데이터세트와 GPT-4에 몇 가지 간단한 프롬프트만 필요합니다.</p>
<p>그럼 데이터세트를 찾아보고 이를 실행해 봅시다.</p>
<h1>데이터 세트 — UNHCR 난민 데이터</h1>
<p>UNHCR(UN High Commission for Refugees)는 전 세계적으로 난민의 움직임에 대한 통계를 추적합니다.</p>
<p>데이터는 여기에서 자유롭게 액세스할 수 있어요.</p>
<p>다운로드 페이지로 이동한 후에는 선택한 데이터에 대해 더 자세히 볼 수 있어요:</p>
<p><img src="/assets/img/2024-06-19-PythonStreamlitAndGPT4HowToMapUNHCRRefugeeData_1.png" alt="이미지"></p>
<p>이 프로젝트에서는 각 난민의 출신 국가와 피난국을 검색해보겠어요.</p>
<p>이 데이터셋은 Streamlit/Plotly 코드 생성의 힘을 보여주는 완벽한 데이터셋입니다.</p>
<p>이 데이터를 사용하여 난민 데이터를 보여주는 전 세계 지도를 만들 수 있습니다:</p>
<ul>
<li>출신 국가 - 피정국이 어디로 이동하고 있는지</li>
<li>피정 국가 - 피정국이 어디에서 오고 있는지</li>
</ul>
<p>데이터셋을 다운로드하면 스프레드시트 형식으로 열어서 다루고 있는 내용을 확인할 수 있습니다:</p>
<p><img src="/assets/img/2024-06-19-PythonStreamlitAndGPT4HowToMapUNHCRRefugeeData_2.png" alt="이미지"></p>
<p>이 프로젝트에 관심 있는 데이터 필드는 다음과 같습니다:</p>
<ul>
<li>출신 국가 (3자리 ISO 코드 포함) - 망명을 찾는 사람이 어디에서 왔는지</li>
<li>망명국 (3자리 ISO 코드 포함) - 실제로 망명을 찾는 사람이 있는 곳</li>
<li>인정된 결정 - 망명을 찾는 사람이 수용되었는지 (국가별 숫자 합계)</li>
</ul>
<p>출신 국가와 망명 국가 모두 코로플레스 맵을 만드는 데 사용할 수 있는 3자리 ISO 코드가 있습니다.</p>
<p>이 정말 유용하네요! 맵 생성을 크게 간소화해줍니다.</p>
<p>이제 GPT-4 프롬프트로 넘어가겠습니다!</p>
<h2>단계 1: 데이터셋 로드, GPT-4 분석을 위한 프롬프트</h2>
<p>먼저, 데이터셋에 있는 필드와 값에 대한 이해가 GPT-4에게 있는지 확인해야 합니다. 그러므로 먼저 파일을 채팅 창에 업로드하고 GPT-4의 분석을 요청해보겠습니다:</p>
<p><img src="/assets/img/2024-06-19-PythonStreamlitAndGPT4HowToMapUNHCRRefugeeData_3.png" alt="PythonStreamlitAndGPT4HowToMapUNHCRRefugeeData_3"></p>
<p>GPT-4는 각 필드에 대한 설명을 답변합니다.</p>
<p><img src="/assets/img/2024-06-19-PythonStreamlitAndGPT4HowToMapUNHCRRefugeeData_4.png" alt="PythonStreamlitAndGPT4HowToMapUNHCRRefugeeData_4"></p>
<p>간결함을 위해 데이터 시각화에 필요한 필드만 포함했습니다. GPT-4의 답변에서 데이터 세트의 필드에 대한 확실한 이해가 엿보입니다.</p>
<p>좋아요 — 이제 GPT-4에게 데이터 시각화를 위한 입력을 준비했습니다.</p>
<h1>단계 2: 첫 번째 지도 시각화 생성</h1>
<p>먼저, 우리는 망명국을 선택할 수 있는 지도를 만들고 싶습니다 — 망명 신청자의 출신 국가를 어디에서 오는지 확인할 수 있도록 해보세요.</p>
<p>GPT-4에게 알려주세요: 제공된 데이터 세트를 사용하여 사용자가 드롭다운 메뉴에서 국가를 선택할 수있는 Streamlit 애플리케이션을 만들어주세요. 이 애플리케이션은 '인정 결정' 필드를 사용하여 출신 국가의 숫자를 보여주는 Plotly express 코로플레스 맵을 표시해야 합니다.</p>
<p>결과 GPT-4에서 코드를 Markdown 형식으로 변경하였습니다:</p>
<pre><code class="hljs language-python"><span class="hljs-keyword">import</span> streamlit <span class="hljs-keyword">as</span> st
<span class="hljs-keyword">import</span> pandas <span class="hljs-keyword">as</span> pd
<span class="hljs-keyword">import</span> plotly.express <span class="hljs-keyword">as</span> px

<span class="hljs-comment"># 데이터셋 불러오기</span>
file_path = <span class="hljs-string">'asylum-decisions.csv'</span>  <span class="hljs-comment"># 필요시 경로 업데이트</span>
asylum_data = pd.read_csv(file_path)

<span class="hljs-comment"># Streamlit 앱 생성</span>
st.title(<span class="hljs-string">'Asylum Decisions Analysis'</span>)

<span class="hljs-comment"># 망신국가 선택을 위한 드롭다운 메뉴</span>
country_of_asylum = st.selectbox(
    <span class="hljs-string">'Select a Country of Asylum:'</span>,
    asylum_data[<span class="hljs-string">'Country of asylum'</span>].unique()
)

<span class="hljs-comment"># 선택한 망신국가 기반으로 데이터 필터링</span>
filtered_data = asylum_data[asylum_data[<span class="hljs-string">'Country of asylum'</span>] == country_of_asylum]

<span class="hljs-comment"># 출신국가별로 그룹화하고 인정된 결정 수 합산</span>
grouped_data = filtered_data.groupby(<span class="hljs-string">'Country of origin (ISO)'</span>).<span class="hljs-built_in">sum</span>().reset_index()

<span class="hljs-comment"># 코로플레스 맵 생성</span>
fig = px.choropleth(
    grouped_data,
    locations=<span class="hljs-string">'Country of origin (ISO)'</span>,
    color=<span class="hljs-string">'Recognized decisions'</span>,
    hover_name=<span class="hljs-string">'Country of origin (ISO)'</span>,
    color_continuous_scale=px.colors.sequential.Plasma,
    labels={<span class="hljs-string">'Recognized decisions'</span>: <span class="hljs-string">'Recognized Decisions'</span>},
    title=<span class="hljs-string">f'Recognized Decisions for Asylum Seekers in <span class="hljs-subst">{country_of_asylum}</span>'</span>
)

<span class="hljs-comment"># 맵 출력</span>
st.plotly_chart(fig)

<span class="hljs-comment"># 상세 데이터를 표로 추가하여 표시</span>
st.write(<span class="hljs-string">'Detailed Data:'</span>, grouped_data)
</code></pre>
<p>해당 코드는 상호작용 웹 앱을 만드는 데 사용되는 streamlit, 데이터 조작 및 분석에 사용되는 pandas, 시각화를 만드는 데 사용되는 plotly.express 등 관련 라이브러리를 포함하고 있어요.</p>
<p>업로드한 데이터 세트에 액세스하는 코드이며 이를 사용하여 데이터 프레임을 만듭니다(pandas 라이브러리 사용). 데이터 프레임은 데이터 시각화를 위한 가장 좋은 방법입니다. 데이터 프레임은 그런 다음 Plotly express 함수 choropleth()로로드되며 이 함수는 각 원본 국가의 숫자(인식된 결정)를 보여주는 전역 맵을 생성합니다.</p>
<p>이 코드를 즐겨 사용하는 Python 편집기(저는 PyCharm을 사용합니다)에 복사하여 붙여넣기하고 Python 파일(예: streamlit_map01.py)로 저장할 수 있습니다.</p>
<p>이 프로젝트에 대한 제 예시 PyCharm 작업 환경은 다음과 같습니다:</p>
<p><img src="/assets/img/2024-06-19-PythonStreamlitAndGPT4HowToMapUNHCRRefugeeData_5.png" alt="Image"></p>
<p>PyCharm을 사용하면 내장 터미널 창(보기/도구 창/터미널)을 사용하여 새 Streamlit 애플리케이션을 실행할 수 있습니다:</p>
<p><img src="/assets/img/2024-06-19-PythonStreamlitAndGPT4HowToMapUNHCRRefugeeData_6.png" alt="이미지"></p>
<p>그리고 새 코드를 실행한 결과:</p>
<p><img src="/assets/img/2024-06-19-PythonStreamlitAndGPT4HowToMapUNHCRRefugeeData_7.png" alt="이미지"></p>
<p>와우, 그냥 그렇게하면, 사용자가 원산지 국가를 선택할 수있는 인터랙티브 애플리케이션이 만들어졌어요. 애플리케이션에서 캐나다가 선택되어 있고, 원산지 국가들이 표시되어 있어요.</p>
<p>정말 멋진 시작이에요! 하지만 더 개선할 수 있을 것 같아요.</p>
<p>사용자가 연도별로 선택할 수 있게하여 추가적인 상호작용을 추가해 봅시다.</p>
<h1>단계 3: 연도별로 표시하기 위한 슬라이더 추가</h1>
<p>이제 사용자가 연도를 선택할 수 있도록 슬라이더를 추가하여 세분화 수준을 한 단계 더 높일 수 있습니다(현재는 데이터 집합의 모든 연도를 표시 중입니다). GPT-4에 추가 작업을 요청해 보겠습니다.</p>
<p>GPT-4에 제안: 좋아요, 사용자가 연도를 선택할 수 있도록 슬라이더를 추가하고, 크로플레스 맵에는 해당 연도의 결과만 표시하도록 해주세요.</p>
<p>코드의 주요 부분은 동일하지만, GPT-4가 사용자가 국가를 선택한 후 추가 필터를 추가하는 슬라이더 코드를 추가할 것입니다.</p>
<p>다음은 추가 코드의 예시입니다(간결하게 표현):</p>
<pre><code class="hljs language-js"># 연도를 선택할 수 있는 슬라이더
year = st.<span class="hljs-title function_">slider</span>(
    <span class="hljs-string">'연도를 선택하세요:'</span>,
    <span class="hljs-title function_">int</span>(asylum_data[<span class="hljs-string">'Year'</span>].<span class="hljs-title function_">min</span>()),
    <span class="hljs-title function_">int</span>(asylum_data[<span class="hljs-string">'Year'</span>].<span class="hljs-title function_">max</span>()),
    <span class="hljs-title function_">int</span>(asylum_data[<span class="hljs-string">'Year'</span>].<span class="hljs-title function_">min</span>())
)

# 선택된 국가와 연도에 따라 데이터 필터링
filtered_data = asylum_data[(asylum_data[<span class="hljs-string">'Country of asylum'</span>] == country_of_asylum) &#x26; (asylum_data[<span class="hljs-string">'Year'</span>] == year)]

# 원산지 국가별로 그룹화하여 인정된 결정 수 합산
grouped_data = filtered_data.<span class="hljs-title function_">groupby</span>(<span class="hljs-string">'Country of origin (ISO)'</span>).<span class="hljs-title function_">sum</span>().<span class="hljs-title function_">reset_index</span>()
</code></pre>
<p>좋아요! 우리는 새로운 Python 코드의 전체 부분을 복사하여 붙여넣거나 저장할 수 있습니다(나의 예시에서 streamlit_map02.py 파일을 생성했습니다).</p>
<p>새로운 Python 코드의 실행 결과:</p>
<p>당신이 볼 수있듯이, 큰 변화는 물론, 사용자가 연도를 선택할 수 있도록 드롭다운 바로 아래에 슬라이더를 추가한 것입니다.</p>
<p>특정 나라 출신 사람들이 어떤 나라로 피난처 신청을 하는지도 볼 수 있으면 어떨까요? 이 데이터도 이미 데이터 세트에 포함되어 있습니다. 이미 연도와 나라별 선택 기능을 추가했습니다. 이 정보를 보려면 첫 번째 지도 옆에 두 번째 지도를 추가하여 접근 가능한 데이터를 두 배로 늘리면 됩니다.</p>
<p>출발!</p>
<h1>단계 4: 두 번째 코로플레스 맵 추가하기</h1>
<p>우리는 국가의 난민국가를 보여주는 두 번째 지도를 추가할 수 있습니다. 그리고 이것을 우리가 만든 첫 번째 지도 옆에 놓을 수 있습니다.</p>
<p>이 두 지도를 함께 보면 선택한 국가에 대한 두 가지 정보를 확인할 수 있습니다:</p>
<ul>
<li>어느 국가에서 난민을 구합니다</li>
<li>어느 국가로 난민을 보냅니다</li>
</ul>
<p>GPT-4에게 지침: 슬라이더와 드롭다운을 사용하여 선택한 국가에 대한 피난지 국가를 표시하는 두 번째 지도를 추가하십시오(첫 번째 지도 옆에 놓으세요. 지도는 각각 자체 컨테이너에 있어야 합니다). 두 지도가 모두 초기 연도와 드롭다운에서 업데이트되도록 해주세요. 두 번째 지도의 색상 체계를 'YlOrRd'로 변경해주세요.</p>
<p>GPT-4가 코드를 생성해줍니다. 여러분은 자신이 선호하는 편집기에 다시 복사하여 붙여넣기/저장/실행할 수 있습니다 (저는 streamlit_map03.py라는 세 번째 파일을 만들었습니다).</p>
<p>참고: 이 프롬프트를 올바르게 만드는 데 몇 차례 시도했습니다. 명시적으로 언급되지 않는 한 GPT-4는 두 번째 지도를 첫 번째 드롭다운과 연결하지 않을 수도 있습니다(또는 두 번째 드롭다운을 추가할 수도 있습니다).</p>
<p>최종 디스플레이:</p>
<p><img src="/assets/img/2024-06-19-PythonStreamlitAndGPT4HowToMapUNHCRRefugeeData_9.png" alt="이미지"></p>
<p>와우, 정말 인상적이에요. 데이터셋과 3가지 모듈식 프롬프트로, 행성상 모든 국가 간 난민 이동을 볼 수 있는 대화형 웹 애플리케이션을 만들었어요.</p>
<p>그리고 GPT-4는 이 모든 것을 100줄 미만의 코드로 (내 최종 Python 파일에는 70줄) 완성했어요.</p>
<p>좋은 경험이 되었기를 바라요. 함께 해줘서 고마워요!</p>
<h1>요약하자면...</h1>
<p>위의 GPT-4 프롬프트 단계를 모듈식으로 따르면 대부분의 사람이 수동으로 코딩하는 데 소요되는 시간의 일부분에 웹 응용 프로그램을 매우 유용하게 개발할 수 있습니다.</p>
<p>그러나 여기서 주의해야 할 점이 있습니다 — GPT-4는 응답에서 정확하지 않습니다. 코드나 결과가 여기에 표시된 것과 정확히 같아야 한다는 보장은 없습니다. 이것이 오늘의 LLM 환경의 특성입니다.</p>
<p>내 경험상 GPT-4는 계속해서 작동하는 코드를 생성할 수 있지만, 그것이 생성 될 때마다 동일한 코드는 아닙니다.</p>
<p>전문가 팁: 마음에 드는 작동 코드 덩어리(레이아웃/색상 선택/기능 등)가 있으면, 다음 모듈식 단계에 사용하기 위해 이 코드를 GPT-4에 다시 피드해야 합니다. 이렇게 하면 GPT-4가 진로를 유지하는 데 도움이 됩니다.</p>
<p>이런 프롬프트들을 한 번 시도해 보세요! 그리고 제게 어땠는지 꼭 알려주세요.</p>
<p>읽어 주셔서 감사합니다.</p>
<p>만약 이런 종류의 이야기가 당신에게 딱 맞고, 나를 작가로서 지원하고 싶다면, 제 Substack을 구독해 주세요.</p>
<p>Substack에서는 나의 독자들만을 위해 매주 뉴스레터와 다른 플랫폼에서 찾을 수 없는 기사들을 게시합니다.</p>
</body>
</html>
</div></article></div></main></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"title":"파이썬 Streamlit과 GPT4 UNHCR 난민 데이터 매핑 방법","description":"","date":"2024-06-19 05:02","slug":"2024-06-19-PythonStreamlitAndGPT4HowToMapUNHCRRefugeeData","content":"\n\n\n\n![Python Streamlit](/assets/img/2024-06-19-PythonStreamlitAndGPT4HowToMapUNHCRRefugeeData_0.png)\n\n파이썬 Streamlit은 상호 작용적인 웹 인터페이스를 만드는 놀라운 프레임워크입니다. GPT-4는 빠르게 작동하는 Streamlit 코드를 만들어 줄 수 있어요.\n\n파이썬 Plotly와 함께 사용하면 데이터 시각화에 아름다운 지도와 차트를 손쉽게 만들 수 있어요.\n\n대부분의 경우, 제가 증명해줄 필요가 있죠. 그러니까 제가 어떻게 보여줄지 기대해 주세요.\n\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n웹 인터페이스에서 CSV 데이터 세트를 사용하여 다양한 데이터 시각화를 만들 수 있습니다. 추가로 슬라이더 및 드롭다운 메뉴와 같은 상호 작용 레이어를 여러 개 추가할 수도 있습니다. 이 모든 작업은 데이터세트와 GPT-4에 몇 가지 간단한 프롬프트만 필요합니다.\n\n그럼 데이터세트를 찾아보고 이를 실행해 봅시다.\n\n# 데이터 세트 — UNHCR 난민 데이터\n\nUNHCR(UN High Commission for Refugees)는 전 세계적으로 난민의 움직임에 대한 통계를 추적합니다.\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n데이터는 여기에서 자유롭게 액세스할 수 있어요.\n\n다운로드 페이지로 이동한 후에는 선택한 데이터에 대해 더 자세히 볼 수 있어요:\n\n![이미지](/assets/img/2024-06-19-PythonStreamlitAndGPT4HowToMapUNHCRRefugeeData_1.png)\n\n이 프로젝트에서는 각 난민의 출신 국가와 피난국을 검색해보겠어요.\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n이 데이터셋은 Streamlit/Plotly 코드 생성의 힘을 보여주는 완벽한 데이터셋입니다.\n\n이 데이터를 사용하여 난민 데이터를 보여주는 전 세계 지도를 만들 수 있습니다:\n\n- 출신 국가 - 피정국이 어디로 이동하고 있는지\n- 피정 국가 - 피정국이 어디에서 오고 있는지\n\n데이터셋을 다운로드하면 스프레드시트 형식으로 열어서 다루고 있는 내용을 확인할 수 있습니다:\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n\n![이미지](/assets/img/2024-06-19-PythonStreamlitAndGPT4HowToMapUNHCRRefugeeData_2.png)\n\n이 프로젝트에 관심 있는 데이터 필드는 다음과 같습니다:\n\n- 출신 국가 (3자리 ISO 코드 포함) - 망명을 찾는 사람이 어디에서 왔는지\n- 망명국 (3자리 ISO 코드 포함) - 실제로 망명을 찾는 사람이 있는 곳\n- 인정된 결정 - 망명을 찾는 사람이 수용되었는지 (국가별 숫자 합계)\n\n출신 국가와 망명 국가 모두 코로플레스 맵을 만드는 데 사용할 수 있는 3자리 ISO 코드가 있습니다.\n\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n이 정말 유용하네요! 맵 생성을 크게 간소화해줍니다.\n\n이제 GPT-4 프롬프트로 넘어가겠습니다!\n\n## 단계 1: 데이터셋 로드, GPT-4 분석을 위한 프롬프트\n\n먼저, 데이터셋에 있는 필드와 값에 대한 이해가 GPT-4에게 있는지 확인해야 합니다. 그러므로 먼저 파일을 채팅 창에 업로드하고 GPT-4의 분석을 요청해보겠습니다:\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n![PythonStreamlitAndGPT4HowToMapUNHCRRefugeeData_3](/assets/img/2024-06-19-PythonStreamlitAndGPT4HowToMapUNHCRRefugeeData_3.png)\n\nGPT-4는 각 필드에 대한 설명을 답변합니다.\n\n![PythonStreamlitAndGPT4HowToMapUNHCRRefugeeData_4](/assets/img/2024-06-19-PythonStreamlitAndGPT4HowToMapUNHCRRefugeeData_4.png)\n\n간결함을 위해 데이터 시각화에 필요한 필드만 포함했습니다. GPT-4의 답변에서 데이터 세트의 필드에 대한 확실한 이해가 엿보입니다.\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n좋아요 — 이제 GPT-4에게 데이터 시각화를 위한 입력을 준비했습니다.\n\n# 단계 2: 첫 번째 지도 시각화 생성\n\n먼저, 우리는 망명국을 선택할 수 있는 지도를 만들고 싶습니다 — 망명 신청자의 출신 국가를 어디에서 오는지 확인할 수 있도록 해보세요.\n\nGPT-4에게 알려주세요: 제공된 데이터 세트를 사용하여 사용자가 드롭다운 메뉴에서 국가를 선택할 수있는 Streamlit 애플리케이션을 만들어주세요. 이 애플리케이션은 '인정 결정' 필드를 사용하여 출신 국가의 숫자를 보여주는 Plotly express 코로플레스 맵을 표시해야 합니다.\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n결과 GPT-4에서 코드를 Markdown 형식으로 변경하였습니다:\n\n```python\nimport streamlit as st\nimport pandas as pd\nimport plotly.express as px\n\n# 데이터셋 불러오기\nfile_path = 'asylum-decisions.csv'  # 필요시 경로 업데이트\nasylum_data = pd.read_csv(file_path)\n\n# Streamlit 앱 생성\nst.title('Asylum Decisions Analysis')\n\n# 망신국가 선택을 위한 드롭다운 메뉴\ncountry_of_asylum = st.selectbox(\n    'Select a Country of Asylum:',\n    asylum_data['Country of asylum'].unique()\n)\n\n# 선택한 망신국가 기반으로 데이터 필터링\nfiltered_data = asylum_data[asylum_data['Country of asylum'] == country_of_asylum]\n\n# 출신국가별로 그룹화하고 인정된 결정 수 합산\ngrouped_data = filtered_data.groupby('Country of origin (ISO)').sum().reset_index()\n\n# 코로플레스 맵 생성\nfig = px.choropleth(\n    grouped_data,\n    locations='Country of origin (ISO)',\n    color='Recognized decisions',\n    hover_name='Country of origin (ISO)',\n    color_continuous_scale=px.colors.sequential.Plasma,\n    labels={'Recognized decisions': 'Recognized Decisions'},\n    title=f'Recognized Decisions for Asylum Seekers in {country_of_asylum}'\n)\n\n# 맵 출력\nst.plotly_chart(fig)\n\n# 상세 데이터를 표로 추가하여 표시\nst.write('Detailed Data:', grouped_data)\n```\n\n해당 코드는 상호작용 웹 앱을 만드는 데 사용되는 streamlit, 데이터 조작 및 분석에 사용되는 pandas, 시각화를 만드는 데 사용되는 plotly.express 등 관련 라이브러리를 포함하고 있어요.\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n업로드한 데이터 세트에 액세스하는 코드이며 이를 사용하여 데이터 프레임을 만듭니다(pandas 라이브러리 사용). 데이터 프레임은 데이터 시각화를 위한 가장 좋은 방법입니다. 데이터 프레임은 그런 다음 Plotly express 함수 choropleth()로로드되며 이 함수는 각 원본 국가의 숫자(인식된 결정)를 보여주는 전역 맵을 생성합니다.\n\n이 코드를 즐겨 사용하는 Python 편집기(저는 PyCharm을 사용합니다)에 복사하여 붙여넣기하고 Python 파일(예: streamlit_map01.py)로 저장할 수 있습니다.\n\n이 프로젝트에 대한 제 예시 PyCharm 작업 환경은 다음과 같습니다:\n\n![Image](/assets/img/2024-06-19-PythonStreamlitAndGPT4HowToMapUNHCRRefugeeData_5.png)\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\nPyCharm을 사용하면 내장 터미널 창(보기/도구 창/터미널)을 사용하여 새 Streamlit 애플리케이션을 실행할 수 있습니다:\n\n![이미지](/assets/img/2024-06-19-PythonStreamlitAndGPT4HowToMapUNHCRRefugeeData_6.png)\n\n그리고 새 코드를 실행한 결과:\n\n![이미지](/assets/img/2024-06-19-PythonStreamlitAndGPT4HowToMapUNHCRRefugeeData_7.png)\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n와우, 그냥 그렇게하면, 사용자가 원산지 국가를 선택할 수있는 인터랙티브 애플리케이션이 만들어졌어요. 애플리케이션에서 캐나다가 선택되어 있고, 원산지 국가들이 표시되어 있어요.\n\n정말 멋진 시작이에요! 하지만 더 개선할 수 있을 것 같아요.\n\n사용자가 연도별로 선택할 수 있게하여 추가적인 상호작용을 추가해 봅시다.\n\n# 단계 3: 연도별로 표시하기 위한 슬라이더 추가\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n이제 사용자가 연도를 선택할 수 있도록 슬라이더를 추가하여 세분화 수준을 한 단계 더 높일 수 있습니다(현재는 데이터 집합의 모든 연도를 표시 중입니다). GPT-4에 추가 작업을 요청해 보겠습니다.\n\nGPT-4에 제안: 좋아요, 사용자가 연도를 선택할 수 있도록 슬라이더를 추가하고, 크로플레스 맵에는 해당 연도의 결과만 표시하도록 해주세요.\n\n코드의 주요 부분은 동일하지만, GPT-4가 사용자가 국가를 선택한 후 추가 필터를 추가하는 슬라이더 코드를 추가할 것입니다.\n\n다음은 추가 코드의 예시입니다(간결하게 표현):\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n```js\n# 연도를 선택할 수 있는 슬라이더\nyear = st.slider(\n    '연도를 선택하세요:',\n    int(asylum_data['Year'].min()),\n    int(asylum_data['Year'].max()),\n    int(asylum_data['Year'].min())\n)\n\n# 선택된 국가와 연도에 따라 데이터 필터링\nfiltered_data = asylum_data[(asylum_data['Country of asylum'] == country_of_asylum) \u0026 (asylum_data['Year'] == year)]\n\n# 원산지 국가별로 그룹화하여 인정된 결정 수 합산\ngrouped_data = filtered_data.groupby('Country of origin (ISO)').sum().reset_index()\n```\n\n좋아요! 우리는 새로운 Python 코드의 전체 부분을 복사하여 붙여넣거나 저장할 수 있습니다(나의 예시에서 streamlit_map02.py 파일을 생성했습니다).\n\n새로운 Python 코드의 실행 결과:\n\n\u003cimg src=\"/assets/img/2024-06-19-PythonStreamlitAndGPT4HowToMapUNHCRRefugeeData_8.png\" /\u003e\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n당신이 볼 수있듯이, 큰 변화는 물론, 사용자가 연도를 선택할 수 있도록 드롭다운 바로 아래에 슬라이더를 추가한 것입니다.\n\n특정 나라 출신 사람들이 어떤 나라로 피난처 신청을 하는지도 볼 수 있으면 어떨까요? 이 데이터도 이미 데이터 세트에 포함되어 있습니다. 이미 연도와 나라별 선택 기능을 추가했습니다. 이 정보를 보려면 첫 번째 지도 옆에 두 번째 지도를 추가하여 접근 가능한 데이터를 두 배로 늘리면 됩니다.\n\n출발!\n\n# 단계 4: 두 번째 코로플레스 맵 추가하기\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n우리는 국가의 난민국가를 보여주는 두 번째 지도를 추가할 수 있습니다. 그리고 이것을 우리가 만든 첫 번째 지도 옆에 놓을 수 있습니다.\n\n이 두 지도를 함께 보면 선택한 국가에 대한 두 가지 정보를 확인할 수 있습니다:\n\n- 어느 국가에서 난민을 구합니다\n- 어느 국가로 난민을 보냅니다\n\nGPT-4에게 지침: 슬라이더와 드롭다운을 사용하여 선택한 국가에 대한 피난지 국가를 표시하는 두 번째 지도를 추가하십시오(첫 번째 지도 옆에 놓으세요. 지도는 각각 자체 컨테이너에 있어야 합니다). 두 지도가 모두 초기 연도와 드롭다운에서 업데이트되도록 해주세요. 두 번째 지도의 색상 체계를 'YlOrRd'로 변경해주세요.\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\nGPT-4가 코드를 생성해줍니다. 여러분은 자신이 선호하는 편집기에 다시 복사하여 붙여넣기/저장/실행할 수 있습니다 (저는 streamlit_map03.py라는 세 번째 파일을 만들었습니다).\n\n참고: 이 프롬프트를 올바르게 만드는 데 몇 차례 시도했습니다. 명시적으로 언급되지 않는 한 GPT-4는 두 번째 지도를 첫 번째 드롭다운과 연결하지 않을 수도 있습니다(또는 두 번째 드롭다운을 추가할 수도 있습니다).\n\n최종 디스플레이:\n\n![이미지](/assets/img/2024-06-19-PythonStreamlitAndGPT4HowToMapUNHCRRefugeeData_9.png)\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n와우, 정말 인상적이에요. 데이터셋과 3가지 모듈식 프롬프트로, 행성상 모든 국가 간 난민 이동을 볼 수 있는 대화형 웹 애플리케이션을 만들었어요.\n\n그리고 GPT-4는 이 모든 것을 100줄 미만의 코드로 (내 최종 Python 파일에는 70줄) 완성했어요.\n\n좋은 경험이 되었기를 바라요. 함께 해줘서 고마워요!\n\n# 요약하자면...\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n위의 GPT-4 프롬프트 단계를 모듈식으로 따르면 대부분의 사람이 수동으로 코딩하는 데 소요되는 시간의 일부분에 웹 응용 프로그램을 매우 유용하게 개발할 수 있습니다.\n\n그러나 여기서 주의해야 할 점이 있습니다 — GPT-4는 응답에서 정확하지 않습니다. 코드나 결과가 여기에 표시된 것과 정확히 같아야 한다는 보장은 없습니다. 이것이 오늘의 LLM 환경의 특성입니다.\n\n내 경험상 GPT-4는 계속해서 작동하는 코드를 생성할 수 있지만, 그것이 생성 될 때마다 동일한 코드는 아닙니다.\n\n전문가 팁: 마음에 드는 작동 코드 덩어리(레이아웃/색상 선택/기능 등)가 있으면, 다음 모듈식 단계에 사용하기 위해 이 코드를 GPT-4에 다시 피드해야 합니다. 이렇게 하면 GPT-4가 진로를 유지하는 데 도움이 됩니다.\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n이런 프롬프트들을 한 번 시도해 보세요! 그리고 제게 어땠는지 꼭 알려주세요.\n\n읽어 주셔서 감사합니다.\n\n만약 이런 종류의 이야기가 당신에게 딱 맞고, 나를 작가로서 지원하고 싶다면, 제 Substack을 구독해 주세요.\n\nSubstack에서는 나의 독자들만을 위해 매주 뉴스레터와 다른 플랫폼에서 찾을 수 없는 기사들을 게시합니다.","ogImage":{"url":"/assets/img/2024-06-19-PythonStreamlitAndGPT4HowToMapUNHCRRefugeeData_0.png"},"coverImage":"/assets/img/2024-06-19-PythonStreamlitAndGPT4HowToMapUNHCRRefugeeData_0.png","tag":["Tech"],"readingTime":8},"content":"\u003c!doctype html\u003e\n\u003chtml lang=\"en\"\u003e\n\u003chead\u003e\n\u003cmeta charset=\"utf-8\"\u003e\n\u003cmeta content=\"width=device-width, initial-scale=1\" name=\"viewport\"\u003e\n\u003c/head\u003e\n\u003cbody\u003e\n\u003cp\u003e\u003cimg src=\"/assets/img/2024-06-19-PythonStreamlitAndGPT4HowToMapUNHCRRefugeeData_0.png\" alt=\"Python Streamlit\"\u003e\u003c/p\u003e\n\u003cp\u003e파이썬 Streamlit은 상호 작용적인 웹 인터페이스를 만드는 놀라운 프레임워크입니다. GPT-4는 빠르게 작동하는 Streamlit 코드를 만들어 줄 수 있어요.\u003c/p\u003e\n\u003cp\u003e파이썬 Plotly와 함께 사용하면 데이터 시각화에 아름다운 지도와 차트를 손쉽게 만들 수 있어요.\u003c/p\u003e\n\u003cp\u003e대부분의 경우, 제가 증명해줄 필요가 있죠. 그러니까 제가 어떻게 보여줄지 기대해 주세요.\u003c/p\u003e\n\u003cp\u003e웹 인터페이스에서 CSV 데이터 세트를 사용하여 다양한 데이터 시각화를 만들 수 있습니다. 추가로 슬라이더 및 드롭다운 메뉴와 같은 상호 작용 레이어를 여러 개 추가할 수도 있습니다. 이 모든 작업은 데이터세트와 GPT-4에 몇 가지 간단한 프롬프트만 필요합니다.\u003c/p\u003e\n\u003cp\u003e그럼 데이터세트를 찾아보고 이를 실행해 봅시다.\u003c/p\u003e\n\u003ch1\u003e데이터 세트 — UNHCR 난민 데이터\u003c/h1\u003e\n\u003cp\u003eUNHCR(UN High Commission for Refugees)는 전 세계적으로 난민의 움직임에 대한 통계를 추적합니다.\u003c/p\u003e\n\u003cp\u003e데이터는 여기에서 자유롭게 액세스할 수 있어요.\u003c/p\u003e\n\u003cp\u003e다운로드 페이지로 이동한 후에는 선택한 데이터에 대해 더 자세히 볼 수 있어요:\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/assets/img/2024-06-19-PythonStreamlitAndGPT4HowToMapUNHCRRefugeeData_1.png\" alt=\"이미지\"\u003e\u003c/p\u003e\n\u003cp\u003e이 프로젝트에서는 각 난민의 출신 국가와 피난국을 검색해보겠어요.\u003c/p\u003e\n\u003cp\u003e이 데이터셋은 Streamlit/Plotly 코드 생성의 힘을 보여주는 완벽한 데이터셋입니다.\u003c/p\u003e\n\u003cp\u003e이 데이터를 사용하여 난민 데이터를 보여주는 전 세계 지도를 만들 수 있습니다:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e출신 국가 - 피정국이 어디로 이동하고 있는지\u003c/li\u003e\n\u003cli\u003e피정 국가 - 피정국이 어디에서 오고 있는지\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e데이터셋을 다운로드하면 스프레드시트 형식으로 열어서 다루고 있는 내용을 확인할 수 있습니다:\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/assets/img/2024-06-19-PythonStreamlitAndGPT4HowToMapUNHCRRefugeeData_2.png\" alt=\"이미지\"\u003e\u003c/p\u003e\n\u003cp\u003e이 프로젝트에 관심 있는 데이터 필드는 다음과 같습니다:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e출신 국가 (3자리 ISO 코드 포함) - 망명을 찾는 사람이 어디에서 왔는지\u003c/li\u003e\n\u003cli\u003e망명국 (3자리 ISO 코드 포함) - 실제로 망명을 찾는 사람이 있는 곳\u003c/li\u003e\n\u003cli\u003e인정된 결정 - 망명을 찾는 사람이 수용되었는지 (국가별 숫자 합계)\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e출신 국가와 망명 국가 모두 코로플레스 맵을 만드는 데 사용할 수 있는 3자리 ISO 코드가 있습니다.\u003c/p\u003e\n\u003cp\u003e이 정말 유용하네요! 맵 생성을 크게 간소화해줍니다.\u003c/p\u003e\n\u003cp\u003e이제 GPT-4 프롬프트로 넘어가겠습니다!\u003c/p\u003e\n\u003ch2\u003e단계 1: 데이터셋 로드, GPT-4 분석을 위한 프롬프트\u003c/h2\u003e\n\u003cp\u003e먼저, 데이터셋에 있는 필드와 값에 대한 이해가 GPT-4에게 있는지 확인해야 합니다. 그러므로 먼저 파일을 채팅 창에 업로드하고 GPT-4의 분석을 요청해보겠습니다:\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/assets/img/2024-06-19-PythonStreamlitAndGPT4HowToMapUNHCRRefugeeData_3.png\" alt=\"PythonStreamlitAndGPT4HowToMapUNHCRRefugeeData_3\"\u003e\u003c/p\u003e\n\u003cp\u003eGPT-4는 각 필드에 대한 설명을 답변합니다.\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/assets/img/2024-06-19-PythonStreamlitAndGPT4HowToMapUNHCRRefugeeData_4.png\" alt=\"PythonStreamlitAndGPT4HowToMapUNHCRRefugeeData_4\"\u003e\u003c/p\u003e\n\u003cp\u003e간결함을 위해 데이터 시각화에 필요한 필드만 포함했습니다. GPT-4의 답변에서 데이터 세트의 필드에 대한 확실한 이해가 엿보입니다.\u003c/p\u003e\n\u003cp\u003e좋아요 — 이제 GPT-4에게 데이터 시각화를 위한 입력을 준비했습니다.\u003c/p\u003e\n\u003ch1\u003e단계 2: 첫 번째 지도 시각화 생성\u003c/h1\u003e\n\u003cp\u003e먼저, 우리는 망명국을 선택할 수 있는 지도를 만들고 싶습니다 — 망명 신청자의 출신 국가를 어디에서 오는지 확인할 수 있도록 해보세요.\u003c/p\u003e\n\u003cp\u003eGPT-4에게 알려주세요: 제공된 데이터 세트를 사용하여 사용자가 드롭다운 메뉴에서 국가를 선택할 수있는 Streamlit 애플리케이션을 만들어주세요. 이 애플리케이션은 '인정 결정' 필드를 사용하여 출신 국가의 숫자를 보여주는 Plotly express 코로플레스 맵을 표시해야 합니다.\u003c/p\u003e\n\u003cp\u003e결과 GPT-4에서 코드를 Markdown 형식으로 변경하였습니다:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-python\"\u003e\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e streamlit \u003cspan class=\"hljs-keyword\"\u003eas\u003c/span\u003e st\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e pandas \u003cspan class=\"hljs-keyword\"\u003eas\u003c/span\u003e pd\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e plotly.express \u003cspan class=\"hljs-keyword\"\u003eas\u003c/span\u003e px\n\n\u003cspan class=\"hljs-comment\"\u003e# 데이터셋 불러오기\u003c/span\u003e\nfile_path = \u003cspan class=\"hljs-string\"\u003e'asylum-decisions.csv'\u003c/span\u003e  \u003cspan class=\"hljs-comment\"\u003e# 필요시 경로 업데이트\u003c/span\u003e\nasylum_data = pd.read_csv(file_path)\n\n\u003cspan class=\"hljs-comment\"\u003e# Streamlit 앱 생성\u003c/span\u003e\nst.title(\u003cspan class=\"hljs-string\"\u003e'Asylum Decisions Analysis'\u003c/span\u003e)\n\n\u003cspan class=\"hljs-comment\"\u003e# 망신국가 선택을 위한 드롭다운 메뉴\u003c/span\u003e\ncountry_of_asylum = st.selectbox(\n    \u003cspan class=\"hljs-string\"\u003e'Select a Country of Asylum:'\u003c/span\u003e,\n    asylum_data[\u003cspan class=\"hljs-string\"\u003e'Country of asylum'\u003c/span\u003e].unique()\n)\n\n\u003cspan class=\"hljs-comment\"\u003e# 선택한 망신국가 기반으로 데이터 필터링\u003c/span\u003e\nfiltered_data = asylum_data[asylum_data[\u003cspan class=\"hljs-string\"\u003e'Country of asylum'\u003c/span\u003e] == country_of_asylum]\n\n\u003cspan class=\"hljs-comment\"\u003e# 출신국가별로 그룹화하고 인정된 결정 수 합산\u003c/span\u003e\ngrouped_data = filtered_data.groupby(\u003cspan class=\"hljs-string\"\u003e'Country of origin (ISO)'\u003c/span\u003e).\u003cspan class=\"hljs-built_in\"\u003esum\u003c/span\u003e().reset_index()\n\n\u003cspan class=\"hljs-comment\"\u003e# 코로플레스 맵 생성\u003c/span\u003e\nfig = px.choropleth(\n    grouped_data,\n    locations=\u003cspan class=\"hljs-string\"\u003e'Country of origin (ISO)'\u003c/span\u003e,\n    color=\u003cspan class=\"hljs-string\"\u003e'Recognized decisions'\u003c/span\u003e,\n    hover_name=\u003cspan class=\"hljs-string\"\u003e'Country of origin (ISO)'\u003c/span\u003e,\n    color_continuous_scale=px.colors.sequential.Plasma,\n    labels={\u003cspan class=\"hljs-string\"\u003e'Recognized decisions'\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e'Recognized Decisions'\u003c/span\u003e},\n    title=\u003cspan class=\"hljs-string\"\u003ef'Recognized Decisions for Asylum Seekers in \u003cspan class=\"hljs-subst\"\u003e{country_of_asylum}\u003c/span\u003e'\u003c/span\u003e\n)\n\n\u003cspan class=\"hljs-comment\"\u003e# 맵 출력\u003c/span\u003e\nst.plotly_chart(fig)\n\n\u003cspan class=\"hljs-comment\"\u003e# 상세 데이터를 표로 추가하여 표시\u003c/span\u003e\nst.write(\u003cspan class=\"hljs-string\"\u003e'Detailed Data:'\u003c/span\u003e, grouped_data)\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e해당 코드는 상호작용 웹 앱을 만드는 데 사용되는 streamlit, 데이터 조작 및 분석에 사용되는 pandas, 시각화를 만드는 데 사용되는 plotly.express 등 관련 라이브러리를 포함하고 있어요.\u003c/p\u003e\n\u003cp\u003e업로드한 데이터 세트에 액세스하는 코드이며 이를 사용하여 데이터 프레임을 만듭니다(pandas 라이브러리 사용). 데이터 프레임은 데이터 시각화를 위한 가장 좋은 방법입니다. 데이터 프레임은 그런 다음 Plotly express 함수 choropleth()로로드되며 이 함수는 각 원본 국가의 숫자(인식된 결정)를 보여주는 전역 맵을 생성합니다.\u003c/p\u003e\n\u003cp\u003e이 코드를 즐겨 사용하는 Python 편집기(저는 PyCharm을 사용합니다)에 복사하여 붙여넣기하고 Python 파일(예: streamlit_map01.py)로 저장할 수 있습니다.\u003c/p\u003e\n\u003cp\u003e이 프로젝트에 대한 제 예시 PyCharm 작업 환경은 다음과 같습니다:\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/assets/img/2024-06-19-PythonStreamlitAndGPT4HowToMapUNHCRRefugeeData_5.png\" alt=\"Image\"\u003e\u003c/p\u003e\n\u003cp\u003ePyCharm을 사용하면 내장 터미널 창(보기/도구 창/터미널)을 사용하여 새 Streamlit 애플리케이션을 실행할 수 있습니다:\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/assets/img/2024-06-19-PythonStreamlitAndGPT4HowToMapUNHCRRefugeeData_6.png\" alt=\"이미지\"\u003e\u003c/p\u003e\n\u003cp\u003e그리고 새 코드를 실행한 결과:\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/assets/img/2024-06-19-PythonStreamlitAndGPT4HowToMapUNHCRRefugeeData_7.png\" alt=\"이미지\"\u003e\u003c/p\u003e\n\u003cp\u003e와우, 그냥 그렇게하면, 사용자가 원산지 국가를 선택할 수있는 인터랙티브 애플리케이션이 만들어졌어요. 애플리케이션에서 캐나다가 선택되어 있고, 원산지 국가들이 표시되어 있어요.\u003c/p\u003e\n\u003cp\u003e정말 멋진 시작이에요! 하지만 더 개선할 수 있을 것 같아요.\u003c/p\u003e\n\u003cp\u003e사용자가 연도별로 선택할 수 있게하여 추가적인 상호작용을 추가해 봅시다.\u003c/p\u003e\n\u003ch1\u003e단계 3: 연도별로 표시하기 위한 슬라이더 추가\u003c/h1\u003e\n\u003cp\u003e이제 사용자가 연도를 선택할 수 있도록 슬라이더를 추가하여 세분화 수준을 한 단계 더 높일 수 있습니다(현재는 데이터 집합의 모든 연도를 표시 중입니다). GPT-4에 추가 작업을 요청해 보겠습니다.\u003c/p\u003e\n\u003cp\u003eGPT-4에 제안: 좋아요, 사용자가 연도를 선택할 수 있도록 슬라이더를 추가하고, 크로플레스 맵에는 해당 연도의 결과만 표시하도록 해주세요.\u003c/p\u003e\n\u003cp\u003e코드의 주요 부분은 동일하지만, GPT-4가 사용자가 국가를 선택한 후 추가 필터를 추가하는 슬라이더 코드를 추가할 것입니다.\u003c/p\u003e\n\u003cp\u003e다음은 추가 코드의 예시입니다(간결하게 표현):\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e# 연도를 선택할 수 있는 슬라이더\nyear = st.\u003cspan class=\"hljs-title function_\"\u003eslider\u003c/span\u003e(\n    \u003cspan class=\"hljs-string\"\u003e'연도를 선택하세요:'\u003c/span\u003e,\n    \u003cspan class=\"hljs-title function_\"\u003eint\u003c/span\u003e(asylum_data[\u003cspan class=\"hljs-string\"\u003e'Year'\u003c/span\u003e].\u003cspan class=\"hljs-title function_\"\u003emin\u003c/span\u003e()),\n    \u003cspan class=\"hljs-title function_\"\u003eint\u003c/span\u003e(asylum_data[\u003cspan class=\"hljs-string\"\u003e'Year'\u003c/span\u003e].\u003cspan class=\"hljs-title function_\"\u003emax\u003c/span\u003e()),\n    \u003cspan class=\"hljs-title function_\"\u003eint\u003c/span\u003e(asylum_data[\u003cspan class=\"hljs-string\"\u003e'Year'\u003c/span\u003e].\u003cspan class=\"hljs-title function_\"\u003emin\u003c/span\u003e())\n)\n\n# 선택된 국가와 연도에 따라 데이터 필터링\nfiltered_data = asylum_data[(asylum_data[\u003cspan class=\"hljs-string\"\u003e'Country of asylum'\u003c/span\u003e] == country_of_asylum) \u0026#x26; (asylum_data[\u003cspan class=\"hljs-string\"\u003e'Year'\u003c/span\u003e] == year)]\n\n# 원산지 국가별로 그룹화하여 인정된 결정 수 합산\ngrouped_data = filtered_data.\u003cspan class=\"hljs-title function_\"\u003egroupby\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e'Country of origin (ISO)'\u003c/span\u003e).\u003cspan class=\"hljs-title function_\"\u003esum\u003c/span\u003e().\u003cspan class=\"hljs-title function_\"\u003ereset_index\u003c/span\u003e()\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e좋아요! 우리는 새로운 Python 코드의 전체 부분을 복사하여 붙여넣거나 저장할 수 있습니다(나의 예시에서 streamlit_map02.py 파일을 생성했습니다).\u003c/p\u003e\n\u003cp\u003e새로운 Python 코드의 실행 결과:\u003c/p\u003e\n\u003cp\u003e당신이 볼 수있듯이, 큰 변화는 물론, 사용자가 연도를 선택할 수 있도록 드롭다운 바로 아래에 슬라이더를 추가한 것입니다.\u003c/p\u003e\n\u003cp\u003e특정 나라 출신 사람들이 어떤 나라로 피난처 신청을 하는지도 볼 수 있으면 어떨까요? 이 데이터도 이미 데이터 세트에 포함되어 있습니다. 이미 연도와 나라별 선택 기능을 추가했습니다. 이 정보를 보려면 첫 번째 지도 옆에 두 번째 지도를 추가하여 접근 가능한 데이터를 두 배로 늘리면 됩니다.\u003c/p\u003e\n\u003cp\u003e출발!\u003c/p\u003e\n\u003ch1\u003e단계 4: 두 번째 코로플레스 맵 추가하기\u003c/h1\u003e\n\u003cp\u003e우리는 국가의 난민국가를 보여주는 두 번째 지도를 추가할 수 있습니다. 그리고 이것을 우리가 만든 첫 번째 지도 옆에 놓을 수 있습니다.\u003c/p\u003e\n\u003cp\u003e이 두 지도를 함께 보면 선택한 국가에 대한 두 가지 정보를 확인할 수 있습니다:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e어느 국가에서 난민을 구합니다\u003c/li\u003e\n\u003cli\u003e어느 국가로 난민을 보냅니다\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eGPT-4에게 지침: 슬라이더와 드롭다운을 사용하여 선택한 국가에 대한 피난지 국가를 표시하는 두 번째 지도를 추가하십시오(첫 번째 지도 옆에 놓으세요. 지도는 각각 자체 컨테이너에 있어야 합니다). 두 지도가 모두 초기 연도와 드롭다운에서 업데이트되도록 해주세요. 두 번째 지도의 색상 체계를 'YlOrRd'로 변경해주세요.\u003c/p\u003e\n\u003cp\u003eGPT-4가 코드를 생성해줍니다. 여러분은 자신이 선호하는 편집기에 다시 복사하여 붙여넣기/저장/실행할 수 있습니다 (저는 streamlit_map03.py라는 세 번째 파일을 만들었습니다).\u003c/p\u003e\n\u003cp\u003e참고: 이 프롬프트를 올바르게 만드는 데 몇 차례 시도했습니다. 명시적으로 언급되지 않는 한 GPT-4는 두 번째 지도를 첫 번째 드롭다운과 연결하지 않을 수도 있습니다(또는 두 번째 드롭다운을 추가할 수도 있습니다).\u003c/p\u003e\n\u003cp\u003e최종 디스플레이:\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/assets/img/2024-06-19-PythonStreamlitAndGPT4HowToMapUNHCRRefugeeData_9.png\" alt=\"이미지\"\u003e\u003c/p\u003e\n\u003cp\u003e와우, 정말 인상적이에요. 데이터셋과 3가지 모듈식 프롬프트로, 행성상 모든 국가 간 난민 이동을 볼 수 있는 대화형 웹 애플리케이션을 만들었어요.\u003c/p\u003e\n\u003cp\u003e그리고 GPT-4는 이 모든 것을 100줄 미만의 코드로 (내 최종 Python 파일에는 70줄) 완성했어요.\u003c/p\u003e\n\u003cp\u003e좋은 경험이 되었기를 바라요. 함께 해줘서 고마워요!\u003c/p\u003e\n\u003ch1\u003e요약하자면...\u003c/h1\u003e\n\u003cp\u003e위의 GPT-4 프롬프트 단계를 모듈식으로 따르면 대부분의 사람이 수동으로 코딩하는 데 소요되는 시간의 일부분에 웹 응용 프로그램을 매우 유용하게 개발할 수 있습니다.\u003c/p\u003e\n\u003cp\u003e그러나 여기서 주의해야 할 점이 있습니다 — GPT-4는 응답에서 정확하지 않습니다. 코드나 결과가 여기에 표시된 것과 정확히 같아야 한다는 보장은 없습니다. 이것이 오늘의 LLM 환경의 특성입니다.\u003c/p\u003e\n\u003cp\u003e내 경험상 GPT-4는 계속해서 작동하는 코드를 생성할 수 있지만, 그것이 생성 될 때마다 동일한 코드는 아닙니다.\u003c/p\u003e\n\u003cp\u003e전문가 팁: 마음에 드는 작동 코드 덩어리(레이아웃/색상 선택/기능 등)가 있으면, 다음 모듈식 단계에 사용하기 위해 이 코드를 GPT-4에 다시 피드해야 합니다. 이렇게 하면 GPT-4가 진로를 유지하는 데 도움이 됩니다.\u003c/p\u003e\n\u003cp\u003e이런 프롬프트들을 한 번 시도해 보세요! 그리고 제게 어땠는지 꼭 알려주세요.\u003c/p\u003e\n\u003cp\u003e읽어 주셔서 감사합니다.\u003c/p\u003e\n\u003cp\u003e만약 이런 종류의 이야기가 당신에게 딱 맞고, 나를 작가로서 지원하고 싶다면, 제 Substack을 구독해 주세요.\u003c/p\u003e\n\u003cp\u003eSubstack에서는 나의 독자들만을 위해 매주 뉴스레터와 다른 플랫폼에서 찾을 수 없는 기사들을 게시합니다.\u003c/p\u003e\n\u003c/body\u003e\n\u003c/html\u003e\n"},"__N_SSG":true},"page":"/post/[slug]","query":{"slug":"2024-06-19-PythonStreamlitAndGPT4HowToMapUNHCRRefugeeData"},"buildId":"FH3Qr-mLAesqA0X5IFRQr","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>