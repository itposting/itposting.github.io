<!DOCTYPE html><html lang="ko"><head><meta charSet="utf-8"/><title>심리 상담 챗봇  정신 건강을 위한 LLMs 사용 방법 | itposting</title><meta name="description" content=""/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><meta property="og:url" content="https://itposting.github.io///post/2024-06-23-TherapistChatbotLLMsforMentalHealth" data-gatsby-head="true"/><meta property="og:type" content="website" data-gatsby-head="true"/><meta property="og:site_name" content="심리 상담 챗봇  정신 건강을 위한 LLMs 사용 방법 | itposting" data-gatsby-head="true"/><meta property="og:title" content="심리 상담 챗봇  정신 건강을 위한 LLMs 사용 방법 | itposting" data-gatsby-head="true"/><meta property="og:description" content="" data-gatsby-head="true"/><meta property="og:image" content="/assets/img/2024-06-23-TherapistChatbotLLMsforMentalHealth_0.png" data-gatsby-head="true"/><meta property="og:locale" content="en_US" data-gatsby-head="true"/><meta name="twitter:card" content="summary_large_image" data-gatsby-head="true"/><meta property="twitter:domain" content="https://itposting.github.io/" data-gatsby-head="true"/><meta property="twitter:url" content="https://itposting.github.io///post/2024-06-23-TherapistChatbotLLMsforMentalHealth" data-gatsby-head="true"/><meta name="twitter:title" content="심리 상담 챗봇  정신 건강을 위한 LLMs 사용 방법 | itposting" data-gatsby-head="true"/><meta name="twitter:description" content="" data-gatsby-head="true"/><meta name="twitter:image" content="/assets/img/2024-06-23-TherapistChatbotLLMsforMentalHealth_0.png" data-gatsby-head="true"/><meta name="twitter:data1" content="Dev | itposting" data-gatsby-head="true"/><meta name="article:published_time" content="2024-06-23 19:51" data-gatsby-head="true"/><meta name="next-head-count" content="19"/><meta name="google-site-verification" content="a-yehRo3k3xv7fg6LqRaE8jlE42e5wP2bDE_2F849O4"/><link rel="stylesheet" href="/favicons/favicon.ico"/><link rel="icon" type="image/png" sizes="16x16" href="/assets/favicons/favicon-16x16.png"/><link rel="icon" type="image/png" sizes="32x32" href="/assets/favicons/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="96x96" href="/assets/favicons/favicon-96x96.png"/><link rel="icon" href="/favicons/apple-icon-180x180.png"/><link rel="apple-touch-icon" href="/favicons/apple-icon-180x180.png"/><link rel="apple-touch-startup-image" href="/startup.png"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="black"/><meta name="msapplication-config" content="/favicons/browserconfig.xml"/><script async="" src="https://www.googletagmanager.com/gtag/js?id=G-23YXDLKDCL"></script><script>window.dataLayer = window.dataLayer || [];
            function gtag(){dataLayer.push(arguments);}
            gtag('js', new Date());
          
            gtag('config', 'G-23YXDLKDCL');</script><link rel="preload" href="/_next/static/css/6e57edcf9f2ce551.css" as="style"/><link rel="stylesheet" href="/_next/static/css/6e57edcf9f2ce551.css" data-n-g=""/><link rel="preload" href="/_next/static/css/b8ef307c9aee1e34.css" as="style"/><link rel="stylesheet" href="/_next/static/css/b8ef307c9aee1e34.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/_next/static/chunks/webpack-ee6df16fdc6dae4d.js" defer=""></script><script src="/_next/static/chunks/framework-46611630e39cfdeb.js" defer=""></script><script src="/_next/static/chunks/main-cf4a52eec9a970a0.js" defer=""></script><script src="/_next/static/chunks/pages/_app-6fae11262ee5c69b.js" defer=""></script><script src="/_next/static/chunks/75fc9c18-ac4aa08aae62f90e.js" defer=""></script><script src="/_next/static/chunks/463-0429087d4c0b0335.js" defer=""></script><script src="/_next/static/chunks/pages/post/%5Bslug%5D-d849684d6d83f07a.js" defer=""></script><script src="/_next/static/QYe6gFAUryFKFgjKBoIfo/_buildManifest.js" defer=""></script><script src="/_next/static/QYe6gFAUryFKFgjKBoIfo/_ssgManifest.js" defer=""></script></head><body><div id="__next"><header class="Header_header__Z8PUO"><div class="Header_inner__tfr0u"><strong class="Header_title__Otn70"><a href="/">IT Posting</a></strong><nav class="Header_nav_area__6KVpk"><a class="nav_item" href="/posts/1">Posts</a></nav></div></header><main class="posts_container__NyRU3"><div class="posts_inner__i3n_i"><h1 class="posts_post_title__EbxNx">심리 상담 챗봇  정신 건강을 위한 LLMs 사용 방법</h1><div class="posts_meta__cR7lu"><div class="posts_profile_wrap__mslMl"><div class="posts_profile_image_wrap__kPikV"><img alt="심리 상담 챗봇  정신 건강을 위한 LLMs 사용 방법" loading="lazy" width="44" height="44" decoding="async" data-nimg="1" class="profile" style="color:transparent" src="/favicons/apple-icon-114x114.png"/></div><div class="posts_textarea__w_iKT"><span class="writer">IT Posting</span><span class="posts_info__5KJdN"><span class="posts_date__ctqHI">Posted On Jun 23, 2024</span><span class="posts_reading_time__f7YPP">5<!-- --> min read</span></span></div></div><img alt="" loading="lazy" width="50" height="50" decoding="async" data-nimg="1" class="posts_view_badge__tcbfm" style="color:transparent" src="https://hits.seeyoufarm.com/api/count/incr/badge.svg?url=https%3A%2F%2Fallround-coder.github.io/post/2024-06-23-TherapistChatbotLLMsforMentalHealth&amp;count_bg=%2379C83D&amp;title_bg=%23555555&amp;icon=&amp;icon_color=%23E7E7E7&amp;title=views&amp;edge_flat=false"/></div><article class="posts_post_content__n_L6j"><div><!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta content="width=device-width, initial-scale=1" name="viewport">
</head>
<body>
<img src="/assets/img/2024-06-23-TherapistChatbotLLMsforMentalHealth_0.png">
<p>요즘 빠르게 변화하는 세상에서 우리의 정신 건강을 우선시할 시간을 찾기는 어려울 수 있어요. 업무, 가족, 그리고 일상 생활의 요구들은 종종 자기 관리를 할 시간을 남기지 않아서 정기적인 치료 세션은 물론 스스로를 돌보는 시간을 가져다주지 않을 때가 많아요. 시간을 내기로 결심했다고 해도, 자격 있는 치료사의 이용 가능성이 부족하면 예약을 기다리는 사람들이 많아질 수 있어요. 그리고 마침내 소중한 세션이 확보되더라도, 비용이 부담스러울 수 있어 이미 부담스러운 마음에 금전적인 압박을 느끼게 해요.</p>
<p>이 딜레마는 정신 건강 치료 분야에서 혁신적인 해결책에 대한 점점 더 커지는 필요성을 강조해요. 진출하게 된 것이 바로 언어 모델(Language Models, LLMs)을 기반으로 하는 치료사 챗봇들의 시대입니다. 이 가상 상담가들은 우리가 스마트폰이나 컴퓨터의 편안함 속에서 24시간 365일 즉각적인 지원을 받을 수 있도록하여 우리가 지원을 받는 방식을 혁신하려고 합니다.</p>
<p>인공 지능(AI)과 자연어 처리(NLP)를 활용하여, 이 챗봇들은 실제 치료 대화를 시뮬레이션할 수 있어요. 이들은 공감, 지도, 그리고 개인의 필요에 맞게 맞춤형 대처 전략을 제공할 수 있어요. 이러한 접근 방식은 특히 사회적 편견이나 물리적인 장벽 때문에 전통적인 치료를 받기 주저하는 분들에게 접근하는 데 매우 중요합니다.</p>
<div class="content-ad"></div>
<p>그러나 중요한 점은 심리상담사 챗봇은 정신 건강 관리를 보완할 수 있지만 전문 상담의 대체품이 아니라는 것입니다. 훈련받은 심리상담사들의 세밀한 이해력과 공감적인 대응을 갖추지 못합니다. 그들은 교육과 경험에 기초한 맞춤형 치료를 제공할 수 있는 훈련받은 상담사들의 심리 마음을 나타내지 못합니다.</p>
<p>심리건강 관리에 LLMs를 통합하는 목표는 접근성을 증대하고 확대하는 데 있습니다. 더 나은 심리적 안녕을 향한 여정을 하는 사람들에게 발판을 제공합니다. 심리 건강 문제에 직면한 모든 사람들에게 전문적인 도움을 구하는 것이 중요한 단계이며, 이러한 혁신은 자기 돌봄과 지원을 위한 우리 도구상자에 유망한 추가 요소로 작용합니다.</p>
<p>그런데, 이 기술을 활용하여 우리 자신의 심리 상담사 AI를 만들어보는 방법에 대해 깊이 파고들어 보겠습니다!</p>
<p>전체 프로젝트와 함께 제 GitHub는 다음에서 확인할 수 있습니다 — <a href="https://github.com/Dev-Pandey-0302/Therapist-Chatbot" rel="nofollow" target="_blank">https://github.com/Dev-Pandey-0302/Therapist-Chatbot</a></p>
<div class="content-ad"></div>
<p>유튜브의 Nicholas Renotte에 대한 큰 찬사를 드립니다 (Nicholas Renotte를 검색해보세요, 놀라운 데이터 과학자!)</p>
<h1>코딩을 시작합니다.</h1>
<p>이 프로젝트의 핵심은 Llama_cpp 프레임워크를 기반으로 구축될 것입니다. 간단한 접근 방식은 ollama를 사용하는 것일 수 있지만, 이 안내서에서는 Llama_cpp를 사용하는 데 중점을 둘 것입니다.</p>
<p>먼저, 우리는 <del>특정 부분이 누락되었습니다</del></p>
<div class="content-ad"></div>
<pre><code class="hljs language-js">git clone <span class="hljs-attr">https</span>:<span class="hljs-comment">//github.com/ggerganov/llama.cpp</span>
</code></pre>
<p>원하는 기계에 llama_cpp를 설치할 거예요.</p>
<p>다음으로, make 명령을 실행해야 해요:</p>
<ul>
<li>Mac: cd llama.cpp &#x26;&#x26; make</li>
<li>Windows (from here):</li>
</ul>
<div class="content-ad"></div>
<ul>
<li>최신 Fortran 버전의 w64devkit을 다운로드하세요.</li>
<li>PC에 w64devkit을 압축 해제하세요.</li>
<li>w64devkit.exe를 실행하세요.</li>
<li>cd 명령어를 사용하여 llama.cpp 폴더로 이동하세요.</li>
<li>여기서</li>
</ul>
<pre><code class="hljs language-js">make
</code></pre>
<p>위 명령어를 실행하세요. 그 후에는 의존성을 설치합니다. 가능하다면 의존성을 설치하기 전 가상 환경을 만들어도 좋습니다. 가상 환경을 만드는 방법을 모르신다면 아래 링크를 확인해보세요- <a href="https://www.freecodecamp.org/news/how-to-setup-virtual-environments-in-python/" rel="nofollow" target="_blank">https://www.freecodecamp.org/news/how-to-setup-virtual-environments-in-python/</a></p>
<pre><code class="hljs language-js">pip install openai <span class="hljs-string">'llama-cpp-python[server]'</span> pydantic instructor streamlit gtts
</code></pre>
<div class="content-ad"></div>
<h1>GGUF 모델 다운로드</h1>
<p>GGUF가 무엇인가요?</p>
<p>물어봐 주셔서 감사합니다!</p>
<p>이 애플리케이션에서는 다음을 사용할 것입니다-</p>
<div class="content-ad"></div>
<p>WesselvanGils/MentaLLaMA-chat-7b-GGUF-q8</p>
<p>이는 8비트 양자화된 GGUF 모델입니다. 따라서 전용 서버가 필요하지 않고 로컬 머신에서 실행할 수 있습니다.</p>
<p>이 모델을 오픈 소스로 만들어준 Wessel van Gils에게 감사드립니다. 여기에 그들의 GitHub이 있습니다!</p>
<p>더 자세한 정보를 알고 싶다면 자유롭게 이 글을 읽어보세요.</p>
<div class="content-ad"></div>
<p>모델 다운로드로 돌아가기</p>
<p>여기로 이동해주세요- <a href="https://huggingface.co/WesselvanGils/MentaLLaMA-chat-7b-GGUF-q8" rel="nofollow" target="_blank">https://huggingface.co/WesselvanGils/MentaLLaMA-chat-7b-GGUF-q8</a></p>
<p>파일 및 버전 탭을 클릭하고 .gguf 파일을 다운로드하세요. 용량이 7GB가 넘는 파일이라 시간이 조금 걸릴 수 있으니 참고해 주세요.</p>
<h1>app.py 파일 만들기</h1>
<div class="content-ad"></div>
<p>이제 app.py 파일을 만들어 봅시다.</p>
<p>이 튜토리얼에서는 streamlit을 사용할 것입니다. 그러나 gradio와 같은 대체 솔루션을 사용해도 괜찮습니다.</p>
<pre><code class="hljs language-python"><span class="hljs-keyword">from</span> openai <span class="hljs-keyword">import</span> OpenAI
<span class="hljs-keyword">from</span> gtts <span class="hljs-keyword">import</span> gTTS
<span class="hljs-keyword">from</span> io <span class="hljs-keyword">import</span> BytesIO, StringIO
<span class="hljs-comment"># streamlit 앱 프레임워크 사용</span>
<span class="hljs-keyword">import</span> streamlit <span class="hljs-keyword">as</span> st

<span class="hljs-comment"># 클라이언트 생성</span>
client = OpenAI(
    api_key=<span class="hljs-string">"sk-1234567890"</span>,
    base_url=<span class="hljs-string">'http://localhost:8000/v1'</span>
)

<span class="hljs-comment"># 앱의 제목</span>
st.title(<span class="hljs-string">"TherapyBot- Mental Health Support를 위한 챗봇"</span>)

<span class="hljs-comment"># 의료 기록 업로드</span>
uploaded_file = st.file_uploader(<span class="hljs-string">""</span>, <span class="hljs-built_in">type</span>=[<span class="hljs-string">"txt"</span>], label_visibility=<span class="hljs-string">"collapsed"</span>)
css = <span class="hljs-string">'''
&#x3C;style>
    [data-testid='stFileUploader'] {
        width: max-content;
    }
    [data-testid='stFileUploader'] section {
        padding: 0;
        float: left;
    }
    [data-testid='stFileUploader'] section > input + div {
        display: none;
    }
    [data-testid='stFileUploader'] section + div {
        float: right;
        padding-top: 0;
    }

&#x3C;/style>
'''</span>
st.markdown(css, unsafe_allow_html=<span class="hljs-literal">True</span>)

doc_data = <span class="hljs-string">""</span>
<span class="hljs-comment"># 파일 업로드 시</span>
<span class="hljs-keyword">if</span> uploaded_file <span class="hljs-keyword">is</span> <span class="hljs-keyword">not</span> <span class="hljs-literal">None</span>:
    <span class="hljs-comment"># 파일을 문자열로 읽기</span>
    stringio = StringIO(uploaded_file.getvalue().decode(<span class="hljs-string">"utf-8"</span>))
    doc_data = stringio.read()
    doc_data = <span class="hljs-string">"This is my medical record - "</span> + doc_data + <span class="hljs-string">" Please answer the following question based on the earlier medical record- "</span>
    
<span class="hljs-comment"># 사용자 입력 받기</span>
prompt = st.chat_input(<span class="hljs-string">'채팅을 시작하거나 의료 기록을 업로드하십시오. 어떻게 도와드릴까요?'</span>)
...
</code></pre>
<p>이 특정 app.py 파일은 구글의 gtts 라이브러리를 사용한 텍스트 음성 변환 기능도 제공합니다. 이를 위해서는 인터넷 연결이 필요하지만, 오프라인으로 완전히 실행하려면 gtts를 import하지 않고 마지막 4줄을 주석 처리하세요.</p>
<div class="content-ad"></div>
<p>이 파일을 저장한 후 로컬 서버를 실행해 보겠습니다.</p>
<h1>라마.cpp 서버</h1>
<p>터미널에서 다음을 실행하면 서버가 가동될 것입니다. 다운로드한 GGUF 모델의 경로가 올바른지 확인하세요.</p>
<pre><code class="hljs language-js">python -m llama_cpp.<span class="hljs-property">server</span> --model <span class="hljs-attr">D</span>:\<span class="hljs-variable constant_">CHATBOT_PROJ_NEW</span>\<span class="hljs-title class_">MentaLLaMA</span>-chat-7b-<span class="hljs-variable constant_">GGUF</span>-q8\<span class="hljs-title class_">MentaLLaMA</span>-chat-7b-<span class="hljs-variable constant_">GGUF</span>-q8.<span class="hljs-property">gguf</span> --n_gpu -<span class="hljs-number">1</span>
</code></pre>
<div class="content-ad"></div>
<h1>App.py 실행</h1>
<p>로컬호스트 서버가 시작된 후, 별도의 터미널에서 다음 명령을 실행하세요</p>
<pre><code class="hljs language-js">streamlit run app.<span class="hljs-property">py</span>
</code></pre>
<p>축하합니다!</p>
<div class="content-ad"></div>
<p>지역 컴퓨터에서 실행 중인 자체 치료사 AI를 만들었습니다. .txt 파일을 제공하든 일반적인 질문을 하든 자유롭게 진행해주세요!</p>
<p><img src="/assets/img/2024-06-23-TherapistChatbotLLMsforMentalHealth_1.png" alt="이미지"></p>
<p>읽어 주셔서 감사합니다!</p>
</body>
</html>
</div></article></div></main></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"title":"심리 상담 챗봇  정신 건강을 위한 LLMs 사용 방법","description":"","date":"2024-06-23 19:51","slug":"2024-06-23-TherapistChatbotLLMsforMentalHealth","content":"\n\n\u003cimg src=\"/assets/img/2024-06-23-TherapistChatbotLLMsforMentalHealth_0.png\" /\u003e\n\n요즘 빠르게 변화하는 세상에서 우리의 정신 건강을 우선시할 시간을 찾기는 어려울 수 있어요. 업무, 가족, 그리고 일상 생활의 요구들은 종종 자기 관리를 할 시간을 남기지 않아서 정기적인 치료 세션은 물론 스스로를 돌보는 시간을 가져다주지 않을 때가 많아요. 시간을 내기로 결심했다고 해도, 자격 있는 치료사의 이용 가능성이 부족하면 예약을 기다리는 사람들이 많아질 수 있어요. 그리고 마침내 소중한 세션이 확보되더라도, 비용이 부담스러울 수 있어 이미 부담스러운 마음에 금전적인 압박을 느끼게 해요.\n\n이 딜레마는 정신 건강 치료 분야에서 혁신적인 해결책에 대한 점점 더 커지는 필요성을 강조해요. 진출하게 된 것이 바로 언어 모델(Language Models, LLMs)을 기반으로 하는 치료사 챗봇들의 시대입니다. 이 가상 상담가들은 우리가 스마트폰이나 컴퓨터의 편안함 속에서 24시간 365일 즉각적인 지원을 받을 수 있도록하여 우리가 지원을 받는 방식을 혁신하려고 합니다.\n\n인공 지능(AI)과 자연어 처리(NLP)를 활용하여, 이 챗봇들은 실제 치료 대화를 시뮬레이션할 수 있어요. 이들은 공감, 지도, 그리고 개인의 필요에 맞게 맞춤형 대처 전략을 제공할 수 있어요. 이러한 접근 방식은 특히 사회적 편견이나 물리적인 장벽 때문에 전통적인 치료를 받기 주저하는 분들에게 접근하는 데 매우 중요합니다.\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n그러나 중요한 점은 심리상담사 챗봇은 정신 건강 관리를 보완할 수 있지만 전문 상담의 대체품이 아니라는 것입니다. 훈련받은 심리상담사들의 세밀한 이해력과 공감적인 대응을 갖추지 못합니다. 그들은 교육과 경험에 기초한 맞춤형 치료를 제공할 수 있는 훈련받은 상담사들의 심리 마음을 나타내지 못합니다.\n\n심리건강 관리에 LLMs를 통합하는 목표는 접근성을 증대하고 확대하는 데 있습니다. 더 나은 심리적 안녕을 향한 여정을 하는 사람들에게 발판을 제공합니다. 심리 건강 문제에 직면한 모든 사람들에게 전문적인 도움을 구하는 것이 중요한 단계이며, 이러한 혁신은 자기 돌봄과 지원을 위한 우리 도구상자에 유망한 추가 요소로 작용합니다.\n\n그런데, 이 기술을 활용하여 우리 자신의 심리 상담사 AI를 만들어보는 방법에 대해 깊이 파고들어 보겠습니다!\n\n전체 프로젝트와 함께 제 GitHub는 다음에서 확인할 수 있습니다 — https://github.com/Dev-Pandey-0302/Therapist-Chatbot\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n유튜브의 Nicholas Renotte에 대한 큰 찬사를 드립니다 (Nicholas Renotte를 검색해보세요, 놀라운 데이터 과학자!)\n\n# 코딩을 시작합니다.\n\n이 프로젝트의 핵심은 Llama_cpp 프레임워크를 기반으로 구축될 것입니다. 간단한 접근 방식은 ollama를 사용하는 것일 수 있지만, 이 안내서에서는 Llama_cpp를 사용하는 데 중점을 둘 것입니다.\n\n먼저, 우리는 ~특정 부분이 누락되었습니다~\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n```js\r\ngit clone https://github.com/ggerganov/llama.cpp\r\n```\r\n\r\n원하는 기계에 llama_cpp를 설치할 거예요.\r\n\r\n다음으로, make 명령을 실행해야 해요:\r\n\r\n- Mac: cd llama.cpp \u0026\u0026 make\r\n- Windows (from here):\r\n\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n- 최신 Fortran 버전의 w64devkit을 다운로드하세요.\n- PC에 w64devkit을 압축 해제하세요.\n- w64devkit.exe를 실행하세요.\n- cd 명령어를 사용하여 llama.cpp 폴더로 이동하세요.\n- 여기서\n\n```js\nmake\n```\n\n위 명령어를 실행하세요. 그 후에는 의존성을 설치합니다. 가능하다면 의존성을 설치하기 전 가상 환경을 만들어도 좋습니다. 가상 환경을 만드는 방법을 모르신다면 아래 링크를 확인해보세요- https://www.freecodecamp.org/news/how-to-setup-virtual-environments-in-python/\n\n```js\npip install openai 'llama-cpp-python[server]' pydantic instructor streamlit gtts\n```\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n# GGUF 모델 다운로드\n\nGGUF가 무엇인가요?\n\n물어봐 주셔서 감사합니다!\n\n이 애플리케이션에서는 다음을 사용할 것입니다-\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\nWesselvanGils/MentaLLaMA-chat-7b-GGUF-q8\n\n이는 8비트 양자화된 GGUF 모델입니다. 따라서 전용 서버가 필요하지 않고 로컬 머신에서 실행할 수 있습니다.\n\n이 모델을 오픈 소스로 만들어준 Wessel van Gils에게 감사드립니다. 여기에 그들의 GitHub이 있습니다!\n\n더 자세한 정보를 알고 싶다면 자유롭게 이 글을 읽어보세요.\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n모델 다운로드로 돌아가기\n\n여기로 이동해주세요- https://huggingface.co/WesselvanGils/MentaLLaMA-chat-7b-GGUF-q8\n\n파일 및 버전 탭을 클릭하고 .gguf 파일을 다운로드하세요. 용량이 7GB가 넘는 파일이라 시간이 조금 걸릴 수 있으니 참고해 주세요.\n\n# app.py 파일 만들기\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n이제 app.py 파일을 만들어 봅시다.\n\n이 튜토리얼에서는 streamlit을 사용할 것입니다. 그러나 gradio와 같은 대체 솔루션을 사용해도 괜찮습니다.\n\n```python\nfrom openai import OpenAI\nfrom gtts import gTTS\nfrom io import BytesIO, StringIO\n# streamlit 앱 프레임워크 사용\nimport streamlit as st\n\n# 클라이언트 생성\nclient = OpenAI(\n    api_key=\"sk-1234567890\",\n    base_url='http://localhost:8000/v1'\n)\n\n# 앱의 제목\nst.title(\"TherapyBot- Mental Health Support를 위한 챗봇\")\n\n# 의료 기록 업로드\nuploaded_file = st.file_uploader(\"\", type=[\"txt\"], label_visibility=\"collapsed\")\ncss = '''\n\u003cstyle\u003e\n    [data-testid='stFileUploader'] {\n        width: max-content;\n    }\n    [data-testid='stFileUploader'] section {\n        padding: 0;\n        float: left;\n    }\n    [data-testid='stFileUploader'] section \u003e input + div {\n        display: none;\n    }\n    [data-testid='stFileUploader'] section + div {\n        float: right;\n        padding-top: 0;\n    }\n\n\u003c/style\u003e\n'''\nst.markdown(css, unsafe_allow_html=True)\n\ndoc_data = \"\"\n# 파일 업로드 시\nif uploaded_file is not None:\n    # 파일을 문자열로 읽기\n    stringio = StringIO(uploaded_file.getvalue().decode(\"utf-8\"))\n    doc_data = stringio.read()\n    doc_data = \"This is my medical record - \" + doc_data + \" Please answer the following question based on the earlier medical record- \"\n    \n# 사용자 입력 받기\nprompt = st.chat_input('채팅을 시작하거나 의료 기록을 업로드하십시오. 어떻게 도와드릴까요?')\n...\n```\n\n이 특정 app.py 파일은 구글의 gtts 라이브러리를 사용한 텍스트 음성 변환 기능도 제공합니다. 이를 위해서는 인터넷 연결이 필요하지만, 오프라인으로 완전히 실행하려면 gtts를 import하지 않고 마지막 4줄을 주석 처리하세요.\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n이 파일을 저장한 후 로컬 서버를 실행해 보겠습니다.\n\n# 라마.cpp 서버\n\n터미널에서 다음을 실행하면 서버가 가동될 것입니다. 다운로드한 GGUF 모델의 경로가 올바른지 확인하세요.\n\n```js\npython -m llama_cpp.server --model D:\\CHATBOT_PROJ_NEW\\MentaLLaMA-chat-7b-GGUF-q8\\MentaLLaMA-chat-7b-GGUF-q8.gguf --n_gpu -1\n```\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n# App.py 실행\n\n로컬호스트 서버가 시작된 후, 별도의 터미널에서 다음 명령을 실행하세요\n\n```js\nstreamlit run app.py\n```\n\n축하합니다!\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n지역 컴퓨터에서 실행 중인 자체 치료사 AI를 만들었습니다. .txt 파일을 제공하든 일반적인 질문을 하든 자유롭게 진행해주세요!\n\n![이미지](/assets/img/2024-06-23-TherapistChatbotLLMsforMentalHealth_1.png)\n\n읽어 주셔서 감사합니다!","ogImage":{"url":"/assets/img/2024-06-23-TherapistChatbotLLMsforMentalHealth_0.png"},"coverImage":"/assets/img/2024-06-23-TherapistChatbotLLMsforMentalHealth_0.png","tag":["Tech"],"readingTime":5},"content":"\u003c!doctype html\u003e\n\u003chtml lang=\"en\"\u003e\n\u003chead\u003e\n\u003cmeta charset=\"utf-8\"\u003e\n\u003cmeta content=\"width=device-width, initial-scale=1\" name=\"viewport\"\u003e\n\u003c/head\u003e\n\u003cbody\u003e\n\u003cimg src=\"/assets/img/2024-06-23-TherapistChatbotLLMsforMentalHealth_0.png\"\u003e\n\u003cp\u003e요즘 빠르게 변화하는 세상에서 우리의 정신 건강을 우선시할 시간을 찾기는 어려울 수 있어요. 업무, 가족, 그리고 일상 생활의 요구들은 종종 자기 관리를 할 시간을 남기지 않아서 정기적인 치료 세션은 물론 스스로를 돌보는 시간을 가져다주지 않을 때가 많아요. 시간을 내기로 결심했다고 해도, 자격 있는 치료사의 이용 가능성이 부족하면 예약을 기다리는 사람들이 많아질 수 있어요. 그리고 마침내 소중한 세션이 확보되더라도, 비용이 부담스러울 수 있어 이미 부담스러운 마음에 금전적인 압박을 느끼게 해요.\u003c/p\u003e\n\u003cp\u003e이 딜레마는 정신 건강 치료 분야에서 혁신적인 해결책에 대한 점점 더 커지는 필요성을 강조해요. 진출하게 된 것이 바로 언어 모델(Language Models, LLMs)을 기반으로 하는 치료사 챗봇들의 시대입니다. 이 가상 상담가들은 우리가 스마트폰이나 컴퓨터의 편안함 속에서 24시간 365일 즉각적인 지원을 받을 수 있도록하여 우리가 지원을 받는 방식을 혁신하려고 합니다.\u003c/p\u003e\n\u003cp\u003e인공 지능(AI)과 자연어 처리(NLP)를 활용하여, 이 챗봇들은 실제 치료 대화를 시뮬레이션할 수 있어요. 이들은 공감, 지도, 그리고 개인의 필요에 맞게 맞춤형 대처 전략을 제공할 수 있어요. 이러한 접근 방식은 특히 사회적 편견이나 물리적인 장벽 때문에 전통적인 치료를 받기 주저하는 분들에게 접근하는 데 매우 중요합니다.\u003c/p\u003e\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\u003cp\u003e그러나 중요한 점은 심리상담사 챗봇은 정신 건강 관리를 보완할 수 있지만 전문 상담의 대체품이 아니라는 것입니다. 훈련받은 심리상담사들의 세밀한 이해력과 공감적인 대응을 갖추지 못합니다. 그들은 교육과 경험에 기초한 맞춤형 치료를 제공할 수 있는 훈련받은 상담사들의 심리 마음을 나타내지 못합니다.\u003c/p\u003e\n\u003cp\u003e심리건강 관리에 LLMs를 통합하는 목표는 접근성을 증대하고 확대하는 데 있습니다. 더 나은 심리적 안녕을 향한 여정을 하는 사람들에게 발판을 제공합니다. 심리 건강 문제에 직면한 모든 사람들에게 전문적인 도움을 구하는 것이 중요한 단계이며, 이러한 혁신은 자기 돌봄과 지원을 위한 우리 도구상자에 유망한 추가 요소로 작용합니다.\u003c/p\u003e\n\u003cp\u003e그런데, 이 기술을 활용하여 우리 자신의 심리 상담사 AI를 만들어보는 방법에 대해 깊이 파고들어 보겠습니다!\u003c/p\u003e\n\u003cp\u003e전체 프로젝트와 함께 제 GitHub는 다음에서 확인할 수 있습니다 — \u003ca href=\"https://github.com/Dev-Pandey-0302/Therapist-Chatbot\" rel=\"nofollow\" target=\"_blank\"\u003ehttps://github.com/Dev-Pandey-0302/Therapist-Chatbot\u003c/a\u003e\u003c/p\u003e\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\u003cp\u003e유튜브의 Nicholas Renotte에 대한 큰 찬사를 드립니다 (Nicholas Renotte를 검색해보세요, 놀라운 데이터 과학자!)\u003c/p\u003e\n\u003ch1\u003e코딩을 시작합니다.\u003c/h1\u003e\n\u003cp\u003e이 프로젝트의 핵심은 Llama_cpp 프레임워크를 기반으로 구축될 것입니다. 간단한 접근 방식은 ollama를 사용하는 것일 수 있지만, 이 안내서에서는 Llama_cpp를 사용하는 데 중점을 둘 것입니다.\u003c/p\u003e\n\u003cp\u003e먼저, 우리는 \u003cdel\u003e특정 부분이 누락되었습니다\u003c/del\u003e\u003c/p\u003e\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003egit clone \u003cspan class=\"hljs-attr\"\u003ehttps\u003c/span\u003e:\u003cspan class=\"hljs-comment\"\u003e//github.com/ggerganov/llama.cpp\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e원하는 기계에 llama_cpp를 설치할 거예요.\u003c/p\u003e\n\u003cp\u003e다음으로, make 명령을 실행해야 해요:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eMac: cd llama.cpp \u0026#x26;\u0026#x26; make\u003c/li\u003e\n\u003cli\u003eWindows (from here):\u003c/li\u003e\n\u003c/ul\u003e\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\u003cul\u003e\n\u003cli\u003e최신 Fortran 버전의 w64devkit을 다운로드하세요.\u003c/li\u003e\n\u003cli\u003ePC에 w64devkit을 압축 해제하세요.\u003c/li\u003e\n\u003cli\u003ew64devkit.exe를 실행하세요.\u003c/li\u003e\n\u003cli\u003ecd 명령어를 사용하여 llama.cpp 폴더로 이동하세요.\u003c/li\u003e\n\u003cli\u003e여기서\u003c/li\u003e\n\u003c/ul\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003emake\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e위 명령어를 실행하세요. 그 후에는 의존성을 설치합니다. 가능하다면 의존성을 설치하기 전 가상 환경을 만들어도 좋습니다. 가상 환경을 만드는 방법을 모르신다면 아래 링크를 확인해보세요- \u003ca href=\"https://www.freecodecamp.org/news/how-to-setup-virtual-environments-in-python/\" rel=\"nofollow\" target=\"_blank\"\u003ehttps://www.freecodecamp.org/news/how-to-setup-virtual-environments-in-python/\u003c/a\u003e\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003epip install openai \u003cspan class=\"hljs-string\"\u003e'llama-cpp-python[server]'\u003c/span\u003e pydantic instructor streamlit gtts\n\u003c/code\u003e\u003c/pre\u003e\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\u003ch1\u003eGGUF 모델 다운로드\u003c/h1\u003e\n\u003cp\u003eGGUF가 무엇인가요?\u003c/p\u003e\n\u003cp\u003e물어봐 주셔서 감사합니다!\u003c/p\u003e\n\u003cp\u003e이 애플리케이션에서는 다음을 사용할 것입니다-\u003c/p\u003e\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\u003cp\u003eWesselvanGils/MentaLLaMA-chat-7b-GGUF-q8\u003c/p\u003e\n\u003cp\u003e이는 8비트 양자화된 GGUF 모델입니다. 따라서 전용 서버가 필요하지 않고 로컬 머신에서 실행할 수 있습니다.\u003c/p\u003e\n\u003cp\u003e이 모델을 오픈 소스로 만들어준 Wessel van Gils에게 감사드립니다. 여기에 그들의 GitHub이 있습니다!\u003c/p\u003e\n\u003cp\u003e더 자세한 정보를 알고 싶다면 자유롭게 이 글을 읽어보세요.\u003c/p\u003e\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\u003cp\u003e모델 다운로드로 돌아가기\u003c/p\u003e\n\u003cp\u003e여기로 이동해주세요- \u003ca href=\"https://huggingface.co/WesselvanGils/MentaLLaMA-chat-7b-GGUF-q8\" rel=\"nofollow\" target=\"_blank\"\u003ehttps://huggingface.co/WesselvanGils/MentaLLaMA-chat-7b-GGUF-q8\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003e파일 및 버전 탭을 클릭하고 .gguf 파일을 다운로드하세요. 용량이 7GB가 넘는 파일이라 시간이 조금 걸릴 수 있으니 참고해 주세요.\u003c/p\u003e\n\u003ch1\u003eapp.py 파일 만들기\u003c/h1\u003e\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\u003cp\u003e이제 app.py 파일을 만들어 봅시다.\u003c/p\u003e\n\u003cp\u003e이 튜토리얼에서는 streamlit을 사용할 것입니다. 그러나 gradio와 같은 대체 솔루션을 사용해도 괜찮습니다.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-python\"\u003e\u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e openai \u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e OpenAI\n\u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e gtts \u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e gTTS\n\u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e io \u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e BytesIO, StringIO\n\u003cspan class=\"hljs-comment\"\u003e# streamlit 앱 프레임워크 사용\u003c/span\u003e\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e streamlit \u003cspan class=\"hljs-keyword\"\u003eas\u003c/span\u003e st\n\n\u003cspan class=\"hljs-comment\"\u003e# 클라이언트 생성\u003c/span\u003e\nclient = OpenAI(\n    api_key=\u003cspan class=\"hljs-string\"\u003e\"sk-1234567890\"\u003c/span\u003e,\n    base_url=\u003cspan class=\"hljs-string\"\u003e'http://localhost:8000/v1'\u003c/span\u003e\n)\n\n\u003cspan class=\"hljs-comment\"\u003e# 앱의 제목\u003c/span\u003e\nst.title(\u003cspan class=\"hljs-string\"\u003e\"TherapyBot- Mental Health Support를 위한 챗봇\"\u003c/span\u003e)\n\n\u003cspan class=\"hljs-comment\"\u003e# 의료 기록 업로드\u003c/span\u003e\nuploaded_file = st.file_uploader(\u003cspan class=\"hljs-string\"\u003e\"\"\u003c/span\u003e, \u003cspan class=\"hljs-built_in\"\u003etype\u003c/span\u003e=[\u003cspan class=\"hljs-string\"\u003e\"txt\"\u003c/span\u003e], label_visibility=\u003cspan class=\"hljs-string\"\u003e\"collapsed\"\u003c/span\u003e)\ncss = \u003cspan class=\"hljs-string\"\u003e'''\n\u0026#x3C;style\u003e\n    [data-testid='stFileUploader'] {\n        width: max-content;\n    }\n    [data-testid='stFileUploader'] section {\n        padding: 0;\n        float: left;\n    }\n    [data-testid='stFileUploader'] section \u003e input + div {\n        display: none;\n    }\n    [data-testid='stFileUploader'] section + div {\n        float: right;\n        padding-top: 0;\n    }\n\n\u0026#x3C;/style\u003e\n'''\u003c/span\u003e\nst.markdown(css, unsafe_allow_html=\u003cspan class=\"hljs-literal\"\u003eTrue\u003c/span\u003e)\n\ndoc_data = \u003cspan class=\"hljs-string\"\u003e\"\"\u003c/span\u003e\n\u003cspan class=\"hljs-comment\"\u003e# 파일 업로드 시\u003c/span\u003e\n\u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e uploaded_file \u003cspan class=\"hljs-keyword\"\u003eis\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003enot\u003c/span\u003e \u003cspan class=\"hljs-literal\"\u003eNone\u003c/span\u003e:\n    \u003cspan class=\"hljs-comment\"\u003e# 파일을 문자열로 읽기\u003c/span\u003e\n    stringio = StringIO(uploaded_file.getvalue().decode(\u003cspan class=\"hljs-string\"\u003e\"utf-8\"\u003c/span\u003e))\n    doc_data = stringio.read()\n    doc_data = \u003cspan class=\"hljs-string\"\u003e\"This is my medical record - \"\u003c/span\u003e + doc_data + \u003cspan class=\"hljs-string\"\u003e\" Please answer the following question based on the earlier medical record- \"\u003c/span\u003e\n    \n\u003cspan class=\"hljs-comment\"\u003e# 사용자 입력 받기\u003c/span\u003e\nprompt = st.chat_input(\u003cspan class=\"hljs-string\"\u003e'채팅을 시작하거나 의료 기록을 업로드하십시오. 어떻게 도와드릴까요?'\u003c/span\u003e)\n...\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e이 특정 app.py 파일은 구글의 gtts 라이브러리를 사용한 텍스트 음성 변환 기능도 제공합니다. 이를 위해서는 인터넷 연결이 필요하지만, 오프라인으로 완전히 실행하려면 gtts를 import하지 않고 마지막 4줄을 주석 처리하세요.\u003c/p\u003e\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\u003cp\u003e이 파일을 저장한 후 로컬 서버를 실행해 보겠습니다.\u003c/p\u003e\n\u003ch1\u003e라마.cpp 서버\u003c/h1\u003e\n\u003cp\u003e터미널에서 다음을 실행하면 서버가 가동될 것입니다. 다운로드한 GGUF 모델의 경로가 올바른지 확인하세요.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003epython -m llama_cpp.\u003cspan class=\"hljs-property\"\u003eserver\u003c/span\u003e --model \u003cspan class=\"hljs-attr\"\u003eD\u003c/span\u003e:\\\u003cspan class=\"hljs-variable constant_\"\u003eCHATBOT_PROJ_NEW\u003c/span\u003e\\\u003cspan class=\"hljs-title class_\"\u003eMentaLLaMA\u003c/span\u003e-chat-7b-\u003cspan class=\"hljs-variable constant_\"\u003eGGUF\u003c/span\u003e-q8\\\u003cspan class=\"hljs-title class_\"\u003eMentaLLaMA\u003c/span\u003e-chat-7b-\u003cspan class=\"hljs-variable constant_\"\u003eGGUF\u003c/span\u003e-q8.\u003cspan class=\"hljs-property\"\u003egguf\u003c/span\u003e --n_gpu -\u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\u003ch1\u003eApp.py 실행\u003c/h1\u003e\n\u003cp\u003e로컬호스트 서버가 시작된 후, 별도의 터미널에서 다음 명령을 실행하세요\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003estreamlit run app.\u003cspan class=\"hljs-property\"\u003epy\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e축하합니다!\u003c/p\u003e\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\u003cp\u003e지역 컴퓨터에서 실행 중인 자체 치료사 AI를 만들었습니다. .txt 파일을 제공하든 일반적인 질문을 하든 자유롭게 진행해주세요!\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/assets/img/2024-06-23-TherapistChatbotLLMsforMentalHealth_1.png\" alt=\"이미지\"\u003e\u003c/p\u003e\n\u003cp\u003e읽어 주셔서 감사합니다!\u003c/p\u003e\n\u003c/body\u003e\n\u003c/html\u003e\n"},"__N_SSG":true},"page":"/post/[slug]","query":{"slug":"2024-06-23-TherapistChatbotLLMsforMentalHealth"},"buildId":"QYe6gFAUryFKFgjKBoIfo","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>