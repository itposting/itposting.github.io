<!DOCTYPE html><html lang="ko"><head><meta charSet="utf-8"/><title>ESP8266로 만드는 나만의 공기질 모니터링 시스템 만들기 | itposting</title><meta name="description" content=""/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><meta property="og:url" content="https://itposting.github.io///post/2024-06-22-CreatingYourOwnAirQualityMonitoringSystemwithESP8266" data-gatsby-head="true"/><meta property="og:type" content="website" data-gatsby-head="true"/><meta property="og:site_name" content="ESP8266로 만드는 나만의 공기질 모니터링 시스템 만들기 | itposting" data-gatsby-head="true"/><meta property="og:title" content="ESP8266로 만드는 나만의 공기질 모니터링 시스템 만들기 | itposting" data-gatsby-head="true"/><meta property="og:description" content="" data-gatsby-head="true"/><meta property="og:image" content="/assets/img/2024-06-22-CreatingYourOwnAirQualityMonitoringSystemwithESP8266_0.png" data-gatsby-head="true"/><meta property="og:locale" content="en_US" data-gatsby-head="true"/><meta name="twitter:card" content="summary_large_image" data-gatsby-head="true"/><meta property="twitter:domain" content="https://itposting.github.io/" data-gatsby-head="true"/><meta property="twitter:url" content="https://itposting.github.io///post/2024-06-22-CreatingYourOwnAirQualityMonitoringSystemwithESP8266" data-gatsby-head="true"/><meta name="twitter:title" content="ESP8266로 만드는 나만의 공기질 모니터링 시스템 만들기 | itposting" data-gatsby-head="true"/><meta name="twitter:description" content="" data-gatsby-head="true"/><meta name="twitter:image" content="/assets/img/2024-06-22-CreatingYourOwnAirQualityMonitoringSystemwithESP8266_0.png" data-gatsby-head="true"/><meta name="twitter:data1" content="Dev | itposting" data-gatsby-head="true"/><meta name="article:published_time" content="2024-06-22 18:55" data-gatsby-head="true"/><meta name="next-head-count" content="19"/><meta name="google-site-verification" content="a-yehRo3k3xv7fg6LqRaE8jlE42e5wP2bDE_2F849O4"/><link rel="stylesheet" href="/favicons/favicon.ico"/><link rel="icon" type="image/png" sizes="16x16" href="/assets/favicons/favicon-16x16.png"/><link rel="icon" type="image/png" sizes="32x32" href="/assets/favicons/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="96x96" href="/assets/favicons/favicon-96x96.png"/><link rel="icon" href="/favicons/apple-icon-180x180.png"/><link rel="apple-touch-icon" href="/favicons/apple-icon-180x180.png"/><link rel="apple-touch-startup-image" href="/startup.png"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="black"/><meta name="msapplication-config" content="/favicons/browserconfig.xml"/><script async="" src="https://www.googletagmanager.com/gtag/js?id=G-23YXDLKDCL"></script><script>window.dataLayer = window.dataLayer || [];
            function gtag(){dataLayer.push(arguments);}
            gtag('js', new Date());
          
            gtag('config', 'G-23YXDLKDCL');</script><link rel="preload" href="/_next/static/css/6e57edcf9f2ce551.css" as="style"/><link rel="stylesheet" href="/_next/static/css/6e57edcf9f2ce551.css" data-n-g=""/><link rel="preload" href="/_next/static/css/b8ef307c9aee1e34.css" as="style"/><link rel="stylesheet" href="/_next/static/css/b8ef307c9aee1e34.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/_next/static/chunks/webpack-ee6df16fdc6dae4d.js" defer=""></script><script src="/_next/static/chunks/framework-46611630e39cfdeb.js" defer=""></script><script src="/_next/static/chunks/main-cf4a52eec9a970a0.js" defer=""></script><script src="/_next/static/chunks/pages/_app-6fae11262ee5c69b.js" defer=""></script><script src="/_next/static/chunks/75fc9c18-ac4aa08aae62f90e.js" defer=""></script><script src="/_next/static/chunks/463-0429087d4c0b0335.js" defer=""></script><script src="/_next/static/chunks/pages/post/%5Bslug%5D-d849684d6d83f07a.js" defer=""></script><script src="/_next/static/CYQjEY3HhSkRTiL0gewc0/_buildManifest.js" defer=""></script><script src="/_next/static/CYQjEY3HhSkRTiL0gewc0/_ssgManifest.js" defer=""></script></head><body><div id="__next"><header class="Header_header__Z8PUO"><div class="Header_inner__tfr0u"><strong class="Header_title__Otn70"><a href="/">IT Posting</a></strong><nav class="Header_nav_area__6KVpk"><a class="nav_item" href="/posts/1">Posts</a></nav></div></header><main class="posts_container__NyRU3"><div class="posts_inner__i3n_i"><h1 class="posts_post_title__EbxNx">ESP8266로 만드는 나만의 공기질 모니터링 시스템 만들기</h1><div class="posts_meta__cR7lu"><div class="posts_profile_wrap__mslMl"><div class="posts_profile_image_wrap__kPikV"><img alt="ESP8266로 만드는 나만의 공기질 모니터링 시스템 만들기" loading="lazy" width="44" height="44" decoding="async" data-nimg="1" class="profile" style="color:transparent" src="/favicons/apple-icon-114x114.png"/></div><div class="posts_textarea__w_iKT"><span class="writer">IT Posting</span><span class="posts_info__5KJdN"><span class="posts_date__ctqHI">Posted On Jun 22, 2024</span><span class="posts_reading_time__f7YPP">10<!-- --> min read</span></span></div></div><img alt="" loading="lazy" width="50" height="50" decoding="async" data-nimg="1" class="posts_view_badge__tcbfm" style="color:transparent" src="https://hits.seeyoufarm.com/api/count/incr/badge.svg?url=https%3A%2F%2Fallround-coder.github.io/post/2024-06-22-CreatingYourOwnAirQualityMonitoringSystemwithESP8266&amp;count_bg=%2379C83D&amp;title_bg=%23555555&amp;icon=&amp;icon_color=%23E7E7E7&amp;title=views&amp;edge_flat=false"/></div><article class="posts_post_content__n_L6j"><div><!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta content="width=device-width, initial-scale=1" name="viewport">
</head>
<body>
<img src="/assets/img/2024-06-22-CreatingYourOwnAirQualityMonitoringSystemwithESP8266_0.png">
<p>깨끗하고 신선한 공기는 건강한 생활 환경의 기본 요소입니다. 그런데 실제로 우리가 무엇을 호흡하고 있는지 얼마나 자주 알고 있을까요? 주변의 공기 품질을 모니터링하고 실시간으로 온도, 습도 등의 업데이트를 받을 수 있다면 어떨까요?</p>
<p>사물인터넷(IoT) 시대에 우리는 주변 환경을 더 잘 이해하기 위한 기술을 손에 넣었습니다. 다재다능하고 가격이 적당한 ESP8266 마이크로컨트롤러는 지능적인 공기 센서 시스템을 구축하는 열쇠입니다.</p>
<p>방 안의 공기 품질에 대한 데이터를 수집하는 장치뿐만 아니라 슬릭한 LCD 디스플레이와 편리한 웹 기반 대시보드에서 그 정보를 공유하는 장치가 있다고 상상해보세요. 당신은 환경에 대해 인식할 뿐만 아니라 건강에 대한 판단도 내릴 권리를 갖게 될 것입니다.</p>
<div class="content-ad"></div>
<p>이 글에서는 여러분께 자신만의 대기질 모니터링 시스템을 만드는 여정에 참여해 보시도록 하겠습니다. 하드웨어 설정, ESP8266 마이크로컨트롤러 프로그래밍, 그리고 수집된 데이터에 액세스하기 위한 RESTful API 개발에 대해 알아보겠습니다. 기술에 능통하신 분이든, IoT 여정을 막 시작한 분이든, 이 프로젝트는 여러분이 지금껏 경험하지 못한 방식으로 주거 공간을 관찰하고 분석할 수 있도록 돕기 위해 설계되었습니다.</p>
<p>대기질을 제어하고 DIY IoT 장치의 세계로 나아가는 준비가 되셨나요? 함께 시작해 신뢰성 있고 유익하며 비용 효율적인 대기질 모니터링 시스템을 만들어보세요.</p>
<h1>프로젝트 개요</h1>
<p>이 프로젝트의 목표는 대기질 데이터를 수집하고 분석하는 IoT 장치를 만드는 것입니다. 구체적으로 환경에서 온도, 습도 및 가끔은 대기질 매개변수를 추적하고 이 데이터를 Thingspeak 같은 플랫폼이나 화면에 전송하는 것을 추구합니다. 또한 간단한 웹 서버를 설정하여 REST API를 통해 센서 데이터를 제공하는 방법에 대해서도 알아볼 것입니다.</p>
<div class="content-ad"></div>
<h1>하드웨어 요구 사항</h1>
<p><img src="/assets/img/2024-06-22-CreatingYourOwnAirQualityMonitoringSystemwithESP8266_1.png" alt="하드웨어 요구 사항"></p>
<p>위 사진에 있는 모든 기기가 필요하지는 않아요😀.
다음 부품이 필요해요:</p>
<ul>
<li>NodeMCU ESP8266 보드</li>
<li>4.7k 옴 저항</li>
<li>DHT11 센서</li>
<li>MQ135 센서</li>
<li>16x2 LCD 디스플레이</li>
<li>I2C LCD 인터페이스 어댑터</li>
<li>와이어</li>
<li>브레드보드</li>
</ul>
<div class="content-ad"></div>
<h2>ESP8266의 힘</h2>
<p>이 프로젝트의 핵심은 ESP8266 마이크로컨트롤러에 있습니다. 이 작고 강력한 장치는 내장 Wi-Fi 기능을 갖춘 IoT(Internet of Things) 프로젝트에 이상적인 후보입니다. 이 장치는 우리에게 대기 질 데이터를 수집하고 전송하는 일을 쉽게 해줍니다.</p>
<h2>센서의 역할</h2>
<p>이 프로젝트에서는 두 가지 주요 센서인 DHT-11과 MQ-135 센서가 사용됩니다.</p>
<div class="content-ad"></div>
<ul>
<li>DHT-11 센서: 이 센서는 온도 및 습도 데이터를 제공하여 환경의 편안함 수준을 더 포괄적으로 파악하는 데 도움을 줍니다.</li>
<li>MQ-135 센서: MQ-135 센서는 공기 품질에 집중합니다. 암모니아, 이산화탄소, 메탄을 포함한 다양한 가스를 감지할 수 있어 실내 공기 품질을 측정하는 데 탁월한 선택지입니다.</li>
</ul>
<h2>LCD 디스플레이</h2>
<p>이 프로젝트에서 사용된 LCD 디스플레이는 I2C(Inter-Integrated Circuit) 인터페이스가 장착된 Arduino 호환 디스플레이입니다. I2C는 다양한 구성 요소의 연결을 단순화하는 통신 프로토콜로, ESP8266와 같은 마이크로컨트롤러와의 통합에 이상적입니다. 원활한 호환성과 기능을 보장하기 위해 I2C 인터페이스 어댑터도 사용합니다. 나중에 소스 코드 조각을 작성하여 이 16x2 (16 문자 및 2 줄) 디스플레이를 사용하여 온도, 습도 및 공기 입자 정보를 표시합니다.</p>
<h1>배선 및 연결</h1>
<div class="content-ad"></div>
<p>프로젝트의 하드웨어 요구 사항은 최소한이며, 따라서 배선은 간단합니다. 회로도에 표시된 대로 부품을 브레드보드에 쉽게 설정할 수 있습니다. 전문적인 전자 기술 지식이 필요하지 않는 초보자 친화적인 프로젝트입니다.</p>
<p>센서를 마이크로컨트롤러에 연결하는 것부터 시작해 봅시다.</p>
<p>마지막 단계는 LCD 디스플레이를 마이크로컨트롤러에 연결하는 것입니다. 더 자세한 배선 테이블과 다이어그램은 Github 저장소에서 확인할 수 있습니다.</p>
<p><img src="/assets/img/2024-06-22-CreatingYourOwnAirQualityMonitoringSystemwithESP8266_2.png" alt="이미지"></p>
<div class="content-ad"></div>
<h1>소프트웨어 작성하기</h1>
<p>다음 섹션에서는 저희의 공기 센서 프로젝트 소스 코드를 찾을 수 있습니다. 아두이노 스튜디오를 사용하여 프로그래밍 및 코드를 마이크로컨트롤러에 업로드 하는 데 익숙하다고 가정합니다. 이 C++ 코드는 제 GitHub 저장소에 있으며, <a href="https://github.com/manuelkienlein/ESP8266-AirSensor%EC%97%90%EC%84%9C" rel="nofollow" target="_blank">https://github.com/manuelkienlein/ESP8266-AirSensor에서</a> 접근할 수 있습니다. 자유롭게 탐색하고 수정하며, ESP8266에 코드를 업로드하여 자신만의 공기 품질 모니터링 시스템을 설정할 수 있습니다. 이제 코드 구현을 살펴보겠습니다:</p>
<pre><code class="hljs language-js">#include &#x3C;<span class="hljs-title class_">ESP8266WiFi</span>.<span class="hljs-property">h</span>>
#include &#x3C;<span class="hljs-title class_">ESP8266WebServer</span>.<span class="hljs-property">h</span>>
#include &#x3C;<span class="hljs-title class_">LiquidCrystal</span>_I2C.<span class="hljs-property">h</span>>
#include &#x3C;<span class="hljs-variable constant_">DHT</span>.<span class="hljs-property">h</span>>
#include <span class="hljs-string">"MQ135.h"</span>

<span class="hljs-comment">// Thingspeak 및 WiFi</span>
<span class="hljs-title class_">String</span> apiKey = <span class="hljs-string">"apiKey"</span>;
<span class="hljs-keyword">const</span> char* wifi_ssid = <span class="hljs-string">"WIFI-SSID"</span>;
<span class="hljs-keyword">const</span> char* wifi_password = <span class="hljs-string">"WIFI-Password"</span>;

<span class="hljs-comment">// 변수와 상수</span>
#define <span class="hljs-variable constant_">PIN_DHT</span> <span class="hljs-number">3</span> <span class="hljs-comment">// DHT11 핀</span>
#define <span class="hljs-variable constant_">PIN_MQ</span> <span class="hljs-number">0</span> <span class="hljs-comment">// MQ-135 핀</span>
#define <span class="hljs-variable constant_">LCD_COLUMNS</span> <span class="hljs-number">16</span>
#define <span class="hljs-variable constant_">LCD_ROWS</span> <span class="hljs-number">2</span>
<span class="hljs-keyword">const</span> char* server = <span class="hljs-string">"api.thingspeak.com"</span>;
#define <span class="hljs-variable constant_">INTERVAL_THINGSPEAK</span> <span class="hljs-number">20</span> <span class="hljs-comment">// Thingspeak 지연</span>

<span class="hljs-comment">// 초기화</span>
<span class="hljs-variable constant_">DHT</span> <span class="hljs-title function_">dht</span>(<span class="hljs-variable constant_">PIN_DHT</span>, <span class="hljs-title class_">DHT11</span>);
<span class="hljs-title class_">MQ135</span> gasSensor = <span class="hljs-title class_">MQ135</span>(<span class="hljs-variable constant_">PIN_MQ</span>);
<span class="hljs-title class_">LiquidCrystal</span>_I2C <span class="hljs-title function_">lcd</span>(<span class="hljs-number">0x27</span>, <span class="hljs-variable constant_">LCD_COLUMNS</span>, <span class="hljs-variable constant_">LCD_ROWS</span>);

<span class="hljs-title class_">WiFiClient</span> client;
<span class="hljs-title class_">ESP8266WebServer</span> <span class="hljs-title function_">webserver</span>(<span class="hljs-number">80</span>);

float humidity;
float temperature;
float rzero;
float ppm;
unsigned long previousMillis;
unsigned long currentMillis;

<span class="hljs-keyword">void</span> <span class="hljs-title function_">setup</span>(<span class="hljs-params"></span>) {
  <span class="hljs-title class_">Serial</span>.<span class="hljs-title function_">begin</span>(<span class="hljs-number">115200</span>);
  <span class="hljs-title class_">Serial</span>.<span class="hljs-title function_">println</span>(<span class="hljs-string">"시작..."</span>);

  lcd.<span class="hljs-title function_">begin</span>(<span class="hljs-variable constant_">LCD_COLUMNS</span>, <span class="hljs-variable constant_">LCD_ROWS</span>);
  lcd.<span class="hljs-title function_">init</span>();
  lcd.<span class="hljs-title function_">backlight</span>();
  lcd.<span class="hljs-title function_">setCursor</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>);
  lcd.<span class="hljs-title function_">print</span>(<span class="hljs-string">"시작..."</span>);

  dht.<span class="hljs-title function_">begin</span>();

  lcd.<span class="hljs-title function_">setCursor</span>(<span class="hljs-number">0</span>, <span class="hljs-number">1</span>);
  lcd.<span class="hljs-title function_">print</span>(<span class="hljs-string">"WiFi 연결"</span>);
  <span class="hljs-title function_">setupWiFi</span>();
  lcd.<span class="hljs-title function_">clear</span>();
  lcd.<span class="hljs-title function_">print</span>(<span class="hljs-string">"IP 주소:"</span>);
  lcd.<span class="hljs-title function_">setCursor</span>(<span class="hljs-number">0</span>, <span class="hljs-number">1</span>);
  lcd.<span class="hljs-title function_">print</span>(<span class="hljs-title class_">WiFi</span>.<span class="hljs-title function_">localIP</span>());
  <span class="hljs-title function_">delay</span>(<span class="hljs-number">10000</span>);

  webserver.<span class="hljs-title function_">on</span>(<span class="hljs-string">"/"</span>, handleWebserverRequest_index);
  webserver.<span class="hljs-title function_">on</span>(<span class="hljs-string">"/dht11"</span>, handleWebserverRequest_dht11);
  webserver.<span class="hljs-title function_">on</span>(<span class="hljs-string">"/mq135"</span>, handleWebserverRequest_mq135);
  webserver.<span class="hljs-title function_">begin</span>();

  int warmup = <span class="hljs-number">30</span>;
  lcd.<span class="hljs-title function_">clear</span>();
  lcd.<span class="hljs-title function_">print</span>(<span class="hljs-string">" IoT 공기센서 "</span>);
  <span class="hljs-keyword">for</span>(int i = warmup; i > <span class="hljs-number">0</span>; i--){
    lcd.<span class="hljs-title function_">setCursor</span>(<span class="hljs-number">0</span>, <span class="hljs-number">1</span>);
    lcd.<span class="hljs-title function_">print</span>(<span class="hljs-string">"열기중: "</span>+<span class="hljs-title class_">String</span>(i)+<span class="hljs-string">"초 "</span>);
    <span class="hljs-title function_">delay</span>(<span class="hljs-number">1000</span>);
  }

  lcd.<span class="hljs-title function_">clear</span>();
  <span class="hljs-title function_">delay</span>(<span class="hljs-number">1000</span>);
}

<span class="hljs-keyword">void</span> <span class="hljs-title function_">loop</span>(<span class="hljs-params"></span>) {
  <span class="hljs-comment">// 센서 값 갱신</span>
  humidity = dht.<span class="hljs-title function_">readHumidity</span>();
  temperature = dht.<span class="hljs-title function_">readTemperature</span>();
  rzero = gasSensor.<span class="hljs-title function_">getRZero</span>();
  ppm = gasSensor.<span class="hljs-title function_">getPPM</span>();

  <span class="hljs-comment">// 현재 사용하지 않음</span>
  float rzero_corrected = gasSensor.<span class="hljs-title function_">getCorrectedRZero</span>(temperature, humidity);
  float ppm_corrected = gasSensor.<span class="hljs-title function_">getCorrectedPPM</span>(temperature, humidity);
  float resistance = gasSensor.<span class="hljs-title function_">getResistance</span>();
  float resistance_corrected = gasSensor.<span class="hljs-title function_">getCorrectedResistance</span>(temperature, humidity);
  int sensorValue = <span class="hljs-title function_">analogRead</span>(<span class="hljs-variable constant_">PIN_MQ</span>);

  <span class="hljs-keyword">if</span> (<span class="hljs-title function_">isnan</span>(humidity) || <span class="hljs-title function_">isnan</span>(temperature)) {
    <span class="hljs-title class_">Serial</span>.<span class="hljs-title function_">println</span>(<span class="hljs-string">"DHT 센서 데이터를 읽는 데 실패했습니다!"</span>);
    <span class="hljs-keyword">return</span>;
  }

  <span class="hljs-comment">// Thingspeak 업데이트 사이에 최소 15초 지연이 필요하기 때문에 20초 대기</span>
  currentMillis = <span class="hljs-title function_">millis</span>();
  <span class="hljs-keyword">if</span>(currentMillis - previousMillis >= <span class="hljs-variable constant_">INTERVAL_THINGSPEAK</span>*<span class="hljs-number">1000</span>){
    previousMillis = currentMillis;
    <span class="hljs-title function_">sendToThingspeak</span>();
  }

  <span class="hljs-comment">// 웹서버 요청 처리</span>
  webserver.<span class="hljs-title function_">handleClient</span>();

  <span class="hljs-comment">// 디스플레이 업데이트</span>
  <span class="hljs-title function_">updateDisplay</span>();

  <span class="hljs-comment">//Serial.println("온도:"+String(t)+" "+"습도:"+String(h));</span>
  <span class="hljs-title class_">Serial</span>.<span class="hljs-title function_">println</span>(<span class="hljs-string">"온도:"</span>+<span class="hljs-title class_">String</span>(temperature)+<span class="hljs-string">" "</span>+<span class="hljs-string">"습도:"</span>+<span class="hljs-title class_">String</span>(humidity)+<span class="hljs-string">" "</span>+<span class="hljs-string">"rZero:"</span>+<span class="hljs-title class_">String</span>(rzero)+<span class="hljs-string">" "</span>+<span class="hljs-string">"rZeroC:"</span>+<span class="hljs-title class_">String</span>(rzero_corrected)+<span class="hljs-string">" "</span>+<span class="hljs-string">"PPM:"</span>+<span class="hljs-title class_">String</span>(ppm)+<span class="hljs-string">" "</span>+<span class="hljs-string">"PPMC:"</span>+<span class="hljs-title class_">String</span>(ppm_corrected));
  <span class="hljs-comment">//Serial.println("온도:"+String(temperature)+" "+"습도:"+String(humidity)+" "+"rZero:"+String(rzero)+" "+"rZeroC:"+String(rzero_corrected)+" "+"PPM:"+String(ppm)+" "+"PPMC:"+String(ppm_corrected)+" "+"저항:"+String(resistance)+" "+"저항C:"+String(resistance_corrected));</span>

  <span class="hljs-title function_">delay</span>(<span class="hljs-number">1000</span>);
}

<span class="hljs-keyword">void</span> <span class="hljs-title function_">setupWiFi</span>(<span class="hljs-params"></span>){
  <span class="hljs-title class_">WiFi</span>.<span class="hljs-title function_">begin</span>(wifi_ssid, wifi_password);

  <span class="hljs-title class_">Serial</span>.<span class="hljs-title function_">println</span>();
  <span class="hljs-title class_">Serial</span>.<span class="hljs-title function_">println</span>();
  <span class="hljs-title class_">Serial</span>.<span class="hljs-title function_">print</span>(<span class="hljs-string">"연결 중: "</span>);
  <span class="hljs-title class_">Serial</span>.<span class="hljs-title function_">println</span>(wifi_ssid);

  <span class="hljs-title class_">WiFi</span>.<span class="hljs-title function_">begin</span>(wifi_ssid, wifi_password);

  <span class="hljs-keyword">while</span> (<span class="hljs-title class_">WiFi</span>.<span class="hljs-title function_">status</span>() != <span class="hljs-variable constant_">WL_CONNECTED</span>) {
    <span class="hljs-title function_">delay</span>(<span class="hljs-number">500</span>);
    <span class="hljs-title class_">Serial</span>.<span class="hljs-title function_">print</span>(<span class="hljs-string">"."</span>);
  }
  <span class="hljs-title class_">Serial</span>.<span class="hljs-title function_">println</span>(<span class="hljs-string">""</span>);
  <span class="hljs-title class_">Serial</span>.<span class="hljs-title function_">println</span>(<span class="hljs-string">"WiFi 연결됨"</span>);

  <span class="hljs-title class_">Serial</span>.<span class="hljs-title function_">print</span>(<span class="hljs-string">"IP 주소: "</span>);
  <span class="hljs-title class_">Serial</span>.<span class="hljs-title function_">println</span>(<span class="hljs-title class_">WiFi</span>.<span class="hljs-title function_">localIP</span>());
}

<span class="hljs-keyword">void</span> <span class="hljs-title function_">sendToThingspeak</span>(<span class="hljs-params"></span>){
  <span class="hljs-keyword">if</span> (client.<span class="hljs-title function_">connect</span>(server,<span class="hljs-number">80</span>)) { <span class="hljs-comment">// "184.106.153.149" 또는 "api.thingspeak.com"</span>
    <span class="hljs-title class_">String</span> postStr = apiKey;
    postStr +=<span class="hljs-string">"&#x26;field1="</span>;
    postStr += <span class="hljs-title class_">String</span>(temperature);
    postStr +=<span class="hljs-string">"&#x26;field2="</span>;
    postStr += <span class="hljs-title class_">String</span>(humidity);
    postStr +=<span class="hljs-string">"&#x26;field3="</span>;
    postStr += <span class="hljs-title class_">String</span>(ppm);
    postStr +=<span class="hljs-string">"&#x26;field4="</span>;
    postStr += <span class="hljs-title class_">String</span>(rzero);
    postStr += <span class="hljs-string">"\r\n\r\n"</span>;

    client.<span class="hljs-title function_">print</span>(<span class="hljs-string">"POST /update HTTP/1.1\n"</span>);
    client.<span class="hljs-title function_">print</span>(<span class="hljs-string">"Host: "</span>+<span class="hljs-title class_">String</span>(server)+<span class="hljs-string">"\n"</span>);
    client.<span class="hljs-title function_">print</span>(<span class="hljs-string">"Connection: close\n"</span>);
    client.<span class="hljs-title function_">print</span>(<span class="hljs-string">"X-THINGSPEAKAPIKEY: "</span>+apiKey+<span class="hljs-string">"\n"</span>);
    client.<span class="hljs-title function_">print</span>(<span class="hljs-string">"Content-Type: application/x-www-form-urlencoded\n"</span>);
    client.<span class="hljs-title function_">print</span>(<span class="hljs-string">"Content-Length: "</span>);
    client.<span class="hljs-title function_">print</span>(postStr.<span class="hljs-title function_">length</span>());
    client.<span class="hljs-title function_">print</span>(<span class="hljs-string">"\n\n"</span>);
    client.<span class="hljs-title function_">print</span>(postStr);
  }
  client.<span class="hljs-title function_">stop</span>();
}

<span class="hljs-keyword">void</span> <span class="hljs-title function_">handleWebserverRequest_index</span>(<span class="hljs-params"></span>){
  <span class="hljs-title class_">String</span> message = <span class="hljs-string">"{\"temperature\":"</span>+<span class="hljs-title class_">String</span>(temperature)+<span class="hljs-string">", \"humidity\":"</span>+<span class="hljs-title class_">String</span>(humidity)+<span class="hljs-string">", \"ppm\":"</span>+<span class="hljs-title class_">String</span>(ppm)+<span class="hljs-string">", \"rzero\":"</span>+<span class="hljs-title class_">String</span>(rzero)+<span class="hljs-string">"}"</span>;
  webserver.<span class="hljs-title function_">send</span>(<span class="hljs-number">200</span>, <span class="hljs-string">"application/json"</span>, message);
}

<span class="hljs-keyword">void</span> <span class="hljs-title function_">handleWebserverRequest_dht11</span>(<span class="hljs-params"></span>){
  <span class="hljs-title class_">String</span> message = <span class="hljs-string">"{\"temperature\":"</span>+<span class="hljs-title class_">String</span>(temperature)+<span class="hljs-string">", \"humidity\":"</span>+<span class="hljs-title class_">String</span>(humidity)+<span class="hljs-string">"}"</span>;
  webserver.<span class="hljs-title function_">send</span>(<span class="hljs-number">200</span>, <span class="hljs-string">"application/json"</span>, message);
}

<span class="hljs-keyword">void</span> <span class="hljs-title function_">handleWebserverRequest_mq135</span>(<span class="hljs-params"></span>){
  <span class="hljs-title class_">String</span> message = <span class="hljs-string">"{\"ppm\":"</span>+<span class="hljs-title class_">String</span>(ppm)+<span class="hljs-string">", \"rzero\":"</span>+<span class="hljs-title class_">String</span>(rzero)+<span class="hljs-string">"}"</span>;
  webserver.<span class="hljs-title function_">send</span>(<span class="hljs-number">200</span>, <span class="hljs-string">"application/json"</span>, message);
}

<span class="hljs-keyword">void</span> <span class="hljs-title function_">updateDisplay</span>(<span class="hljs-params"></span>){
  <span class="hljs-comment">// 첫 번째 줄 출력</span>
  lcd.<span class="hljs-title function_">setCursor</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>);
  lcd.<span class="hljs-title function_">print</span>(<span class="hljs-string">"T: "</span>+<span class="hljs-title class_">String</span>(<span class="hljs-title function_">int</span>(temperature))+(char)<span class="hljs-number">223</span>+<span class="hljs-string">"C | H: "</span>+<span class="hljs-title class_">String</span>(<span class="hljs-title function_">int</span>(humidity))+<span class="hljs-string">"%"</span>);

  <span class="hljs-comment">// 두 번째 줄 출력</span>
  lcd.<span class="hljs-title function_">setCursor</span>(<span class="hljs-number">0</span>, <span class="hljs-number">1</span>);
  lcd.<span class="hljs-title function_">print</span>(<span class="hljs-string">"PPM: "</span>+<span class="hljs-title class_">String</span>(<span class="hljs-title function_">int</span>(ppm)));
}
</code></pre>
<p>위의 소스 코드를 통해 대략적으로 우리가 무엇을 하려고 하는지 알 수 있을 것입니다. 그러나 간단히 시작해보겠습니다. 이제 한 단계씩 모든 것을 설명하겠습니다.</p>
<div class="content-ad"></div>
<p>Thingspeak</p>
<p>우리는 무료 IoT 데이터 플랫폼인 thingspeak.com을 사용하고 있어요. 먼저 계정을 만들어야 해요. 그런 다음에 새로운 API 토큰을 생성하고 그 토큰을 "apiKey" 변수에 입력해야 해요. 그 작업을 완료하면 센서 데이터를 위한 개별 대시보드를 만들 수 있어요.</p>
<p><img src="/assets/img/2024-06-22-CreatingYourOwnAirQualityMonitoringSystemwithESP8266_3.png" alt="이미지"></p>
<p>Wi-Fi</p>
<div class="content-ad"></div>
<p>인터넷을 통해 데이터를 송수신하려면 Wi-Fi 네트워크 이름과 암호를 입력해야 합니다:</p>
<pre><code class="hljs language-js"><span class="hljs-keyword">const</span> char* wifi_ssid = <span class="hljs-string">"WIFI-SSID"</span>;
<span class="hljs-keyword">const</span> char* wifi_password = <span class="hljs-string">"WIFI-Password"</span>;
</code></pre>
<p>Connections &#x26; Pins</p>
<p>일반적으로 esp 보드를 센서와 디스플레이에 연결할 때 동일한 하드웨어와 동일한 포트를 사용했다면 코드에서 포트 구성을 조정할 필요가 없습니다. 제 I2C 디스플레이 주소는 0x27입니다. 그러나 표시기의 주소가 제 것과 다를 수도 있습니다.</p>
<div class="content-ad"></div>
<pre><code class="hljs language-js"><span class="hljs-title class_">LiquidCrystal</span>_I2C <span class="hljs-title function_">lcd</span>(<span class="hljs-number">0x27</span>, <span class="hljs-variable constant_">LCD_COLUMNS</span>, <span class="hljs-variable constant_">LCD_ROWS</span>);
</code></pre>
<p>해당 소스 코드를 이 저장소에서 찾을 수 있습니다:</p>
<h1>센서의 테스트와 보정</h1>
<p>첫 번째 단계는 센서를 보정하는 것입니다. 이를 위해서 센서를 회로에 연결하고 보정 프로세스를 완료하려면 센서를 24시간동안 전원에 연결한 채로 두어야 합니다. 이후 약 1시간 동안 20°C 정도의 외부 공기에 노출시켜 상대 습도가 35% 정도 되도록 합니다. 이 작업이 완료되면 보정 값이 잘 설정될 것입니다.</p>
<div class="content-ad"></div>
<p>이 보정값을 얻으려면 다음 코드를 사용하십시오: rzero = gasSensor.getRZero();. 다음으로 중요한 단계는 보정 중에 결정한 값으로 기본 RZero 상수를 교체하는 것입니다. 이 값을 MQ135 센서 라이브러리의 파일 MQ135.h에서 찾고 #define RZERO 뒤에 특정 RZero 값을 넣어 교체하십시오. 각 센서마다 고유한 RZero 값이 있음을 기억하는 것이 중요합니다.</p>
<p>여기서 반드시 말씀드리고 싶은 것은, 특히 MQ-135 센서가 매우 정확하지 않다는 것입니다. 그러나 이러한 단계를 따르면 센서 읽기의 최상의 정확도를 보장할 수 있습니다.</p>
<h2>HTTP API</h2>
<p>이는 JSON 형식으로 센서 데이터를 제공하는 웹 서버를 포함합니다.
이 장치를 연결하면, 열화 후 IP 주소가 표시됩니다. 이 IP 주소를 즐겨 사용하는 브라우저에 넣으면 JSON 형식의 HTTP-API를 통해 센서 데이터를 수집할 수 있습니다.</p>
<div class="content-ad"></div>
<pre><code class="hljs language-js"><span class="hljs-variable constant_">GET</span> <span class="hljs-attr">http</span>:<span class="hljs-comment">//&#x3C;IP-Address>/</span>

{
  <span class="hljs-string">"temperature"</span>: <span class="hljs-number">23.6</span>,
  <span class="hljs-string">"humidity"</span>: <span class="hljs-number">31</span>,
  <span class="hljs-string">"ppm"</span>: <span class="hljs-number">443.96</span>,
  <span class="hljs-string">"rzero"</span>: <span class="hljs-number">979.75</span>
}
</code></pre>
<h1>사용자 정의 기회</h1>
<p>프로젝트의 유연성을 통해 추가적인 향상이 가능합니다. 예를 들어 공기 품질이 미리 정의된 임계 값 이하로 떨어질 때 경고 메시지를 보내는 알림 시스템을 설정할 수 있습니다. 집 안의 공기 질이 나빠질 경우 폰으로 알림을 받는 상상을 해보세요.</p>
<p>이 프로젝트를 통해 주변 공기의 품질을 파악할뿐만 아니라 맞춤화 및 개선 가능성에 대한 무한한 가능성을 열 수 있습니다. 전자 취미로 활동하시는 분이든, 단순히 더 깨끗한 공기를 들이쉬고 싶은 분이든, 직접 Arduino 공기 센서를 제작하는 것은 재미있고 보람차며 깨달음을 얻을 수 있는 여정입니다.</p>
<div class="content-ad"></div>
<p>DIY 아두이노 프로젝트에 대해 어떻게 생각하세요? 다른 멋진 프로젝트를 이미 만들어 보셨나요?</p>
<p>의견을 댓글로 남겨 주시고, 이 글이 마음에 드셨다면 아래에 있는 ♥ 버튼을 클릭하여 세계에 전파해주세요.</p>
</body>
</html>
</div></article></div></main></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"title":"ESP8266로 만드는 나만의 공기질 모니터링 시스템 만들기","description":"","date":"2024-06-22 18:55","slug":"2024-06-22-CreatingYourOwnAirQualityMonitoringSystemwithESP8266","content":"\n\n\u003cimg src=\"/assets/img/2024-06-22-CreatingYourOwnAirQualityMonitoringSystemwithESP8266_0.png\" /\u003e\n\n깨끗하고 신선한 공기는 건강한 생활 환경의 기본 요소입니다. 그런데 실제로 우리가 무엇을 호흡하고 있는지 얼마나 자주 알고 있을까요? 주변의 공기 품질을 모니터링하고 실시간으로 온도, 습도 등의 업데이트를 받을 수 있다면 어떨까요?\n\n사물인터넷(IoT) 시대에 우리는 주변 환경을 더 잘 이해하기 위한 기술을 손에 넣었습니다. 다재다능하고 가격이 적당한 ESP8266 마이크로컨트롤러는 지능적인 공기 센서 시스템을 구축하는 열쇠입니다.\n\n방 안의 공기 품질에 대한 데이터를 수집하는 장치뿐만 아니라 슬릭한 LCD 디스플레이와 편리한 웹 기반 대시보드에서 그 정보를 공유하는 장치가 있다고 상상해보세요. 당신은 환경에 대해 인식할 뿐만 아니라 건강에 대한 판단도 내릴 권리를 갖게 될 것입니다.\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n이 글에서는 여러분께 자신만의 대기질 모니터링 시스템을 만드는 여정에 참여해 보시도록 하겠습니다. 하드웨어 설정, ESP8266 마이크로컨트롤러 프로그래밍, 그리고 수집된 데이터에 액세스하기 위한 RESTful API 개발에 대해 알아보겠습니다. 기술에 능통하신 분이든, IoT 여정을 막 시작한 분이든, 이 프로젝트는 여러분이 지금껏 경험하지 못한 방식으로 주거 공간을 관찰하고 분석할 수 있도록 돕기 위해 설계되었습니다.\n\n대기질을 제어하고 DIY IoT 장치의 세계로 나아가는 준비가 되셨나요? 함께 시작해 신뢰성 있고 유익하며 비용 효율적인 대기질 모니터링 시스템을 만들어보세요.\n\n# 프로젝트 개요\n\n이 프로젝트의 목표는 대기질 데이터를 수집하고 분석하는 IoT 장치를 만드는 것입니다. 구체적으로 환경에서 온도, 습도 및 가끔은 대기질 매개변수를 추적하고 이 데이터를 Thingspeak 같은 플랫폼이나 화면에 전송하는 것을 추구합니다. 또한 간단한 웹 서버를 설정하여 REST API를 통해 센서 데이터를 제공하는 방법에 대해서도 알아볼 것입니다.\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n# 하드웨어 요구 사항\n\n![하드웨어 요구 사항](/assets/img/2024-06-22-CreatingYourOwnAirQualityMonitoringSystemwithESP8266_1.png)\n\n위 사진에 있는 모든 기기가 필요하지는 않아요😀.\n다음 부품이 필요해요:\n\n- NodeMCU ESP8266 보드\n- 4.7k 옴 저항\n- DHT11 센서\n- MQ135 센서\n- 16x2 LCD 디스플레이\n- I2C LCD 인터페이스 어댑터\n- 와이어\n- 브레드보드\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n## ESP8266의 힘\n\n이 프로젝트의 핵심은 ESP8266 마이크로컨트롤러에 있습니다. 이 작고 강력한 장치는 내장 Wi-Fi 기능을 갖춘 IoT(Internet of Things) 프로젝트에 이상적인 후보입니다. 이 장치는 우리에게 대기 질 데이터를 수집하고 전송하는 일을 쉽게 해줍니다.\n\n## 센서의 역할\n\n이 프로젝트에서는 두 가지 주요 센서인 DHT-11과 MQ-135 센서가 사용됩니다.\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n- DHT-11 센서: 이 센서는 온도 및 습도 데이터를 제공하여 환경의 편안함 수준을 더 포괄적으로 파악하는 데 도움을 줍니다.\n- MQ-135 센서: MQ-135 센서는 공기 품질에 집중합니다. 암모니아, 이산화탄소, 메탄을 포함한 다양한 가스를 감지할 수 있어 실내 공기 품질을 측정하는 데 탁월한 선택지입니다.\n\n## LCD 디스플레이\n\n이 프로젝트에서 사용된 LCD 디스플레이는 I2C(Inter-Integrated Circuit) 인터페이스가 장착된 Arduino 호환 디스플레이입니다. I2C는 다양한 구성 요소의 연결을 단순화하는 통신 프로토콜로, ESP8266와 같은 마이크로컨트롤러와의 통합에 이상적입니다. 원활한 호환성과 기능을 보장하기 위해 I2C 인터페이스 어댑터도 사용합니다. 나중에 소스 코드 조각을 작성하여 이 16x2 (16 문자 및 2 줄) 디스플레이를 사용하여 온도, 습도 및 공기 입자 정보를 표시합니다.\n\n# 배선 및 연결\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n프로젝트의 하드웨어 요구 사항은 최소한이며, 따라서 배선은 간단합니다. 회로도에 표시된 대로 부품을 브레드보드에 쉽게 설정할 수 있습니다. 전문적인 전자 기술 지식이 필요하지 않는 초보자 친화적인 프로젝트입니다.\n\n센서를 마이크로컨트롤러에 연결하는 것부터 시작해 봅시다.\n\n마지막 단계는 LCD 디스플레이를 마이크로컨트롤러에 연결하는 것입니다. 더 자세한 배선 테이블과 다이어그램은 Github 저장소에서 확인할 수 있습니다.\n\n![이미지](/assets/img/2024-06-22-CreatingYourOwnAirQualityMonitoringSystemwithESP8266_2.png)\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n# 소프트웨어 작성하기\n\n다음 섹션에서는 저희의 공기 센서 프로젝트 소스 코드를 찾을 수 있습니다. 아두이노 스튜디오를 사용하여 프로그래밍 및 코드를 마이크로컨트롤러에 업로드 하는 데 익숙하다고 가정합니다. 이 C++ 코드는 제 GitHub 저장소에 있으며, https://github.com/manuelkienlein/ESP8266-AirSensor에서 접근할 수 있습니다. 자유롭게 탐색하고 수정하며, ESP8266에 코드를 업로드하여 자신만의 공기 품질 모니터링 시스템을 설정할 수 있습니다. 이제 코드 구현을 살펴보겠습니다:\n\n```js\n#include \u003cESP8266WiFi.h\u003e\n#include \u003cESP8266WebServer.h\u003e\n#include \u003cLiquidCrystal_I2C.h\u003e\n#include \u003cDHT.h\u003e\n#include \"MQ135.h\"\n\n// Thingspeak 및 WiFi\nString apiKey = \"apiKey\";\nconst char* wifi_ssid = \"WIFI-SSID\";\nconst char* wifi_password = \"WIFI-Password\";\n\n// 변수와 상수\n#define PIN_DHT 3 // DHT11 핀\n#define PIN_MQ 0 // MQ-135 핀\n#define LCD_COLUMNS 16\n#define LCD_ROWS 2\nconst char* server = \"api.thingspeak.com\";\n#define INTERVAL_THINGSPEAK 20 // Thingspeak 지연\n\n// 초기화\nDHT dht(PIN_DHT, DHT11);\nMQ135 gasSensor = MQ135(PIN_MQ);\nLiquidCrystal_I2C lcd(0x27, LCD_COLUMNS, LCD_ROWS);\n\nWiFiClient client;\nESP8266WebServer webserver(80);\n\nfloat humidity;\nfloat temperature;\nfloat rzero;\nfloat ppm;\nunsigned long previousMillis;\nunsigned long currentMillis;\n\nvoid setup() {\n  Serial.begin(115200);\n  Serial.println(\"시작...\");\n\n  lcd.begin(LCD_COLUMNS, LCD_ROWS);\n  lcd.init();\n  lcd.backlight();\n  lcd.setCursor(0, 0);\n  lcd.print(\"시작...\");\n\n  dht.begin();\n\n  lcd.setCursor(0, 1);\n  lcd.print(\"WiFi 연결\");\n  setupWiFi();\n  lcd.clear();\n  lcd.print(\"IP 주소:\");\n  lcd.setCursor(0, 1);\n  lcd.print(WiFi.localIP());\n  delay(10000);\n\n  webserver.on(\"/\", handleWebserverRequest_index);\n  webserver.on(\"/dht11\", handleWebserverRequest_dht11);\n  webserver.on(\"/mq135\", handleWebserverRequest_mq135);\n  webserver.begin();\n\n  int warmup = 30;\n  lcd.clear();\n  lcd.print(\" IoT 공기센서 \");\n  for(int i = warmup; i \u003e 0; i--){\n    lcd.setCursor(0, 1);\n    lcd.print(\"열기중: \"+String(i)+\"초 \");\n    delay(1000);\n  }\n\n  lcd.clear();\n  delay(1000);\n}\n\nvoid loop() {\n  // 센서 값 갱신\n  humidity = dht.readHumidity();\n  temperature = dht.readTemperature();\n  rzero = gasSensor.getRZero();\n  ppm = gasSensor.getPPM();\n\n  // 현재 사용하지 않음\n  float rzero_corrected = gasSensor.getCorrectedRZero(temperature, humidity);\n  float ppm_corrected = gasSensor.getCorrectedPPM(temperature, humidity);\n  float resistance = gasSensor.getResistance();\n  float resistance_corrected = gasSensor.getCorrectedResistance(temperature, humidity);\n  int sensorValue = analogRead(PIN_MQ);\n\n  if (isnan(humidity) || isnan(temperature)) {\n    Serial.println(\"DHT 센서 데이터를 읽는 데 실패했습니다!\");\n    return;\n  }\n\n  // Thingspeak 업데이트 사이에 최소 15초 지연이 필요하기 때문에 20초 대기\n  currentMillis = millis();\n  if(currentMillis - previousMillis \u003e= INTERVAL_THINGSPEAK*1000){\n    previousMillis = currentMillis;\n    sendToThingspeak();\n  }\n\n  // 웹서버 요청 처리\n  webserver.handleClient();\n\n  // 디스플레이 업데이트\n  updateDisplay();\n\n  //Serial.println(\"온도:\"+String(t)+\" \"+\"습도:\"+String(h));\n  Serial.println(\"온도:\"+String(temperature)+\" \"+\"습도:\"+String(humidity)+\" \"+\"rZero:\"+String(rzero)+\" \"+\"rZeroC:\"+String(rzero_corrected)+\" \"+\"PPM:\"+String(ppm)+\" \"+\"PPMC:\"+String(ppm_corrected));\n  //Serial.println(\"온도:\"+String(temperature)+\" \"+\"습도:\"+String(humidity)+\" \"+\"rZero:\"+String(rzero)+\" \"+\"rZeroC:\"+String(rzero_corrected)+\" \"+\"PPM:\"+String(ppm)+\" \"+\"PPMC:\"+String(ppm_corrected)+\" \"+\"저항:\"+String(resistance)+\" \"+\"저항C:\"+String(resistance_corrected));\n\n  delay(1000);\n}\n\nvoid setupWiFi(){\n  WiFi.begin(wifi_ssid, wifi_password);\n\n  Serial.println();\n  Serial.println();\n  Serial.print(\"연결 중: \");\n  Serial.println(wifi_ssid);\n\n  WiFi.begin(wifi_ssid, wifi_password);\n\n  while (WiFi.status() != WL_CONNECTED) {\n    delay(500);\n    Serial.print(\".\");\n  }\n  Serial.println(\"\");\n  Serial.println(\"WiFi 연결됨\");\n\n  Serial.print(\"IP 주소: \");\n  Serial.println(WiFi.localIP());\n}\n\nvoid sendToThingspeak(){\n  if (client.connect(server,80)) { // \"184.106.153.149\" 또는 \"api.thingspeak.com\"\n    String postStr = apiKey;\n    postStr +=\"\u0026field1=\";\n    postStr += String(temperature);\n    postStr +=\"\u0026field2=\";\n    postStr += String(humidity);\n    postStr +=\"\u0026field3=\";\n    postStr += String(ppm);\n    postStr +=\"\u0026field4=\";\n    postStr += String(rzero);\n    postStr += \"\\r\\n\\r\\n\";\n\n    client.print(\"POST /update HTTP/1.1\\n\");\n    client.print(\"Host: \"+String(server)+\"\\n\");\n    client.print(\"Connection: close\\n\");\n    client.print(\"X-THINGSPEAKAPIKEY: \"+apiKey+\"\\n\");\n    client.print(\"Content-Type: application/x-www-form-urlencoded\\n\");\n    client.print(\"Content-Length: \");\n    client.print(postStr.length());\n    client.print(\"\\n\\n\");\n    client.print(postStr);\n  }\n  client.stop();\n}\n\nvoid handleWebserverRequest_index(){\n  String message = \"{\\\"temperature\\\":\"+String(temperature)+\", \\\"humidity\\\":\"+String(humidity)+\", \\\"ppm\\\":\"+String(ppm)+\", \\\"rzero\\\":\"+String(rzero)+\"}\";\n  webserver.send(200, \"application/json\", message);\n}\n\nvoid handleWebserverRequest_dht11(){\n  String message = \"{\\\"temperature\\\":\"+String(temperature)+\", \\\"humidity\\\":\"+String(humidity)+\"}\";\n  webserver.send(200, \"application/json\", message);\n}\n\nvoid handleWebserverRequest_mq135(){\n  String message = \"{\\\"ppm\\\":\"+String(ppm)+\", \\\"rzero\\\":\"+String(rzero)+\"}\";\n  webserver.send(200, \"application/json\", message);\n}\n\nvoid updateDisplay(){\n  // 첫 번째 줄 출력\n  lcd.setCursor(0, 0);\n  lcd.print(\"T: \"+String(int(temperature))+(char)223+\"C | H: \"+String(int(humidity))+\"%\");\n\n  // 두 번째 줄 출력\n  lcd.setCursor(0, 1);\n  lcd.print(\"PPM: \"+String(int(ppm)));\n}\n```\n\n위의 소스 코드를 통해 대략적으로 우리가 무엇을 하려고 하는지 알 수 있을 것입니다. 그러나 간단히 시작해보겠습니다. 이제 한 단계씩 모든 것을 설명하겠습니다.\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\nThingspeak\n\n우리는 무료 IoT 데이터 플랫폼인 thingspeak.com을 사용하고 있어요. 먼저 계정을 만들어야 해요. 그런 다음에 새로운 API 토큰을 생성하고 그 토큰을 \"apiKey\" 변수에 입력해야 해요. 그 작업을 완료하면 센서 데이터를 위한 개별 대시보드를 만들 수 있어요.\n\n![이미지](/assets/img/2024-06-22-CreatingYourOwnAirQualityMonitoringSystemwithESP8266_3.png)\n\nWi-Fi\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n인터넷을 통해 데이터를 송수신하려면 Wi-Fi 네트워크 이름과 암호를 입력해야 합니다:\n\n```js\nconst char* wifi_ssid = \"WIFI-SSID\";\nconst char* wifi_password = \"WIFI-Password\";\n```\n\nConnections \u0026 Pins\n\n일반적으로 esp 보드를 센서와 디스플레이에 연결할 때 동일한 하드웨어와 동일한 포트를 사용했다면 코드에서 포트 구성을 조정할 필요가 없습니다. 제 I2C 디스플레이 주소는 0x27입니다. 그러나 표시기의 주소가 제 것과 다를 수도 있습니다.\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n```js\nLiquidCrystal_I2C lcd(0x27, LCD_COLUMNS, LCD_ROWS);\n```\n\n해당 소스 코드를 이 저장소에서 찾을 수 있습니다:\n\n# 센서의 테스트와 보정\n\n첫 번째 단계는 센서를 보정하는 것입니다. 이를 위해서 센서를 회로에 연결하고 보정 프로세스를 완료하려면 센서를 24시간동안 전원에 연결한 채로 두어야 합니다. 이후 약 1시간 동안 20°C 정도의 외부 공기에 노출시켜 상대 습도가 35% 정도 되도록 합니다. 이 작업이 완료되면 보정 값이 잘 설정될 것입니다.\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n이 보정값을 얻으려면 다음 코드를 사용하십시오: rzero = gasSensor.getRZero();. 다음으로 중요한 단계는 보정 중에 결정한 값으로 기본 RZero 상수를 교체하는 것입니다. 이 값을 MQ135 센서 라이브러리의 파일 MQ135.h에서 찾고 #define RZERO 뒤에 특정 RZero 값을 넣어 교체하십시오. 각 센서마다 고유한 RZero 값이 있음을 기억하는 것이 중요합니다.\n\n여기서 반드시 말씀드리고 싶은 것은, 특히 MQ-135 센서가 매우 정확하지 않다는 것입니다. 그러나 이러한 단계를 따르면 센서 읽기의 최상의 정확도를 보장할 수 있습니다.\n\n## HTTP API\n\n이는 JSON 형식으로 센서 데이터를 제공하는 웹 서버를 포함합니다.\n이 장치를 연결하면, 열화 후 IP 주소가 표시됩니다. 이 IP 주소를 즐겨 사용하는 브라우저에 넣으면 JSON 형식의 HTTP-API를 통해 센서 데이터를 수집할 수 있습니다.\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n```js\nGET http://\u003cIP-Address\u003e/\n\n{\n  \"temperature\": 23.6,\n  \"humidity\": 31,\n  \"ppm\": 443.96,\n  \"rzero\": 979.75\n}\n```\n\n# 사용자 정의 기회\n\n프로젝트의 유연성을 통해 추가적인 향상이 가능합니다. 예를 들어 공기 품질이 미리 정의된 임계 값 이하로 떨어질 때 경고 메시지를 보내는 알림 시스템을 설정할 수 있습니다. 집 안의 공기 질이 나빠질 경우 폰으로 알림을 받는 상상을 해보세요.\n\n이 프로젝트를 통해 주변 공기의 품질을 파악할뿐만 아니라 맞춤화 및 개선 가능성에 대한 무한한 가능성을 열 수 있습니다. 전자 취미로 활동하시는 분이든, 단순히 더 깨끗한 공기를 들이쉬고 싶은 분이든, 직접 Arduino 공기 센서를 제작하는 것은 재미있고 보람차며 깨달음을 얻을 수 있는 여정입니다.\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\nDIY 아두이노 프로젝트에 대해 어떻게 생각하세요? 다른 멋진 프로젝트를 이미 만들어 보셨나요?\n\n의견을 댓글로 남겨 주시고, 이 글이 마음에 드셨다면 아래에 있는 ♥ 버튼을 클릭하여 세계에 전파해주세요.","ogImage":{"url":"/assets/img/2024-06-22-CreatingYourOwnAirQualityMonitoringSystemwithESP8266_0.png"},"coverImage":"/assets/img/2024-06-22-CreatingYourOwnAirQualityMonitoringSystemwithESP8266_0.png","tag":["Tech"],"readingTime":10},"content":"\u003c!doctype html\u003e\n\u003chtml lang=\"en\"\u003e\n\u003chead\u003e\n\u003cmeta charset=\"utf-8\"\u003e\n\u003cmeta content=\"width=device-width, initial-scale=1\" name=\"viewport\"\u003e\n\u003c/head\u003e\n\u003cbody\u003e\n\u003cimg src=\"/assets/img/2024-06-22-CreatingYourOwnAirQualityMonitoringSystemwithESP8266_0.png\"\u003e\n\u003cp\u003e깨끗하고 신선한 공기는 건강한 생활 환경의 기본 요소입니다. 그런데 실제로 우리가 무엇을 호흡하고 있는지 얼마나 자주 알고 있을까요? 주변의 공기 품질을 모니터링하고 실시간으로 온도, 습도 등의 업데이트를 받을 수 있다면 어떨까요?\u003c/p\u003e\n\u003cp\u003e사물인터넷(IoT) 시대에 우리는 주변 환경을 더 잘 이해하기 위한 기술을 손에 넣었습니다. 다재다능하고 가격이 적당한 ESP8266 마이크로컨트롤러는 지능적인 공기 센서 시스템을 구축하는 열쇠입니다.\u003c/p\u003e\n\u003cp\u003e방 안의 공기 품질에 대한 데이터를 수집하는 장치뿐만 아니라 슬릭한 LCD 디스플레이와 편리한 웹 기반 대시보드에서 그 정보를 공유하는 장치가 있다고 상상해보세요. 당신은 환경에 대해 인식할 뿐만 아니라 건강에 대한 판단도 내릴 권리를 갖게 될 것입니다.\u003c/p\u003e\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\u003cp\u003e이 글에서는 여러분께 자신만의 대기질 모니터링 시스템을 만드는 여정에 참여해 보시도록 하겠습니다. 하드웨어 설정, ESP8266 마이크로컨트롤러 프로그래밍, 그리고 수집된 데이터에 액세스하기 위한 RESTful API 개발에 대해 알아보겠습니다. 기술에 능통하신 분이든, IoT 여정을 막 시작한 분이든, 이 프로젝트는 여러분이 지금껏 경험하지 못한 방식으로 주거 공간을 관찰하고 분석할 수 있도록 돕기 위해 설계되었습니다.\u003c/p\u003e\n\u003cp\u003e대기질을 제어하고 DIY IoT 장치의 세계로 나아가는 준비가 되셨나요? 함께 시작해 신뢰성 있고 유익하며 비용 효율적인 대기질 모니터링 시스템을 만들어보세요.\u003c/p\u003e\n\u003ch1\u003e프로젝트 개요\u003c/h1\u003e\n\u003cp\u003e이 프로젝트의 목표는 대기질 데이터를 수집하고 분석하는 IoT 장치를 만드는 것입니다. 구체적으로 환경에서 온도, 습도 및 가끔은 대기질 매개변수를 추적하고 이 데이터를 Thingspeak 같은 플랫폼이나 화면에 전송하는 것을 추구합니다. 또한 간단한 웹 서버를 설정하여 REST API를 통해 센서 데이터를 제공하는 방법에 대해서도 알아볼 것입니다.\u003c/p\u003e\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\u003ch1\u003e하드웨어 요구 사항\u003c/h1\u003e\n\u003cp\u003e\u003cimg src=\"/assets/img/2024-06-22-CreatingYourOwnAirQualityMonitoringSystemwithESP8266_1.png\" alt=\"하드웨어 요구 사항\"\u003e\u003c/p\u003e\n\u003cp\u003e위 사진에 있는 모든 기기가 필요하지는 않아요😀.\n다음 부품이 필요해요:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eNodeMCU ESP8266 보드\u003c/li\u003e\n\u003cli\u003e4.7k 옴 저항\u003c/li\u003e\n\u003cli\u003eDHT11 센서\u003c/li\u003e\n\u003cli\u003eMQ135 센서\u003c/li\u003e\n\u003cli\u003e16x2 LCD 디스플레이\u003c/li\u003e\n\u003cli\u003eI2C LCD 인터페이스 어댑터\u003c/li\u003e\n\u003cli\u003e와이어\u003c/li\u003e\n\u003cli\u003e브레드보드\u003c/li\u003e\n\u003c/ul\u003e\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\u003ch2\u003eESP8266의 힘\u003c/h2\u003e\n\u003cp\u003e이 프로젝트의 핵심은 ESP8266 마이크로컨트롤러에 있습니다. 이 작고 강력한 장치는 내장 Wi-Fi 기능을 갖춘 IoT(Internet of Things) 프로젝트에 이상적인 후보입니다. 이 장치는 우리에게 대기 질 데이터를 수집하고 전송하는 일을 쉽게 해줍니다.\u003c/p\u003e\n\u003ch2\u003e센서의 역할\u003c/h2\u003e\n\u003cp\u003e이 프로젝트에서는 두 가지 주요 센서인 DHT-11과 MQ-135 센서가 사용됩니다.\u003c/p\u003e\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\u003cul\u003e\n\u003cli\u003eDHT-11 센서: 이 센서는 온도 및 습도 데이터를 제공하여 환경의 편안함 수준을 더 포괄적으로 파악하는 데 도움을 줍니다.\u003c/li\u003e\n\u003cli\u003eMQ-135 센서: MQ-135 센서는 공기 품질에 집중합니다. 암모니아, 이산화탄소, 메탄을 포함한 다양한 가스를 감지할 수 있어 실내 공기 품질을 측정하는 데 탁월한 선택지입니다.\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2\u003eLCD 디스플레이\u003c/h2\u003e\n\u003cp\u003e이 프로젝트에서 사용된 LCD 디스플레이는 I2C(Inter-Integrated Circuit) 인터페이스가 장착된 Arduino 호환 디스플레이입니다. I2C는 다양한 구성 요소의 연결을 단순화하는 통신 프로토콜로, ESP8266와 같은 마이크로컨트롤러와의 통합에 이상적입니다. 원활한 호환성과 기능을 보장하기 위해 I2C 인터페이스 어댑터도 사용합니다. 나중에 소스 코드 조각을 작성하여 이 16x2 (16 문자 및 2 줄) 디스플레이를 사용하여 온도, 습도 및 공기 입자 정보를 표시합니다.\u003c/p\u003e\n\u003ch1\u003e배선 및 연결\u003c/h1\u003e\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\u003cp\u003e프로젝트의 하드웨어 요구 사항은 최소한이며, 따라서 배선은 간단합니다. 회로도에 표시된 대로 부품을 브레드보드에 쉽게 설정할 수 있습니다. 전문적인 전자 기술 지식이 필요하지 않는 초보자 친화적인 프로젝트입니다.\u003c/p\u003e\n\u003cp\u003e센서를 마이크로컨트롤러에 연결하는 것부터 시작해 봅시다.\u003c/p\u003e\n\u003cp\u003e마지막 단계는 LCD 디스플레이를 마이크로컨트롤러에 연결하는 것입니다. 더 자세한 배선 테이블과 다이어그램은 Github 저장소에서 확인할 수 있습니다.\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/assets/img/2024-06-22-CreatingYourOwnAirQualityMonitoringSystemwithESP8266_2.png\" alt=\"이미지\"\u003e\u003c/p\u003e\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\u003ch1\u003e소프트웨어 작성하기\u003c/h1\u003e\n\u003cp\u003e다음 섹션에서는 저희의 공기 센서 프로젝트 소스 코드를 찾을 수 있습니다. 아두이노 스튜디오를 사용하여 프로그래밍 및 코드를 마이크로컨트롤러에 업로드 하는 데 익숙하다고 가정합니다. 이 C++ 코드는 제 GitHub 저장소에 있으며, \u003ca href=\"https://github.com/manuelkienlein/ESP8266-AirSensor%EC%97%90%EC%84%9C\" rel=\"nofollow\" target=\"_blank\"\u003ehttps://github.com/manuelkienlein/ESP8266-AirSensor에서\u003c/a\u003e 접근할 수 있습니다. 자유롭게 탐색하고 수정하며, ESP8266에 코드를 업로드하여 자신만의 공기 품질 모니터링 시스템을 설정할 수 있습니다. 이제 코드 구현을 살펴보겠습니다:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e#include \u0026#x3C;\u003cspan class=\"hljs-title class_\"\u003eESP8266WiFi\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003eh\u003c/span\u003e\u003e\n#include \u0026#x3C;\u003cspan class=\"hljs-title class_\"\u003eESP8266WebServer\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003eh\u003c/span\u003e\u003e\n#include \u0026#x3C;\u003cspan class=\"hljs-title class_\"\u003eLiquidCrystal\u003c/span\u003e_I2C.\u003cspan class=\"hljs-property\"\u003eh\u003c/span\u003e\u003e\n#include \u0026#x3C;\u003cspan class=\"hljs-variable constant_\"\u003eDHT\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003eh\u003c/span\u003e\u003e\n#include \u003cspan class=\"hljs-string\"\u003e\"MQ135.h\"\u003c/span\u003e\n\n\u003cspan class=\"hljs-comment\"\u003e// Thingspeak 및 WiFi\u003c/span\u003e\n\u003cspan class=\"hljs-title class_\"\u003eString\u003c/span\u003e apiKey = \u003cspan class=\"hljs-string\"\u003e\"apiKey\"\u003c/span\u003e;\n\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e char* wifi_ssid = \u003cspan class=\"hljs-string\"\u003e\"WIFI-SSID\"\u003c/span\u003e;\n\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e char* wifi_password = \u003cspan class=\"hljs-string\"\u003e\"WIFI-Password\"\u003c/span\u003e;\n\n\u003cspan class=\"hljs-comment\"\u003e// 변수와 상수\u003c/span\u003e\n#define \u003cspan class=\"hljs-variable constant_\"\u003ePIN_DHT\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e3\u003c/span\u003e \u003cspan class=\"hljs-comment\"\u003e// DHT11 핀\u003c/span\u003e\n#define \u003cspan class=\"hljs-variable constant_\"\u003ePIN_MQ\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e \u003cspan class=\"hljs-comment\"\u003e// MQ-135 핀\u003c/span\u003e\n#define \u003cspan class=\"hljs-variable constant_\"\u003eLCD_COLUMNS\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e16\u003c/span\u003e\n#define \u003cspan class=\"hljs-variable constant_\"\u003eLCD_ROWS\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e2\u003c/span\u003e\n\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e char* server = \u003cspan class=\"hljs-string\"\u003e\"api.thingspeak.com\"\u003c/span\u003e;\n#define \u003cspan class=\"hljs-variable constant_\"\u003eINTERVAL_THINGSPEAK\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e20\u003c/span\u003e \u003cspan class=\"hljs-comment\"\u003e// Thingspeak 지연\u003c/span\u003e\n\n\u003cspan class=\"hljs-comment\"\u003e// 초기화\u003c/span\u003e\n\u003cspan class=\"hljs-variable constant_\"\u003eDHT\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003edht\u003c/span\u003e(\u003cspan class=\"hljs-variable constant_\"\u003ePIN_DHT\u003c/span\u003e, \u003cspan class=\"hljs-title class_\"\u003eDHT11\u003c/span\u003e);\n\u003cspan class=\"hljs-title class_\"\u003eMQ135\u003c/span\u003e gasSensor = \u003cspan class=\"hljs-title class_\"\u003eMQ135\u003c/span\u003e(\u003cspan class=\"hljs-variable constant_\"\u003ePIN_MQ\u003c/span\u003e);\n\u003cspan class=\"hljs-title class_\"\u003eLiquidCrystal\u003c/span\u003e_I2C \u003cspan class=\"hljs-title function_\"\u003elcd\u003c/span\u003e(\u003cspan class=\"hljs-number\"\u003e0x27\u003c/span\u003e, \u003cspan class=\"hljs-variable constant_\"\u003eLCD_COLUMNS\u003c/span\u003e, \u003cspan class=\"hljs-variable constant_\"\u003eLCD_ROWS\u003c/span\u003e);\n\n\u003cspan class=\"hljs-title class_\"\u003eWiFiClient\u003c/span\u003e client;\n\u003cspan class=\"hljs-title class_\"\u003eESP8266WebServer\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003ewebserver\u003c/span\u003e(\u003cspan class=\"hljs-number\"\u003e80\u003c/span\u003e);\n\nfloat humidity;\nfloat temperature;\nfloat rzero;\nfloat ppm;\nunsigned long previousMillis;\nunsigned long currentMillis;\n\n\u003cspan class=\"hljs-keyword\"\u003evoid\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003esetup\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003e\u003c/span\u003e) {\n  \u003cspan class=\"hljs-title class_\"\u003eSerial\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003ebegin\u003c/span\u003e(\u003cspan class=\"hljs-number\"\u003e115200\u003c/span\u003e);\n  \u003cspan class=\"hljs-title class_\"\u003eSerial\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003eprintln\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\"시작...\"\u003c/span\u003e);\n\n  lcd.\u003cspan class=\"hljs-title function_\"\u003ebegin\u003c/span\u003e(\u003cspan class=\"hljs-variable constant_\"\u003eLCD_COLUMNS\u003c/span\u003e, \u003cspan class=\"hljs-variable constant_\"\u003eLCD_ROWS\u003c/span\u003e);\n  lcd.\u003cspan class=\"hljs-title function_\"\u003einit\u003c/span\u003e();\n  lcd.\u003cspan class=\"hljs-title function_\"\u003ebacklight\u003c/span\u003e();\n  lcd.\u003cspan class=\"hljs-title function_\"\u003esetCursor\u003c/span\u003e(\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e, \u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e);\n  lcd.\u003cspan class=\"hljs-title function_\"\u003eprint\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\"시작...\"\u003c/span\u003e);\n\n  dht.\u003cspan class=\"hljs-title function_\"\u003ebegin\u003c/span\u003e();\n\n  lcd.\u003cspan class=\"hljs-title function_\"\u003esetCursor\u003c/span\u003e(\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e, \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e);\n  lcd.\u003cspan class=\"hljs-title function_\"\u003eprint\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\"WiFi 연결\"\u003c/span\u003e);\n  \u003cspan class=\"hljs-title function_\"\u003esetupWiFi\u003c/span\u003e();\n  lcd.\u003cspan class=\"hljs-title function_\"\u003eclear\u003c/span\u003e();\n  lcd.\u003cspan class=\"hljs-title function_\"\u003eprint\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\"IP 주소:\"\u003c/span\u003e);\n  lcd.\u003cspan class=\"hljs-title function_\"\u003esetCursor\u003c/span\u003e(\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e, \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e);\n  lcd.\u003cspan class=\"hljs-title function_\"\u003eprint\u003c/span\u003e(\u003cspan class=\"hljs-title class_\"\u003eWiFi\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003elocalIP\u003c/span\u003e());\n  \u003cspan class=\"hljs-title function_\"\u003edelay\u003c/span\u003e(\u003cspan class=\"hljs-number\"\u003e10000\u003c/span\u003e);\n\n  webserver.\u003cspan class=\"hljs-title function_\"\u003eon\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\"/\"\u003c/span\u003e, handleWebserverRequest_index);\n  webserver.\u003cspan class=\"hljs-title function_\"\u003eon\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\"/dht11\"\u003c/span\u003e, handleWebserverRequest_dht11);\n  webserver.\u003cspan class=\"hljs-title function_\"\u003eon\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\"/mq135\"\u003c/span\u003e, handleWebserverRequest_mq135);\n  webserver.\u003cspan class=\"hljs-title function_\"\u003ebegin\u003c/span\u003e();\n\n  int warmup = \u003cspan class=\"hljs-number\"\u003e30\u003c/span\u003e;\n  lcd.\u003cspan class=\"hljs-title function_\"\u003eclear\u003c/span\u003e();\n  lcd.\u003cspan class=\"hljs-title function_\"\u003eprint\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\" IoT 공기센서 \"\u003c/span\u003e);\n  \u003cspan class=\"hljs-keyword\"\u003efor\u003c/span\u003e(int i = warmup; i \u003e \u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e; i--){\n    lcd.\u003cspan class=\"hljs-title function_\"\u003esetCursor\u003c/span\u003e(\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e, \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e);\n    lcd.\u003cspan class=\"hljs-title function_\"\u003eprint\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\"열기중: \"\u003c/span\u003e+\u003cspan class=\"hljs-title class_\"\u003eString\u003c/span\u003e(i)+\u003cspan class=\"hljs-string\"\u003e\"초 \"\u003c/span\u003e);\n    \u003cspan class=\"hljs-title function_\"\u003edelay\u003c/span\u003e(\u003cspan class=\"hljs-number\"\u003e1000\u003c/span\u003e);\n  }\n\n  lcd.\u003cspan class=\"hljs-title function_\"\u003eclear\u003c/span\u003e();\n  \u003cspan class=\"hljs-title function_\"\u003edelay\u003c/span\u003e(\u003cspan class=\"hljs-number\"\u003e1000\u003c/span\u003e);\n}\n\n\u003cspan class=\"hljs-keyword\"\u003evoid\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003eloop\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003e\u003c/span\u003e) {\n  \u003cspan class=\"hljs-comment\"\u003e// 센서 값 갱신\u003c/span\u003e\n  humidity = dht.\u003cspan class=\"hljs-title function_\"\u003ereadHumidity\u003c/span\u003e();\n  temperature = dht.\u003cspan class=\"hljs-title function_\"\u003ereadTemperature\u003c/span\u003e();\n  rzero = gasSensor.\u003cspan class=\"hljs-title function_\"\u003egetRZero\u003c/span\u003e();\n  ppm = gasSensor.\u003cspan class=\"hljs-title function_\"\u003egetPPM\u003c/span\u003e();\n\n  \u003cspan class=\"hljs-comment\"\u003e// 현재 사용하지 않음\u003c/span\u003e\n  float rzero_corrected = gasSensor.\u003cspan class=\"hljs-title function_\"\u003egetCorrectedRZero\u003c/span\u003e(temperature, humidity);\n  float ppm_corrected = gasSensor.\u003cspan class=\"hljs-title function_\"\u003egetCorrectedPPM\u003c/span\u003e(temperature, humidity);\n  float resistance = gasSensor.\u003cspan class=\"hljs-title function_\"\u003egetResistance\u003c/span\u003e();\n  float resistance_corrected = gasSensor.\u003cspan class=\"hljs-title function_\"\u003egetCorrectedResistance\u003c/span\u003e(temperature, humidity);\n  int sensorValue = \u003cspan class=\"hljs-title function_\"\u003eanalogRead\u003c/span\u003e(\u003cspan class=\"hljs-variable constant_\"\u003ePIN_MQ\u003c/span\u003e);\n\n  \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (\u003cspan class=\"hljs-title function_\"\u003eisnan\u003c/span\u003e(humidity) || \u003cspan class=\"hljs-title function_\"\u003eisnan\u003c/span\u003e(temperature)) {\n    \u003cspan class=\"hljs-title class_\"\u003eSerial\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003eprintln\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\"DHT 센서 데이터를 읽는 데 실패했습니다!\"\u003c/span\u003e);\n    \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e;\n  }\n\n  \u003cspan class=\"hljs-comment\"\u003e// Thingspeak 업데이트 사이에 최소 15초 지연이 필요하기 때문에 20초 대기\u003c/span\u003e\n  currentMillis = \u003cspan class=\"hljs-title function_\"\u003emillis\u003c/span\u003e();\n  \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e(currentMillis - previousMillis \u003e= \u003cspan class=\"hljs-variable constant_\"\u003eINTERVAL_THINGSPEAK\u003c/span\u003e*\u003cspan class=\"hljs-number\"\u003e1000\u003c/span\u003e){\n    previousMillis = currentMillis;\n    \u003cspan class=\"hljs-title function_\"\u003esendToThingspeak\u003c/span\u003e();\n  }\n\n  \u003cspan class=\"hljs-comment\"\u003e// 웹서버 요청 처리\u003c/span\u003e\n  webserver.\u003cspan class=\"hljs-title function_\"\u003ehandleClient\u003c/span\u003e();\n\n  \u003cspan class=\"hljs-comment\"\u003e// 디스플레이 업데이트\u003c/span\u003e\n  \u003cspan class=\"hljs-title function_\"\u003eupdateDisplay\u003c/span\u003e();\n\n  \u003cspan class=\"hljs-comment\"\u003e//Serial.println(\"온도:\"+String(t)+\" \"+\"습도:\"+String(h));\u003c/span\u003e\n  \u003cspan class=\"hljs-title class_\"\u003eSerial\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003eprintln\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\"온도:\"\u003c/span\u003e+\u003cspan class=\"hljs-title class_\"\u003eString\u003c/span\u003e(temperature)+\u003cspan class=\"hljs-string\"\u003e\" \"\u003c/span\u003e+\u003cspan class=\"hljs-string\"\u003e\"습도:\"\u003c/span\u003e+\u003cspan class=\"hljs-title class_\"\u003eString\u003c/span\u003e(humidity)+\u003cspan class=\"hljs-string\"\u003e\" \"\u003c/span\u003e+\u003cspan class=\"hljs-string\"\u003e\"rZero:\"\u003c/span\u003e+\u003cspan class=\"hljs-title class_\"\u003eString\u003c/span\u003e(rzero)+\u003cspan class=\"hljs-string\"\u003e\" \"\u003c/span\u003e+\u003cspan class=\"hljs-string\"\u003e\"rZeroC:\"\u003c/span\u003e+\u003cspan class=\"hljs-title class_\"\u003eString\u003c/span\u003e(rzero_corrected)+\u003cspan class=\"hljs-string\"\u003e\" \"\u003c/span\u003e+\u003cspan class=\"hljs-string\"\u003e\"PPM:\"\u003c/span\u003e+\u003cspan class=\"hljs-title class_\"\u003eString\u003c/span\u003e(ppm)+\u003cspan class=\"hljs-string\"\u003e\" \"\u003c/span\u003e+\u003cspan class=\"hljs-string\"\u003e\"PPMC:\"\u003c/span\u003e+\u003cspan class=\"hljs-title class_\"\u003eString\u003c/span\u003e(ppm_corrected));\n  \u003cspan class=\"hljs-comment\"\u003e//Serial.println(\"온도:\"+String(temperature)+\" \"+\"습도:\"+String(humidity)+\" \"+\"rZero:\"+String(rzero)+\" \"+\"rZeroC:\"+String(rzero_corrected)+\" \"+\"PPM:\"+String(ppm)+\" \"+\"PPMC:\"+String(ppm_corrected)+\" \"+\"저항:\"+String(resistance)+\" \"+\"저항C:\"+String(resistance_corrected));\u003c/span\u003e\n\n  \u003cspan class=\"hljs-title function_\"\u003edelay\u003c/span\u003e(\u003cspan class=\"hljs-number\"\u003e1000\u003c/span\u003e);\n}\n\n\u003cspan class=\"hljs-keyword\"\u003evoid\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003esetupWiFi\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003e\u003c/span\u003e){\n  \u003cspan class=\"hljs-title class_\"\u003eWiFi\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003ebegin\u003c/span\u003e(wifi_ssid, wifi_password);\n\n  \u003cspan class=\"hljs-title class_\"\u003eSerial\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003eprintln\u003c/span\u003e();\n  \u003cspan class=\"hljs-title class_\"\u003eSerial\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003eprintln\u003c/span\u003e();\n  \u003cspan class=\"hljs-title class_\"\u003eSerial\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003eprint\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\"연결 중: \"\u003c/span\u003e);\n  \u003cspan class=\"hljs-title class_\"\u003eSerial\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003eprintln\u003c/span\u003e(wifi_ssid);\n\n  \u003cspan class=\"hljs-title class_\"\u003eWiFi\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003ebegin\u003c/span\u003e(wifi_ssid, wifi_password);\n\n  \u003cspan class=\"hljs-keyword\"\u003ewhile\u003c/span\u003e (\u003cspan class=\"hljs-title class_\"\u003eWiFi\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003estatus\u003c/span\u003e() != \u003cspan class=\"hljs-variable constant_\"\u003eWL_CONNECTED\u003c/span\u003e) {\n    \u003cspan class=\"hljs-title function_\"\u003edelay\u003c/span\u003e(\u003cspan class=\"hljs-number\"\u003e500\u003c/span\u003e);\n    \u003cspan class=\"hljs-title class_\"\u003eSerial\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003eprint\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\".\"\u003c/span\u003e);\n  }\n  \u003cspan class=\"hljs-title class_\"\u003eSerial\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003eprintln\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\"\"\u003c/span\u003e);\n  \u003cspan class=\"hljs-title class_\"\u003eSerial\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003eprintln\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\"WiFi 연결됨\"\u003c/span\u003e);\n\n  \u003cspan class=\"hljs-title class_\"\u003eSerial\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003eprint\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\"IP 주소: \"\u003c/span\u003e);\n  \u003cspan class=\"hljs-title class_\"\u003eSerial\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003eprintln\u003c/span\u003e(\u003cspan class=\"hljs-title class_\"\u003eWiFi\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003elocalIP\u003c/span\u003e());\n}\n\n\u003cspan class=\"hljs-keyword\"\u003evoid\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003esendToThingspeak\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003e\u003c/span\u003e){\n  \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (client.\u003cspan class=\"hljs-title function_\"\u003econnect\u003c/span\u003e(server,\u003cspan class=\"hljs-number\"\u003e80\u003c/span\u003e)) { \u003cspan class=\"hljs-comment\"\u003e// \"184.106.153.149\" 또는 \"api.thingspeak.com\"\u003c/span\u003e\n    \u003cspan class=\"hljs-title class_\"\u003eString\u003c/span\u003e postStr = apiKey;\n    postStr +=\u003cspan class=\"hljs-string\"\u003e\"\u0026#x26;field1=\"\u003c/span\u003e;\n    postStr += \u003cspan class=\"hljs-title class_\"\u003eString\u003c/span\u003e(temperature);\n    postStr +=\u003cspan class=\"hljs-string\"\u003e\"\u0026#x26;field2=\"\u003c/span\u003e;\n    postStr += \u003cspan class=\"hljs-title class_\"\u003eString\u003c/span\u003e(humidity);\n    postStr +=\u003cspan class=\"hljs-string\"\u003e\"\u0026#x26;field3=\"\u003c/span\u003e;\n    postStr += \u003cspan class=\"hljs-title class_\"\u003eString\u003c/span\u003e(ppm);\n    postStr +=\u003cspan class=\"hljs-string\"\u003e\"\u0026#x26;field4=\"\u003c/span\u003e;\n    postStr += \u003cspan class=\"hljs-title class_\"\u003eString\u003c/span\u003e(rzero);\n    postStr += \u003cspan class=\"hljs-string\"\u003e\"\\r\\n\\r\\n\"\u003c/span\u003e;\n\n    client.\u003cspan class=\"hljs-title function_\"\u003eprint\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\"POST /update HTTP/1.1\\n\"\u003c/span\u003e);\n    client.\u003cspan class=\"hljs-title function_\"\u003eprint\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\"Host: \"\u003c/span\u003e+\u003cspan class=\"hljs-title class_\"\u003eString\u003c/span\u003e(server)+\u003cspan class=\"hljs-string\"\u003e\"\\n\"\u003c/span\u003e);\n    client.\u003cspan class=\"hljs-title function_\"\u003eprint\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\"Connection: close\\n\"\u003c/span\u003e);\n    client.\u003cspan class=\"hljs-title function_\"\u003eprint\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\"X-THINGSPEAKAPIKEY: \"\u003c/span\u003e+apiKey+\u003cspan class=\"hljs-string\"\u003e\"\\n\"\u003c/span\u003e);\n    client.\u003cspan class=\"hljs-title function_\"\u003eprint\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\"Content-Type: application/x-www-form-urlencoded\\n\"\u003c/span\u003e);\n    client.\u003cspan class=\"hljs-title function_\"\u003eprint\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\"Content-Length: \"\u003c/span\u003e);\n    client.\u003cspan class=\"hljs-title function_\"\u003eprint\u003c/span\u003e(postStr.\u003cspan class=\"hljs-title function_\"\u003elength\u003c/span\u003e());\n    client.\u003cspan class=\"hljs-title function_\"\u003eprint\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\"\\n\\n\"\u003c/span\u003e);\n    client.\u003cspan class=\"hljs-title function_\"\u003eprint\u003c/span\u003e(postStr);\n  }\n  client.\u003cspan class=\"hljs-title function_\"\u003estop\u003c/span\u003e();\n}\n\n\u003cspan class=\"hljs-keyword\"\u003evoid\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003ehandleWebserverRequest_index\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003e\u003c/span\u003e){\n  \u003cspan class=\"hljs-title class_\"\u003eString\u003c/span\u003e message = \u003cspan class=\"hljs-string\"\u003e\"{\\\"temperature\\\":\"\u003c/span\u003e+\u003cspan class=\"hljs-title class_\"\u003eString\u003c/span\u003e(temperature)+\u003cspan class=\"hljs-string\"\u003e\", \\\"humidity\\\":\"\u003c/span\u003e+\u003cspan class=\"hljs-title class_\"\u003eString\u003c/span\u003e(humidity)+\u003cspan class=\"hljs-string\"\u003e\", \\\"ppm\\\":\"\u003c/span\u003e+\u003cspan class=\"hljs-title class_\"\u003eString\u003c/span\u003e(ppm)+\u003cspan class=\"hljs-string\"\u003e\", \\\"rzero\\\":\"\u003c/span\u003e+\u003cspan class=\"hljs-title class_\"\u003eString\u003c/span\u003e(rzero)+\u003cspan class=\"hljs-string\"\u003e\"}\"\u003c/span\u003e;\n  webserver.\u003cspan class=\"hljs-title function_\"\u003esend\u003c/span\u003e(\u003cspan class=\"hljs-number\"\u003e200\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\"application/json\"\u003c/span\u003e, message);\n}\n\n\u003cspan class=\"hljs-keyword\"\u003evoid\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003ehandleWebserverRequest_dht11\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003e\u003c/span\u003e){\n  \u003cspan class=\"hljs-title class_\"\u003eString\u003c/span\u003e message = \u003cspan class=\"hljs-string\"\u003e\"{\\\"temperature\\\":\"\u003c/span\u003e+\u003cspan class=\"hljs-title class_\"\u003eString\u003c/span\u003e(temperature)+\u003cspan class=\"hljs-string\"\u003e\", \\\"humidity\\\":\"\u003c/span\u003e+\u003cspan class=\"hljs-title class_\"\u003eString\u003c/span\u003e(humidity)+\u003cspan class=\"hljs-string\"\u003e\"}\"\u003c/span\u003e;\n  webserver.\u003cspan class=\"hljs-title function_\"\u003esend\u003c/span\u003e(\u003cspan class=\"hljs-number\"\u003e200\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\"application/json\"\u003c/span\u003e, message);\n}\n\n\u003cspan class=\"hljs-keyword\"\u003evoid\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003ehandleWebserverRequest_mq135\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003e\u003c/span\u003e){\n  \u003cspan class=\"hljs-title class_\"\u003eString\u003c/span\u003e message = \u003cspan class=\"hljs-string\"\u003e\"{\\\"ppm\\\":\"\u003c/span\u003e+\u003cspan class=\"hljs-title class_\"\u003eString\u003c/span\u003e(ppm)+\u003cspan class=\"hljs-string\"\u003e\", \\\"rzero\\\":\"\u003c/span\u003e+\u003cspan class=\"hljs-title class_\"\u003eString\u003c/span\u003e(rzero)+\u003cspan class=\"hljs-string\"\u003e\"}\"\u003c/span\u003e;\n  webserver.\u003cspan class=\"hljs-title function_\"\u003esend\u003c/span\u003e(\u003cspan class=\"hljs-number\"\u003e200\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\"application/json\"\u003c/span\u003e, message);\n}\n\n\u003cspan class=\"hljs-keyword\"\u003evoid\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003eupdateDisplay\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003e\u003c/span\u003e){\n  \u003cspan class=\"hljs-comment\"\u003e// 첫 번째 줄 출력\u003c/span\u003e\n  lcd.\u003cspan class=\"hljs-title function_\"\u003esetCursor\u003c/span\u003e(\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e, \u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e);\n  lcd.\u003cspan class=\"hljs-title function_\"\u003eprint\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\"T: \"\u003c/span\u003e+\u003cspan class=\"hljs-title class_\"\u003eString\u003c/span\u003e(\u003cspan class=\"hljs-title function_\"\u003eint\u003c/span\u003e(temperature))+(char)\u003cspan class=\"hljs-number\"\u003e223\u003c/span\u003e+\u003cspan class=\"hljs-string\"\u003e\"C | H: \"\u003c/span\u003e+\u003cspan class=\"hljs-title class_\"\u003eString\u003c/span\u003e(\u003cspan class=\"hljs-title function_\"\u003eint\u003c/span\u003e(humidity))+\u003cspan class=\"hljs-string\"\u003e\"%\"\u003c/span\u003e);\n\n  \u003cspan class=\"hljs-comment\"\u003e// 두 번째 줄 출력\u003c/span\u003e\n  lcd.\u003cspan class=\"hljs-title function_\"\u003esetCursor\u003c/span\u003e(\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e, \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e);\n  lcd.\u003cspan class=\"hljs-title function_\"\u003eprint\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\"PPM: \"\u003c/span\u003e+\u003cspan class=\"hljs-title class_\"\u003eString\u003c/span\u003e(\u003cspan class=\"hljs-title function_\"\u003eint\u003c/span\u003e(ppm)));\n}\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e위의 소스 코드를 통해 대략적으로 우리가 무엇을 하려고 하는지 알 수 있을 것입니다. 그러나 간단히 시작해보겠습니다. 이제 한 단계씩 모든 것을 설명하겠습니다.\u003c/p\u003e\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\u003cp\u003eThingspeak\u003c/p\u003e\n\u003cp\u003e우리는 무료 IoT 데이터 플랫폼인 thingspeak.com을 사용하고 있어요. 먼저 계정을 만들어야 해요. 그런 다음에 새로운 API 토큰을 생성하고 그 토큰을 \"apiKey\" 변수에 입력해야 해요. 그 작업을 완료하면 센서 데이터를 위한 개별 대시보드를 만들 수 있어요.\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/assets/img/2024-06-22-CreatingYourOwnAirQualityMonitoringSystemwithESP8266_3.png\" alt=\"이미지\"\u003e\u003c/p\u003e\n\u003cp\u003eWi-Fi\u003c/p\u003e\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\u003cp\u003e인터넷을 통해 데이터를 송수신하려면 Wi-Fi 네트워크 이름과 암호를 입력해야 합니다:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e char* wifi_ssid = \u003cspan class=\"hljs-string\"\u003e\"WIFI-SSID\"\u003c/span\u003e;\n\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e char* wifi_password = \u003cspan class=\"hljs-string\"\u003e\"WIFI-Password\"\u003c/span\u003e;\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eConnections \u0026#x26; Pins\u003c/p\u003e\n\u003cp\u003e일반적으로 esp 보드를 센서와 디스플레이에 연결할 때 동일한 하드웨어와 동일한 포트를 사용했다면 코드에서 포트 구성을 조정할 필요가 없습니다. 제 I2C 디스플레이 주소는 0x27입니다. 그러나 표시기의 주소가 제 것과 다를 수도 있습니다.\u003c/p\u003e\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-title class_\"\u003eLiquidCrystal\u003c/span\u003e_I2C \u003cspan class=\"hljs-title function_\"\u003elcd\u003c/span\u003e(\u003cspan class=\"hljs-number\"\u003e0x27\u003c/span\u003e, \u003cspan class=\"hljs-variable constant_\"\u003eLCD_COLUMNS\u003c/span\u003e, \u003cspan class=\"hljs-variable constant_\"\u003eLCD_ROWS\u003c/span\u003e);\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e해당 소스 코드를 이 저장소에서 찾을 수 있습니다:\u003c/p\u003e\n\u003ch1\u003e센서의 테스트와 보정\u003c/h1\u003e\n\u003cp\u003e첫 번째 단계는 센서를 보정하는 것입니다. 이를 위해서 센서를 회로에 연결하고 보정 프로세스를 완료하려면 센서를 24시간동안 전원에 연결한 채로 두어야 합니다. 이후 약 1시간 동안 20°C 정도의 외부 공기에 노출시켜 상대 습도가 35% 정도 되도록 합니다. 이 작업이 완료되면 보정 값이 잘 설정될 것입니다.\u003c/p\u003e\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\u003cp\u003e이 보정값을 얻으려면 다음 코드를 사용하십시오: rzero = gasSensor.getRZero();. 다음으로 중요한 단계는 보정 중에 결정한 값으로 기본 RZero 상수를 교체하는 것입니다. 이 값을 MQ135 센서 라이브러리의 파일 MQ135.h에서 찾고 #define RZERO 뒤에 특정 RZero 값을 넣어 교체하십시오. 각 센서마다 고유한 RZero 값이 있음을 기억하는 것이 중요합니다.\u003c/p\u003e\n\u003cp\u003e여기서 반드시 말씀드리고 싶은 것은, 특히 MQ-135 센서가 매우 정확하지 않다는 것입니다. 그러나 이러한 단계를 따르면 센서 읽기의 최상의 정확도를 보장할 수 있습니다.\u003c/p\u003e\n\u003ch2\u003eHTTP API\u003c/h2\u003e\n\u003cp\u003e이는 JSON 형식으로 센서 데이터를 제공하는 웹 서버를 포함합니다.\n이 장치를 연결하면, 열화 후 IP 주소가 표시됩니다. 이 IP 주소를 즐겨 사용하는 브라우저에 넣으면 JSON 형식의 HTTP-API를 통해 센서 데이터를 수집할 수 있습니다.\u003c/p\u003e\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-variable constant_\"\u003eGET\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003ehttp\u003c/span\u003e:\u003cspan class=\"hljs-comment\"\u003e//\u0026#x3C;IP-Address\u003e/\u003c/span\u003e\n\n{\n  \u003cspan class=\"hljs-string\"\u003e\"temperature\"\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e23.6\u003c/span\u003e,\n  \u003cspan class=\"hljs-string\"\u003e\"humidity\"\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e31\u003c/span\u003e,\n  \u003cspan class=\"hljs-string\"\u003e\"ppm\"\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e443.96\u003c/span\u003e,\n  \u003cspan class=\"hljs-string\"\u003e\"rzero\"\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e979.75\u003c/span\u003e\n}\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch1\u003e사용자 정의 기회\u003c/h1\u003e\n\u003cp\u003e프로젝트의 유연성을 통해 추가적인 향상이 가능합니다. 예를 들어 공기 품질이 미리 정의된 임계 값 이하로 떨어질 때 경고 메시지를 보내는 알림 시스템을 설정할 수 있습니다. 집 안의 공기 질이 나빠질 경우 폰으로 알림을 받는 상상을 해보세요.\u003c/p\u003e\n\u003cp\u003e이 프로젝트를 통해 주변 공기의 품질을 파악할뿐만 아니라 맞춤화 및 개선 가능성에 대한 무한한 가능성을 열 수 있습니다. 전자 취미로 활동하시는 분이든, 단순히 더 깨끗한 공기를 들이쉬고 싶은 분이든, 직접 Arduino 공기 센서를 제작하는 것은 재미있고 보람차며 깨달음을 얻을 수 있는 여정입니다.\u003c/p\u003e\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\u003cp\u003eDIY 아두이노 프로젝트에 대해 어떻게 생각하세요? 다른 멋진 프로젝트를 이미 만들어 보셨나요?\u003c/p\u003e\n\u003cp\u003e의견을 댓글로 남겨 주시고, 이 글이 마음에 드셨다면 아래에 있는 ♥ 버튼을 클릭하여 세계에 전파해주세요.\u003c/p\u003e\n\u003c/body\u003e\n\u003c/html\u003e\n"},"__N_SSG":true},"page":"/post/[slug]","query":{"slug":"2024-06-22-CreatingYourOwnAirQualityMonitoringSystemwithESP8266"},"buildId":"CYQjEY3HhSkRTiL0gewc0","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>