---
title: "클라우드 스토리지 시스템으로 macOS 타임 머신 사용하기 OneDrive 방식"
description: ""
coverImage: "/assets/img/2024-06-22-macOSTimeMachineonyourCloudStoragesystemOneDriveforme_0.png"
date: 2024-06-22 16:19
ogImage: 
  url: /assets/img/2024-06-22-macOSTimeMachineonyourCloudStoragesystemOneDriveforme_0.png
tag: Tech
originalTitle: "macOS Time Machine on your Cloud Storage system (OneDrive for me)"
link: "https://medium.com/@vullnetyy/macos-time-machine-on-your-cloud-storage-system-onedrive-for-me-d3ae8f161b56"
---



![image](/assets/img/2024-06-22-macOSTimeMachineonyourCloudStoragesystemOneDriveforme_0.png)

# TLDR

만약 TimeMachine을 사용하여 맥을 이전 상태로 빠르게 복원하거나, 저장 드라이브가 손상되었거나 기계를 잃었을 때 새로운 맥을 구성하려면 아래 지침을 따르세요. 왜 이것을 하게 되었는지에 관한 전체 이야기는 아래 지침 섹션에서 읽을 수 있습니다.

## 요구 사항


<div class="content-ad"></div>

- 원드라이브, 드롭박스, 구글 드라이브, 아이클라우드 등의 macOS 애플리케이션을 가지고 있는 클라우드 스토리지 시스템이 필요합니다. 이 애플리케이션은 로컬 파일을 클라우드로 자동 동기화하고 그 반대도 할 수 있습니다.
- 해당 클라우드 서비스에 충분한 공간 또는 적절한 구독이 필요합니다.

## 설명

- 맥에서 디스크 유틸리티를 엽니다 (스포트라이트, 런처 또는 선호하는 3rd 파티 도구를 사용하여 '디스크 유틸리티'를 입력합니다).
- 파일 = 새 이미지 = 빈 이미지를 클릭합니다.
- 다음에 나열된 순서대로이 새 이미지를 구성합니다:

- 이름 저장 = 원하는 이름으로 저장하세요. 저는 제 이름을 "타임머신백업"이라고 지었습니다.
- 이름 = 이름 저장에 쓴 것과 동일하게 입력합니다.
- 이미지 형식 = 스파스 번들 디스크 이미지
- 크기 = 백업 크기의 상한을 고려하여 설정하세요. 제 크기는 300GB로 설정했습니다. 미리 300GB를 예약하지는 않지만 이 값이 상한이 될 것입니다. 나중에 작은 터미널 번거로움으로 크기를 조정할 수 있습니다.
- 형식 = 기본값인 APFS로 유지합니다.
- 암호화 = 128비트 AES. 이 선택에 대한 자세한 내용은 아래의 긴 버전 기사에서 확인할 수 있습니다.
- 파티션 = 기본값인 단일 파티션 — GUID 파티션 맵으로 유지합니다.

<div class="content-ad"></div>

4. 새로운 스파스 번들 디스크 이미지를 저장할 위치를 선택하세요. 저는 OneDrive에 저장했습니다. 이 파일을 "이 장치에 항상 보관"으로 설정하여 OneDrive와 가장 좋은 경험을 얻을 수 있도록 해야 했습니다.

5. 저장을 클릭하세요.

6. 터미널을 열고 다음 명령을 입력한 후 Enter 키를 누르세요. 암호를 요청받으면 입력하세요:

```js
sudo tmutil setdestination /Volumes/{마운트된-디스크-이미지}
```

<div class="content-ad"></div>

다음으로 타임 머신을 구성해야 합니다.

- 왼쪽 상단의 Apple 로고로 이동 = 시스템 환경 설정 = 일반 = 타임 머신
- 마운트된 디스크 이미지와 동일한 이름인 타임 머신 볼륨을 클릭합니다. 제 경우에는 TimeMachineBackups라고 이름이 지어져 있습니다.
- 백업이 발생하는 빈도를 구성하려면 옵션을 클릭하십시오.

마지막으로, 맥에 로그인할 때마다 이전에 만들었던 .sparsebundle을 자동으로 마운트할 수 있는 스크립트를 빠르게 설정하기 위해 이 가이드를 따라야 합니다. 그렇지 않으면 백업이 없는 상태가 될 수 있습니다:

macOS에 로그인할 때 암호화된 드라이브(sparsebundle)를 자동으로 마운트하기.

<div class="content-ad"></div>

## 선택 사항이지만 **강력 추천**

타임머신이 시스템 전체를 백업하여 엄청나게 큰 백업 파일을 만들지 않도록 하려면 우수한 "제외 목록(Exclusion List)"을 구성해야 합니다. 그렇지 않으면 맥과 클라우드 스토리지 서비스 양쪽 모두 저장 공간을 두 배 사용하게 될 거에요. 이 작업은 앞서 본 '백업에서 제외' 테이블에 항목을 추가하여 수행합니다.

저의 제외 목록에는 80개 이상의 항목이 포함되어 있습니다. 이 중 일부를 보려면 cmd+shift+.을 눌러야 합니다. 가장 중요한 몇 가지는 다음과 같습니다:

- 게임과 같은 대규모 애플리케이션 전체, Logic Pro X, Final Cut Pro, Xcode 및 나중에 수동으로 쉽게 설치할 수 있는 모든 것.
- 클라우드 스토리지 파일 전체. 이 파일들을 찾아야 합니다. 제 것은 다음 위치에 있었어요: ~/Library/Group Containers/UBF8T346G9.OneDriveStandaloneSuite 그리고 ~/Library/Cloud Storage
- ~/Library/Application Support/Steam, ~/Library/Application Support/Blizzard 등의 게임이 저장된 모든 위치.
- ~/Downloads
- /bin
- /Library/Caches
- ~/Library/Caches
- /sbin
- /System
- /usr
- /tmp
- /etc

<div class="content-ad"></div>

모든 과정을 거친 후, 제 첫 번째 백업 파일 크기는 약 120GB였어요. Time Machine은 매번 새로운 백업을 실행할 때 깃(Git)처럼 첫 번째 백업 위에 변경 사항만 추가하는 똑똑한 기능을 갖고 있어요. 이제 업데이트가 빨라졌고, 내 컴퓨터에 문제가 생겨도 많은 설정, 유틸리티 앱 및 구성을 되찾을 수 있다는 안전함을 느껴요.

이제, 이러한 결정을 내리게 된 이유와 방식에 대한 더 긴 이야기가 이어집니다...

# 김 때문에 Time Machine 백업을 클라우드에 저장하는 이유

## 왜 Time Machine 백업을 클라우드에 저장해야 할까요?

<div class="content-ad"></div>

나는 맥을 사용하기 시작한 지 얼마 되지 않았는데, 윈도우와 리눅스에서 온 나로써는 작지만 유용한 많은 기능이 누락되었음을 알았어. 그 중에서도 내가 정기적으로 의존하는 기능 중 하나는 화면의 왼쪽 반과 오른쪽 반에 창을 배치하는 기능이다. 맥에 정통한 친구들로부터 작은 응용 프로그램인 Magnet이 그 문제를 해결해 줄 수 있다는 것을 알았어. 나는 즉시 구매하고 문제를 충분히 해결했어. 이후에 내 맥을 최적화하는 방법에 대해 좀 더 탐구하다가 YouTube의 Snazzy Labs 채널을 발견했어. 이 두 영상을 통해 내가 매일 효과적으로 작업하는 데 많은 훌륭한 도구들을 얻을 수 있었어:

아래 비디오 설명의 타임스탬프를 사용하여 터미널 팁으로 건너뛸 수 있어.

유용한 앱 비디오

누구도 나에게 이러한 도구들이나 Snazzy Labs YouTube 채널을 홍보하기 위해 돈을 주지 않았어, 나는 그저 내 경험을 공유하고 싶었을 뿐이야. 나는 이제 Alfred, Bartender, Magnet, Dropzone, Hotkey 등의 작은 맥 유틸리티 애플리케이션들에 의존하고 있어. 나는 또한 새로운 맥으로 이동해야 하거나 내 기기에 문제가 생기는 경우에 다시 그 모든 단계를 거치고 내가 한 사용자 정의사항을 기억해야 하는 것을 원하지 않아.

<div class="content-ad"></div>

그래서 나는 클라우드 상의 타임 머신을 탐험하기 시작했어. 이미 Microsoft Office 365 패밀리 구독을 통해 OneDrive에서 1TB를 사용할 수 있었기 때문에, 그게 내가 가진 것이기 때문에 그냥 그것을 사용하기로 했지.

## 온라인 완전한 안내서의 부재

나는 나가야 할 것을 간결하게 구글에 타이핑해서 유용한 안내서에 쉽게 접근하는 것에 익숙하다. 하지만 이번에는 그렇게 되지 않았어. StackOverflow, SuperUser, Quora, Reddit, Apple의 지원 포럼 등에서 정보를 얻고, 이 문제를 해결하는 방법을 보여주는 완전한 안내서를 찾는 대신 조각조각만 얻었어. 그래서 Bing Chat을 사용해 GPT-4와 대화를 시도했지만, 별 도움이 되지 않았어. 그것은 계속해서 동일한 자료로 되돌아오게 하고 별로 도움되지 않는 내용의 짧은 요약을 제공했어. 최근 다른 많은 순간들 중 하나였어, 나는 GPT를 검색 엔진으로 사용하려고 하면 얼마나 어리석었는지 깨달았어. 분명히, 나는 그것을 위한 다양한 실용적인 용도를 찾았지만, 이런 것에는 사용하지 않는다.

그래서 나는 이것을 해결하기 위해 옷소매를 걷어차고 조각조각을 모아 이 문제를 해결해야 한다는 것을 깨달았어. 몇 시간 동안 파헤친 뒤, 결과에 만족하게 되어 이 문제를 해결하는 방법을 여러분에게 보여주기 위해 이 글을 쓰기로 결심했어.

<div class="content-ad"></div>

## AES 암호화 토끼굴

이미 알고 계시진 않았나요? 백업할 때는 항상 암호화해야 합니다. 컴퓨터에 어떤 종류의 데이터가 백업 파일로 저장될지 예측하기가 어렵기 때문에 원하는 파일을 명시적으로 포함하는 대신 제외 대상을 처리하는 경우가 많습니다. 미래의 공격자가 여러분이나 백업 파일을 어떻게 공격할지, 그리고 어떤 정보를 찾을지 상상하기는 더 어렵습니다. 개인 정보는 개인만 볼 수 있게 지키세요!

256비트 AES를 사용해 백업할 때 최고의 보안 선택이 될 것으로 생각했지만, 생각보다 속도가 느렸습니다. 벤치마킹이 필요하며, 이에 대해 더 통찰을 가진 다른 사람의 기여를 원합니다.

그 후 128비트 AES 암호화로 'sparse bundle 디스크 이미지'를 다시 만들었습니다. 더 빠르게 실행되었지만, macOS 자체에서 권장하는 것임에도 암호화가 충분히 안전하지 않을까 걱정했습니다. 확인하기 위해 구글링을 시작했고, crypto.stackexchange.com의 Lery가 브루스 슈나이어의 책 "Applied Cryptography"를 참조한 멋진 답변을 발견했습니다. 거기서 AES 256비트 키를 무차별 공격해도 더이상 단순한 연산만으로는 해독할 수 없다고 주장합니다. 다이슨 스피어에 대해 알지 못한다면, 즐거운 경험이 될 것입니다... 다이슨 스피어는 태양을 완전히 에워싸고 방출하는 에너지를 100% 캡처하기 위한 태양열 패널로 만들어진 이론적 공간입니다. 즐거운 시간을 보내려면 위키피디아 글을 확인하세요.

<div class="content-ad"></div>

요즘은 다이슨 구의를 사용하여 128비트 AES를 무차별 대입해 볼 수도 있을 거에요. 하지만 음... 나는 내 백업을 미래의 과학 소설 수준 문명에게서 보호하는 것을 계획하지 않았어요. 일단은 태양의 에너지를 이용해 나의 키를 얻으려고 할 만큼 오래 잡기 좋아할 필요는 없을 것 같아요.

하지만 개그는 이만하고, 백업 주변의 보안을 꼼꼼히 살피고 128비트 AES가 풀린다면 예전 백업을 삭제하거나 다시 암호화하는 것이 최선일 거에요.

## 제외 목록

이 부분은 꽤 귀찮은 작업이었어요. 수동으로 다양한 캐시, 복구할 필요가 없다고 판단한 애플리케이션 등을 찾아야 했어요. Finder에서 크기별로 파일과 폴더를 정렬하고 주변을 둘러보는 방식으로 이를 수행했답니다. 놓친 몇 가지 흥미로운 시스템 및 숨겨진 파일 및 폴더를 추가해야 한다고 알려준 퀘어 답변도 발견했어요:

<div class="content-ad"></div>

80개 항목까지 입력한 후, 뭔가 잘못했을 때 쉽게 복구할 수 있도록 목록을 내보낼 방법을 찾기로 결정했어요. 이렇게 하시면 됩니다:

```js
기본값 읽기 /Library/Preferences/com.apple.TimeMachine SkipPaths
```

그 방법을 알려준 Gilby에게 감사드려요!

루니 툰즈 엔딩 음악이 들리면서요.

<div class="content-ad"></div>

그거면 됐어요!