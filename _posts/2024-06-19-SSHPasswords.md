---
title: "SSH  비밀번호"
description: ""
coverImage: "/assets/img/2024-06-19-SSHPasswords_0.png"
date: 2024-06-19 08:39
ogImage: 
  url: /assets/img/2024-06-19-SSHPasswords_0.png
tag: Tech
originalTitle: "SSH > Passwords"
link: "https://medium.com/@mitchkodes/ssh-passwords-f43b9d027008"
---


아주 많은 사람들이 비밀번호와 그 작동 방식에 익숙합니다. 그래서 이 글에서는 SSH 키에 조금 더 초점을 맞추어 어떻게 작동하는지 살펴보겠습니다.

SSH가 무엇인가요?

SSH는 Secure Shell의 약자입니다. SSH는 컴퓨터가 리소스에 액세스하고 리눅스 서버에 변경을 가하는 데 사용되는 프로토콜입니다. 간단히 말해 SSH는 사용자가 파일과 같은 서버에 저장된 리소스를 볼 수 있고 변경할 수 있도록 해줍니다.

<div class="content-ad"></div>

SSH 키

SSH 키는 클라이언트 측 또는 사용자 컴퓨터에서 생성되는 암호화 키 세트로, 인증에 사용됩니다. 이를 통해 특정 개인만 서버 자원에 액세스할 수 있도록 보장합니다. 비밀번호가 작동하는 방식과 유사하지만 더 안전합니다. SSH 키는 쌍으로 생성됩니다. 공유되어서는 안 되는 비공개 키와 항상 사용자 장치에 보관되어야 하는 개인 키가 있으며, 다른 장치나 서버와의 SSH 액세스에 사용하려는 공개 키가 있습니다.

SSH 작동 방식

SSH 키를 사용하여 서버에 연결하는 것이 아마도 더 안전하고 번거롭지 않을 것입니다. 사용자가 서버에 액세스하려면 간단한 bash 명령을 입력하면 되며, 원격 서버는 사용자의 공개 키가 원격 서버의 authorized_keys 파일에 저장된 공개 키와 일치하는지 확인합니다. 일치하는 경우, 원격 서버는 무작위 문자열을 생성한 후 이를 암호화하여 SSH 터널을 통해 사용자에게 보냅니다. 암호화된 문자열을 수신한 사용자 장치는 자체 개인 키를 사용하여 이를 복호화합니다. 복호화된 문자열은 이전에 합의된 세션 ID와 결합되어 MD5 해시를 생성하며, 이러한 MD5 해시는 해당 서버에서 무작위 문자열과 세션 ID로 생성한 MD5 해시와 비교하기 위해 서버로 다시 보내집니다. 두 MD5 해시가 일치하는 경우 사용자는 서버에 액세스할 수 있습니다.

<div class="content-ad"></div>

이 방법으로 서버에 접속하는 것은 암호보다 더 안전합니다. 보통 사람들이 봇을 사용하여 암호를 추측하고 서버에 액세스하는 경우가 적기 때문입니다.

SSH 키 생성(리눅스)

SSH 키를 생성하기 전에 먼저 SSH 프로그램이 설치되어 있는지 확인해야 합니다. 대부분의 경우 리눅스에는 SSH가 미리 설치되어 있지만, 설치되어 있지 않은 경우 다음 명령을 실행하여 설치할 수 있습니다:

```js
sudo apt-get install openssh-server
```

<div class="content-ad"></div>

그런 다음 SSH 키 쌍을 생성하기 위해 다음 명령을 실행합니다:

```js
sudo ssh-keygen -t rsa
```

여기서 `-t` 플래그는 키페어를 생성할 때 사용할 알고리즘을 지정합니다. 우리의 경우 RSA 입니다. "t rsa" 부분을 제외하면 기본 알고리즘인 RSA를 사용하여 키가 생성됩니다.

위 명령을 실행한 후 우리는 키를 저장할 위치를 입력하라는 메시지를 받게 됩니다. 이 옵션을 비워두고 Enter를 누르면 키는 기본 위치인 /your_home/.ssh/id_rsa에 저장됩니다.

<div class="content-ad"></div>

```js
RSA 키 쌍을 생성 중입니다.
키를 저장할 파일 이름을 입력하세요 (/your_home/.ssh/id_rsa):
```

그런 다음 패스프레이즈를 추가하라는 메시지가 나타납니다. 패스프레이즈를 추가하면 더 많은 보안층이 추가됩니다. 하지만 원하지 않는다면 패스프레이즈를 추가하지 않아도 됩니다. 패스프레이즈가 필요하지 않다면 이 부분을 비우고 엔터 키를 누르면 됩니다.

```js
패스프레이즈 입력 (패스프레이즈 없음 시 공백 입력):
```

위 단계를 완료하면 특정 위치에 키 쌍이 생성되며, 이제 해당 키를 사용하여 서버에 액세스할 수 있게 됩니다.

<div class="content-ad"></div>

```js
당신의 식별 정보가 /your_home/.ssh/id_rsa에 저장되었습니다.
당신의 공개 키가 /your_home/.ssh/id_rsa.pub에 저장되었습니다.
키 지문은:
SHA256:/hk7MJ5n5aiqdfTVUZr+2Qt+qCiS7BIm5Iv0dxrc3ks user@host
키의 랜덤아트 이미지는:
+---[RSA 3072]----+
|                .|
|               + |
|              +  |
| .           o . |
|o       S   . o  |
| + o. .oo. ..  .o|
|o = oooooEo+ ...o|
|.. o *o+=.*+o....|
|    =+=ooB=o.... |
+----[SHA256]-----+
```

서버에 우리의 공개 키 추가하기

앞에서 말했듯이, 개인 키는 우리 장치에 남아 있어 누구와도 공유되어서는 안 되지만, 공개 키는 접속하려는 서버로 복사해야 합니다.

간단한 명령어로 우리의 공개 키 파일 내용에 접근할 수 있습니다.


<div class="content-ad"></div>

```sh
cat ~/.ssh/id_rsa.pub
```

이 명령어를 입력하면 공개 키의 내용이 표시되며 이를 복사할 수 있습니다. 파일 이름은 키를 생성할 때 사용된 알고리즘에 따라 다를 수 있지만, 주로 공개 키는 ‘.pub’ 확장자로 끝나고 개인 키는 보통 ‘.pub’ 확장자를 가지지 않습니다.

서버에 암호 액세스 권한이 있고 SSH가 이미 설치되어 있는 경우, 우리의 공개 키 내용을 복사하여 authorized_keys 파일에 붙여넣을 수 있습니다. 이렇게 하면 권한 없는 키를 가진 사람들이 서버에 액세스하는 것을 방지할 수 있습니다. 아래 간단한 bash 명령어로 이 모든 작업을 수행할 수 있습니다:

```sh
ssh-copy-id user@remote_server
```  

<div class="content-ad"></div>

원격 서버에 사용자명을 본인의 사용자명으로 변경하고 원격 서버를 호스트 이름 또는 IP 주소로 바꿉니다.

비밀번호를 입력하고 나면 공개 키가 "/etc/ssh/authorized_keys" 위치로 복사됩니다.

SSH를 사용하여 원격 서버에 연결합니다.

이제 간단한 명령을 사용하여 원격 서버에 연결할 수 있습니다. 이렇게 하면 로컬 머신에 쓴 명령이 암호화되어 SSH 터널을 통해 전송되고 원격 서버에서 해독되어 실행됩니다.

<div class="content-ad"></div>

```js
ssh user@remote_server
```

지금부터 로컬 머신에서 입력하는 모든 명령이 원격 서버에서 실행됩니다. 세션을 종료하기 전까지는 보통 간단한 exit 명령으로 세션을 종료할 수 있습니다.

```js
exit
```

맺음말


<div class="content-ad"></div>

마지막으로, 원격 서버에 액세스하는 경우 SSH 키가 더 안전한 옵션이며 표준이어야 한다고 생각합니다.

이에 대해 토론하고 싶거나 다른 주제에 대해 이야기하고 싶으시면 언제든지 mitchkodes@gmail.com 또는 모든 소셜 미디어 플랫폼에서 @mitch_codes로 연락 주십시오. 시간 내 주셔서 감사합니다.