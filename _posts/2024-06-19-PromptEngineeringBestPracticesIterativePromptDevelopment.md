---
title: "프롬프트 엔지니어링 최상의 실천 방법 반복적인 프롬프트 개발"
description: ""
coverImage: "/assets/img/2024-06-19-PromptEngineeringBestPracticesIterativePromptDevelopment_0.png"
date: 2024-06-19 20:40
ogImage: 
  url: /assets/img/2024-06-19-PromptEngineeringBestPracticesIterativePromptDevelopment_0.png
tag: Tech
originalTitle: "Prompt Engineering Best Practices: Iterative Prompt Development"
link: "https://medium.com/towards-artificial-intelligence/prompt-engineering-best-practices-iterative-prompt-development-22759b309919"
---


대형 언어 모델을 사용하여 애플리케이션을 개발할 때, 첫 번째 시도에서 최종 애플리케이션에 사용할 프롬프트를 만들기 어려울 수 있습니다.

그러나 프롬프트를 점진적으로 개선하는 좋은 프로세스가 있다면, 당신이 원하는 작업에 잘 작동하는 것으로 어느 정도 도달할 수 있을 것입니다.

기계 학습 모델을 훈련할 때, 첫 번째 시도에서 잘 작동하지 않는 경우가 많다고 들어 볼 수도 있습니다. 프롬프팅 또한 보통 처음부터 잘 작동하지 않습니다. 이 글에서는 점진적 개발을 통해 애플리케이션에 동작하는 프롬프트를 얻는 과정을 탐색하겠습니다.

![image](/assets/img/2024-06-19-PromptEngineeringBestPracticesIterativePromptDevelopment_0.png)

<div class="content-ad"></div>

## 목차:

- Prompt 엔지니어링의 반복적 성격
- 작업 환경 설정 및 시작하기
- LLM 결과가 너무 길 때 극복하기
- LLM을 어떤 세부 사항에 집중하도록 유도하기
- 복잡한 응답 획득

# 1. Prompt 엔지니어링의 반복적 성격

이전에 머신러닝 수업을 들었다면, 머신러닝 개발이 반복적인 과정이라는 다이어그램을 본 적이 있을 것입니다. 데이터를 얻어 모델을 훈련시킨 후 실험 결과를 얻게 됩니다. 그런 다음 출력물을 살펴보고 오류 분석을 수행하여 작동 여부를 파악하고 문제를 해결하거나 해결 방법을 접근하는 방식을 조정할 수도 있습니다. 구현을 변경한 후 다시 실험을 실행하여 효과적인 머신러닝 모델을 도출하기 위해 반복 작업을 거쳐야 합니다.

<div class="content-ad"></div>


![Prompt Engineering Best Practices](/assets/img/2024-06-19-PromptEngineeringBestPracticesIterativePromptDevelopment_1.png)

애플리케이션을 개발할 때 LLM을 사용하여 프롬프트를 작성할 때, 프로세스는 꽤 유사할 수 있습니다. 무엇을 하고자 하는지, 완료하고자 하는 작업에 대한 아이디어가 있으며, 명확하고 구체적인 프롬프트를 작성하는 첫 번째 시도를 할 수 있습니다. 그리고 적절하다면 시스템이 생각할 시간을 주는 방식으로 적기를 노령할 수 있습니다.

그런 다음 실행하여 얻는 결과를 확인할 수 있습니다. 처음에 충분히 잘 작동하지 않는 경우에는, 예를 들어, 지시사항이 충분히 명확하지 않거나, 알고리즘이 충분한 시간을 가지지 못한 이유 등을 파악하면서 반복적인 프로세스를 통해 아이디어를 수정하고, 프롬프트를 개선하고, 이 과정을 여러 번 반복하여 애플리케이션에 적합한 프롬프트를 얻을 수 있습니다.

앤드루 엔지


<div class="content-ad"></div>

# 2. 작업 환경 설정 및 시작하기

작업 환경을 설정하는 것으로 시작해봅시다. OpenAI 및 OS 패키지를 가져와서 OpenAI API 키를 정의하고, 프롬프트를 입력하면 응답을 반환하는 get_completion 함수를 정의할 것입니다.

```js
import openai
import os

from dotenv import load_dotenv, find_dotenv
_ = load_dotenv(find_dotenv()) # 로컬 .env 파일 읽기

openai.api_key  = os.getenv('OPENAI_API_KEY')


def get_completion(prompt, model="gpt-3.5-turbo"):
    messages = [{"role": "user", "content": prompt}]
    response = openai.ChatCompletion.create(
        model=model,
        messages=messages,
        temperature=0, # 모델 출력의 랜덤성 정도
    )
    return response.choices[0].message["content"]
```

여기에는 노트북 기술 세부 정보가 포함된 팩트 시트가 있습니다. 구성에 대해 이야기하며, 치수, 노트북 옵션, 재료 등이 포함되어 있습니다.

<div class="content-ad"></div>

```js
fact_sheet_laptop = """
개요

저희의 극세사한 노트북 시리즈를 소개합니다. 현대적인 작업 환경을 위한 최첨단 디자인과 기능의 상징입니다.
랩톱, 도킹 스테이션, 액세서리 등을 포함한 합리적인 테크 제품군의 일부입니다.
다양한 색상과 마감으로 제공되어, 개인적이거나 전문적인 미적 취향과 시원하게 조화됩니다.
탁월한 내구성과 스타일리시한 매력을 위해 프리미엄 소재로 제작되었습니다.
집에서의 사무실이든 기업 환경이든 다양한 환경에 적합합니다.
탁월한 성능과 생산성을 위해 고안되어, 전문가들을 위한 이상적인 선택지입니다.
디자인

노트북은 여러 색상 옵션으로 제공되어, 개인화할 수 있습니다.
브러시 알루미늄, 매트 블랙, 광택 와이트 또는 크롬 액센트와 같은 다양한 마감 선택이 가능합니다.
표준 디스플레이 또는 터치스크린 옵션 중 선택할 수 있습니다.
백라이트 키보드, 지문 센서 또는 얼굴 인식 기술과 같은 추가 기능 옵션도 있습니다.
획기적이고 가벼운 디자인으로, 출퇴근용으로 휴대성을 높이면서도 성능을 희생하지 않습니다.
사양

실행 가능한 Intel/AMD 프로세서로 원활한 멀티태스킹과 고성능 컴퓨팅을 제공합니다.
35CM 너비, 24CM 깊이, 1.5CM 높이와 같은 초박형 디자인:
넓이 35CM | 13.78”
깊이 24CM | 9.45”
높이 1.5CM | 0.59”
몰입형 작업 또는 엔터테인먼트 경험에 맞춘 해상도로 선명하고 생동감 넘치는 디스플레이를 제공합니다.
옵션

SSD 또는 HDD 저장 옵션 중 선택하여 속도와 수용 용량을 개인화할 수 있습니다.
USB-C, HDMI 및 Thunderbolt와 같은 다양한 연결 옵션을 제공하여 다양성 있는 호환성을 지원합니다.
처리 요구 사항에 맞는 다양한 RAM 구성이 가능합니다.
Windows 및 MacOS 기호를 모두 충족하는 운영 체제 옵션을 제공합니다.
소재

프리미엄 룩과 견고한 보호를 위해 내구성 있는 알루미늄 케이싱으로 제작되었습니다.
눈부시지 않게 어두운 조명에서도 편안하게 볼 수 있도록 안티글레어 코팅이 적용된 고해상도 디스플레이입니다.
장거리 사용 중에도 최적 성능을 보장하기 위한 최첨단 냉각 기술이 탑재되어 있습니다.
원산지

일본의 현대적인 시설에서 전통 기술과 기술 혁신을 결합하여 정밀하게 제작되었습니다.

"""
```
당신이 이 정보를 가지고 마케팅 팀이 온라인 소매 웹사이트 설명을 작성하는 것을 도와야 한다고 가정해보겠습니다. 여기서 말하는 프롬프트는, 기술사양을 기반으로 한 제품에 대한 소매 웹사이트 설명을 작성하는 마케팅 팀을 도와야 한다면 어떤 제품 설명을 작성할 것인지에 대한 정보를 쓰세요. 기술사양에 제공된 정보를 기반으로 제품 설명을 작성하세요.

기술적 사양: {fact_sheet_laptop}


<div class="content-ad"></div>

하지만 이걸 보면, 좀 긴 것 같다고 생각해. 정확히 요청한 대로 테크니컬 팩트 시트에서 시작하여 제품 설명을 작성하는 데 잘 해냈어. 하지만 이걸 보면, 좀 긴 것 같아. 아마 우리는 조금 더 짧게 원할지도 몰라.

# 3. 너무 긴 LLM 결과 극복하기

이전 섹션에서 프롬프트를 작성하고 결과를 받았어. 너무 길어서 그렇게 만족스럽지 않아. 그래서 나는 내 프롬프트를 명확히 하고, 최대 50단어를 사용해 이에 대한 원하는 길이에 대한 더 나은 지침을 제공하도록 말할 것이야. 다시 실행해보자.

```js
prompt = f"""
마케팅 팀이 소매 웹사이트의 제품에 대한 설명을 만들 수 있도록 도와주는 것이 당신의 작업입니다.
테크니컬 팩트 시트에 제공된 정보를 기반으로 제품 설명을 작성하십시오.
제공된 기술 사양을 기반으로 제품 설명을 작성하십시오(삼중 백틱(delimited by triple backticks)).

최대 50단어를 사용하십시오.

기술 사양: {fact_sheet_laptop}
"""
response = get_completion(prompt)
print(response)
```

<div class="content-ad"></div>

이 제품에 대한 아주 멋진 간단한 설명 같아요. 이 응답의 길이를 확인해볼게요. 나는 이 응답을 공백을 기준으로 나누고, 길이를 출력할 거에요.

그러니까 47개의 단어에요. 나쁘지 않아요. 대형 언어 모델은 명확한 단어 수에 대한 지시를 따르는 데 꽤 괜찮지만, 때로는 60이나 65개의 단어로 무언가를 출력할 때도 있지만, 타당한 범위 내에 있어요. 할 수 있는 일 중 일부는 최대 세 문장을 사용하는 것이죠.


len(response.split())


# 4. 일부 세부사항에 집중하도록 LLM에 강제하기

<div class="content-ad"></div>

이 텍스트를 웹 사이트에 계속 보왈하면서, 소비자에게 직접 판매하지 않는 웹 사이트인 것을 결정할 수 있습니다. 대신, 랩톱을 랩톱 소매업체에 판매하는 것이 목적이며, 이들은 랩톱의 기술적 세부 사항에 더 관심이 있을 것입니다.

이런 경우, 이 프롬프트를 가져와서 이 프롬프트를 수정하여 랩톱의 기술적 세부 사항에 대해 더 정확하게 명시하고 싶습니다. 나는 이 설명이 랩톱 소매업체를 위해 작성되었으므로 기술적이고 랩톱이 구성된 재료에 초점을 맞춰야 한다고 말할 수 있습니다.

```js
prompt = f"""
마케팅 팀이 기술 사양서를 기반으로 한 
제품에 대한 소개 설명을 작성하는데 도움을 
주세요.

기술 사양서에 제공된 정보를 기반으로 제품 
설명을 작성하십시오. 제품이 구성된 재료에 
중점을 두어 기술적 성격으로 작성되어야 합니다.

설명의 끝에는 기술 사양서에서 7자리 제품 
ID를 모두 포함하십시오.

최대 50단어로 작성하십시오.

기술 사양서: {fact_sheet_laptop}
"""
response = get_completion(prompt)
print(response)
```

프롬프트를 변경함으로써 특정 문자와 특성에 더 초점을 맞출 수 있습니다. 설명 끝에 제품 ID를 추가할 것이라고 결정한 경우, 설명 프롬프트 끝에 기술 사양서에 있는 모든 7자리 제품 ID를 포함할 지시를 추가할 수 있습니다. 이렇게 하고 실행하여 결과를 확인해 보세요.

<div class="content-ad"></div>

```js
prompt = f"""
마케팅 팀이 소재에 초점을 맞춰 제품에 대한 상세한 설명을 만들 수 있도록 돕는 것이 당신의 일입니다.

기술 사양서에 제공된 정보를 기반으로 제품 설명을 작성하세요.

제품 설명은 노트북 소매업자를 대상으로 하므로 기술적이며 제품 구성 소재에 중점을 두어야 합니다.

제품 사양서의 7자리 Product ID를 설명 끝에 포함하세요.

단어 수를 최대 50개로 제한합니다.

기술 사양서: {fact_sheet_laptop}
"""
response = get_completion(prompt)
print(response)
```

개발자가 많은 경우에 지나칠 수도 있는 반복적인 프롬프트 개발의 짧은 예시를 제공했습니다. 따라서 프롬프트를 처음으로 작성해보고 결과를 살펴본 후 점차적으로 프롬프트를 다듬어 필요한 결과에 점점 가까워지는 것이 좋습니다.

# 5. 복잡한 응답 얻기

chatGPT의 능력에 대한 더 나은 이해를 위해 좀 더 복잡한 프롬프트를 살펴봅시다. 설명 뒤에 제품의 치수를 제공하는 테이블을 포함하도록 요청하고 모든 내용을 HTML로 형식화해야 합니다. 실제로 이러한 프롬프트를 얻기 위해서는 여러 번의 반복한 작업이 필요할 것입니다.


<div class="content-ad"></div>

```js
prompt = f"""
마케팅팀이 상품 기술사양에 기초하여 소매 웹사이트를 위한 제품 설명을 만들 수 있도록 도와주어야 합니다.

3연결 따옴표로 구분된 기술 명세서에 제공된 정보를 기반으로 제품 설명을 작성해 주세요.

설명은 노트북 소매업체를 대상으로 하므로 기술적이며 제품 구성 재료에 중점을 두어야 합니다.

기술 사양에 있는 모든 7자 제품 ID를 설명에 포함하세요.

설명 뒤에 제품의 치수를 제공하는 표를 포함해 주세요. 표에는 두 개의 열이 있어야 합니다. 
첫 번째 열에는 치수의 이름을, 두 번째 열에는 인치 단위로 측정된 치수를 넣어주세요.

표에 '제품 치수'라는 제목을 붙여주세요.

웹사이트에서 사용할 수 있는 HTML 형식으로 모든 것을 서식화해주세요. 
설명을 <div> 요소에 넣어주세요.

기술 사양: {fact_sheet_laptop}
"""

response = get_completion(prompt)
print(response)
```

이 HTML을 표시하여 이게 유효한 HTML인지 확인하고 작동하는지 확인해봅시다.

```js
from IPython.display import display, HTML
display(HTML(response))
```

<img src="/assets/img/2024-06-19-PromptEngineeringBestPracticesIterativePromptDevelopment_2.png" />


<div class="content-ad"></div>

## 만약 이 기사를 좋아하고 저를 지원하고 싶다면, 아래와 같은 내용을 확인해 주세요:

- 👏 기사에 박수를 보내주세요 (50번) - 이 기사가 주목받을 수 있도록 도와주세요
- To Data & Beyond 뉴스레터를 구독해주세요
- 저를 Medium에서 팔로우해주세요
- 📰 제 Medium 프로필에서 더 많은 콘텐츠를 확인해주세요
- 🔔 저를 팔로우해주세요: LinkedIn | Youtube | GitHub | Twitter

## 제 뉴스레터 To Data & Beyond를 구독하여 제 기사에 대한 전체적이고 일찍 접근하세요:

## 데이터 과학과 인공지능에서의 경력을 시작하려는데 걸리는데 어려움을 겪고 계신가요? 데이터 과학 멘토링 세션과 장기적인 경력 멘토링을 제공하고 있습니다:

<div class="content-ad"></div>

- 멘토링 세션: [링크](https://lnkd.in/dXeg3KPW)
- 장기 멘토링: [링크](https://lnkd.in/dtdUYBrM)

![이미지](/assets/img/2024-06-19-PromptEngineeringBestPracticesIterativePromptDevelopment_3.png)