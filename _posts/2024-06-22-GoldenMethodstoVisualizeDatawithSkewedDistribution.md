---
title: "치우친 분포 시각화에 유용한 데이터 시각화 기법 5가지"
description: ""
coverImage: "/assets/img/2024-06-22-GoldenMethodstoVisualizeDatawithSkewedDistribution_0.png"
date: 2024-06-22 16:38
ogImage: 
  url: /assets/img/2024-06-22-GoldenMethodstoVisualizeDatawithSkewedDistribution_0.png
tag: Tech
originalTitle: "Golden Methods to Visualize Data with Skewed Distribution"
link: "https://medium.com/@yuanbo.faith/golden-methods-to-visualize-data-with-skewed-distribution-13f0b2a0db99"
---


## 클러스터링된 데이터에서 숨겨진 패턴을 발견하는 주요 기술

왜곡된 데이터는 매우 불균형한 분포를 갖는 데이터를 가리킵니다. 대부분의 데이터 포인트가 분포의 왼쪽에 집중되어 있으며 긴 꼬리가 오른쪽 쪽으로 뻗어 나간다(오른쪽으로 치우친 경우) 또는 그 반대(왼쪽으로 치우친 경우), 더 복잡한 왜곡 패턴일 수 있습니다. 긴 꼬리(희소 데이터)가 그래픽 공간을 지배하며 대부분의 데이터 포인트를 플롯 모서리로 압축하여 클러스터링된 데이터 대다수의 근본적인 패턴을 확인하기 어렵게 만듭니다.

이 글에서는 왜곡된 분포를 가진 데이터를 시각화하는 강력한 방법을 요약했습니다.

# 투명도, 비어 있는 원, 색상 및 주변 분포를 사용하여 클러스터링된 데이터 패턴 드러내기

<div class="content-ad"></div>

왼쪽의 scatterplot은 주택 판매량과 가격 간의 관계를 보여줍니다. 높은 판매량에서의 희소한 데이터 포인트는 대부분의 데이터를 플롯의 왼쪽 가장자리로 쫓아가게 합니다. 이는 중요한 데이터 포인트 클러스터링 및 겹침으로 이어지며 기저 분포 패턴을 가리게 만듭니다.

![scatterplot](/assets/img/2024-06-22-GoldenMethodstoVisualizeDatawithSkewedDistribution_0.png)

오른쪽의 개선된 scatterplot은 데이터의 비대칭성을 진단하고 기저 데이터 구조를 드러내기 위해 몇 가지 간단한 기술을 사용합니다:

- 점 크기 축소 및 윤곽 내의 모양 (속이 채워진 원 대신 열린 원과 같은)은 데이터가 겹치는 것을 완화하는 데 도움이 됩니다.
- 데이터 포인트의 투명도는 데이터 클러스터링의 정도를 드러내는 데 도움을 줍니다.
- 색상은 데이터 패턴을 드러내는 데 중요한 도구입니다. 이 경우 다른 도시의 점들을 다양한 색상으로 보여줌으로써 도시가 가격과 판매에 미치는 영향이 데이터 변동성의 중요한 소스임을 강조합니다.
- 단변량 분포의 주변 시각화는 비대칭성의 원인을 보여줍니다. 여기서는 판매량 (x 축) 및 가격 (y 축)의 분포를 바코드 이미지와 밀도 플롯으로 표시했습니다. 이를 통해 판매량이 주요하게 비대칭된 변수임을 보여줍니다.

<div class="content-ad"></div>

# 데이터를 각 왜도 소스별로 서브플롯으로 분할하기

위 그래프는 해당 도시가 데이터 왜도의 중요한 기여 요소임을 시사합니다. 데이터 왜도 분포에 도시의 영향을 제거하려면 여기서는 각 도시별로 서브플롯으로 그래프를 나누어 각 도시에 대한 축 스케일이 별도로 표시됩니다.

![Plot](/assets/img/2024-06-22-GoldenMethodstoVisualizeDatawithSkewedDistribution_1.png)

도시 변수를 데이터 왜도의 중요한 소스로 식별하고, 각 도시별로 서브플롯을 만들어 데이터 왜도를 줄인 데 운이 좋았지만, 다른 데이터 시각화 작업에서 이렇게 할 수 있는 것은 항상 쉽거나 가능한 것은 아닙니다. 또한, 고집 센 이상치는 단일 변수 내에서 존재할 수 있으며, 서브플롯을 만들어 해결할 수 없습니다.

<div class="content-ad"></div>

아래 토론에서는 도시 변수의 서브플롯에 의존하지 않고, 왜곡된 데이터셋을 시각화하는 기술을 직접 시연할 것입니다.

## 왜곡된 데이터 시각화를 위한 2D 히스토그램 생성

2D 히스토그램은 산점도에서 마주치는 데이터 왜곡을 해결하기 위한 가장 효율적인 접근 방식 중 하나입니다. 이는 x 및 y 축을 따라 n개의 간격/바구니를 생성하고, 플롯을 n × n 셀의 그리드로 나눕니다. 각 셀 안에 떨어지는 데이터 포인트 수를 세어서 컬러 스케일에 매핑합니다. 더 높은 바구니 번호는 더 높은 해상도를 제공합니다.

![2D 히스토그램으로 왜곡된 데이터 시각화하기](/assets/img/2024-06-22-GoldenMethodstoVisualizeDatawithSkewedDistribution_2.png)

<div class="content-ad"></div>

# 2D 밀도 플롯 생성

2D 밀도 플롯은 2D 히스토그램과 유사하지만 이산적 간격에서 카운트를 생성하는 대신에 기본 연속 데이터의 확률 밀도 함수(PDF)를 추정합니다. (밀도는 연속적 등고선 또는 이산 그리드로 그려낼 수 있습니다.)

왼쪽에 있는 밀도 플롯은 플롯의 좌하단에 데이터 포인트의 극도로 집중된 것을 강조하고, 나머지는 아주 드문 데이터 포인트들이 최소 밀도값을 갖고 전혀 배경으로 완전히 섞인 것을 보여줍니다 (밀도가 0인 배경).

<img src="/assets/img/2024-06-22-GoldenMethodstoVisualizeDatawithSkewedDistribution_3.png" />

<div class="content-ad"></div>

💡 보다 눈에 띄게 희소한 데이터를 보기 쉽게 만들기 위해, 먼저 밀도 값을 세제곱근으로 변환했습니다. 이 값들을 색상 스케일에 매핑했습니다. 세제곱근 변환은 밀도 값을 소수점 숫자의 값으로 증가시키지만 (밀도 값의) 영(零)에는 영향을 주지 않습니다. 이러한 방식으로 변환된 데이터는 배경 위에 "높게" 떠 있어서 더욱 쉽게 구별할 수 있도록 해주며, 밀집된 데이터 중심과 희소한 데이터 지역을 아주 잘 드러내줍니다. (그러나 소수점 숫자의 팽창 효과는 경우에 따라 원하지 않는 시각적 효과를 초래할 수 있음을 나중 예제에서 보여드릴게요.)

# 데이터를 색상에 반영한 수학적 변환

오른쪽에 있는 밀도 플롯은 수학적으로 변환된 데이터를 색상에 매핑하는 방법이 어떻게 숨겨진 데이터 구조를 효과적으로 드러내는지 명확히 보여줍니다. 하지만 저의 가장 좋아하는 예제는 아래에 있답니다.

히트맵은 제곤지북 반경 당 아프리카 인구를 보여줍니다: 최소 밀도는 0(지도상의 이집트 대부분 지역 등)이며, 0.0000004에서 20,000까지의 비영(非零)값 범위가 있습니다. 대부분의 밀도 값은 제한된 지리적 지역에서만 발견됩니다. 밀도는 클래식 버리디스 색상 스케일로 반영되었습니다.

<div class="content-ad"></div>

만약 데이터 변환을 하지 않은 상태에서는 지도가 완전히 검게 나옵니다 (왼쪽 플롯 참조): 매우 흩어진 대 값들(밝은 색으로 표시되는)이 작은 숫자들의 대부분에 의해 압도당하고 무시당합니다. 

<img src="/assets/img/2024-06-22-GoldenMethodstoVisualizeDatawithSkewedDistribution_4.png" />

로그 변환은 넓게 퍼진 데이터를 처리하는 흔한 방법입니다. 이 방법은 데이터를 더 정규화된 분포로 변환하여 시각화하기 쉽게 만듭니다. 이 방법은 이집트의 나일 강을 따라 밀집된 인구와 같은 더 잘 그려진 데이터 패턴을 가진 히트맵을 만듭니다. (색상 막대는 원본 데이터가 아니라 변환된 데이터로 레이블이 지정되어 있어 해석이 쉽습니다). 그러나 이집트 대부분의 지역은 회색으로 가려져 있습니다. 이곳은 0인 인구 값을 가지고 있어 로그에 정의되지 않으므로 데이터가 "누락된 값"(-무한대, 구체적으로)으로 처리됩니다.

의사 로그 변환은 큰 수를 위한 전통적인 로그 연산을 수행하나 값이 0에 접근할 때 선형 스케일로 점진적으로 전환됩니다. 큰 값과 분수적인 값, 그리고 0(음수 값 포함)을 부드럽게 처리합니다. 이러한 변환은 주요 지리적 위치와 지도상의 광활한 사하라 사막의 가혹한 환대를 강조한 잘 정의된 데이터 패턴을 보여주는 인상적인 히트맵을 생성합니다. 놀라운 기법의 자세한 내용은 이 기사에서 확인할 수 있습니다.

<div class="content-ad"></div>

의사로그 변환과 비교하면, 높은 베이스(예: 7 ~ 10)를 가진 루트 변환은 유사한 시각적 효과를 얻습니다. 그러나 이집트와 일부 다른 장소는 검게 처리됩니다. 이는 루트 변환 때문에 분수를 팽창시키지만 0은 영향을 받지 않기 때문입니다. 이로 인해 변환된 분수와 0 사이에 급격한 불연속성이 발생하여, 이집트와 주변 지역 사이에 갑작스러운 색상 전환으로 반영됩니다. (더 많은 토론은 위에 링크된 동일한 기사에서 찾을 수 있습니다)

여담으로 말씀드리자면, 원시 데이터의 수학적 변환이 아닌, 대신 색상과 이상치의 그래픽적 조정과 어떻게 연결해야 하는지를 전략적으로 조정할 수도 있습니다. 예를 들어 다음 히트맵은 백신 도입 전후 미국의 감염병 발생 횟수를 보여줍니다 (검은 선으로 표시됨). 이 그래프는 고발별의 낮은 발생률 데이터 대부분을 나타내기 위해 짧은 범위의 파란색과 녹색만 사용하고, 협소한 데이터 영역의 높은 발생률을 강조하기 위해 초록색과 빨간색 등 경고 신호의 다양한 색상 범위를 활용합니다. 이러한 디자인은 백신의 질병 통제 능력을 효과적으로 강조했습니다.

# 데이터의 수학적 변환을 축에 대칭화

이제 부동산 매매 가격 예시로 다시 돌아가봅시다. 아래 그래프들에서 x축은 10을 기준으로 한 로그 스케일로 변환됩니다. 이렇게 하면 보통 매우 모여 있는 데이터 포인트들이 데이터 구조를 밝혀내기 위해 더 넓은 범위로 펼쳐집니다. 재미를 더하기 위해 같은 데이터로 두 그래프를 만들었는데, 왼쪽은 각 포인트의 이웃 번호를 색상 스케일로 선형 매핑한 산점도이며, 오른쪽 그래프는 콘투어 서클로 이산화된 2D 히스토그램이며, 연속으로 확률 밀도 함수를 그리고 있습니다.

<div class="content-ad"></div>


![Golden Methods to Visualize Data with Skewed Distribution](/assets/img/2024-06-22-GoldenMethodstoVisualizeDatawithSkewedDistribution_5.png)

또 다른 예로, 아래 산점도는 1800년대부터 2015년까지 GDP와 인간 수명 기대치의 증가를 보여줍니다. 이는 축 로그 변환을 사용하여 그렇지 않으면 클러스터링 된 데이터 세트를 펼치는 것을 보여줍니다. x축이 log10 스케일인 반면 라벨은 원래 데이터 값으로 주석이 달려 있음을 주목하세요.

![Golden Methods to Visualize Data with Skewed Distribution](/assets/img/2024-06-22-GoldenMethodstoVisualizeDatawithSkewedDistribution_6.png)

수학적 변환은 분포 프로필을 항상 변경하지는 않음을 유의하세요. 예를 들어, 평균으로 중심화하고 표준 편차로 스케일링하여 표준화된 z-점수로 변환하거나 [0, 1] 범위로 정규화하여 최솟값을 뺀 다음 최대값과 최소값의 차이로 스케일링하는 것은 이러한 맥락에서 분포 패턴을 변경하지 않습니다. 이러한 방법은 (다변량 모델링 및 주성분 분석과 같은 관련 시각화에서 중요하지만) 비대칭 데이터를 시각화하는 데 효과적이지 않습니다.


<div class="content-ad"></div>

# 클러스터린된 데이터 지역 확대

전체 데이터셋을 먼저 표시하고, 그 다음 가장 클러스터된 지역을 확대해서 자세한 시각적 확인을 할 수 있습니다.

![이미지](/assets/img/2024-06-22-GoldenMethodstoVisualizeDatawithSkewedDistribution_7.png)

## 마지막으로, 이 유용한 전략들을 아래에 요약합니다: