{"pageProps":{"post":{"title":"SQL 집계 Rollup 함수 완벽 가이드","description":"","date":"2024-07-01 17:30","slug":"2024-07-01-SQLAggregationRollupExplained","content":"\n\n![image](/assets/img/2024-07-01-SQLAggregationRollupExplained_0.png)\n\n# 소개\n\n이전 포스트에서는 그룹화 세트(Grouping Sets)와 큐브(Cube)가 그룹화로만 하는 것보다 데이터 집계를 더 쉽고 빠르게 할 수 있다는 것을 살펴보았습니다.\n\n차원 데이터 모델에서는 데이터 필드가 일반적으로 계층 구조 관계를 가지고 있습니다. 그룹화 세트(Grouping Sets)와 큐브(Cube)는 집계에 도움을 주지만, 모든 열 조합에 대해 이를 수행합니다. 계층 구조를 따르는 열의 데이터만 집계하고 싶은 경우 Rollup을 사용할 수 있습니다.\n\n<div class=\"content-ad\"></div>\n\n# 데이터 준비\n\n데이터 준비를 위해 [이 링크](link_here)를 사용할 수 있어요. 이 데이터셋은 아래와 같이 보여요:\n\n![dataset](/assets/img/2024-07-01-SQLAggregationRollupExplained_1.png)\n\n# 데이터 계층 구조 이해\n\n<div class=\"content-ad\"></div>\n\n위의 표에서 국가는 주를 포함하고, 주는 도시를 포함하며, 도시는 많은 상점을 가지고 있습니다. 데이터 세트에는 아래의 마크다운에 나타난 것처럼 등급이 있습니다.\n\n```js\n- 국가\n  - 주\n    - 도시\n      - 상점\n```\n\n예를 들어, 아래 마크다운은 등급을 강조한 샘플 데이터를 보여줍니다.\n\n```js\n- 미국\n  - 뉴욕\n    - 뉴욕 시티\n      - 상점 A\n      - 상점 B\n    - 버펄로\n      - 상점 C\n  - 캘리포니아\n    - 샌프란시스코\n      - 상점 D\n      - 상점 E\n    - 로스앤젤레스\n      - 상점 F\n      - 상점 G\n  - 텍사스\n    - 휴스턴\n      - 상점 H\n      - 상점 I\n  - 플로리다\n    - 마이애미\n      - 상점 J\n      - 상점 K\n```\n\n<div class=\"content-ad\"></div>\n\n# 롤업 이해\n\n모든 것을 간단히 하기 위해, 주와 도시를 포함한 2단계 계층 구조만 살펴보겠습니다. 각 주에는 여러 도시가 포함되어 있습니다. 데이터는 다음과 같이 보일 것입니다:\n\n![image](/assets/img/2024-07-01-SQLAggregationRollupExplained_2.png)\n\n이제 주와 도시 수준에서 집계된 데이터를 보고, 그 후에는 주 수준에서만 보고 싶습니다. 이를 Grouping Sets를 사용하여 다음과 같이 구현할 수 있습니다:\n\n<div class=\"content-ad\"></div>\n\n```js\nSELECT state\n ,city\n ,sum(sales_amount) AS total_sales\nFROM product_sales\nWHERE country = 'USA'\nGROUP BY ROLLUP(state, city)\n```\n\n![SQL Aggregation Rollup Explained](/assets/img/2024-07-01-SQLAggregationRollupExplained_3.png)\n\n이제 이것이 보다 직관적인 rollup을 사용하여 쉽게 달성할 수 있습니다.\n\n\n<div class=\"content-ad\"></div>\n\n<img src=\"/assets/img/2024-07-01-SQLAggregationRollupExplained_4.png\" />\n\n# 요약\n\n고급 데이터 분석과 성능 고려를 위해, Grouping Sets, Cube 및 Rollup과 같은 그룹화 서브클로즈를 이해하는 것은 여러분의 도구상자에서 가치 있는 도구가 될 수 있습니다. 본문에서 본 것처럼, 이는 프로세스를 단순화하는데 그치지 않고 성능을 향상시킬 수 있습니다.","ogImage":{"url":"/assets/img/2024-07-01-SQLAggregationRollupExplained_0.png"},"coverImage":"/assets/img/2024-07-01-SQLAggregationRollupExplained_0.png","tag":["Tech"],"readingTime":2},"content":"<!doctype html>\n<html lang=\"en\">\n<head>\n<meta charset=\"utf-8\">\n<meta content=\"width=device-width, initial-scale=1\" name=\"viewport\">\n</head>\n<body>\n<p><img src=\"/assets/img/2024-07-01-SQLAggregationRollupExplained_0.png\" alt=\"image\"></p>\n<h1>소개</h1>\n<p>이전 포스트에서는 그룹화 세트(Grouping Sets)와 큐브(Cube)가 그룹화로만 하는 것보다 데이터 집계를 더 쉽고 빠르게 할 수 있다는 것을 살펴보았습니다.</p>\n<p>차원 데이터 모델에서는 데이터 필드가 일반적으로 계층 구조 관계를 가지고 있습니다. 그룹화 세트(Grouping Sets)와 큐브(Cube)는 집계에 도움을 주지만, 모든 열 조합에 대해 이를 수행합니다. 계층 구조를 따르는 열의 데이터만 집계하고 싶은 경우 Rollup을 사용할 수 있습니다.</p>\n<div class=\"content-ad\"></div>\n<h1>데이터 준비</h1>\n<p>데이터 준비를 위해 <a href=\"link_here\">이 링크</a>를 사용할 수 있어요. 이 데이터셋은 아래와 같이 보여요:</p>\n<p><img src=\"/assets/img/2024-07-01-SQLAggregationRollupExplained_1.png\" alt=\"dataset\"></p>\n<h1>데이터 계층 구조 이해</h1>\n<div class=\"content-ad\"></div>\n<p>위의 표에서 국가는 주를 포함하고, 주는 도시를 포함하며, 도시는 많은 상점을 가지고 있습니다. 데이터 세트에는 아래의 마크다운에 나타난 것처럼 등급이 있습니다.</p>\n<pre><code class=\"hljs language-js\">- 국가\n  - 주\n    - 도시\n      - 상점\n</code></pre>\n<p>예를 들어, 아래 마크다운은 등급을 강조한 샘플 데이터를 보여줍니다.</p>\n<pre><code class=\"hljs language-js\">- 미국\n  - 뉴욕\n    - 뉴욕 시티\n      - 상점 A\n      - 상점 B\n    - 버펄로\n      - 상점 C\n  - 캘리포니아\n    - 샌프란시스코\n      - 상점 D\n      - 상점 E\n    - 로스앤젤레스\n      - 상점 F\n      - 상점 G\n  - 텍사스\n    - 휴스턴\n      - 상점 H\n      - 상점 I\n  - 플로리다\n    - 마이애미\n      - 상점 J\n      - 상점 K\n</code></pre>\n<div class=\"content-ad\"></div>\n<h1>롤업 이해</h1>\n<p>모든 것을 간단히 하기 위해, 주와 도시를 포함한 2단계 계층 구조만 살펴보겠습니다. 각 주에는 여러 도시가 포함되어 있습니다. 데이터는 다음과 같이 보일 것입니다:</p>\n<p><img src=\"/assets/img/2024-07-01-SQLAggregationRollupExplained_2.png\" alt=\"image\"></p>\n<p>이제 주와 도시 수준에서 집계된 데이터를 보고, 그 후에는 주 수준에서만 보고 싶습니다. 이를 Grouping Sets를 사용하여 다음과 같이 구현할 수 있습니다:</p>\n<div class=\"content-ad\"></div>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-variable constant_\">SELECT</span> state\n ,city\n ,<span class=\"hljs-title function_\">sum</span>(sales_amount) <span class=\"hljs-variable constant_\">AS</span> total_sales\n<span class=\"hljs-variable constant_\">FROM</span> product_sales\n<span class=\"hljs-variable constant_\">WHERE</span> country = <span class=\"hljs-string\">'USA'</span>\n<span class=\"hljs-variable constant_\">GROUP</span> <span class=\"hljs-variable constant_\">BY</span> <span class=\"hljs-title function_\">ROLLUP</span>(state, city)\n</code></pre>\n<p><img src=\"/assets/img/2024-07-01-SQLAggregationRollupExplained_3.png\" alt=\"SQL Aggregation Rollup Explained\"></p>\n<p>이제 이것이 보다 직관적인 rollup을 사용하여 쉽게 달성할 수 있습니다.</p>\n<div class=\"content-ad\"></div>\n<img src=\"/assets/img/2024-07-01-SQLAggregationRollupExplained_4.png\">\n<h1>요약</h1>\n<p>고급 데이터 분석과 성능 고려를 위해, Grouping Sets, Cube 및 Rollup과 같은 그룹화 서브클로즈를 이해하는 것은 여러분의 도구상자에서 가치 있는 도구가 될 수 있습니다. 본문에서 본 것처럼, 이는 프로세스를 단순화하는데 그치지 않고 성능을 향상시킬 수 있습니다.</p>\n</body>\n</html>\n"},"__N_SSG":true}