{"pageProps":{"post":{"title":"ROS 2 Python 런치 파일의 비밀을 해제합니다","description":"","date":"2024-06-19 06:19","slug":"2024-06-19-UnlockingtheSecretsofROS2PythonLaunchFiles","content":"\n\n![2024-06-19-UnlockingtheSecretsofROS2PythonLaunchFiles_0.png](/assets/img/2024-06-19-UnlockingtheSecretsofROS2PythonLaunchFiles_0.png)\n\n안녕하세요! ROS 2는 로봇 소프트웨어를 간단하게 만들어주는 강력한 프레임워크와 도구입니다. cartographer_ros, navigation2, ros2_control 등 다양한 유용한 패키지들을 통해 로봇 엔지니어들은 로봇을 자율적으로 움직이도록 빠르게 구현할 수 있습니다.\n\n로봇 소프트웨어를 배우는 초기 단계에서 개발자들은 종종 런치 파일을 작성하는 데 많은 시간을 투자합니다. 이 파일들은 준비된 패키지의 프로세스(Ros 2 노드)를 시작하는 데 사용됩니다. 처음에는 모바일 앱과 같이 로직을 많이 작성하지 않는다는 점이 조금 이상하게 느껴졌습니다. 로봇을 위한 소프트웨어를 작성하는 개념을 이해하는 데 시간이 걸렸죠.\n\n특히, Python 런치 파일을 작성하는 것은 일반적인 Python 프로그래밍과는 다르기 때문에 조금 까다로울 수 있습니다. 그래서 이 글을 쓰게 되었습니다. 함께 런치 파일에 혼동을 겪고 계신 분들을 위해 몇 가지 팁을 공유하고 싶기 때문이죠.\n\n<div class=\"content-ad\"></div>\n\n## DeclareLaunchArgument 및 LaunchConfiguration\n\nTurtleBot3 로봇 런치 파일에서 추출된 DeclareLaunchArgument 및 LaunchConfiguration 예제를 볼 수 있습니다:\n\n```js\nuse_sim_time = LaunchConfiguration('use_sim_time', default='false')\n…\nDeclareLaunchArgument(\n    'use_sim_time',\n    default_value=use_sim_time,\n    description='true이면 시뮬레이션 (Gazebo) 시계 사용'\n)\n```\n\n초보자로서, 두 요소 간의 관계를 종종 잊어버리곤 합니다. 또한 LaunchConfiguration과 DeclareLaunchArgument 생성자는 default 또는 default_value 매개변수를 지원하며, 이는 매우 혼란스러울 수 있습니다.\n\n<div class=\"content-ad\"></div>\n\n위 정의는 ROS 2의 공식 문서에서 발췌되었습니다. **굵게 표시한** 단어에 주목해 주시면 단어의 사용법을 이해하는 데 도움이 됩니다.\n\n여러 번 읽은 후에 그것들은 쌍으로 사용되어야 한다는 것을 깨달았어요. 항상 함께 작성하는 것이 좋은 실천 방법이라고 생각해요. Mini Pupper bringup 런치 파일의 예시에서 보여주는 것처럼요:\n\n```js\nuse_sim_time = LaunchConfiguration('use_sim_time')\nuse_sim_time_launch_arg = DeclareLaunchArgument(\n    name='use_sim_time',\n    default_value='False',\n    description='Use simulation (Gazebo) clock if true'\n)\n\nhardware_connected = LaunchConfiguration(\"hardware_connected\")\nhardware_connected_launch_arg = DeclareLaunchArgument(\n    name='hardware_connected',\n    default_value='True',\n    description='Set to true if connected to a physical robot'\n)\n```\n\n이렇게 함께 묶으면 코드가 깔끔하고 명확하게 보이죠. LaunchConfiguration 생성자는 실제로 기본 매개변수를 수용하지만, 사용을 권하지 않습니다. 우리는 LaunchConfiguration에서는 설정된 기본 값을 사용하지 말아야 하며, DeclareLaunchArgument에서만 기본 값을 설정해야 해요. LaunchConfiguration은 런치 파일 내에서 값을 사용하기 위해 런치 인자의 값을 획득하는 데 사용됩니다.\n\n<div class=\"content-ad\"></div>\n\n## 콘솔에 대체값 출력하는 방법\n\n소프트웨어 엔지니어로서, 코드를 디버깅하는 일이 종종 필요합니다. 지금까지 실행 중에 런치 파일에서 중단점을 설정하고 변수 값들을 살펴볼 수 있는 IDE는 없다고 알고 있습니다. 디버깅 방법 중 하나는 콘솔에 일부 정보를 로깅(출력)하는 것입니다.\n\nPython의 print 함수를 사용하면 문자열과 같은 원래 변수를 쉽게 출력할 수 있습니다. 그러나 ROS 2 런치 파일에서 Substitution이라는 특수 유형의 변수를 처리하는 경우가 많습니다. 아래는 ROS 2 공식 문서에서 복사한 정의입니다.\n\nLaunchConfiguration, PathJoinSubstitution 또는 PythonExpression과 같은 종류의 Substitution을 로깅하려면 launch.actions.LogInfo를 사용해야 합니다. rviz2를 위한 런치 파일 예시에서 변수 rviz_config_path의 정확한 값을 알고 싶은 경우를 살펴봅니다:\n\n<div class=\"content-ad\"></div>\n\n```js\nimport launch\nfrom launch.substitutions import PathJoinSubstitution\nfrom launch_ros.substitutions import FindPackageShare\nfrom launch_ros.actions import Node\nfrom launch.actions import LogInfo\n\ndef generate_launch_description():\n    description_package = FindPackageShare('mini_pupper_description')\n\n    rviz_config_path = PathJoinSubstitution(\n        [description_package, 'rviz', 'urdf_viewer.rviz']\n    )\n\n    a = \"Mini Pupper\"\n    b = \"has 4 legs\"\n    sentence = a + \" \" + b\n    print(sentence)\n\n    return launch.LaunchDescription([\n       Node(\n            package=\"rviz2\",\n            namespace=\"\",\n            executable=\"rviz2\",\n            name=\"rviz2\",\n            arguments=[\"-d\", rviz_config_path]\n        ),\n        LogInfo(msg='rviz_config_path is'),\n        LogInfo(msg=rviz_config_path)\n    ])\n```\n\nLogInfo를 사용하면 콘솔 출력이 아래와 같이 됩니다. \"urdf_viewer.rviz\" 파일의 정확한 위치를 명확하게 확인할 수 있습니다. 참고로, 일반적인 Python 문자열 유형인 \"sentence\" 변수는 Python의 print 함수를 사용하여 쉽게 인쇄되었습니다.\n\n```js\ncullensun@ubuntu:~/ros2_ws$ ros2 launch mini_pupper_bringup rviz.launch.py\n[INFO] [launch]: All log files can be found below /home/cullensun/.ros/log/2024-06-18-00-34-07-704969-ubuntu-7389\n[INFO] [launch]: Default logging verbosity is set to INFO\nMini Pupper has 4 legs\n[INFO] [launch.user]: rviz_config_path is\n[INFO] [launch.user]: /home/cullensun/ros2_ws/install/mini_pupper_description/share/mini_pupper_description/rviz/urdf_viewer.rviz\n[INFO] [rviz2-1]: process started with pid [7390]\n```\n\n## 결론\n\n\n<div class=\"content-ad\"></div>\n\n이 기사는 ROS 2 Python 런치 파일 작성의 까다로운 측면 중 일부를 탐색했는데, 특히 DeclareLaunchArgument와 LaunchConfiguration에 초점을 맞추고, 디버깅 목적으로 콘솔에 대체 값을 인쇄하는 방법을 다뤘습니다. 이러한 개념을 이해하는 것은 서로 다른 시나리오에 쉽게 적용할 수 있는 견고하고 유연한 런치 파일을 작성하는 데 중요합니다.\n\nDeclareLaunchArgument와 LaunchConfiguration 쌍을 사용하면 명확하고 조직적인 런치 파일을 보장할 수 있습니다. 또한 launch.actions.LogInfo를 활용하면 대체 값을 콘솔에 인쇄하여 디버깅을 지원하고 런치 파일의 동작을 이해하는 데 도움을 줍니다.\n\nROS 2와 함께하는 여정을 계속하면서, 런치 파일은 로봇 응용 프로그램을 관리하는 강력한 도구임을 기억해주세요. 이러한 기술을 숙달함으로써 더 효율적이고 유지 보수가 용이한 런치 파일을 작성하여 개발 프로세스를 보다 원활하고 즐거운 경험으로 만들 수 있습니다.","ogImage":{"url":"/assets/img/2024-06-19-UnlockingtheSecretsofROS2PythonLaunchFiles_0.png"},"coverImage":"/assets/img/2024-06-19-UnlockingtheSecretsofROS2PythonLaunchFiles_0.png","tag":["Tech"],"readingTime":5},"content":"<!doctype html>\n<html lang=\"en\">\n<head>\n<meta charset=\"utf-8\">\n<meta content=\"width=device-width, initial-scale=1\" name=\"viewport\">\n</head>\n<body>\n<p><img src=\"/assets/img/2024-06-19-UnlockingtheSecretsofROS2PythonLaunchFiles_0.png\" alt=\"2024-06-19-UnlockingtheSecretsofROS2PythonLaunchFiles_0.png\"></p>\n<p>안녕하세요! ROS 2는 로봇 소프트웨어를 간단하게 만들어주는 강력한 프레임워크와 도구입니다. cartographer_ros, navigation2, ros2_control 등 다양한 유용한 패키지들을 통해 로봇 엔지니어들은 로봇을 자율적으로 움직이도록 빠르게 구현할 수 있습니다.</p>\n<p>로봇 소프트웨어를 배우는 초기 단계에서 개발자들은 종종 런치 파일을 작성하는 데 많은 시간을 투자합니다. 이 파일들은 준비된 패키지의 프로세스(Ros 2 노드)를 시작하는 데 사용됩니다. 처음에는 모바일 앱과 같이 로직을 많이 작성하지 않는다는 점이 조금 이상하게 느껴졌습니다. 로봇을 위한 소프트웨어를 작성하는 개념을 이해하는 데 시간이 걸렸죠.</p>\n<p>특히, Python 런치 파일을 작성하는 것은 일반적인 Python 프로그래밍과는 다르기 때문에 조금 까다로울 수 있습니다. 그래서 이 글을 쓰게 되었습니다. 함께 런치 파일에 혼동을 겪고 계신 분들을 위해 몇 가지 팁을 공유하고 싶기 때문이죠.</p>\n<h2>DeclareLaunchArgument 및 LaunchConfiguration</h2>\n<p>TurtleBot3 로봇 런치 파일에서 추출된 DeclareLaunchArgument 및 LaunchConfiguration 예제를 볼 수 있습니다:</p>\n<pre><code class=\"hljs language-js\">use_sim_time = <span class=\"hljs-title class_\">LaunchConfiguration</span>(<span class=\"hljs-string\">'use_sim_time'</span>, <span class=\"hljs-keyword\">default</span>=<span class=\"hljs-string\">'false'</span>)\n…\n<span class=\"hljs-title class_\">DeclareLaunchArgument</span>(\n    <span class=\"hljs-string\">'use_sim_time'</span>,\n    default_value=use_sim_time,\n    description=<span class=\"hljs-string\">'true이면 시뮬레이션 (Gazebo) 시계 사용'</span>\n)\n</code></pre>\n<p>초보자로서, 두 요소 간의 관계를 종종 잊어버리곤 합니다. 또한 LaunchConfiguration과 DeclareLaunchArgument 생성자는 default 또는 default_value 매개변수를 지원하며, 이는 매우 혼란스러울 수 있습니다.</p>\n<p>위 정의는 ROS 2의 공식 문서에서 발췌되었습니다. <strong>굵게 표시한</strong> 단어에 주목해 주시면 단어의 사용법을 이해하는 데 도움이 됩니다.</p>\n<p>여러 번 읽은 후에 그것들은 쌍으로 사용되어야 한다는 것을 깨달았어요. 항상 함께 작성하는 것이 좋은 실천 방법이라고 생각해요. Mini Pupper bringup 런치 파일의 예시에서 보여주는 것처럼요:</p>\n<pre><code class=\"hljs language-js\">use_sim_time = <span class=\"hljs-title class_\">LaunchConfiguration</span>(<span class=\"hljs-string\">'use_sim_time'</span>)\nuse_sim_time_launch_arg = <span class=\"hljs-title class_\">DeclareLaunchArgument</span>(\n    name=<span class=\"hljs-string\">'use_sim_time'</span>,\n    default_value=<span class=\"hljs-string\">'False'</span>,\n    description=<span class=\"hljs-string\">'Use simulation (Gazebo) clock if true'</span>\n)\n\nhardware_connected = <span class=\"hljs-title class_\">LaunchConfiguration</span>(<span class=\"hljs-string\">\"hardware_connected\"</span>)\nhardware_connected_launch_arg = <span class=\"hljs-title class_\">DeclareLaunchArgument</span>(\n    name=<span class=\"hljs-string\">'hardware_connected'</span>,\n    default_value=<span class=\"hljs-string\">'True'</span>,\n    description=<span class=\"hljs-string\">'Set to true if connected to a physical robot'</span>\n)\n</code></pre>\n<p>이렇게 함께 묶으면 코드가 깔끔하고 명확하게 보이죠. LaunchConfiguration 생성자는 실제로 기본 매개변수를 수용하지만, 사용을 권하지 않습니다. 우리는 LaunchConfiguration에서는 설정된 기본 값을 사용하지 말아야 하며, DeclareLaunchArgument에서만 기본 값을 설정해야 해요. LaunchConfiguration은 런치 파일 내에서 값을 사용하기 위해 런치 인자의 값을 획득하는 데 사용됩니다.</p>\n<h2>콘솔에 대체값 출력하는 방법</h2>\n<p>소프트웨어 엔지니어로서, 코드를 디버깅하는 일이 종종 필요합니다. 지금까지 실행 중에 런치 파일에서 중단점을 설정하고 변수 값들을 살펴볼 수 있는 IDE는 없다고 알고 있습니다. 디버깅 방법 중 하나는 콘솔에 일부 정보를 로깅(출력)하는 것입니다.</p>\n<p>Python의 print 함수를 사용하면 문자열과 같은 원래 변수를 쉽게 출력할 수 있습니다. 그러나 ROS 2 런치 파일에서 Substitution이라는 특수 유형의 변수를 처리하는 경우가 많습니다. 아래는 ROS 2 공식 문서에서 복사한 정의입니다.</p>\n<p>LaunchConfiguration, PathJoinSubstitution 또는 PythonExpression과 같은 종류의 Substitution을 로깅하려면 launch.actions.LogInfo를 사용해야 합니다. rviz2를 위한 런치 파일 예시에서 변수 rviz_config_path의 정확한 값을 알고 싶은 경우를 살펴봅니다:</p>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-keyword\">import</span> launch\n<span class=\"hljs-keyword\">from</span> launch.<span class=\"hljs-property\">substitutions</span> <span class=\"hljs-keyword\">import</span> <span class=\"hljs-title class_\">PathJoinSubstitution</span>\n<span class=\"hljs-keyword\">from</span> launch_ros.<span class=\"hljs-property\">substitutions</span> <span class=\"hljs-keyword\">import</span> <span class=\"hljs-title class_\">FindPackageShare</span>\n<span class=\"hljs-keyword\">from</span> launch_ros.<span class=\"hljs-property\">actions</span> <span class=\"hljs-keyword\">import</span> <span class=\"hljs-title class_\">Node</span>\n<span class=\"hljs-keyword\">from</span> launch.<span class=\"hljs-property\">actions</span> <span class=\"hljs-keyword\">import</span> <span class=\"hljs-title class_\">LogInfo</span>\n\ndef <span class=\"hljs-title function_\">generate_launch_description</span>():\n    description_package = <span class=\"hljs-title class_\">FindPackageShare</span>(<span class=\"hljs-string\">'mini_pupper_description'</span>)\n\n    rviz_config_path = <span class=\"hljs-title class_\">PathJoinSubstitution</span>(\n        [description_package, <span class=\"hljs-string\">'rviz'</span>, <span class=\"hljs-string\">'urdf_viewer.rviz'</span>]\n    )\n\n    a = <span class=\"hljs-string\">\"Mini Pupper\"</span>\n    b = <span class=\"hljs-string\">\"has 4 legs\"</span>\n    sentence = a + <span class=\"hljs-string\">\" \"</span> + b\n    <span class=\"hljs-title function_\">print</span>(sentence)\n\n    <span class=\"hljs-keyword\">return</span> launch.<span class=\"hljs-title class_\">LaunchDescription</span>([\n       <span class=\"hljs-title class_\">Node</span>(\n            package=<span class=\"hljs-string\">\"rviz2\"</span>,\n            namespace=<span class=\"hljs-string\">\"\"</span>,\n            executable=<span class=\"hljs-string\">\"rviz2\"</span>,\n            name=<span class=\"hljs-string\">\"rviz2\"</span>,\n            <span class=\"hljs-variable language_\">arguments</span>=[<span class=\"hljs-string\">\"-d\"</span>, rviz_config_path]\n        ),\n        <span class=\"hljs-title class_\">LogInfo</span>(msg=<span class=\"hljs-string\">'rviz_config_path is'</span>),\n        <span class=\"hljs-title class_\">LogInfo</span>(msg=rviz_config_path)\n    ])\n</code></pre>\n<p>LogInfo를 사용하면 콘솔 출력이 아래와 같이 됩니다. \"urdf_viewer.rviz\" 파일의 정확한 위치를 명확하게 확인할 수 있습니다. 참고로, 일반적인 Python 문자열 유형인 \"sentence\" 변수는 Python의 print 함수를 사용하여 쉽게 인쇄되었습니다.</p>\n<pre><code class=\"hljs language-js\">cullensun@<span class=\"hljs-attr\">ubuntu</span>:~/ros2_ws$ ros2 launch mini_pupper_bringup rviz.<span class=\"hljs-property\">launch</span>.<span class=\"hljs-property\">py</span>\n[<span class=\"hljs-variable constant_\">INFO</span>] [launch]: <span class=\"hljs-title class_\">All</span> log files can be found below /home/cullensun/.<span class=\"hljs-property\">ros</span>/log/<span class=\"hljs-number\">2024</span>-<span class=\"hljs-number\">06</span>-<span class=\"hljs-number\">18</span>-<span class=\"hljs-number\">00</span>-<span class=\"hljs-number\">34</span>-<span class=\"hljs-number\">07</span>-<span class=\"hljs-number\">704969</span>-ubuntu-<span class=\"hljs-number\">7389</span>\n[<span class=\"hljs-variable constant_\">INFO</span>] [launch]: <span class=\"hljs-title class_\">Default</span> logging verbosity is set to <span class=\"hljs-variable constant_\">INFO</span>\n<span class=\"hljs-title class_\">Mini</span> <span class=\"hljs-title class_\">Pupper</span> has <span class=\"hljs-number\">4</span> legs\n[<span class=\"hljs-variable constant_\">INFO</span>] [launch.<span class=\"hljs-property\">user</span>]: rviz_config_path is\n[<span class=\"hljs-variable constant_\">INFO</span>] [launch.<span class=\"hljs-property\">user</span>]: <span class=\"hljs-regexp\">/home/</span>cullensun/ros2_ws/install/mini_pupper_description/share/mini_pupper_description/rviz/urdf_viewer.<span class=\"hljs-property\">rviz</span>\n[<span class=\"hljs-variable constant_\">INFO</span>] [rviz2-<span class=\"hljs-number\">1</span>]: process started <span class=\"hljs-keyword\">with</span> pid [<span class=\"hljs-number\">7390</span>]\n</code></pre>\n<h2>결론</h2>\n<p>이 기사는 ROS 2 Python 런치 파일 작성의 까다로운 측면 중 일부를 탐색했는데, 특히 DeclareLaunchArgument와 LaunchConfiguration에 초점을 맞추고, 디버깅 목적으로 콘솔에 대체 값을 인쇄하는 방법을 다뤘습니다. 이러한 개념을 이해하는 것은 서로 다른 시나리오에 쉽게 적용할 수 있는 견고하고 유연한 런치 파일을 작성하는 데 중요합니다.</p>\n<p>DeclareLaunchArgument와 LaunchConfiguration 쌍을 사용하면 명확하고 조직적인 런치 파일을 보장할 수 있습니다. 또한 launch.actions.LogInfo를 활용하면 대체 값을 콘솔에 인쇄하여 디버깅을 지원하고 런치 파일의 동작을 이해하는 데 도움을 줍니다.</p>\n<p>ROS 2와 함께하는 여정을 계속하면서, 런치 파일은 로봇 응용 프로그램을 관리하는 강력한 도구임을 기억해주세요. 이러한 기술을 숙달함으로써 더 효율적이고 유지 보수가 용이한 런치 파일을 작성하여 개발 프로세스를 보다 원활하고 즐거운 경험으로 만들 수 있습니다.</p>\n</body>\n</html>\n"},"__N_SSG":true}