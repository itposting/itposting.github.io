{"pageProps":{"post":{"title":"ESP32를 Google의 Firebase와 연결하기","description":"","date":"2024-06-19 05:32","slug":"2024-06-19-ConnectESP32WithGooglesFirebase","content":"\n\n## 이 기사에서📜는 ESP32를 Google Firebase에 가장 빠르게⚡ 연결하는 방법을 보여드리겠습니다. 기대되시나요? 🤩\n\n# ➡️ 하드웨어 요구 사항:\n\nESP32 개발 보드, LED💡, 브레드보드,\n\n습도 센서 (DHT11)⛅\n\n<div class=\"content-ad\"></div>\n\n# ➡️ Firebase에서 백엔드 설정:\n\n우리는 백엔드로 Google의 Firebase를 사용할 것입니다. 시작하려면 Firebase로 이동해서 Google 계정으로 로그인하세요.\n\n새 프로젝트를 만들려면 프로젝트 추가 옵션을 선택하세요. 프로젝트 이름을 입력하라는 요청이 표시됩니다. 적절한 이름을 입력한 후 계속 버튼을 눌러주세요.\n\n![이미지](/assets/img/2024-06-19-ConnectESP32WithGooglesFirebase_0.png)\n\n<div class=\"content-ad\"></div>\n\n해당 프로젝트에 대해 \"Google Analytics 사용\" 옵션을 비활성화하세요. 이 프로젝트에는 필요하지 않습니다.\n\n마지막으로, '프로젝트 생성'을 선택하세요.\n\n![이미지](/assets/img/2024-06-19-ConnectESP32WithGooglesFirebase_1.png)\n\nFirebase가 프로젝트 설정을 시작합니다. 설정이 완료되면 '계속'을 선택하고, Firebase 콘솔의 프로젝트 개요 페이지로 이동하게 됩니다.\n\n<div class=\"content-ad\"></div>\n\n\n<img src=\"/assets/img/2024-06-19-ConnectESP32WithGooglesFirebase_2.png\" />\n\n# ➡️Authentication Setup :\n\n우리가 먼저 해야 할 일은 프로젝트의 인증 옵션을 설정하는 것입니다. 왼쪽 상단의 인증 메뉴 옵션을 선택하면 인증 페이지로 이동됩니다. 시작하기 버튼을 선택하세요.\n\n<img src=\"/assets/img/2024-06-19-ConnectESP32WithGooglesFirebase_3.png\" />\n\n\n<div class=\"content-ad\"></div>\n\n<img src=\"/assets/img/2024-06-19-ConnectESP32WithGooglesFirebase_4.png\" />\n\n<img src=\"/assets/img/2024-06-19-ConnectESP32WithGooglesFirebase_5.png\" />\n\n우리는 ESP32 장치를 위해 익명 로그인을 사용하여 시작할 것이며, 후에 자세한 튜토리얼에서 더 스마트한 로그인 방법을 고안할 것입니다. 상단 사진과 같이 익명 로그인을 활성화하고 저장 옵션을 선택하십시오.\n\n# ➡️실시간 데이터베이스 설정:\n\n<div class=\"content-ad\"></div>\n\n다음으로는 모든 센서 데이터를 보유할 데이터베이스를 만들어야 합니다. 이를 위해 왼쪽 상단의 실시간 데이터베이스 메뉴 옵션을 선택하면 실시간 데이터베이스 페이지로 이동됩니다. 데이터베이스 생성 메뉴를 초기화하려면 데이터베이스 만들기 버튼을 선택하세요.\n\n![이미지](/assets/img/2024-06-19-ConnectESP32WithGooglesFirebase_6.png)\n\n![이미지](/assets/img/2024-06-19-ConnectESP32WithGooglesFirebase_7.png)\n\n데이터베이스 생성 메뉴에서 가장 가까운 위치를 선택하고 다음을 선택하세요. 데이터베이스를 잠긴 모드 또는 테스트 모드로 초기화할 수 있는 옵션이 표시됩니다. 일단 테스트 모드를 선택하세요. 주요 차이점은 테스트 모드에서는 30일 동안 데이터베이스에 대한 무단 액세스를 허용하는 데이터베이스 액세스 규칙이 적용된다는 것입니다. 프로젝트를 본격적으로 운용할 계획이라면 향후에 이 기능을 비활성화해야 합니다. 활성화 버튼을 선택하세요.\n\n<div class=\"content-ad\"></div>\n\n\n![image](/assets/img/2024-06-19-ConnectESP32WithGooglesFirebase_8.png)\n\nRule을 클릭하고 아래 그림에 표시된 대로 코드를 변경하세요.\n\n그리고 Publish 버튼을 누르세요.\n\n![image](/assets/img/2024-06-19-ConnectESP32WithGooglesFirebase_9.png)\n\n\n<div class=\"content-ad\"></div>\n\n# ➡️ C 언어로 Arduino IDE 설정 및 코드 설명:\n\n우리가 해야 할 첫 번째 작업은 ESP32 개발 환경을 설정하는 것입니다. 이를 위해 Arduino IDE를 사용합니다. 이미 설치하지 않았다면 여기서 다운로드하고 설치해 주세요. 그리고 제대로 설정해 주세요.\n\n마지막으로, 우리가 프로젝트에서 사용할 모비즈트 라이브러리를 추가해야 합니다. 홈페이지에서 라이브러리 페이지로 이동하여 FirebaseESP32 라이브러리를 검색합니다.\n\n우리가 해야 할 첫 번째 작업은 응용 프로그램에서 필요한 모든 라이브러리를 가져오는 것입니다. Arduino 라이브러리는 기본적으로 이미 설치되어 있어야 합니다.\n\n<div class=\"content-ad\"></div>\n\n```js\n#include <Arduino.h>\n#include <WiFi.h>\n#include <FirebaseESP32.h>\n```\n\n다음으로 FirebaseESP32 라이브러리에서 사용되는 몇 가지 도우미 라이브러리를 추가해야 합니다. TokenHelper 라이브러리는 토큰 생성 프로세스를 관리하는 데 사용되며, RTDBHelper 라이브러리는 Firebase Realtime Database에서 오는 데이터를 인쇄하는 도우미 함수를 제공합니다.\n\n```js\n//토큰 생성 프로세스 정보 제공.\n#include \"addons/TokenHelper.h\"\n//RTDB 페이로드 인쇄 정보 및 기타 도우미 함수 제공.\n#include \"addons/RTDBHelper.h\"\n```\n\n다음으로 Wi-Fi 자격 증명을 캡처해야 합니다. WIFI_AP를 Wi-Fi 식별자로, WIFI_PASSWORD를 Wi-Fi 암호로 대체하세요.\n\n\n<div class=\"content-ad\"></div>\n\n참고: 임베디드 애플리케이션에 패스워드 정보를 하드코딩하는 것은 좋지 않은 아이디어입니다. 실제 제품 케이스의 경우 안전한 장치 등록 프로세스를 포함한 장치 프로비저닝 전략을 적용해야 합니다.\n\n```js\n#define WIFI_SSID \"WIFI_AP\"\n#define WIFI_PASSWORD \"WIFI_PASSWORD\"\n```\n\n다음으로 API 키를 저장할 상수를 추가해야 합니다. Firebase 프로젝트 API 키는 프로젝트 설정 페이지에서 가져올 수 있습니다. API_KEY를 본인의 API 키로 바꿔주세요. 또한 Firebase 실시간 데이터베이스 URL을 포함하려면 URL을 자신의 것으로 바꿔주세요.\n\n![이미지](/assets/img/2024-06-19-ConnectESP32WithGooglesFirebase_10.png)\n\n<div class=\"content-ad\"></div>\n\n<img src=\"/assets/img/2024-06-19-ConnectESP32WithGooglesFirebase_11.png\" />\n\n```js\n// Firebase 프로젝트 웹 API 키\n#define API_KEY \"API_KEY\"\n// Firebase 실시간 데이터베이스 URL\n#define DATABASE_URL \"Database_url\"\n```\n\n이제 FirebaseESP32 라이브러리에서 가져온 3개의 객체를 초기화합니다. 이 객체들은 애플리케이션을 Firebase와 연결하는 데 중요합니다.\n\n```js\nFirebaseData fbdo,fbdo_s1,fbdo_s2;\nFirebaseAuth auth;\nFirebaseConfig config;\n```\n\n<div class=\"content-ad\"></div>\n\n다음으로 유용한 몇 가지 전역 변수를 정의합니다.\n\n```js\nbool signUpOK=false;\nunsigned long sendDataPrevMillis = 0;\nbool ledStatus=false;\nfloat temp=0;\nfloat humidity=0;\n#define LED_PIN 22 // for led pin \n\n#include <DHT.h>  // for humidity sensor\nDHT dht(26,DHT11);\n```\n\n이제 setup() 함수에 다음 코드를 복사하여 붙여넣으세요:\n\n```js\nvoid setup() {\n  \n  Serial.begin(115200);\n  dht.begin();\n  pinMode(LED_PIN,OUTPUT);\n  WiFi.begin(WIFI_SSID,WIFI_PASSWORD);\n  Serial.print(\"Wi-Fi에 연결 중\");\n\n  while(WiFi.status()!= WL_CONNECTED){\n    Serial.print(\".\");\n    delay(300);\n  }\n\n  Serial.println();\n  Serial.print(\"IP 주소로 연결됨: \");\n  Serial.println(WiFi.localIP());\n  Serial.println();\n config.api_key=API_KEY;\n config.database_url=DATABASE_URL;\n\n if(Firebase.signUp(&config,&auth, \"\", \"\")){\n     Serial.println(\"가입 성공\");\n     signUpOK=true;\n }\n\nconfig.token_status_callback=tokenStatusCallback;\n\nFirebase.begin(&config,&auth);\nFirebase.reconnectWiFi(true);\n\nif(!Firebase.RTDB.beginStream(&fbdo_s1,\"/LED/digital\")){\n\n  Serial.println(\"실패: \"+fbdo_s1.errorReason());\n}\n \n}\n```\n\n<div class=\"content-ad\"></div>\n\nvoid loop() 함수 안에 아래 코드를 복사하여 붙여넣기 해주세요:\n\n```js\nvoid loop() {\n\n// DHT 센서\n    if(Firebase.ready() && signUpOK && (millis()-sendDataPrevMillis>5000 || sendDataPrevMillis == 0)){\n      sendDataPrevMillis =millis();\n  float temp = dht.readTemperature();\n  float humidity = dht.readHumidity();\n\n  if(Firebase.RTDB.setFloat(&fbdo,\"Sensor/temp_data\",temp)){\n   Serial.println();\n   Serial.print(temp);\n   Serial.println(\"-\"+fbdo.dataPath()+\"에 성공적으로 저장되었습니다.\");\n   Serial.println(\"(\"+fbdo.dataType()+\")\");\n    }\n\n    else{\n      Serial.println(\"실패 : \"+fbdo.errorReason());\n    }\n  \n    if(Firebase.RTDB.setFloat(&fbdo,\"Sensor/humidity_data\",humidity)){\n   Serial.println();\n   Serial.print(humidity);\n   Serial.println(\"-\"+fbdo.dataPath()+\"에 성공적으로 저장되었습니다.\");\n   Serial.println(\"(\"+fbdo.dataType()+\")\");\n    }\n\n    else {\n      Serial.println(\"실패 : \"+fbdo.errorReason());\n    }\n    }\n// LED를 위한 스팀 빌더    \n\nif(Firebase.ready() && signUpOK){\n\n    \n  if(!Firebase.RTDB.readStream(&fbdo_s1)){\n \n    Serial.println(\"실패 : \"+fbdo_s1.errorReason());\n  }\n     \n     if(fbdo_s1.streamAvailable()){\n     if(fbdo_s1.dataType()== \"boolean\"){\n    ledStatus=fbdo_s1.boolData();\nSerial.println(\"성공적으로 읽어왔습니다: \"+fbdo_s1.dataPath()+ \" - (\"+fbdo_s1.dataType()+\")\");\n      if(ledStatus==true){\n      digitalWrite(LED_PIN,HIGH);  \n      }\n      else{\n        digitalWrite(LED_PIN,LOW);\n      }\n\n      }\n      else{\n      Serial.println(\"실패 : \"+fbdo_s1.errorReason());\n    }\n    }\n\n    } \n\n}\n```\n\n이제 회로를 코드와 지시 사항대로 브레드보드에 연결하고,\n\nESP32에 코드를 업로드하세요.\n\n<div class=\"content-ad\"></div>\n\n# ➡️ 다음 부분:\n\n플러터 앱을 Firebase와 어떻게 연결할까요? 🙋‍♂️ 다음 글에서 설명하겠습니다.\n\n의문이 있으면 언제든지 물어보세요. 🆘","ogImage":{"url":"/assets/img/2024-06-19-ConnectESP32WithGooglesFirebase_0.png"},"coverImage":"/assets/img/2024-06-19-ConnectESP32WithGooglesFirebase_0.png","tag":["Tech"],"readingTime":7},"content":"<!doctype html>\n<html lang=\"en\">\n<head>\n<meta charset=\"utf-8\">\n<meta content=\"width=device-width, initial-scale=1\" name=\"viewport\">\n</head>\n<body>\n<h2>이 기사에서📜는 ESP32를 Google Firebase에 가장 빠르게⚡ 연결하는 방법을 보여드리겠습니다. 기대되시나요? 🤩</h2>\n<h1>➡️ 하드웨어 요구 사항:</h1>\n<p>ESP32 개발 보드, LED💡, 브레드보드,</p>\n<p>습도 센서 (DHT11)⛅</p>\n<div class=\"content-ad\"></div>\n<h1>➡️ Firebase에서 백엔드 설정:</h1>\n<p>우리는 백엔드로 Google의 Firebase를 사용할 것입니다. 시작하려면 Firebase로 이동해서 Google 계정으로 로그인하세요.</p>\n<p>새 프로젝트를 만들려면 프로젝트 추가 옵션을 선택하세요. 프로젝트 이름을 입력하라는 요청이 표시됩니다. 적절한 이름을 입력한 후 계속 버튼을 눌러주세요.</p>\n<p><img src=\"/assets/img/2024-06-19-ConnectESP32WithGooglesFirebase_0.png\" alt=\"이미지\"></p>\n<div class=\"content-ad\"></div>\n<p>해당 프로젝트에 대해 \"Google Analytics 사용\" 옵션을 비활성화하세요. 이 프로젝트에는 필요하지 않습니다.</p>\n<p>마지막으로, '프로젝트 생성'을 선택하세요.</p>\n<p><img src=\"/assets/img/2024-06-19-ConnectESP32WithGooglesFirebase_1.png\" alt=\"이미지\"></p>\n<p>Firebase가 프로젝트 설정을 시작합니다. 설정이 완료되면 '계속'을 선택하고, Firebase 콘솔의 프로젝트 개요 페이지로 이동하게 됩니다.</p>\n<div class=\"content-ad\"></div>\n<img src=\"/assets/img/2024-06-19-ConnectESP32WithGooglesFirebase_2.png\">\n<h1>➡️Authentication Setup :</h1>\n<p>우리가 먼저 해야 할 일은 프로젝트의 인증 옵션을 설정하는 것입니다. 왼쪽 상단의 인증 메뉴 옵션을 선택하면 인증 페이지로 이동됩니다. 시작하기 버튼을 선택하세요.</p>\n<img src=\"/assets/img/2024-06-19-ConnectESP32WithGooglesFirebase_3.png\">\n<div class=\"content-ad\"></div>\n<img src=\"/assets/img/2024-06-19-ConnectESP32WithGooglesFirebase_4.png\">\n<img src=\"/assets/img/2024-06-19-ConnectESP32WithGooglesFirebase_5.png\">\n<p>우리는 ESP32 장치를 위해 익명 로그인을 사용하여 시작할 것이며, 후에 자세한 튜토리얼에서 더 스마트한 로그인 방법을 고안할 것입니다. 상단 사진과 같이 익명 로그인을 활성화하고 저장 옵션을 선택하십시오.</p>\n<h1>➡️실시간 데이터베이스 설정:</h1>\n<div class=\"content-ad\"></div>\n<p>다음으로는 모든 센서 데이터를 보유할 데이터베이스를 만들어야 합니다. 이를 위해 왼쪽 상단의 실시간 데이터베이스 메뉴 옵션을 선택하면 실시간 데이터베이스 페이지로 이동됩니다. 데이터베이스 생성 메뉴를 초기화하려면 데이터베이스 만들기 버튼을 선택하세요.</p>\n<p><img src=\"/assets/img/2024-06-19-ConnectESP32WithGooglesFirebase_6.png\" alt=\"이미지\"></p>\n<p><img src=\"/assets/img/2024-06-19-ConnectESP32WithGooglesFirebase_7.png\" alt=\"이미지\"></p>\n<p>데이터베이스 생성 메뉴에서 가장 가까운 위치를 선택하고 다음을 선택하세요. 데이터베이스를 잠긴 모드 또는 테스트 모드로 초기화할 수 있는 옵션이 표시됩니다. 일단 테스트 모드를 선택하세요. 주요 차이점은 테스트 모드에서는 30일 동안 데이터베이스에 대한 무단 액세스를 허용하는 데이터베이스 액세스 규칙이 적용된다는 것입니다. 프로젝트를 본격적으로 운용할 계획이라면 향후에 이 기능을 비활성화해야 합니다. 활성화 버튼을 선택하세요.</p>\n<div class=\"content-ad\"></div>\n<p><img src=\"/assets/img/2024-06-19-ConnectESP32WithGooglesFirebase_8.png\" alt=\"image\"></p>\n<p>Rule을 클릭하고 아래 그림에 표시된 대로 코드를 변경하세요.</p>\n<p>그리고 Publish 버튼을 누르세요.</p>\n<p><img src=\"/assets/img/2024-06-19-ConnectESP32WithGooglesFirebase_9.png\" alt=\"image\"></p>\n<div class=\"content-ad\"></div>\n<h1>➡️ C 언어로 Arduino IDE 설정 및 코드 설명:</h1>\n<p>우리가 해야 할 첫 번째 작업은 ESP32 개발 환경을 설정하는 것입니다. 이를 위해 Arduino IDE를 사용합니다. 이미 설치하지 않았다면 여기서 다운로드하고 설치해 주세요. 그리고 제대로 설정해 주세요.</p>\n<p>마지막으로, 우리가 프로젝트에서 사용할 모비즈트 라이브러리를 추가해야 합니다. 홈페이지에서 라이브러리 페이지로 이동하여 FirebaseESP32 라이브러리를 검색합니다.</p>\n<p>우리가 해야 할 첫 번째 작업은 응용 프로그램에서 필요한 모든 라이브러리를 가져오는 것입니다. Arduino 라이브러리는 기본적으로 이미 설치되어 있어야 합니다.</p>\n<div class=\"content-ad\"></div>\n<pre><code class=\"hljs language-js\">#include &#x3C;<span class=\"hljs-title class_\">Arduino</span>.<span class=\"hljs-property\">h</span>>\n#include &#x3C;<span class=\"hljs-title class_\">WiFi</span>.<span class=\"hljs-property\">h</span>>\n#include &#x3C;<span class=\"hljs-title class_\">FirebaseESP32</span>.<span class=\"hljs-property\">h</span>>\n</code></pre>\n<p>다음으로 FirebaseESP32 라이브러리에서 사용되는 몇 가지 도우미 라이브러리를 추가해야 합니다. TokenHelper 라이브러리는 토큰 생성 프로세스를 관리하는 데 사용되며, RTDBHelper 라이브러리는 Firebase Realtime Database에서 오는 데이터를 인쇄하는 도우미 함수를 제공합니다.</p>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-comment\">//토큰 생성 프로세스 정보 제공.</span>\n#include <span class=\"hljs-string\">\"addons/TokenHelper.h\"</span>\n<span class=\"hljs-comment\">//RTDB 페이로드 인쇄 정보 및 기타 도우미 함수 제공.</span>\n#include <span class=\"hljs-string\">\"addons/RTDBHelper.h\"</span>\n</code></pre>\n<p>다음으로 Wi-Fi 자격 증명을 캡처해야 합니다. WIFI_AP를 Wi-Fi 식별자로, WIFI_PASSWORD를 Wi-Fi 암호로 대체하세요.</p>\n<div class=\"content-ad\"></div>\n<p>참고: 임베디드 애플리케이션에 패스워드 정보를 하드코딩하는 것은 좋지 않은 아이디어입니다. 실제 제품 케이스의 경우 안전한 장치 등록 프로세스를 포함한 장치 프로비저닝 전략을 적용해야 합니다.</p>\n<pre><code class=\"hljs language-js\">#define <span class=\"hljs-variable constant_\">WIFI_SSID</span> <span class=\"hljs-string\">\"WIFI_AP\"</span>\n#define <span class=\"hljs-variable constant_\">WIFI_PASSWORD</span> <span class=\"hljs-string\">\"WIFI_PASSWORD\"</span>\n</code></pre>\n<p>다음으로 API 키를 저장할 상수를 추가해야 합니다. Firebase 프로젝트 API 키는 프로젝트 설정 페이지에서 가져올 수 있습니다. API_KEY를 본인의 API 키로 바꿔주세요. 또한 Firebase 실시간 데이터베이스 URL을 포함하려면 URL을 자신의 것으로 바꿔주세요.</p>\n<p><img src=\"/assets/img/2024-06-19-ConnectESP32WithGooglesFirebase_10.png\" alt=\"이미지\"></p>\n<div class=\"content-ad\"></div>\n<img src=\"/assets/img/2024-06-19-ConnectESP32WithGooglesFirebase_11.png\">\n<pre><code class=\"hljs language-js\"><span class=\"hljs-comment\">// Firebase 프로젝트 웹 API 키</span>\n#define <span class=\"hljs-variable constant_\">API_KEY</span> <span class=\"hljs-string\">\"API_KEY\"</span>\n<span class=\"hljs-comment\">// Firebase 실시간 데이터베이스 URL</span>\n#define <span class=\"hljs-variable constant_\">DATABASE_URL</span> <span class=\"hljs-string\">\"Database_url\"</span>\n</code></pre>\n<p>이제 FirebaseESP32 라이브러리에서 가져온 3개의 객체를 초기화합니다. 이 객체들은 애플리케이션을 Firebase와 연결하는 데 중요합니다.</p>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-title class_\">FirebaseData</span> fbdo,fbdo_s1,fbdo_s2;\n<span class=\"hljs-title class_\">FirebaseAuth</span> auth;\n<span class=\"hljs-title class_\">FirebaseConfig</span> config;\n</code></pre>\n<div class=\"content-ad\"></div>\n<p>다음으로 유용한 몇 가지 전역 변수를 정의합니다.</p>\n<pre><code class=\"hljs language-js\">bool signUpOK=<span class=\"hljs-literal\">false</span>;\nunsigned long sendDataPrevMillis = <span class=\"hljs-number\">0</span>;\nbool ledStatus=<span class=\"hljs-literal\">false</span>;\nfloat temp=<span class=\"hljs-number\">0</span>;\nfloat humidity=<span class=\"hljs-number\">0</span>;\n#define <span class=\"hljs-variable constant_\">LED_PIN</span> <span class=\"hljs-number\">22</span> <span class=\"hljs-comment\">// for led pin </span>\n\n#include &#x3C;<span class=\"hljs-variable constant_\">DHT</span>.<span class=\"hljs-property\">h</span>>  <span class=\"hljs-comment\">// for humidity sensor</span>\n<span class=\"hljs-variable constant_\">DHT</span> <span class=\"hljs-title function_\">dht</span>(<span class=\"hljs-number\">26</span>,<span class=\"hljs-title class_\">DHT11</span>);\n</code></pre>\n<p>이제 setup() 함수에 다음 코드를 복사하여 붙여넣으세요:</p>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">setup</span>(<span class=\"hljs-params\"></span>) {\n  \n  <span class=\"hljs-title class_\">Serial</span>.<span class=\"hljs-title function_\">begin</span>(<span class=\"hljs-number\">115200</span>);\n  dht.<span class=\"hljs-title function_\">begin</span>();\n  <span class=\"hljs-title function_\">pinMode</span>(<span class=\"hljs-variable constant_\">LED_PIN</span>,<span class=\"hljs-variable constant_\">OUTPUT</span>);\n  <span class=\"hljs-title class_\">WiFi</span>.<span class=\"hljs-title function_\">begin</span>(<span class=\"hljs-variable constant_\">WIFI_SSID</span>,<span class=\"hljs-variable constant_\">WIFI_PASSWORD</span>);\n  <span class=\"hljs-title class_\">Serial</span>.<span class=\"hljs-title function_\">print</span>(<span class=\"hljs-string\">\"Wi-Fi에 연결 중\"</span>);\n\n  <span class=\"hljs-keyword\">while</span>(<span class=\"hljs-title class_\">WiFi</span>.<span class=\"hljs-title function_\">status</span>()!= <span class=\"hljs-variable constant_\">WL_CONNECTED</span>){\n    <span class=\"hljs-title class_\">Serial</span>.<span class=\"hljs-title function_\">print</span>(<span class=\"hljs-string\">\".\"</span>);\n    <span class=\"hljs-title function_\">delay</span>(<span class=\"hljs-number\">300</span>);\n  }\n\n  <span class=\"hljs-title class_\">Serial</span>.<span class=\"hljs-title function_\">println</span>();\n  <span class=\"hljs-title class_\">Serial</span>.<span class=\"hljs-title function_\">print</span>(<span class=\"hljs-string\">\"IP 주소로 연결됨: \"</span>);\n  <span class=\"hljs-title class_\">Serial</span>.<span class=\"hljs-title function_\">println</span>(<span class=\"hljs-title class_\">WiFi</span>.<span class=\"hljs-title function_\">localIP</span>());\n  <span class=\"hljs-title class_\">Serial</span>.<span class=\"hljs-title function_\">println</span>();\n config.<span class=\"hljs-property\">api_key</span>=<span class=\"hljs-variable constant_\">API_KEY</span>;\n config.<span class=\"hljs-property\">database_url</span>=<span class=\"hljs-variable constant_\">DATABASE_URL</span>;\n\n <span class=\"hljs-keyword\">if</span>(<span class=\"hljs-title class_\">Firebase</span>.<span class=\"hljs-title function_\">signUp</span>(&#x26;config,&#x26;auth, <span class=\"hljs-string\">\"\"</span>, <span class=\"hljs-string\">\"\"</span>)){\n     <span class=\"hljs-title class_\">Serial</span>.<span class=\"hljs-title function_\">println</span>(<span class=\"hljs-string\">\"가입 성공\"</span>);\n     signUpOK=<span class=\"hljs-literal\">true</span>;\n }\n\nconfig.<span class=\"hljs-property\">token_status_callback</span>=tokenStatusCallback;\n\n<span class=\"hljs-title class_\">Firebase</span>.<span class=\"hljs-title function_\">begin</span>(&#x26;config,&#x26;auth);\n<span class=\"hljs-title class_\">Firebase</span>.<span class=\"hljs-title function_\">reconnectWiFi</span>(<span class=\"hljs-literal\">true</span>);\n\n<span class=\"hljs-keyword\">if</span>(!<span class=\"hljs-title class_\">Firebase</span>.<span class=\"hljs-property\">RTDB</span>.<span class=\"hljs-title function_\">beginStream</span>(&#x26;fbdo_s1,<span class=\"hljs-string\">\"/LED/digital\"</span>)){\n\n  <span class=\"hljs-title class_\">Serial</span>.<span class=\"hljs-title function_\">println</span>(<span class=\"hljs-string\">\"실패: \"</span>+fbdo_s1.<span class=\"hljs-title function_\">errorReason</span>());\n}\n \n}\n</code></pre>\n<div class=\"content-ad\"></div>\n<p>void loop() 함수 안에 아래 코드를 복사하여 붙여넣기 해주세요:</p>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">loop</span>(<span class=\"hljs-params\"></span>) {\n\n<span class=\"hljs-comment\">// DHT 센서</span>\n    <span class=\"hljs-keyword\">if</span>(<span class=\"hljs-title class_\">Firebase</span>.<span class=\"hljs-title function_\">ready</span>() &#x26;&#x26; signUpOK &#x26;&#x26; (<span class=\"hljs-title function_\">millis</span>()-sendDataPrevMillis><span class=\"hljs-number\">5000</span> || sendDataPrevMillis == <span class=\"hljs-number\">0</span>)){\n      sendDataPrevMillis =<span class=\"hljs-title function_\">millis</span>();\n  float temp = dht.<span class=\"hljs-title function_\">readTemperature</span>();\n  float humidity = dht.<span class=\"hljs-title function_\">readHumidity</span>();\n\n  <span class=\"hljs-keyword\">if</span>(<span class=\"hljs-title class_\">Firebase</span>.<span class=\"hljs-property\">RTDB</span>.<span class=\"hljs-title function_\">setFloat</span>(&#x26;fbdo,<span class=\"hljs-string\">\"Sensor/temp_data\"</span>,temp)){\n   <span class=\"hljs-title class_\">Serial</span>.<span class=\"hljs-title function_\">println</span>();\n   <span class=\"hljs-title class_\">Serial</span>.<span class=\"hljs-title function_\">print</span>(temp);\n   <span class=\"hljs-title class_\">Serial</span>.<span class=\"hljs-title function_\">println</span>(<span class=\"hljs-string\">\"-\"</span>+fbdo.<span class=\"hljs-title function_\">dataPath</span>()+<span class=\"hljs-string\">\"에 성공적으로 저장되었습니다.\"</span>);\n   <span class=\"hljs-title class_\">Serial</span>.<span class=\"hljs-title function_\">println</span>(<span class=\"hljs-string\">\"(\"</span>+fbdo.<span class=\"hljs-title function_\">dataType</span>()+<span class=\"hljs-string\">\")\"</span>);\n    }\n\n    <span class=\"hljs-keyword\">else</span>{\n      <span class=\"hljs-title class_\">Serial</span>.<span class=\"hljs-title function_\">println</span>(<span class=\"hljs-string\">\"실패 : \"</span>+fbdo.<span class=\"hljs-title function_\">errorReason</span>());\n    }\n  \n    <span class=\"hljs-keyword\">if</span>(<span class=\"hljs-title class_\">Firebase</span>.<span class=\"hljs-property\">RTDB</span>.<span class=\"hljs-title function_\">setFloat</span>(&#x26;fbdo,<span class=\"hljs-string\">\"Sensor/humidity_data\"</span>,humidity)){\n   <span class=\"hljs-title class_\">Serial</span>.<span class=\"hljs-title function_\">println</span>();\n   <span class=\"hljs-title class_\">Serial</span>.<span class=\"hljs-title function_\">print</span>(humidity);\n   <span class=\"hljs-title class_\">Serial</span>.<span class=\"hljs-title function_\">println</span>(<span class=\"hljs-string\">\"-\"</span>+fbdo.<span class=\"hljs-title function_\">dataPath</span>()+<span class=\"hljs-string\">\"에 성공적으로 저장되었습니다.\"</span>);\n   <span class=\"hljs-title class_\">Serial</span>.<span class=\"hljs-title function_\">println</span>(<span class=\"hljs-string\">\"(\"</span>+fbdo.<span class=\"hljs-title function_\">dataType</span>()+<span class=\"hljs-string\">\")\"</span>);\n    }\n\n    <span class=\"hljs-keyword\">else</span> {\n      <span class=\"hljs-title class_\">Serial</span>.<span class=\"hljs-title function_\">println</span>(<span class=\"hljs-string\">\"실패 : \"</span>+fbdo.<span class=\"hljs-title function_\">errorReason</span>());\n    }\n    }\n<span class=\"hljs-comment\">// LED를 위한 스팀 빌더    </span>\n\n<span class=\"hljs-keyword\">if</span>(<span class=\"hljs-title class_\">Firebase</span>.<span class=\"hljs-title function_\">ready</span>() &#x26;&#x26; signUpOK){\n\n    \n  <span class=\"hljs-keyword\">if</span>(!<span class=\"hljs-title class_\">Firebase</span>.<span class=\"hljs-property\">RTDB</span>.<span class=\"hljs-title function_\">readStream</span>(&#x26;fbdo_s1)){\n \n    <span class=\"hljs-title class_\">Serial</span>.<span class=\"hljs-title function_\">println</span>(<span class=\"hljs-string\">\"실패 : \"</span>+fbdo_s1.<span class=\"hljs-title function_\">errorReason</span>());\n  }\n     \n     <span class=\"hljs-keyword\">if</span>(fbdo_s1.<span class=\"hljs-title function_\">streamAvailable</span>()){\n     <span class=\"hljs-keyword\">if</span>(fbdo_s1.<span class=\"hljs-title function_\">dataType</span>()== <span class=\"hljs-string\">\"boolean\"</span>){\n    ledStatus=fbdo_s1.<span class=\"hljs-title function_\">boolData</span>();\n<span class=\"hljs-title class_\">Serial</span>.<span class=\"hljs-title function_\">println</span>(<span class=\"hljs-string\">\"성공적으로 읽어왔습니다: \"</span>+fbdo_s1.<span class=\"hljs-title function_\">dataPath</span>()+ <span class=\"hljs-string\">\" - (\"</span>+fbdo_s1.<span class=\"hljs-title function_\">dataType</span>()+<span class=\"hljs-string\">\")\"</span>);\n      <span class=\"hljs-keyword\">if</span>(ledStatus==<span class=\"hljs-literal\">true</span>){\n      <span class=\"hljs-title function_\">digitalWrite</span>(<span class=\"hljs-variable constant_\">LED_PIN</span>,<span class=\"hljs-variable constant_\">HIGH</span>);  \n      }\n      <span class=\"hljs-keyword\">else</span>{\n        <span class=\"hljs-title function_\">digitalWrite</span>(<span class=\"hljs-variable constant_\">LED_PIN</span>,<span class=\"hljs-variable constant_\">LOW</span>);\n      }\n\n      }\n      <span class=\"hljs-keyword\">else</span>{\n      <span class=\"hljs-title class_\">Serial</span>.<span class=\"hljs-title function_\">println</span>(<span class=\"hljs-string\">\"실패 : \"</span>+fbdo_s1.<span class=\"hljs-title function_\">errorReason</span>());\n    }\n    }\n\n    } \n\n}\n</code></pre>\n<p>이제 회로를 코드와 지시 사항대로 브레드보드에 연결하고,</p>\n<p>ESP32에 코드를 업로드하세요.</p>\n<div class=\"content-ad\"></div>\n<h1>➡️ 다음 부분:</h1>\n<p>플러터 앱을 Firebase와 어떻게 연결할까요? 🙋‍♂️ 다음 글에서 설명하겠습니다.</p>\n<p>의문이 있으면 언제든지 물어보세요. 🆘</p>\n</body>\n</html>\n"},"__N_SSG":true}