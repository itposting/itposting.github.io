{"pageProps":{"post":{"title":"라즈베리 파이 파일 및 미디어 서버 구축하기 홈 콘텐츠 공유를 위한 DIY 가이드","description":"","date":"2024-06-20 17:33","slug":"2024-06-20-BuildingaRaspberryPiFileandMediaServerADIYGuideforSeamlessHomeContentSharing","content":"\n\n집 컴퓨터에 흩뿌려진 동영상과 사진들의 바다 속에서, 가족 간 콘텐츠 공유와 접근이 조금 꼬였죠. Windows, Linux, macOS, Android, 심지어 우리 TV와 호환되는 파일 및 미디어 서버 역할을 할 수 있는 중앙 허브가 필요했습니다.\n\n처음에는 상용 NAS 솔루션을 눈여겨 봤지만, 가격이 부담스러워 금방 포기했어요. 그래서 Raspberry Pi 4와 오래된 외장 하드 드라이브를 활용해 나만의 파일 및 미디어 서버를 만들기로 결심했습니다.\n\n가장 어려웠던 부분은 외장 하드 드라이브를 Windows, Raspberry Pi 그리고 때로는 macOS에 매끄럽게 연결할 수 있는 것이었죠. 제가 선택한 exFAT 파일 시스템으로 하드 드라이브를 포맷하고 하나의 깔끔한 파티션을 이용할 준비를 마쳤습니다.\n\n이후, OpenMediaVault를 우연히 발견했는데 처음에는 유망해 보였습니다. 알고 보니 exFAT과 잘 어우러지지 않았어요. 시간이 지날수록 오류를 다루고, 포맷을 하고, RaspberryOS를 다시 설치하는 등의 번거로움에 좌절했죠. 연결 문제의 연속 끝에, OpenMediaVault를 포기하고 파일 공유에는 SMB를, 미디어는 MiniDLNA를 활용해 직접 설정하기로 결심했습니다.\n\n<div class=\"content-ad\"></div>\n\n리눅스 터미널에 익숙해지긴 했지만, 좀 더 사용자 친화적인 것을 찾고 있었어요. 그래서 Cockpit 프로젝트를 발견하게 되었죠. \"파일 공유\"로 Samba와 NFS를 관리하는 편리한 애드온과, 세련된 파일 관리자인 \"Navigator\", 그리고 웹 기반 터미널 에뮬레이터까지 함께 사용하니 정말 편리했어요. 이제 Cockpit과 MiniDLNA로 만든 솔루션이 원활하게 작동하며, 라즈베리 파이가 가족들을 위한 콘텐츠 허브로 변모했어요.\n\n결국, exFAT을 사용해 불복종적인 라즈베리 파이 4가 가족들이 파일과 미디어를 찾는 곳이 되었고, Cockpit을 통해 깔끔하게 관리되는 모습이었어요. 하나의 개인 서버 이야기 — 만들고, 다듬고, 받아들이는 과정이에요.\n\n처음에는 최신 라즈베리 파이 OS인 Bookworm 데스크톱 버전을 획득하려 했어요. 그러나 소프트웨어 호환성 문제에 직면하여, \"Bullseye\" 릴리스 서버 이미지가 요구사항을 충족하는 더 실용적인 선택이라는 결론에 도달했어요.\n\n내 솔루션은 다음과 같은 하드웨어와 소프트웨어를 사용해요.\n\n<div class=\"content-ad\"></div>\n\n- Raspberry Pi 4 Model B Rev 1.4, 쿼드 코어 CPU, 8GB RAM\n- 라즈베리 파이 OS Lite Legacy (Bullseye, Server)가 설치된 32GB SD 카드\n- 라즈베리 파이 전용 전원 어댑터\n- exFAT 파일 시스템이 적용된 외장 USB 하드 디스크\n- 라즈베리 파이 USB 포트에 직접 연결 시 전원이 부족하여 작동하지 않아서 필요한 파워드 USB 3.0 허브\n- 라즈베리 파이에 SSH로 연결하기 위한 PuTTY 소프트웨어\n\n라즈베리 파이 설정 및 exFAT로 하드 디스크를 포맷하는 과정은 수많은 자원에서 자세히 설명되어 있어서 이 기사에서는 해당 부분에 대해 다루지 않습니다.\n\n# 라즈베리 파이 설정 시작\n\n![라즈베리 파이 설정](/assets/img/2024-06-20-BuildingaRaspberryPiFileandMediaServerADIYGuideforSeamlessHomeContentSharing_0.png)\n\n<div class=\"content-ad\"></div>\n\n모든 연결이 안전하게 완료되었는지 확인하고 라즈베리 파이를 켭니다. 최적의 안정성을 위해 WiFi보다는 유선 LAN 연결을 선택하는 것이 좋습니다. 왜냐하면 WiFi 연결은 추가적인 문제 해결 단계를 요구하는 구성에서 도전이 될 수 있습니다. 라즈베리 파이가 가동된 후에는 SSH 연결을 설정하기 위해 해당 IP 주소를 찾아야 합니다. 집 라우터에 액세스할 수 있다면, 라우터의 DHCP 클라이언트 목록에서 손쉽게 라즈베리 파이의 IP 주소를 찾을 수 있습니다.\n\n또는 모니터와 키보드를 라즈베리 파이에 직접 연결하여 SSH를 필요로하지 않게 할 수도 있습니다. 그러나 설정을 실행하는 컴퓨터에서 SSH를 활용하거나 PuTTY와 같은 도구를 사용하면 더욱 간편한 접근 방법이 제공됩니다. 이 방법은 편리할 뿐만 아니라 온라인 소스에서 명령을 복사하고 붙여넣는 프로세스를 간소화하여 설정 경험을 더욱 효율적으로 만들어줍니다.\n\n라즈베리 파이에 SSH를 사용하여 IP 주소 또는 호스트 이름(제 경우에는 \"rpi-home\") 및 SD 카드 준비 시 설정한 사용자 ID(제 경우에는 \"admin\")로 접속합니다. 문서의 나머지 부분은 이 사용자 ID 및 호스트 이름을 전제로 합니다. 사용자 ID 및 호스트 이름에 따라 바꿔주시기 바랍니다.\n\n# 라즈베리 파이 OS 업데이트\n\n<div class=\"content-ad\"></div>\n\n먼저 확인해야 할 사항으로 운영 체제가 완전히 최신 상태인지 확인하는 것이 중요합니다.\n\n```js\nsudo apt-get update\nsudo apt-get upgrade\n```\n\n# exFAT 지원 추가\n\nexFAT는 Microsoft에서 플래시 메모리용으로 개발한 파일 시스템입니다. 이는 프로프리어터리 파일 시스템으로 Linux의 공식적인 부분이 아닙니다. FUSE를 통해 exFAT 포맷을 사용할 수 있습니다.\n\n<div class=\"content-ad\"></div>\n\n아래 명령어를 사용하여 FUSE를 설치하세요.\n\n```js\nsudo apt-get install exfat-fuse\nsudo apt-get install exfat-utils\n```\n\n# 외장 하드 디스크 마운트\n\n하드 디스크가 RPi에 전원 USB 허브를 통해 연결되었는지 확인하고 RPi의 USB 3 포트에 연결되었는지 확인하세요.\n\n<div class=\"content-ad\"></div>\n\n첫 번째 단계는 하드 디스크가 감지되었는지 확인하는 것입니다. 다음 명령어는 연결된 모든 디스크를 나열합니다.\n\n```js\nlsblk\n```\n\n저는 USB 하드 디스크 하나만 가지고 있으며 \"sda\"로 나타납니다. 이 디스크에는 하나의 파티션이 있고 \"sda1\"로 나타납니다.\n\n이 디스크를 어떤 폴더에 장착하여 디스크에 액세스할 수 있게 합니다. 폴더를 생성하고 소유권을 현재 사용자 \"admin\"에게 변경해줍시다.\n\n<div class=\"content-ad\"></div>\n\n```bash\nsudo mkdir /media/exthdd\nsudo chown -R admin:admin /media/exthdd\n```\n\n첫째로 파일 시스템을 수동으로 마운트하여 모든 것이 잘 작동하는지 확인하십시오.\n\n```bash\nsudo mount -t exfat /dev/sda1 /media/exthdd\n```\n\n모든 것이 잘 되면 다음 명령어를 사용하여 디스크의 내용을 볼 수 있어야 합니다:\n\n<div class=\"content-ad\"></div>\n\n```js\nls /media/exthdd\n```\n\n라즈베리 파이 부팅 시 이 디스크를 자동으로 마운트하도록 구성할 것입니다. 먼저 디스크를 언마운트하세요.\n\n```js\nsudo umount /media/exthdd\n```\n\n구성에 필요한 UUID를 알아내야 합니다. 아래 명령어를 실행해주세요.\n\n<div class=\"content-ad\"></div>\n\n```js\nsudo blkid\n```\n\n이 명령어를 실행하면 다음과 같은 출력이 표시됩니다.\n\n```js\n/dev/sda1: LABEL=\"Data\" UUID=\"0AC8-A364\" BLOCK_SIZE=\"512\" TYPE=\"exfat\" PARTLABEL=\"Basic data partition\" PARTUUID=\"6ad9b0ee-2ecc-4b70–99b5-dce69e214493\"\n```\n\n다음 단계를 위해 UUID인 “0AC8-A364”가 필요합니다. /etc/fstab 파일을 수정하고 마운트를 구성하십시오.\n\n<div class=\"content-ad\"></div>\n\n```js\nsudo vi /etc/fstab\n```\n\n이 파일의 끝에 다음 줄을 추가하고 저장하세요. 디스크 UUID를 사용해야 합니다.\n\n```js\nUUID=0AC8-A364 /media/exthdd exfat rw,user,dmask=0000,fmask=0000,nosuid,nodev,nofail 0 0\n```\n\n이번에는 fstab을 사용하여 다시 마운트해 보세요.\n\n<div class=\"content-ad\"></div>\n\n```js\nsudo mount -a\n```\n\n다시 한 번 디스크에 접근할 수 있는지 확인해 봅시다. 또한 테스트 파일을 생성하고 삭제하여 디스크에 쓰기 작업이 가능한지도 확인해 봅시다.\n\n```js\nls /media/exthdd\ntouch /media/exthdd/test.txt\nrm -f /media/exthdd/test.txt\n```\n\n모든 작업이 잘 되었다면, 재부팅 후에도 디스크가 마운트되어 접근 가능한 것입니다.\n\n<div class=\"content-ad\"></div>\n\n# Samba 설정\n\n이제 네트워크를 통해 폴더를 공유할 수 있는 Samba 서버를 설정해보겠습니다. 이 설정을 통해 이 서버의 폴더를 읽기/쓰기 권한으로 공유할 수 있게 될 거에요.\n\n다음 명령어를 실행하여 Samba를 설치해보세요.\n\n```js\nsudo apt-get install samba samba-common-bin\n```\n\n<div class=\"content-ad\"></div>\n\n우리는 모든 사람들과 함께 전체 폴더 /media/exthdd를 공유할 수 있지만, 공유를 원하지 않는 다른 데이터를 저장할 수 있도록 별도의 공유 폴더를 유지하는 것이 좋습니다. \"media-library\"라는 이름의 공유 폴더를 만들어봅시다.\n\n```bash\nmkdir /media/exthdd/media-library\n```\n\n이 공유 폴더에 특정 사용자들에게 액세스 권한을 부여해야 합니다. 이 사용자들은 리눅스 사용자여야 합니다. 가족 구성원마다 쓰기 액세스 권한이 있는 사용자를 만들고, 읽기 전용 액세스 권한만 있는 \"guest\" 사용자를 만들 수 있습니다. 우선, 가족 구성원 모두가 사용할 수 있는 쓰기 액세스 권한이 있는 \"family\"라는 공통 사용자를 만들고 이 사용자에게 비밀번호를 설정해봅시다.\n\n```bash\nsudo adduser family\nsudo passwd family\n```\n\n<div class=\"content-ad\"></div>\n\n사용자 \"admin\"과 \"family\"에 Samba 액세스 권한을 부여할 것입니다. 이 명령어들은 Samba 액세스용 별도의 비밀번호를 입력하도록 요청할 것입니다.\n\n```js\nsudo smbpasswd -a admin\nsudo smbpasswd -a family\n```\n\n우리는 Samba 서비스에게 이 폴더를 네트워크 상에서 노출해야 한다고 알려줘야 합니다. Samba 구성을 업데이트해야 합니다. 구성 파일을 편집해봅시다.\n\n```js\nsudo vi /etc/samba/smb.conf\n```\n\n<div class=\"content-ad\"></div>\n\n아래는 현재 파일에 추가할 섹션입니다. 파일을 저장해주세요.\n\n```js\n[media-library]\npath = /media/exthdd/media-library\nvalid users = admin family\nwriteable=Yes\ncreate mask=0777\ndirectory mask=0777\npublic=no\n```\n\n본 폴더는 \"valid users\" 목록의 사용자에게 접근 가능합니다. 곧 \"family\"라는 새 사용자를 추가할 예정입니다. 폴더는 쓰기 가능하며, 모든 로그인한 사용자에게 권한이 부여됩니다(777). 하지만 공개 접속은 \"no\"입니다.\n\n서비스를 재시작해주세요.\n\n<div class=\"content-ad\"></div>\n\n```js\nsudo systemctl restart smbd\n```\n\n이제 Windows 파일 탐색기에서 \\\\rpi-home\\media-library 폴더에 액세스할 수 있습니다. 이 폴더를 탐색기 또는 명령 프롬프트를 사용하여 다음 명령으로 드라이브에 매핑할 수 있습니다.\n\n```js\nnet use Z: \"\\\\rpi-home\\media-library /user:<username> <password>\n```\n\nmacOS에서는 “smb:\\\\rpi-home\\media-library” URL을 사용하여 Finder에서 서버에 연결할 수 있습니다.\n\n\n<div class=\"content-ad\"></div>\n\n# 미디어 서버 설정하기\n\n미디어 서버를 설정하기 위해 miniDLNA를 사용할 것입니다. 먼저 miniDLNA를 설치하세요.\n\n```js\nsudo apt-get install minidlna\n```\n\n미디어 서버의 이름을 설정하고 폴더를 노출시키기 위해 miniDLNA를 구성해야 합니다. 구성 파일을 편집해주세요.\n\n<div class=\"content-ad\"></div>\n\n```js\nsudo vi /etc/minidlna.conf\n```\n\n이 파일에서 서버의 friendly name을 찾아 수정하세요. 파일 내에 media_dir로 시작하는 줄을 찾아서 아래와 같이 추가하세요.\n\n```js\nfriendly_name=rpi-mediaserver\n\nmedia_dir=A,/media/exthdd/media-library/music\nmedia_dir=P,/media/exthdd/media-library/photos\nmedia_dir=V,/media/exthdd/media-library/videos\n```\n\n이 예시에서는 데이터를 이러한 방식으로 구조화했기 때문에 음악, 사진 및 비디오를 위한 별도 폴더를 추가했습니다. A, P 및 V는 해당 폴더를 각각 오디오, 이미지 및 비디오로 노출할 것을 미디어 서버에 전달하는 파일 유형입니다.\n\n<div class=\"content-ad\"></div>\n\n서비스를 다시 시작해 주세요.\n\n```js\nsudo systemctl restart minidlna\n```\n\n만약 TV가 DLNA에 연결할 수 있고 동일한 네트워크에 연결되어 있다면 \"rpi-mediaserver\"가 TV에 표시됩니다. Windows Media Player도 이 서버를 볼 수 있고 파일을 재생할 수 있습니다.\n\n<img src=\"/assets/img/2024-06-20-BuildingaRaspberryPiFileandMediaServerADIYGuideforSeamlessHomeContentSharing_1.png\" />\n\n<div class=\"content-ad\"></div>\n\n이 단계들로 충분히 시작할 수 있지만, 모든 설정 및 유지 관리는 터미널과 ssh를 통해 진행해야 합니다. 그러나 cockpit을 사용하면 웹 UI를 통해 모든 작업을 관리할 수 있는 도구들이 있습니다.\n\n# Cockpit 설정하기\n\nCockpit은 리눅스 서버를 관리하기 위해 설계된 사용자 친화적인 웹 기반 인터페이스입니다. 시스템 관리자를 위한 중앙 통합형 대시보드를 제공하여 실시간 모니터링, 설정, 문제 해결 기능을 제공합니다. 깔끔하고 직관적인 인터페이스로, Cockpit은 사용자 관리, 소프트웨어 업데이트, 네트워크 구성 등과 같은 작업을 간편하게 처리합니다. 모듈식 디자인으로 다양한 플러그인을 지원하며, Linux 배포판 간 서버 관리를 위한 다양한 기능을 지원하는 다목적 도구로 만들어졌습니다.\n\n우선 cockpit을 설치하고 다음 명령어로 정상 작동하는지 확인해봅시다.\n\n<div class=\"content-ad\"></div>\n\n```js\nsudo apt install cockpit\nsystemctl status cockpit.socket\n```\n\n이제 http://rpi-home:9090에서 cockpit에 액세스할 수 있습니다. 셀프 사인된 인증서 때문에 나타나는 보안 경고를 무시해주세요. 로그인할 때는 Linux 사용자로 cockpit에 로그인해야 합니다. \"admin\"으로 로그인해보세요.\n\n추가 보너스로, 다양한 서비스를 관리할 수 있는 많은 cockpit 응용 프로그램 (애드인)이 있습니다. 실제로 cockpit (파일 공유 애드인)에서 Samba(및 NFS)를 관리하고 파일 시스템 (Navigator 애드인)도 관리할 수 있습니다. 이러한 애드인들은 라즈베리파이 OS 저장소에서 직접적으로 사용할 수 없습니다. 먼저 저장소를 설정하고 그 후 설치해야 합니다. 다음 명령어로 이 모든 것을 할 수 있습니다.\n\n```js\ncurl -sSL https://repo.45drives.com/setup -o setup-repo.sh\nsudo bash setup-repo.sh\nsudo apt install cockpit-navigator\nsudo apt install cockpit-file-sharing\n```\n\n<div class=\"content-ad\"></div>\n\nCockpit 콘솔의 파일 공유 메뉴에서 기존의 samba.conf 파일을 가져와서 Samba를 Cockpit에서 관리할 수 있습니다.\n\n이제 Cockpit 콘솔에서 웹 기반 SSH 터미널을 사용할 수 있습니다.\n\n공유와 스트리밍을 즐기세요!","ogImage":{"url":"/assets/img/2024-06-20-BuildingaRaspberryPiFileandMediaServerADIYGuideforSeamlessHomeContentSharing_0.png"},"coverImage":"/assets/img/2024-06-20-BuildingaRaspberryPiFileandMediaServerADIYGuideforSeamlessHomeContentSharing_0.png","tag":["Tech"],"readingTime":9},"content":"<!doctype html>\n<html lang=\"en\">\n<head>\n<meta charset=\"utf-8\">\n<meta content=\"width=device-width, initial-scale=1\" name=\"viewport\">\n</head>\n<body>\n<p>집 컴퓨터에 흩뿌려진 동영상과 사진들의 바다 속에서, 가족 간 콘텐츠 공유와 접근이 조금 꼬였죠. Windows, Linux, macOS, Android, 심지어 우리 TV와 호환되는 파일 및 미디어 서버 역할을 할 수 있는 중앙 허브가 필요했습니다.</p>\n<p>처음에는 상용 NAS 솔루션을 눈여겨 봤지만, 가격이 부담스러워 금방 포기했어요. 그래서 Raspberry Pi 4와 오래된 외장 하드 드라이브를 활용해 나만의 파일 및 미디어 서버를 만들기로 결심했습니다.</p>\n<p>가장 어려웠던 부분은 외장 하드 드라이브를 Windows, Raspberry Pi 그리고 때로는 macOS에 매끄럽게 연결할 수 있는 것이었죠. 제가 선택한 exFAT 파일 시스템으로 하드 드라이브를 포맷하고 하나의 깔끔한 파티션을 이용할 준비를 마쳤습니다.</p>\n<p>이후, OpenMediaVault를 우연히 발견했는데 처음에는 유망해 보였습니다. 알고 보니 exFAT과 잘 어우러지지 않았어요. 시간이 지날수록 오류를 다루고, 포맷을 하고, RaspberryOS를 다시 설치하는 등의 번거로움에 좌절했죠. 연결 문제의 연속 끝에, OpenMediaVault를 포기하고 파일 공유에는 SMB를, 미디어는 MiniDLNA를 활용해 직접 설정하기로 결심했습니다.</p>\n<div class=\"content-ad\"></div>\n<p>리눅스 터미널에 익숙해지긴 했지만, 좀 더 사용자 친화적인 것을 찾고 있었어요. 그래서 Cockpit 프로젝트를 발견하게 되었죠. \"파일 공유\"로 Samba와 NFS를 관리하는 편리한 애드온과, 세련된 파일 관리자인 \"Navigator\", 그리고 웹 기반 터미널 에뮬레이터까지 함께 사용하니 정말 편리했어요. 이제 Cockpit과 MiniDLNA로 만든 솔루션이 원활하게 작동하며, 라즈베리 파이가 가족들을 위한 콘텐츠 허브로 변모했어요.</p>\n<p>결국, exFAT을 사용해 불복종적인 라즈베리 파이 4가 가족들이 파일과 미디어를 찾는 곳이 되었고, Cockpit을 통해 깔끔하게 관리되는 모습이었어요. 하나의 개인 서버 이야기 — 만들고, 다듬고, 받아들이는 과정이에요.</p>\n<p>처음에는 최신 라즈베리 파이 OS인 Bookworm 데스크톱 버전을 획득하려 했어요. 그러나 소프트웨어 호환성 문제에 직면하여, \"Bullseye\" 릴리스 서버 이미지가 요구사항을 충족하는 더 실용적인 선택이라는 결론에 도달했어요.</p>\n<p>내 솔루션은 다음과 같은 하드웨어와 소프트웨어를 사용해요.</p>\n<div class=\"content-ad\"></div>\n<ul>\n<li>Raspberry Pi 4 Model B Rev 1.4, 쿼드 코어 CPU, 8GB RAM</li>\n<li>라즈베리 파이 OS Lite Legacy (Bullseye, Server)가 설치된 32GB SD 카드</li>\n<li>라즈베리 파이 전용 전원 어댑터</li>\n<li>exFAT 파일 시스템이 적용된 외장 USB 하드 디스크</li>\n<li>라즈베리 파이 USB 포트에 직접 연결 시 전원이 부족하여 작동하지 않아서 필요한 파워드 USB 3.0 허브</li>\n<li>라즈베리 파이에 SSH로 연결하기 위한 PuTTY 소프트웨어</li>\n</ul>\n<p>라즈베리 파이 설정 및 exFAT로 하드 디스크를 포맷하는 과정은 수많은 자원에서 자세히 설명되어 있어서 이 기사에서는 해당 부분에 대해 다루지 않습니다.</p>\n<h1>라즈베리 파이 설정 시작</h1>\n<p><img src=\"/assets/img/2024-06-20-BuildingaRaspberryPiFileandMediaServerADIYGuideforSeamlessHomeContentSharing_0.png\" alt=\"라즈베리 파이 설정\"></p>\n<div class=\"content-ad\"></div>\n<p>모든 연결이 안전하게 완료되었는지 확인하고 라즈베리 파이를 켭니다. 최적의 안정성을 위해 WiFi보다는 유선 LAN 연결을 선택하는 것이 좋습니다. 왜냐하면 WiFi 연결은 추가적인 문제 해결 단계를 요구하는 구성에서 도전이 될 수 있습니다. 라즈베리 파이가 가동된 후에는 SSH 연결을 설정하기 위해 해당 IP 주소를 찾아야 합니다. 집 라우터에 액세스할 수 있다면, 라우터의 DHCP 클라이언트 목록에서 손쉽게 라즈베리 파이의 IP 주소를 찾을 수 있습니다.</p>\n<p>또는 모니터와 키보드를 라즈베리 파이에 직접 연결하여 SSH를 필요로하지 않게 할 수도 있습니다. 그러나 설정을 실행하는 컴퓨터에서 SSH를 활용하거나 PuTTY와 같은 도구를 사용하면 더욱 간편한 접근 방법이 제공됩니다. 이 방법은 편리할 뿐만 아니라 온라인 소스에서 명령을 복사하고 붙여넣는 프로세스를 간소화하여 설정 경험을 더욱 효율적으로 만들어줍니다.</p>\n<p>라즈베리 파이에 SSH를 사용하여 IP 주소 또는 호스트 이름(제 경우에는 \"rpi-home\") 및 SD 카드 준비 시 설정한 사용자 ID(제 경우에는 \"admin\")로 접속합니다. 문서의 나머지 부분은 이 사용자 ID 및 호스트 이름을 전제로 합니다. 사용자 ID 및 호스트 이름에 따라 바꿔주시기 바랍니다.</p>\n<h1>라즈베리 파이 OS 업데이트</h1>\n<div class=\"content-ad\"></div>\n<p>먼저 확인해야 할 사항으로 운영 체제가 완전히 최신 상태인지 확인하는 것이 중요합니다.</p>\n<pre><code class=\"hljs language-js\">sudo apt-get update\nsudo apt-get upgrade\n</code></pre>\n<h1>exFAT 지원 추가</h1>\n<p>exFAT는 Microsoft에서 플래시 메모리용으로 개발한 파일 시스템입니다. 이는 프로프리어터리 파일 시스템으로 Linux의 공식적인 부분이 아닙니다. FUSE를 통해 exFAT 포맷을 사용할 수 있습니다.</p>\n<div class=\"content-ad\"></div>\n<p>아래 명령어를 사용하여 FUSE를 설치하세요.</p>\n<pre><code class=\"hljs language-js\">sudo apt-get install exfat-fuse\nsudo apt-get install exfat-utils\n</code></pre>\n<h1>외장 하드 디스크 마운트</h1>\n<p>하드 디스크가 RPi에 전원 USB 허브를 통해 연결되었는지 확인하고 RPi의 USB 3 포트에 연결되었는지 확인하세요.</p>\n<div class=\"content-ad\"></div>\n<p>첫 번째 단계는 하드 디스크가 감지되었는지 확인하는 것입니다. 다음 명령어는 연결된 모든 디스크를 나열합니다.</p>\n<pre><code class=\"hljs language-js\">lsblk\n</code></pre>\n<p>저는 USB 하드 디스크 하나만 가지고 있으며 \"sda\"로 나타납니다. 이 디스크에는 하나의 파티션이 있고 \"sda1\"로 나타납니다.</p>\n<p>이 디스크를 어떤 폴더에 장착하여 디스크에 액세스할 수 있게 합니다. 폴더를 생성하고 소유권을 현재 사용자 \"admin\"에게 변경해줍시다.</p>\n<div class=\"content-ad\"></div>\n<pre><code class=\"hljs language-bash\">sudo <span class=\"hljs-built_in\">mkdir</span> /media/exthdd\nsudo <span class=\"hljs-built_in\">chown</span> -R admin:admin /media/exthdd\n</code></pre>\n<p>첫째로 파일 시스템을 수동으로 마운트하여 모든 것이 잘 작동하는지 확인하십시오.</p>\n<pre><code class=\"hljs language-bash\">sudo mount -t exfat /dev/sda1 /media/exthdd\n</code></pre>\n<p>모든 것이 잘 되면 다음 명령어를 사용하여 디스크의 내용을 볼 수 있어야 합니다:</p>\n<div class=\"content-ad\"></div>\n<pre><code class=\"hljs language-js\">ls /media/exthdd\n</code></pre>\n<p>라즈베리 파이 부팅 시 이 디스크를 자동으로 마운트하도록 구성할 것입니다. 먼저 디스크를 언마운트하세요.</p>\n<pre><code class=\"hljs language-js\">sudo umount /media/exthdd\n</code></pre>\n<p>구성에 필요한 UUID를 알아내야 합니다. 아래 명령어를 실행해주세요.</p>\n<div class=\"content-ad\"></div>\n<pre><code class=\"hljs language-js\">sudo blkid\n</code></pre>\n<p>이 명령어를 실행하면 다음과 같은 출력이 표시됩니다.</p>\n<pre><code class=\"hljs language-js\">/dev/<span class=\"hljs-attr\">sda1</span>: <span class=\"hljs-variable constant_\">LABEL</span>=<span class=\"hljs-string\">\"Data\"</span> <span class=\"hljs-variable constant_\">UUID</span>=<span class=\"hljs-string\">\"0AC8-A364\"</span> <span class=\"hljs-variable constant_\">BLOCK_SIZE</span>=<span class=\"hljs-string\">\"512\"</span> <span class=\"hljs-variable constant_\">TYPE</span>=<span class=\"hljs-string\">\"exfat\"</span> <span class=\"hljs-variable constant_\">PARTLABEL</span>=<span class=\"hljs-string\">\"Basic data partition\"</span> <span class=\"hljs-variable constant_\">PARTUUID</span>=<span class=\"hljs-string\">\"6ad9b0ee-2ecc-4b70–99b5-dce69e214493\"</span>\n</code></pre>\n<p>다음 단계를 위해 UUID인 “0AC8-A364”가 필요합니다. /etc/fstab 파일을 수정하고 마운트를 구성하십시오.</p>\n<div class=\"content-ad\"></div>\n<pre><code class=\"hljs language-js\">sudo vi /etc/fstab\n</code></pre>\n<p>이 파일의 끝에 다음 줄을 추가하고 저장하세요. 디스크 UUID를 사용해야 합니다.</p>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-variable constant_\">UUID</span>=0AC8-<span class=\"hljs-variable constant_\">A364</span> /media/exthdd exfat rw,user,dmask=<span class=\"hljs-number\">0000</span>,fmask=<span class=\"hljs-number\">0000</span>,nosuid,nodev,nofail <span class=\"hljs-number\">0</span> <span class=\"hljs-number\">0</span>\n</code></pre>\n<p>이번에는 fstab을 사용하여 다시 마운트해 보세요.</p>\n<div class=\"content-ad\"></div>\n<pre><code class=\"hljs language-js\">sudo mount -a\n</code></pre>\n<p>다시 한 번 디스크에 접근할 수 있는지 확인해 봅시다. 또한 테스트 파일을 생성하고 삭제하여 디스크에 쓰기 작업이 가능한지도 확인해 봅시다.</p>\n<pre><code class=\"hljs language-js\">ls /media/exthdd\ntouch /media/exthdd/test.<span class=\"hljs-property\">txt</span>\nrm -f /media/exthdd/test.<span class=\"hljs-property\">txt</span>\n</code></pre>\n<p>모든 작업이 잘 되었다면, 재부팅 후에도 디스크가 마운트되어 접근 가능한 것입니다.</p>\n<div class=\"content-ad\"></div>\n<h1>Samba 설정</h1>\n<p>이제 네트워크를 통해 폴더를 공유할 수 있는 Samba 서버를 설정해보겠습니다. 이 설정을 통해 이 서버의 폴더를 읽기/쓰기 권한으로 공유할 수 있게 될 거에요.</p>\n<p>다음 명령어를 실행하여 Samba를 설치해보세요.</p>\n<pre><code class=\"hljs language-js\">sudo apt-get install samba samba-common-bin\n</code></pre>\n<div class=\"content-ad\"></div>\n<p>우리는 모든 사람들과 함께 전체 폴더 /media/exthdd를 공유할 수 있지만, 공유를 원하지 않는 다른 데이터를 저장할 수 있도록 별도의 공유 폴더를 유지하는 것이 좋습니다. \"media-library\"라는 이름의 공유 폴더를 만들어봅시다.</p>\n<pre><code class=\"hljs language-bash\"><span class=\"hljs-built_in\">mkdir</span> /media/exthdd/media-library\n</code></pre>\n<p>이 공유 폴더에 특정 사용자들에게 액세스 권한을 부여해야 합니다. 이 사용자들은 리눅스 사용자여야 합니다. 가족 구성원마다 쓰기 액세스 권한이 있는 사용자를 만들고, 읽기 전용 액세스 권한만 있는 \"guest\" 사용자를 만들 수 있습니다. 우선, 가족 구성원 모두가 사용할 수 있는 쓰기 액세스 권한이 있는 \"family\"라는 공통 사용자를 만들고 이 사용자에게 비밀번호를 설정해봅시다.</p>\n<pre><code class=\"hljs language-bash\">sudo adduser family\nsudo passwd family\n</code></pre>\n<div class=\"content-ad\"></div>\n<p>사용자 \"admin\"과 \"family\"에 Samba 액세스 권한을 부여할 것입니다. 이 명령어들은 Samba 액세스용 별도의 비밀번호를 입력하도록 요청할 것입니다.</p>\n<pre><code class=\"hljs language-js\">sudo smbpasswd -a admin\nsudo smbpasswd -a family\n</code></pre>\n<p>우리는 Samba 서비스에게 이 폴더를 네트워크 상에서 노출해야 한다고 알려줘야 합니다. Samba 구성을 업데이트해야 합니다. 구성 파일을 편집해봅시다.</p>\n<pre><code class=\"hljs language-js\">sudo vi /etc/samba/smb.<span class=\"hljs-property\">conf</span>\n</code></pre>\n<div class=\"content-ad\"></div>\n<p>아래는 현재 파일에 추가할 섹션입니다. 파일을 저장해주세요.</p>\n<pre><code class=\"hljs language-js\">[media-library]\npath = <span class=\"hljs-regexp\">/media/</span>exthdd/media-library\nvalid users = admin family\nwriteable=<span class=\"hljs-title class_\">Yes</span>\ncreate mask=<span class=\"hljs-number\">0777</span>\ndirectory mask=<span class=\"hljs-number\">0777</span>\npublic=no\n</code></pre>\n<p>본 폴더는 \"valid users\" 목록의 사용자에게 접근 가능합니다. 곧 \"family\"라는 새 사용자를 추가할 예정입니다. 폴더는 쓰기 가능하며, 모든 로그인한 사용자에게 권한이 부여됩니다(777). 하지만 공개 접속은 \"no\"입니다.</p>\n<p>서비스를 재시작해주세요.</p>\n<div class=\"content-ad\"></div>\n<pre><code class=\"hljs language-js\">sudo systemctl restart smbd\n</code></pre>\n<p>이제 Windows 파일 탐색기에서 \\rpi-home\\media-library 폴더에 액세스할 수 있습니다. 이 폴더를 탐색기 또는 명령 프롬프트를 사용하여 다음 명령으로 드라이브에 매핑할 수 있습니다.</p>\n<pre><code class=\"hljs language-js\">net use <span class=\"hljs-attr\">Z</span>: <span class=\"hljs-string\">\"\\\\rpi-home\\media-library /user:&#x3C;username> &#x3C;password>\n</span></code></pre>\n<p>macOS에서는 “smb:\\rpi-home\\media-library” URL을 사용하여 Finder에서 서버에 연결할 수 있습니다.</p>\n<div class=\"content-ad\"></div>\n<h1>미디어 서버 설정하기</h1>\n<p>미디어 서버를 설정하기 위해 miniDLNA를 사용할 것입니다. 먼저 miniDLNA를 설치하세요.</p>\n<pre><code class=\"hljs language-js\">sudo apt-get install minidlna\n</code></pre>\n<p>미디어 서버의 이름을 설정하고 폴더를 노출시키기 위해 miniDLNA를 구성해야 합니다. 구성 파일을 편집해주세요.</p>\n<div class=\"content-ad\"></div>\n<pre><code class=\"hljs language-js\">sudo vi /etc/minidlna.<span class=\"hljs-property\">conf</span>\n</code></pre>\n<p>이 파일에서 서버의 friendly name을 찾아 수정하세요. 파일 내에 media_dir로 시작하는 줄을 찾아서 아래와 같이 추가하세요.</p>\n<pre><code class=\"hljs language-js\">friendly_name=rpi-mediaserver\n\nmedia_dir=A,<span class=\"hljs-regexp\">/media/</span>exthdd/media-library/music\nmedia_dir=P,<span class=\"hljs-regexp\">/media/</span>exthdd/media-library/photos\nmedia_dir=V,<span class=\"hljs-regexp\">/media/</span>exthdd/media-library/videos\n</code></pre>\n<p>이 예시에서는 데이터를 이러한 방식으로 구조화했기 때문에 음악, 사진 및 비디오를 위한 별도 폴더를 추가했습니다. A, P 및 V는 해당 폴더를 각각 오디오, 이미지 및 비디오로 노출할 것을 미디어 서버에 전달하는 파일 유형입니다.</p>\n<div class=\"content-ad\"></div>\n<p>서비스를 다시 시작해 주세요.</p>\n<pre><code class=\"hljs language-js\">sudo systemctl restart minidlna\n</code></pre>\n<p>만약 TV가 DLNA에 연결할 수 있고 동일한 네트워크에 연결되어 있다면 \"rpi-mediaserver\"가 TV에 표시됩니다. Windows Media Player도 이 서버를 볼 수 있고 파일을 재생할 수 있습니다.</p>\n<img src=\"/assets/img/2024-06-20-BuildingaRaspberryPiFileandMediaServerADIYGuideforSeamlessHomeContentSharing_1.png\">\n<div class=\"content-ad\"></div>\n<p>이 단계들로 충분히 시작할 수 있지만, 모든 설정 및 유지 관리는 터미널과 ssh를 통해 진행해야 합니다. 그러나 cockpit을 사용하면 웹 UI를 통해 모든 작업을 관리할 수 있는 도구들이 있습니다.</p>\n<h1>Cockpit 설정하기</h1>\n<p>Cockpit은 리눅스 서버를 관리하기 위해 설계된 사용자 친화적인 웹 기반 인터페이스입니다. 시스템 관리자를 위한 중앙 통합형 대시보드를 제공하여 실시간 모니터링, 설정, 문제 해결 기능을 제공합니다. 깔끔하고 직관적인 인터페이스로, Cockpit은 사용자 관리, 소프트웨어 업데이트, 네트워크 구성 등과 같은 작업을 간편하게 처리합니다. 모듈식 디자인으로 다양한 플러그인을 지원하며, Linux 배포판 간 서버 관리를 위한 다양한 기능을 지원하는 다목적 도구로 만들어졌습니다.</p>\n<p>우선 cockpit을 설치하고 다음 명령어로 정상 작동하는지 확인해봅시다.</p>\n<div class=\"content-ad\"></div>\n<pre><code class=\"hljs language-js\">sudo apt install cockpit\nsystemctl status cockpit.<span class=\"hljs-property\">socket</span>\n</code></pre>\n<p>이제 <a href=\"http://rpi-home:9090%EC%97%90%EC%84%9C\" rel=\"nofollow\" target=\"_blank\">http://rpi-home:9090에서</a> cockpit에 액세스할 수 있습니다. 셀프 사인된 인증서 때문에 나타나는 보안 경고를 무시해주세요. 로그인할 때는 Linux 사용자로 cockpit에 로그인해야 합니다. \"admin\"으로 로그인해보세요.</p>\n<p>추가 보너스로, 다양한 서비스를 관리할 수 있는 많은 cockpit 응용 프로그램 (애드인)이 있습니다. 실제로 cockpit (파일 공유 애드인)에서 Samba(및 NFS)를 관리하고 파일 시스템 (Navigator 애드인)도 관리할 수 있습니다. 이러한 애드인들은 라즈베리파이 OS 저장소에서 직접적으로 사용할 수 없습니다. 먼저 저장소를 설정하고 그 후 설치해야 합니다. 다음 명령어로 이 모든 것을 할 수 있습니다.</p>\n<pre><code class=\"hljs language-js\">curl -sSL <span class=\"hljs-attr\">https</span>:<span class=\"hljs-comment\">//repo.45drives.com/setup -o setup-repo.sh</span>\nsudo bash setup-repo.<span class=\"hljs-property\">sh</span>\nsudo apt install cockpit-navigator\nsudo apt install cockpit-file-sharing\n</code></pre>\n<div class=\"content-ad\"></div>\n<p>Cockpit 콘솔의 파일 공유 메뉴에서 기존의 samba.conf 파일을 가져와서 Samba를 Cockpit에서 관리할 수 있습니다.</p>\n<p>이제 Cockpit 콘솔에서 웹 기반 SSH 터미널을 사용할 수 있습니다.</p>\n<p>공유와 스트리밍을 즐기세요!</p>\n</body>\n</html>\n"},"__N_SSG":true}